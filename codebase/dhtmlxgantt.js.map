{"version":3,"sources":["webpack:///dhtmlxgantt.js","webpack:///webpack/bootstrap f31ce8445f9193f902ac","webpack:///c:/www-recent/gantt/sources/utils/utils.js","webpack:///c:/www-recent/gantt/sources/utils/dom_helpers.js","webpack:///c:/www-recent/gantt/sources/utils/eventable.js","webpack:///c:/www-recent/gantt/sources/core/ui/layout/cell.js","webpack:///c:/www-recent/gantt/sources/utils/extends.js","webpack:///c:/www-recent/gantt/sources/utils/env.js","webpack:///c:/www-recent/gantt/sources/core/ui/layout/layout.js","webpack:///c:/www-recent/gantt/sources/utils/timeout.js","webpack:///c:/www-recent/gantt/sources/core/ui/ui_factory.js","webpack:///c:/www-recent/gantt/sources/core/ui/layout/view_layout.js","webpack:///c:/www-recent/gantt/sources/core/ui/layout/view_cell.js","webpack:///c:/www-recent/gantt/sources/core/ui/layout/resizer_cell.gpl.js","webpack:///c:/www-recent/gantt/sources/core/ui/timeline/scales.js","webpack:///c:/www-recent/gantt/sources/core/ui/configurable.js","webpack:///c:/www-recent/gantt/sources/core/datastore/datastore.js","webpack:///c:/www-recent/gantt/sources/core/datastore/power_array.js","webpack:///c:/www-recent/gantt/sources/core/gantt_data_range.js","webpack:///c:/www-recent/gantt/sources/core/worktime/calendar_arguments_helper.js","webpack:///c:/www-recent/gantt/sources/dhtmlxgantt.js","webpack:///c:/www-recent/gantt/sources/core/gantt.js","webpack:///c:/www-recent/gantt/sources/core/common/import.js","webpack:///c:/www-recent/gantt/sources/core/common/services.js","webpack:///c:/www-recent/gantt/sources/core/common/config.js","webpack:///c:/www-recent/gantt/sources/core/common/ajax.js","webpack:///c:/www-recent/gantt/sources/core/common/date.js","webpack:///c:/www-recent/gantt/sources/core/common/dnd.js","webpack:///c:/www-recent/gantt/sources/core/common/templates.js","webpack:///c:/www-recent/gantt/sources/core/common/state.js","webpack:///c:/www-recent/gantt/sources/core/message.js","webpack:///c:/www-recent/gantt/sources/core/ui/index.js","webpack:///c:/www-recent/gantt/sources/core/ui/mouse.js","webpack:///c:/www-recent/gantt/sources/core/ui/gantt_layers.js","webpack:///c:/www-recent/gantt/sources/core/ui/render/layer_engine.js","webpack:///c:/www-recent/gantt/sources/core/ui/render/render_factory.js","webpack:///c:/www-recent/gantt/sources/core/ui/layout/scrollbar_cell.js","webpack:///c:/www-recent/gantt/sources/core/ui/timeline/timeline.js","webpack:///c:/www-recent/gantt/sources/core/ui/timeline/tasks_canvas_render.gpl.js","webpack:///c:/www-recent/gantt/sources/core/ui/grid/grid.js","webpack:///c:/www-recent/gantt/sources/core/ui/grid/grid_resize.gpl.js","webpack:///c:/www-recent/gantt/sources/core/ui/render/task_bar_render.js","webpack:///c:/www-recent/gantt/sources/core/ui/render/task_bg_render.js","webpack:///c:/www-recent/gantt/sources/core/ui/render/link_render.js","webpack:///c:/www-recent/gantt/sources/core/ui/render/task_grid_line_render.js","webpack:///c:/www-recent/gantt/sources/core/ui/grid/main_grid_initializer.js","webpack:///c:/www-recent/gantt/sources/core/ui/grid/tasks_grid_dnd.js","webpack:///c:/www-recent/gantt/sources/core/ui/timeline/main_timeline_initializer.js","webpack:///c:/www-recent/gantt/sources/core/ui/timeline/tasks_dnd.js","webpack:///c:/www-recent/gantt/sources/core/ui/timeline/links_dnd.js","webpack:///c:/www-recent/gantt/sources/core/ui/main_layout_initializer.js","webpack:///c:/www-recent/gantt/sources/core/data_task_layers.gpl.js","webpack:///c:/www-recent/gantt/sources/core/datastore/datastore_hooks.js","webpack:///c:/www-recent/gantt/sources/core/facades/datastore.js","webpack:///c:/www-recent/gantt/sources/core/facades/datastore_tasks.js","webpack:///c:/www-recent/gantt/sources/core/facades/datastore_links.js","webpack:///c:/www-recent/gantt/sources/core/datastore/treedatastore.js","webpack:///c:/www-recent/gantt/sources/core/datastore/datastore_render.js","webpack:///c:/www-recent/gantt/sources/core/dataprocessor/hooks.js","webpack:///c:/www-recent/gantt/sources/core/dataprocessor/live_update_hooks.js","webpack:///c:/www-recent/gantt/sources/core/dataprocessor/dataprocessor.js","webpack:///c:/www-recent/gantt/sources/core/plugins/index.js","webpack:///c:/www-recent/gantt/sources/core/plugins/autoscroll.js","webpack:///c:/www-recent/gantt/sources/core/plugins/batch_update.js","webpack:///c:/www-recent/gantt/sources/core/plugins/wbs.js","webpack:///c:/www-recent/gantt/sources/core/plugins/jquery_hooks.js","webpack:///c:/www-recent/gantt/sources/core/plugins/dhtmlx_hooks.js","webpack:///c:/www-recent/gantt/sources/core/dynamic_loading.gpl.js","webpack:///c:/www-recent/gantt/sources/core/grid_column_api.gpl.js","webpack:///c:/www-recent/gantt/sources/core/wai_aria.js","webpack:///c:/www-recent/gantt/sources/core/tasks.js","webpack:///c:/www-recent/gantt/sources/core/load.js","webpack:///c:/www-recent/gantt/sources/core/worktime/work_time.js","webpack:///c:/www-recent/gantt/sources/core/worktime/calendar_manager.js","webpack:///c:/www-recent/gantt/sources/core/worktime/strategy/calendar_strategy.js","webpack:///c:/www-recent/gantt/sources/core/worktime/strategy/calendar_workunit_cache.js","webpack:///c:/www-recent/gantt/sources/core/worktime/time_calculator.js","webpack:///c:/www-recent/gantt/sources/core/worktime/strategy/no_work_time.js","webpack:///c:/www-recent/gantt/sources/core/facades/worktime_calendars.js","webpack:///c:/www-recent/gantt/sources/core/data.js","webpack:///c:/www-recent/gantt/sources/core/lightbox.js","webpack:///c:/www-recent/gantt/sources/core/lightbox_optional_time.js","webpack:///c:/www-recent/gantt/sources/core/data_task_types.gpl.js","webpack:///c:/www-recent/gantt/sources/core/cached_functions.js","webpack:///c:/www-recent/gantt/sources/core/skin.js","webpack:///c:/www-recent/gantt/sources/css/skins/skyblue.js","webpack:///c:/www-recent/gantt/sources/css/skins/meadow.js","webpack:///c:/www-recent/gantt/sources/css/skins/terrace.js","webpack:///c:/www-recent/gantt/sources/css/skins/broadway.js","webpack:///c:/www-recent/gantt/sources/css/skins/material.js","webpack:///c:/www-recent/gantt/sources/css/skins/contrast_black.js","webpack:///c:/www-recent/gantt/sources/css/skins/contrast_white.js","webpack:///c:/www-recent/gantt/sources/core/touch.js","webpack:///c:/www-recent/gantt/sources/locale/locale.js","webpack:///c:/www-recent/gantt/sources/core/gantt_core.js","webpack:///c:/www-recent/gantt/sources/core/common/assert.js","webpack:///c:/www-recent/gantt/sources/core/deprecated_warnings.js"],"names":["modules","__webpack_require__","moduleId","installedModules","exports","module","i","l","call","m","c","d","name","getter","o","Object","defineProperty","configurable","enumerable","get","n","__esModule","object","property","prototype","hasOwnProperty","p","s","copy","t","result","Array","Date","Number","String","Boolean","length","apply","mixin","target","source","force","f","defined","obj","uid","seed","valueOf","bind","functor","arguments","event","el","handler","addEventListener","attachEvent","eventRemove","removeEventListener","detachEvent","elementPosition","elem","top","left","right","bottom","getBoundingClientRect","box","body","document","docElem","documentElement","scrollTop","window","pageYOffset","scrollLeft","pageXOffset","clientTop","clientLeft","offsetWidth","offsetHeight","parseInt","offsetTop","offsetLeft","offsetParent","y","Math","round","x","width","height","isVisible","node","display","visibility","getComputedStyle","style","currentStyle","hasNonNegativeTabIndex","isNaN","getAttribute","hasHref","a","area","nodeName","loLowerCase","isEnabled","input","select","textarea","button","toLowerCase","hasAttribute","getFocusableNodes","root","nodes","querySelectorAll","join","nodesArray","slice","splice","getScrollSize","div","createElement","cssText","appendChild","clientWidth","removeChild","getClassName","className","baseVal","indexOf","_trimString","addClassName","removeClassName","split","regEx","RegExp","replace","toNode","getElementById","querySelector","insert","newone","_slave","innerHTML","child","firstChild","remove","parentNode","getChildren","css","ch","childNodes","len","out","push","getTargetNode","e","trg","tagName","srcElement","locateAttribute","attribute","str","trim","this","locateClassName","classname","strict","undefined","ind","charAt","getRelativeEventPosition","ev","pageX","pageY","pos","gantt","env","isIE","clientX","clientY","isChildOf","parent","getNodePosition","insertNode","removeNode","getChildNodes","makeEventable","eventHost","EventHost","catcher","callObj","_eventCatcher","addEvent","attachAll","callback","callEvent","arg0","_silent_mode","handlerName","concat","checkEvent","id","list","removeEvent","detachAllEvents","_connected","_silentStart","_silentEnd","dhx_catch","z","res","zr","utils","eventable","domHelpers","Cell","config","factory","$container","$parent","$config","headerHeight","$gantt","$id","$name","$factory","destructor","$view","cell","scrollTo","clear","getNode","padding","resize","final","$preResize","topCont","topSize","getSize","minWidth","maxWidth","minHeight","maxHeight","setSize","hide","_hide","show","mode","index","cellIndex","moveView","hidden","$toHTML","content","header","raw","html","collapseIcon","canCollapse","$fill","init","self","$services","getService","delegate","toggle","collapsed","size","gravity","getContentSize","$lastSize","contentX","contentY","_getBorderSizes","borders","horizontal","vertical","_currentBorders","_borders","_sizeHeader","_sizeContent","_setBorders","view","cssHash","xLayout","floor","transform","b","__","constructor","create","navigator","userAgent","isIE6","XMLHttpRequest","isIE7","isIE8","isOpera","isChrome","isKHTML","isFF","isIPad","search","isEdge","__extends","Layout","_super","_this","$root","_parseConfig","eachCell","code","$cells","startStage","mainCall","_resizeInProgress","autosize","sub","alert","insertBefore","_xLayout","rows","cells","cols","views","$content","initUI","getCells","render","cellSize","contentWidth","contentHeight","max","_cleanElSize","value","toString","_getBoxStyles","computed","clientHeight","properties","styles","boxSizing","MozBoxSizing","horPaddings","paddingLeft","paddingRight","borderLeftWidth","borderRightWidth","vertPaddings","paddingTop","paddingBottom","borderTopWidth","borderBottomWidth","borderBox","innerWidth","innerHeight","outerWidth","outerHeight","boxSizes","contentSizes","_sizes","min","margin","_calcFreeSpace","side","_free","_gravity","_calcSize","_configureBorders","borderClass","lastVisibleIndex","lastCell","_updateCellVisibility","oldVisibleCells","_visibleCells","firstCall","visibleCells","cellView","marginSide","dx","dy","_updatingScrollbars","toggleVisibility","checkTimeout","host","updPerSecond","timeout","_on_timeout","setTimeout","uiFactory","ui","createView","resizer","creator","configure","createdViews","reset","register","viewConstructor","getView","layout","multiview","viewcell","registerView","createFactory","ViewLayout","$cell","sizes","byMaxSize","otherCell","ViewCell","$initialized","method","unload","_setContentSize","outerX","outerY","childSize","ScaleHelper","dateHelper","date","services","getSum","from","to","summ","setSumWidth","sum_width","scale","parts","oldWidth","diff","adjustSize","full_width","splitSize","count","arr","full","shared","share","sortScales","scales","unit","step","add","sort","primaryScale","initTemplate","templates","scale_unit","template","date_scale","scale_cell_class","prepareConfigs","min_coll_width","container_width","scale_height","minDate","maxDate","heights","configs","main_scale","cfg","initScaleConfig","processIgnores","initColSizes","limitVisibleRange","unshift","alineScaleColumns","setPosSettings","trace_x","_ignore_time_config","skip_off_time","skip","probe","isWorkTime","ignore_x","display_count","min_col_width","line_height","cont_width","column_count","col_width","ignores","days","min_date","max_date","trace_indexes","eachColumn","iterateScales","lower_scale","upper_scale","upper_dates","lower_dates","prev","end","prevUpper","up","target_index","upper_start","upper_end","lower_start","lower_end","targetWidth","start","curr","tzOffset","getTimezoneOffset","_correct_dst_change","dates","last","lastDate","outDate","$getConfig","own","global","powerArray","DataStore","pull","$initItem","initItem","visibleOrder","$create","fullOrder","_skip_refresh","_filterRule","_searchVisibleOrder","_parseInner","data","item","loaded","parse","refresh","getItem","_updateOrder","updateItem","_removeItemInner","$remove","removeItem","filter","_addItemInner","exists","silent","order","data_size","$insertAt","$find","getVisibleItems","getIndexRange","addItem","_changeIdInner","oldId","newId","changeId","_moveInner","sindex","tindex","getIdByIndex","$removeAt","move","clearAll","master","countVisible","serialize","eachItem","rule","filteredOrder","Infinity","ret","getItems","getIndexById","gerFirst","getLast","getNext","getPrev","$powerArray","array","$each","$map","$filter","dateRangeResolver","getSubtaskDates","defaultRangeResolver","start_date","end_date","resolveConfigRange","range","start_interval","_scale_range_unit","scale_offset_minimal","helper","subscales","_init_tasks_range","calculateEndDate","duration","_min_date","_max_date","_adjust_scales","fit_tasks","old_min","old_max","calendarArgumentsHelper","getWorkHoursArguments","setWorkTimeArguments","unsetWorkTimeArguments","isWorkTimeArguments","duration_unit","task","calendar","getClosestWorkTimeArguments","dir","getDurationConfig","_getStartEndConfig","param","argumentType","duration_step","getDurationArguments","hasDurationArguments","calculateEndDateArguments","version","keys","edit_save","edit_cancel","$inject","ajax","dnd","setService","locale","templatesLoader","StateService","stateService","registerProvider","selected_task","_selected_task","getState","uiApi","$ui","layers","$mouseEvents","mouseEvents","layersApi","layersService","scrollX","scrollY","scroll","links","finish_to_start","start_to_start","finish_to_finish","start_to_finish","types","project","milestone","work_time","correct_work_time","cascade_delete","autosize_min_width","autoscroll","autoscroll_speed","show_links","show_task_cells","static_background","branch_loading","show_loading","show_chart","show_grid","min_duration","xml_date","api_date","start_on_monday","server_utc","show_progress","select_task","scroll_on_click","preserve_scroll","readonly","date_grid","drag_links","drag_progress","drag_resize","drag_move","drag_mode","progress","ignore","round_dnd_dates","link_wrapper_width","root_id","autofit","columns","tree","align","inherit_scale_class","time_step","task_date","time_picker","task_attribute","link_attribute","layer_attribute","buttons_left","_migrate_buttons","dhx_save_btn","dhx_cancel_btn","dhx_delete_btn","buttons_right","lightbox","sections","map_to","type","focus","project_sections","milestone_sections","single_date","drag_lightbox","details_on_create","details_on_dblclick","initial_scroll","task_scroll_offset","order_branch","order_branch_free","task_height","min_column_width","min_grid_column_width","grid_resizer_column_attribute","grid_resizer_attribute","keep_grid_width","grid_resize","show_unscheduled","readonly_property","editable_property","calendar_property","resource_calendars","type_renderers","open_tree_initially","optimize_render","prevent_default_scroll","show_errors","wai_aria_attributes","smart_scales","cache","DOMParser","parseFromString","ActiveXObject","async","loadXML","xmltop","tagname","xhr","status","xml","responseXML","responseText","getElementsByTagName","xpath","xpathExp","docObj","selectNodes","first","col","ownerDocument","evaluate","XPathResult","ANY_TYPE","iterateNext","query","_call","url","headers","onLoad","getSync","put","postData","del","post","postSync","getLong","postLong","longParams","isQt","match","onreadystatechange","readyState","xmlDoc","filePath","getTime","open","key","setRequestHeader","toUpperCase","send","urlSeparator","month_short","month_short_hash","month_full","month_full_hash","date_part","old","setHours","hour_start","getHours","getDate","getMonth","getFullYear","setTime","time_part","week_start","shift","getDay","month_start","setDate","quarter_start","res_month","setMonth","year_start","day_start","getMinutes","setMinutes","minute_start","getSeconds","setSeconds","getMilliseconds","setMilliseconds","_add_days","inc","ndate","setYear","add_quarter","to_fixed","num","date_to_str","format","utc","dateToStr","Function","getISOWeek","str_to_date","splt","mask","strToDate","dateString","nday","first_thursday","year_number","ordinal_date","getUTCISOWeek","convert_to_utc","getUTCFullYear","getUTCMonth","getUTCDate","getUTCHours","getUTCMinutes","getUTCSeconds","parseDate","DnD","_obj","_settings","inputMethods","getInputMethods","_drag_start_timer","clearDragTimer","down","original_target","touch","dragStart","touch_drag","traceDragEvents","domElement","inputMethod","mousemove","dragMove","accessor","limited_mousemove","dragScroll","preventDefault","cancelBubble","updates_per_second","mouseup","dragEnd","checkPositionChange","diff_x","diff_y","sqrt","pow","abs","sensitivity","initDnDMarker","marker","backupEventTarget","domEvent","getEvent","cloneNode","backup_element","touchEventsSupported","createEvent","touches","elementFromPoint","pointerEnabled","pointerType","msPointerEnabled","MSPOINTER_TYPE_MOUSE","clearTimeout","started","getPosition","_prevent_touch_scroll","_touch_feedback","initial","template_name","regTemplates","initTemplates","labels","gantt_save_btn","icon_save","gantt_cancel_btn","icon_cancel","gantt_delete_btn","icon_delete","xml_format","progress_text","grid_header_class","column","task_text","text","task_class","grid_row_class","task_row_class","task_cell_class","scale_row_class","grid_indent","grid_folder","$open","grid_file","grid_open","grid_blank","isUnscheduledTask","task_unscheduled_time","grid_date_format","task_time","link_class","link","link_description","getTask","drag_link","from_start","to_start","link_start","link_end","drag_link_class","isLinkAllowed","tooltip_date_format","tooltip_text","stateProviders","provider","unregisterProvider","usercall","modalBox","_dhx_msg_cfg","modal_key","which","keyCode","messageBox","keyboard","click","modality","cover","onkeydown","scrollHeight","_waiAria","messageButtonAttrString","info","position","message","onclick","messageInfoAttr","expire","timers","getFirstDefined","values","_boxStructure","ok","cancel","contentId","messageModalAttr","setAttribute","inner","title","message_ok","message_cancel","buttons","btn","label","_createBox","alertPopup","confirmPopup","boxPopup","box_params","params","alertBox","confirmBox","focusable","hideAll","confirm","modalbox","attachInitializer","initializer","ext","onCreated","onInitialized","onDestroyed","Resizer","Scrollbar","mainLayoutInitializer","Timeline","mainTimelineInitializer","Grid","mainGridInitializer","layersEngine","createLayers","gridLine","gridRenderer","taskBg","renderTaskBg","taskBar","renderTaskBar","renderLink","getDataRender","createDataRender","createMouseHandler","addEventTarget","eventHandlers","callHandler","eventName","args","handlers","onClick","locate","targets","findEventHandler","selectTask","onContextMenu","src","taskId","linkId","returnValue","hash","delegateHandlers","h","onDoubleClick","doubleclick","showLightbox","onMouseMove","_last_move_event","detach","globalHandlers","contextMenu","createLayerFactory","createLayerEngine","defaultContainer","previusSiblingContainer","defaultContainerSibling","createGroup","filters","addLayer","taskLayers","$task_data","$task_links","linkLayers","addTaskLayer","_getTaskLayers","getLayers","removeTaskLayer","removeLayer","_clearTaskLayers","addLinkLayer","_getLinkLayers","removeLinkLayer","_clearLinkLayers","mergeFilters","filter_methods","filter_method","renderFactoryProvider","layerFactory","renderFactory","get_container","rel_root","defaultFilters","tempCollection","renderers","container","getLayer","_add","layer","pending","topmost","rel","getRenderer","renderer","eachLayer","rendererFactory","task_area_renderers","assert","renderOne","render_item","remove_item","dom","append","rendered","task_area_pulls","clear_container","render_items","items","buffer","createDocumentFragment","vis","replace_item","item_id","newNode","replaceChild","restore","change_id","oldid","newid","clearRenderers","ScrollbarCell","_scrollHorizontalHandler","_scrollVerticalHandler","_outerScrollVerticalHandler","_outerScrollHorizontalHandler","_mouseWheelHandler","scroll_size","_isHorizontal","scrollPosition","_isVertical","_initVertical","_initHorizontal","_initMouseWheel","_initLinkedViews","_getRootParent","_eachView","_getLinkedViews","$scroll_hor","$scroll_ver","_updateLinkedViews","scrollHorizontally","_scrolling","oldSize","scrollVertically","_wheel_time","_touch_scroll_active","_oldLeft","_getScrollSize","scrollSize","outerSize","linked","scrollProperty","outerProperty","outerScroll","innerScroll","getScrollState","visible","_isVisible","direction","scrollSizes","_setScrollSize","scrollbar","offset","_oldTop","_checkWheelTarget","targetNode","connectedViews","ff","wx","deltaX","wheelDeltaX","wy","deltaY","wheelDelta","shiftKey","oldLeft","detail","oldTop","_findBinary","low","high","canvasRender","$scaleHelper","$task","$task_scale","$task_bg","$task_bars","_tasks","attr","linksAttr","bindLinks","item_attribute","_createLayerConfig","tasks","_attachLayers","dataHeight","backgroundImage","smart_rendering","store","getDatastore","row_height","data_els","_refreshScales","_scales","_getScaleChunkHtml","taskFilter","expose","_taskLayers","_linkLayers","taskRenderer","bar_layer","_taskRenderer","staticRender","getScale","linkRenderer","linkLayer","_linkRenderer","_clearLayers","_render_tasks_scales","scales_html","outer_width","state","helpers","_getScales","availWidth","cfgs","fromPos","toPos","cssClass","tplClass","_prepareScaleHtml","globalConfig","globalTemplates","startIndex","endIndex","cssclass","ariaAttr","getTimelineCellAttr","dateFromPos","part","_getColumnDuration","posFromDate","columnIndexByDate","wholeCells","partCell","day_ind","day","getItemPosition","x2","getItemTop","getTaskHeight","getItemHeight","task_height_offset","getRowTop","task_id","destroy","createStaticBgHelper","gridResize","$state","gridAriaAttr","gridAttrString","gridDataAriaAttr","gridDataAttrString","$grid","gridScaleRowAttrString","$grid_scale","$grid_data","_renderHeaderResizers","doOnRender","_addLayers","_setColumnsWidth","_getGridWidth","_calculateGridWidth","_renderGridHeader","getGridColumns","newWidth","columns_width","final_width","columns_count","extra_width","colShare","min_width","iterator","curExtra","grid_width","_getColsTotalWidth","cols_width","v","parseFloat","unknown","delta","changed","lineHeigth","colWidth","_sort","ariaAttrs","gridScaleCellAttrString","lineHeight","createResizer","grid","createTaskRenderer","_render_task_element","painters","getTaskType","defaultRenderer","_task_default_render","_isAllowedUnscheduledTask","taskType","padd","link_line_width","_render_task_progress","_render_task_content","textColor","color","_combine_item_class","progressColor","_render_leftside_content","_render_rightside_content","setTaskBarAttr","isReadonly","isSummaryTask","_render_pair","outer","showLinkPoints","link_source_id","_render_side_content","_get_link_crossing_css","leftside_text","rightside_text","cond","_get_conditions","ln","getLink","tp","element","done","pr","backgroundColor","opacity","wrapper","drag","leftside","$source","$target","basic","itemId","drag_id","link_target_id","highlight_critical_path","isCriticalTask","link_landing_area","from_id","link_from_start","link_to_start","allowDrag","dragClass","createTaskBgRender","_render_bg_line","row","j","cssTemplate","odd","getGlobalTaskIndex","createLinkRender","_render_link_element","dots","path_builder","get_points","lines","drawer","get_lines","isCriticalLink","link_arrow_size","render_line","endpoint","_render_link_arrow","borderColor","linkAttr","point","line_width","dirs","getMilestonePosition","milestoneHeight","milestoneWidth","current_pos","path","line_to","get_path","next","line","_get_line","get_wrapper_sizes","wrapper_size","get_line_sizes","line_size","marginTop","marginLeft","innerPos","get_direction","vect","current","point_to","pt","get_endpoint","xy","e_y","e_x","shiftX","forward","sign","createGridLineRender","_render_grid_item","has_child","textValue","aria","gridAddButtonAttrString","$level","_has_children","gridCellAttrString","$dataprocessor_class","css_template","taskRowAttr","rowDnd","extendGantt","initEvents","extendDom","clearEvents","_eventHandlers","close","showDate","conf","sorting_method","createTask","totalWidth","_init_dnd","getStore","dnd_sensitivity","hideQuickInfo","_hideQuickInfo","datastore","initial_open_state","outerHTML","getBranchIndex","$transparent","refreshData","lastTaskOfLevel","level","last_item","_getGridPos","gridHeight","_getTargetY","_getTaskByY","dropIndex","allowedLevel","over","dd","targetY","nextId","getParent","hasChild","prevId","$drop_target","taskDnD","linkDnD","timeline","_linksDnD","createLinkDND","_tasksDnD","createTaskDND","extend","_attachDomEvents","_attachGanttEvents","_attachStateProvider","_clearGanttEvents","_clearDomEvents","_clearStateProvider","getTaskTop","getTaskPosition","roundTaskDates","getTaskNode","getLinkNode","_attachDomEvent","_events","_delete_link_handler","question","confirm_link_deleting","_dhtmlx_confirm","deleteLink","coll","coll_date","refreshId","renders","_onTaskIdChange","_onLinkIdChange","scale_step","before_start","before_finish","after_finish","_handlers","clear_drag_state","set_actions","drag_from_start","evs","stage","_move","_resize","_resize_progress","on_mouse_move","on_mouse_down","on_mouse_up","start_x","start_y","coords_x","_drag_task_coords","_init_task_timing","new_start","new_end","obj_s_x","obj_e_x","_mouse_position_change","oldPos","newPos","_is_number","isFinite","start_drag","sX","sY","now","timestamp","_start_dnd","_update_on_move","curr_date","original","_update_parents","refreshTask","isTaskExists","_get_drag_mode","_fix_dnd_scale_time","fixStart","roundDate","_fix_working_times","getClosestWorkTime","correctTaskWorkTime","_fireEvent","updateTask","_dhx_changed","modes","classes","trigger","round_task_dates","drag_state","initTaskDND","_tasks_dnd","initLinksDND","getMilestoneWidth","getVisibleMilestoneWidth","origWidth","getDndState","_link_source_task","_link_target_task","_link_source_task_start","_link_target_task_start","_link_landing","getLinePos","taskPos","xEnd","yEnd","updateMarkedHtml","advanceMarker","resetDndState","showDirectingLine","s_x","s_y","getDirectionLine","link_direction_class","dist","tan","angle","atan","coordinateCircleQuarter","PI","sin","cos","ieTransform","shiftLeft","shiftTop","eX","eY","_direction","removeDirectionLine","sid","_dir_start","landing","prevTarget","prevLanding","prevToStart","targ","_dir_end","targetChanged","_get_link_type","addLink","getVerticalScrollbar","getHorizontalScrollbar","mainTimeline","mainGrid","showGrid","colsWidth","_getVerticalScrollbar","_getHorizontalScrollbar","scrollState","siblings","initialWidth","prevCellWidth","nextCellWidth","newBehindSize","newFrontSize","oldBackSize","oldFrontSize","newBackSize","initDataStores","sync_link","sourceTask","targetTask","sync_link_delete","sync_links","$data","tasksStore","linksStore","mapEvents","mapFrom","mapTo","events","sourceEvent","targetEvent","_init_task","_set_default_task_timing","setParent","calculateTaskLevel","_init_link","facade","facadeFactory","createDatastore","$index","resetProjectDates","_update_flags","action","oldState","calculateScaleRange","newState","$layout","isTaskVisible","onItemLoading","onBeforeAdd","onAfterAdd","onBeforeUpdate","onAfterUpdate","onBeforeDelete","onAfterDelete","onIdChange","onBeforeItemMove","onAfterItemMove","onFilterItem","getDatastores","storeNames","createFacade","createDatastoreFacade","createTasksFacade","createLinksFacade","TreeDataStore","datastoreRender","$StoreType","storeList","bindDataStore","stores","childId","parentId","refresh_links","refreshLink","field","desc","criteria","original_criteria","els","temp","userdata","_clear_data","createTasksDatastoreFacade","getTaskByTime","addTask","deleteTask","getTaskCount","getVisibleTaskCount","getTaskIndex","eachTask","eachParent","startTask","changeTaskId","calculateItemLevel","new_pid","getSiblings","getNextSibling","getPrevSibling","getTaskByIndex","_set_item_state","_refresh_on_toggle_element","moveTask","createLinksStoreFacade","getLinkCount","getLinks","isLinkExists","updateLink","changeLinkId","_branches","$parentProperty","parentProperty","$rootId","rootId","_buildTree","_add_branch","parentIndex","targetIndex","children","_replace_branch_child","_move_branch","source_pid","tbranch","branch","pid","startItem","added_already","old_parent","new_parent","old_id","new_id","newbranch","storeRenderCreator","itemRepainter","renderItem","renderItems","addDataProcessorHooks","dataProcessor","_dp_init","dp","clientSideDelete","updated","updatedRows","clientOnly","_in_progress","getUserData","setUpdated","getTaskLinks","setTransactionMode","serverProcessor","_serverProcessor","inserted","deleted","invalid","error","_methods","setGanttMode","_ganttMode","_invalid","_sendTaskOrder","updateMode","_tSend","sendAllData","_waitMode","itemLinks","batchUpdate","_dp","_tMode","substr","substring","liveUpdateHooks","afterUpdate","reqUrl","_getRowData","pref","taskTiming","_get_task_timing_mode","$no_start","$no_end","action_param","_change_id","_row_style","row_id","_delete_task","setUserData","insertCallback","upd","_xmlNodeToJSON","methods","isExist","deleteCallback","delete","patchDataProcessor","dataprocessor","serverProcessorURL","autoUpdate","_headers","_payload","post_delim","mandatoryFields","messages","invalid_cell","enableUTFencoding","total","payload","_endnm","escape","_utf","encodeURIComponent","setDataColumns","val","_columns","getSyncState","enableDataNames","enablePartialDataSend","_changed","setUpdateMode","rowId","findRow","existing","set_invalid","is_invalid","_clearUpdateFlag","markRow","sendData","details","checkBeforeUpdate","mytype","_h2","editStop","_beforeSendData","_sendData","serialize_one","stack","security_key","_applyPayload","a1","that","back","ids","a3","_user","a4","gr_id","JSON","stringify","valid","_getAllData","has_one","setVerificator","verifFunction","clearVerificator","pattern","defineAction","_uActions","afterUpdateCallback","tid","btag","correct","soid","tag","finalizeUpdate","cleanUpdate","atag","anObj","setOnAfterUpdate","enableDebug","setOnBeforeUpdateHandler","func","setAutoUpdate","interval","user","_need_update","_update_busy","xml_node","afterAutoUpdate","fullSync","setInterval","loadUpdate","getUpdates","_v","nodeValue","_a","vers","upds","isScrollState","dragMarker","isResize","isLink","isMove","defineDelayTimeout","delayTimeout","speed","tick","scrollSpeed","autoscroll_delay","scrollDelay","defineScrollInterval","startPos","eventPos","clearInterval","autoscrollInterval","isScroll","posX","posY","need_scroll","currentScrollTop","scrollOuterHeight","inner_height","scrollInnerHeight","currentScrollLeft","scrollOuterWidth","inner_width","scrollInnerWidth","autoscroll_step","scrollStep","boxSize","startCoord","scrollRange","createMethod","disableMethod","methodName","dummyMethod","restoreMethod","disableMethods","methodsHash","restoreMethods","batchUpdatePayload","console","isActive","noRedraw","dp_mode","call_dp","resetProjects","createWbs","_needRecalc","_isRecalcNeeded","_isGroupSort","_groups","is_active","_getWBSCode","_calcWBS","$virtual","$wbs","_setWBSCode","getWBSCode","_isFirst","_prevSibling","_wbs","_parent","wbs","jQuery","$","fn","dhx_gantt","each","newgantt","Gantt","getGanttInstance","dhtmlx","attaches","attachGantt","cmp","attachObject","dataType","dataObj","vs","av","border","gridId","gridObj","dhtmlXCellObject","getGridColumn","stripHTMLLite","htmlText","htmlTags","extraSpaces","escapeQuotes","singleQuotes","isDisabled","getAttributeString","attributes","aria-label","_taskCommonAttr","isSelectedTask","linkTypes","toStart","fromStart","gridSeparatorAttr","lightboxHiddenAttr","lightboxVisibleAttr","lightboxAttr","lightboxButtonAttrString","buttonName","role","tabindex","lightboxHeader","headerText","lightboxSelectAttrString","time_option","years","months","hours","minutes","lightboxDurationInputAttrString","section","column_duration","aria-valuemin","multiselect","attrs","new_task","buttonLabel","quickInfoAttr","quickInfoHeaderAttrString","quickInfoHeader","quickInfoButtonAttrString","tooltipAttr","tooltipVisibleAttr","tooltipHiddenAttr","_is_chart_visible","_get_links_data","steps","second","minute","hour","week","month","quarter","year","load","_load_url","cl","_load_type","on_load","resp","_process_loading","collections","_load_collections","firstTask","showTask","collections_loaded","collection","serverList","option","option_key","$ignore","json","dhx_security","serializeTask","_copyObject","serializeLink","_copyLink","rawLinks","attrs_only","nodeType","_getCollections","loader","opts","itms","itm","k","_getXML","toptag","getXMLTopNode","skey","oldxml","startdate","est","enddate","predecessortasks","CalendarManager","TimeCalculator","worktimeFacadeFactory","manager","timeCalculator","_calendars","createArgumentsHelper","CalendarWorktimeStrategy","_getDayHoursForMultiple","calendars","units","currPos","is_work_hour","reduce","acc","_is_work_hour","mergeCalendars","newCalendar","createCalendar","worktime","_convertWorktimeSettings","settings","parentCalendar","defaults","fulltime","apiCore","_tryChangeCalendarSettings","getCalendar","createDefaultCalendars","getCalendars","getTaskCalendar","resource","calendarId","addCalendar","worktimes","deleteCalendar","restoreConfigCalendars","CalendarWorkTimeStrategy","argumentsHelper","_workingUnitsCache","Cache","_getUnitOrder","_timestamp","UTC","_checkIfWorkingUnit","_isWorkTime","_is_work_day","_getWorkHours","_internDatesPull","_nextDate","_getWorkUnitsBetweenGeneric","stepStart","stepEnd","checkFirst","checkLast","isLastStep","_getHoursPerDay","_getWorkHoursForRange","_getWorkUnitsBetweenHours","firstDayStart","firstDayEnd","lastDayStart","lastDayEnd","startPart","endPart","hourRange","_getCalendar","_setCalendar","backup","_isEmptyCalendar","datesArray","isFullWeekSet","checkFullArray","getWorkHours","setWorkTime","unsetWorkTime","reset_calendar","is_work_unit","calculateDuration","hasDuration","mult","_calculateEndDate","added","_getClosestWorkTime","future_target","prev_target","both_directins","WorkUnitsCache","_cache","time","calendarManager","$disabledCalendar","NoWorkTimeCalendar","CalendarDisabledTimeStrategy","_calculateDuration","fixedUnits","createWorktimeFacade","_hasDuration","unscheduled","_defaultTaskDate","parent_id","startDate","$new","_getChildLinks","branches","_getTaskTree","_deleteRelatedLinks","use_dp","prev_mode","send_changes","_deleteRelatedTasks","t_id","_lightbox_id","_get_duration_unit","_get_type_name","type_value","task_type","$rendered_type","task_mode","dirty","taskMode","_assign_project_dates","has_changed","oldStart","oldEnd","upper","lower","colIndex","_isTask","_isProject","_lightbox_methods","_lightbox_template","getLightbox","_center_lightbox","showCover","_fill_lightbox","_get_timepicker_step","getLabel","_get_typed_lightbox_config","options","updateCollection","list_name","resetLightbox","getLightboxType","_lightbox_type","_lightbox","_is_lightbox_timepicker","wide_form","onmousedown","_ready_to_dnd","onselectstart","cursor","_init_dnd_events","sns","_render_sections","ds","t_ds","labelBlock","inputBlock","nextSibling","inputId","resizeLightbox","_init_lightbox_events","block","form_blocks","con","lightbox_additional_height","scroll_top","scroll_left","view_height","scrollWidth","_cover","_document_height","_scroll_height","lightbox_events","_save_lightbox","$click","hideLightbox","_cancel_lightbox","sec","button_click","previousSibling","buttonTarget","getLightboxValues","_resolve_default_mapping","mapping","time_optional","duration_optional","get_value","hideCover","_custom_lightbox","_set_lightbox_values","lightbox_header","default_value","set_value","getLightboxSection","getValue","setValue","get_template_control","control","get_select_control","get_textarea_control","get_time_control","_move_while_dnd","_finish_dnd","_dnd_start_lb","gantt_unselectable","lb","_lb_start","_focus","getTimePicker","time_format","_time_format_order","dt","limit_time_select","last_hour","first_hour","start_year","end_year","year_range","tdate","_time_values","_fill_lightbox_select","map","_get_input","_dhx_onchange","onchange","_time_format_size","auto_end_date","_update_lightbox_select","mapped_fields","singleDate","_calc_date","_get_start_date","_get_duration","endspan","_change_duration","inps","btns","charCode","duration_val","_filter","_display","allow_root","root_label","tmpDom","newOptions","onselect","_silent_redraw_lightbox","oldType","formData","updTask","_extend_to_optional","lightbox_block","optional_time","disable","enable","disabled","update_block","button_text","activate","_cached_functions","update_if_changed","active","critical_path_mode","wrap_methods","_prefetch_originals","prefetch","methodname","optimizer","argumentsArray","get_arguments_hash","cached_values","has_cached_value","get_cached_value","cache_value","arguments_hash","is_date","stringify_argument","deactivate","setup","override_gantt","gantt_methods","deactivTimeout","_configure","_get_skin","skin","href","skins","skinset","_second_column_width","_third_column_width","_redefine_lightbox_buttons","resetSkin","skyblue","meadow","terrace","broadway","_config_buttons_left","_config_buttons_right","material","indx","getTaskDND","touch_feedback","touch_feedback_duration","vibrate","_touch_events","touchHandlers","names","block_action","cloneTaskRendered","current_target","scroll_state","dblclicktime","action_mode","scroll_mode","action_start","long_tap_timer","new_scroll_state","_locate_css","_touch_drag","_on_dblclick","day_full","day_short","icon_details","icon_edit","confirm_closing","confirm_deleting","section_description","section_time","section_type","column_wbs","column_text","column_start_date","column_add","weeks","resizeDelay","_reinit","edit","confirm_deleting_title","_scroll_state","x_pos","y_pos","x_inner","y_inner","oldV","oldH","newV","newH","date_x","scroll_to","visible_date","new_pos","scrollVer","scrollHor","horState","verState","targetAttribute","_locateHTML","getTaskRowNode","unselectTask","getSelectedId","changeLightboxType","prevOffset","time_unit","offsetChanged","check","deprecated","badCode","goodCode","formatting","log","warn","dhtmlxMethods"],"mappings":"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","file":"dhtmlxgantt.js","sourcesContent":["/*!\n * @license\r\n * \r\n * dhtmlxGantt v.5.0.1 Stardard\r\n * This software is covered by GPL license. You also can obtain Commercial or Enterprise license to use it in non-GPL project - please contact sales@dhtmlx.com. Usage without proper license is prohibited.\r\n * \r\n * (c) Dinamenta, UAB.\r\n * \n */\n/******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId]) {\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/ \t\t}\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\ti: moduleId,\n/******/ \t\t\tl: false,\n/******/ \t\t\texports: {}\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.l = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// define getter function for harmony exports\n/******/ \t__webpack_require__.d = function(exports, name, getter) {\n/******/ \t\tif(!__webpack_require__.o(exports, name)) {\n/******/ \t\t\tObject.defineProperty(exports, name, {\n/******/ \t\t\t\tconfigurable: false,\n/******/ \t\t\t\tenumerable: true,\n/******/ \t\t\t\tget: getter\n/******/ \t\t\t});\n/******/ \t\t}\n/******/ \t};\n/******/\n/******/ \t// getDefaultExport function for compatibility with non-harmony modules\n/******/ \t__webpack_require__.n = function(module) {\n/******/ \t\tvar getter = module && module.__esModule ?\n/******/ \t\t\tfunction getDefault() { return module['default']; } :\n/******/ \t\t\tfunction getModuleExports() { return module; };\n/******/ \t\t__webpack_require__.d(getter, 'a', getter);\n/******/ \t\treturn getter;\n/******/ \t};\n/******/\n/******/ \t// Object.prototype.hasOwnProperty.call\n/******/ \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"\";\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(__webpack_require__.s = 18);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ (function(module, exports) {\n\nfunction copy(object) {\r\n\tvar i, t, result; // iterator, types array, result\r\n\r\n\tif (object && typeof object == \"object\") {\r\n\t\tresult = {};\r\n\t\tt = [Array,Date,Number,String,Boolean];\r\n\t\tfor (i=0; i<t.length; i++) {\r\n\t\t\tif (object instanceof t[i])\r\n\t\t\t\tresult = i ? new t[i](object) : new t[i](); // first one is array\r\n\t\t}\r\n\r\n\t\tfor (i in object) {\r\n\t\t\tif (Object.prototype.hasOwnProperty.apply(object, [i]))\r\n\t\t\t\tresult[i] = copy(object[i]);\r\n\t\t}\r\n\t}\r\n\treturn result || object;\r\n}\r\n\r\nfunction mixin (target, source, force){\r\n\tfor (var f in source)\r\n\t\tif ((!target[f] || force)) target[f]=source[f];\r\n\treturn target;\r\n}\r\n\r\nfunction defined(obj) {\r\n\treturn typeof(obj) != \"undefined\";\r\n}\r\n\r\nvar seed;\r\nfunction uid() {\r\n\tif (!seed)\r\n\t\tseed = (new Date()).valueOf();\r\n\r\n\tseed++;\r\n\treturn seed;\r\n}\r\n\r\n//creates function with specified \"this\" pointer\r\nfunction bind(functor, object){\r\n\tif(functor.bind)\r\n\t\treturn functor.bind(object);\r\n\telse\r\n\t\treturn function(){ return functor.apply(object,arguments); };\r\n}\r\n\r\nfunction event(el, event, handler){\r\n\tif (el.addEventListener)\r\n\t\tel.addEventListener(event, handler, false);\r\n\r\n\telse if (el.attachEvent)\r\n\t\tel.attachEvent(\"on\"+event, handler);\r\n}\r\n\r\nfunction eventRemove(el, event, handler){\r\n\tif (el.removeEventListener)\r\n\t\tel.removeEventListener(event, handler, false);\r\n\r\n\telse if (el.detachEvent)\r\n\t\tel.detachEvent(\"on\"+event, handler);\r\n}\r\n\r\n\r\nmodule.exports = {\r\n\tcopy: copy,\r\n\tdefined: defined,\r\n\tmixin: mixin,\r\n\tuid: uid,\r\n\tbind: bind,\r\n\tevent: event,\r\n\teventRemove: eventRemove\r\n};\n\n/***/ }),\n/* 1 */\n/***/ (function(module, exports) {\n\n//returns position of html element on the page\r\nfunction elementPosition(elem) {\r\n\tvar top=0, left=0, right=0, bottom=0;\r\n\tif (elem.getBoundingClientRect) { //HTML5 method\r\n\t\tvar box = elem.getBoundingClientRect();\r\n\t\tvar body = document.body;\r\n\t\tvar docElem = document.documentElement;\r\n\t\tvar scrollTop = window.pageYOffset || docElem.scrollTop || body.scrollTop;\r\n\t\tvar scrollLeft = window.pageXOffset || docElem.scrollLeft || body.scrollLeft;\r\n\t\tvar clientTop = docElem.clientTop || body.clientTop || 0;\r\n\t\tvar clientLeft = docElem.clientLeft || body.clientLeft || 0;\r\n\t\ttop  = box.top +  scrollTop - clientTop;\r\n\t\tleft = box.left + scrollLeft - clientLeft;\r\n\r\n\t\tright = document.body.offsetWidth - box.right;\r\n\t\tbottom = document.body.offsetHeight - box.bottom;\r\n\t} else { //fallback to naive approach\r\n\t\twhile(elem) {\r\n\t\t\ttop = top + parseInt(elem.offsetTop,10);\r\n\t\t\tleft = left + parseInt(elem.offsetLeft,10);\r\n\t\t\telem = elem.offsetParent;\r\n\t\t}\r\n\r\n\t\tright = document.body.offsetWidth - elem.offsetWidth - left;\r\n\t\tbottom = document.body.offsetHeight - elem.offsetHeight - top;\r\n\t}\r\n\treturn { y: Math.round(top), x: Math.round(left), width:elem.offsetWidth, height:elem.offsetHeight, right: Math.round(right), bottom: Math.round(bottom) };\r\n}\r\n\r\nfunction isVisible(node){\r\n\tvar display = false,\r\n\t\tvisibility = false;\r\n\tif(window.getComputedStyle){\r\n\t\tvar style = window.getComputedStyle(node, null);\r\n\t\tdisplay = style[\"display\"];\r\n\t\tvisibility = style[\"visibility\"];\r\n\t}else if(node.currentStyle){\r\n\t\tdisplay = node.currentStyle[\"display\"];\r\n\t\tvisibility = node.currentStyle[\"visibility\"];\r\n\t}\r\n\treturn (display != \"none\" && visibility != \"hidden\");\r\n}\r\n\r\nfunction hasNonNegativeTabIndex(node){\r\n\treturn !isNaN(node.getAttribute(\"tabindex\")) && (node.getAttribute(\"tabindex\")*1 >= 0);\r\n}\r\n\r\nfunction hasHref(node){\r\n\tvar canHaveHref = {\"a\": true, \"area\": true};\r\n\tif(canHaveHref[node.nodeName.loLowerCase()]){\r\n\t\treturn !!node.getAttribute(\"href\");\r\n\t}\r\n\treturn true;\r\n}\r\n\r\nfunction isEnabled(node){\r\n\tvar canDisable = {\"input\":true, \"select\":true, \"textarea\":true, \"button\":true, \"object\":true};\r\n\tif(canDisable[node.nodeName.toLowerCase()]){\r\n\t\treturn !node.hasAttribute(\"disabled\");\r\n\t}\r\n\r\n\treturn true;\r\n}\r\n\r\nfunction getFocusableNodes(root){\r\n\tvar nodes = root.querySelectorAll([\r\n\t\t\"a[href]\",\r\n\t\t\"area[href]\",\r\n\t\t\"input\",\r\n\t\t\"select\",\r\n\t\t\"textarea\",\r\n\t\t\"button\",\r\n\t\t\"iframe\",\r\n\t\t\"object\",\r\n\t\t\"embed\",\r\n\t\t\"[tabindex]\",\r\n\t\t\"[contenteditable]\"\r\n\t].join(\", \"));\r\n\r\n\tvar nodesArray = Array.prototype.slice.call(nodes, 0);\r\n\tfor(var i = 0; i < nodesArray.length; i++){\r\n\t\tvar node = nodesArray[i];\r\n\t\tvar isValid = (hasNonNegativeTabIndex(node)  || isEnabled(node) || hasHref(node)) && isVisible(node);\r\n\t\tif(!isValid){\r\n\t\t\tnodesArray.splice(i, 1);\r\n\t\t\ti--;\r\n\t\t}\r\n\t}\r\n\treturn nodesArray;\r\n}\r\n\r\nfunction getScrollSize(){\r\n\tvar div = document.createElement(\"div\");\r\n\tdiv.style.cssText=\"visibility:hidden;position:absolute;left:-1000px;width:100px;padding:0px;margin:0px;height:110px;min-height:100px;overflow-y:scroll;\";\r\n\r\n\tdocument.body.appendChild(div);\r\n\tvar width = div.offsetWidth-div.clientWidth;\r\n\tdocument.body.removeChild(div);\r\n\r\n\treturn width;\r\n}\r\n\r\nfunction getClassName(node){\r\n\tif(!node) return \"\";\r\n\r\n\tvar className = node.className || \"\";\r\n\tif(className.baseVal)//'className' exist but not a string - IE svg element in DOM\r\n\t\tclassName = className.baseVal;\r\n\r\n\tif(!className.indexOf)\r\n\t\tclassName = '';\r\n\r\n\treturn _trimString(className);\r\n}\r\n\r\nfunction addClassName(node, className){\r\n\tif (className && node.className.indexOf(className) === -1) {\r\n\t\tnode.className += \" \" + className;\r\n\t}\r\n}\r\n\r\nfunction removeClassName(node, name) {\r\n\tname = name.split(\" \");\r\n\tfor (var i = 0; i < name.length; i++) {\r\n\t\tvar regEx = new RegExp('\\\\s?\\\\b' + name[i] + '\\\\b(?![-_\\.])', \"\");\r\n\t\tnode.className = node.className.replace(regEx, \"\");\r\n\t}\r\n}\r\n\r\nfunction toNode(node) {\r\n\tif (typeof node === \"string\") {\r\n\t\treturn (document.getElementById(node) || document.querySelector(node) || document.body);\r\n\t}\r\n\treturn node || document.body;\r\n}\r\n\r\nvar _slave = document.createElement(\"div\");\r\nfunction insert(node, newone) {\r\n\t_slave.innerHTML = newone;\r\n\tvar child = _slave.firstChild;\r\n\tnode.appendChild(child);\r\n\treturn child;\r\n}\r\n\r\nfunction remove(node) {\r\n\tif (node && node.parentNode) {\r\n\t\tnode.parentNode.removeChild(node);\r\n\t}\r\n}\r\n\r\nfunction getChildren(node, css) {\r\n\tvar ch = node.childNodes;\r\n\tvar len = ch.length;\r\n\tvar out = [];\r\n\tfor (var i = 0; i < len; i++) {\r\n\t\tvar obj = ch[i];\r\n\t\tif (obj.className && obj.className.indexOf(css) !== -1) {\r\n\t\t\tout.push(obj);\r\n\t\t}\r\n\t}\r\n\treturn out;\r\n}\r\n\r\nfunction getTargetNode(e){\r\n\tvar trg;\r\n\tif (e.tagName)\r\n\t\ttrg = e;\r\n\telse {\r\n\t\te=e||window.event;\r\n\t\ttrg=e.target||e.srcElement;\r\n\t}\r\n\treturn trg;\r\n}\r\n\r\nfunction locateAttribute(e, attribute) {\r\n\tif(!attribute) return;\r\n\r\n\tvar trg = getTargetNode(e);\r\n\r\n\twhile (trg){\r\n\t\tif (trg.getAttribute){\t//text nodes has not getAttribute\r\n\t\t\tvar test = trg.getAttribute(attribute);\r\n\t\t\tif (test) return trg;\r\n\t\t}\r\n\t\ttrg=trg.parentNode;\r\n\t}\r\n\treturn null;\r\n}\r\n\r\nfunction _trimString(str){\r\n\tvar func = String.prototype.trim || function(){ return this.replace(/^\\s+|\\s+$/g, \"\"); };\r\n\treturn func.apply(str);\r\n}\r\n\r\nfunction locateClassName(e, classname, strict){\r\n\tif(strict === undefined)\r\n\t\tstrict = true;\r\n\r\n\tvar trg = getTargetNode(e);\r\n\tvar css = '';\r\n\tvar test = false;\r\n\twhile (trg){\r\n\t\tcss = getClassName(trg);\r\n\r\n\t\tif(css){\r\n\t\t\tvar ind = css.indexOf(classname);\r\n\t\t\tif (ind >= 0){\r\n\t\t\t\tif (!strict)\r\n\t\t\t\t\treturn trg;\r\n\r\n\t\t\t\t//check that we have exact match\r\n\t\t\t\tvar left = (ind === 0) || (!_trimString(css.charAt(ind - 1)));\r\n\t\t\t\tvar right = ((ind + classname.length >= css.length)) || (!_trimString(css.charAt(ind + classname.length)));\r\n\r\n\t\t\t\tif (left && right)\r\n\t\t\t\t\treturn trg;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\ttrg=trg.parentNode;\r\n\t}\r\n\treturn null;\r\n}\r\n\r\n/*\r\nevent position relatively to DOM element\r\n */\r\nfunction getRelativeEventPosition(ev, node){\r\n\tif (ev.pageX || ev.pageY)\r\n\t\tvar pos = {x: ev.pageX, y: ev.pageY};\r\n\r\n\tvar d = gantt.env.isIE ? document.documentElement : document.body;\r\n\tvar pos = {\r\n\t\tx: ev.clientX + d.scrollLeft - d.clientLeft,\r\n\t\ty: ev.clientY + d.scrollTop - d.clientTop\r\n\t};\r\n\r\n\tvar box = elementPosition(node);\r\n\tpos.x = pos.x - box.x + node.scrollLeft;\r\n\tpos.y = pos.y - box.y + node.scrollTop;\r\n\treturn pos;\r\n}\r\n\r\n\r\nfunction isChildOf(child, parent){\r\n\twhile(child && child != parent) {\r\n\t\tchild = child.parentNode;\r\n\t}\r\n\treturn child == parent;\r\n}\r\n\r\nmodule.exports = {\r\n\tgetNodePosition: elementPosition,\r\n\tgetFocusableNodes: getFocusableNodes,\r\n\tgetScrollSize: getScrollSize,\r\n\tgetClassName: getClassName,\r\n\taddClassName: addClassName,\r\n\tremoveClassName: removeClassName,\r\n\tinsertNode: insert,\r\n\tremoveNode: remove,\r\n\tgetChildNodes: getChildren,\r\n\ttoNode: toNode,\r\n\tlocateClassName:locateClassName,\r\n\tlocateAttribute: locateAttribute,\r\n\tgetTargetNode: getTargetNode,\r\n\tgetRelativeEventPosition: getRelativeEventPosition,\r\n\tisChildOf: isChildOf,\r\n};\n\n/***/ }),\n/* 2 */\n/***/ (function(module, exports) {\n\nvar EventHost = function(){\r\n\tthis._connected = [];\r\n\tthis._silent_mode = false;\r\n};\r\nEventHost.prototype = {\r\n\t_silentStart: function() {\r\n\t\tthis._silent_mode = true;\r\n\t},\r\n\t_silentEnd: function() {\r\n\t\tthis._silent_mode = false;\r\n\t},\r\n\t_eventCatcher: function(obj){\r\n\t\tvar dhx_catch = [];\r\n\t\tvar z = function(){\r\n\t\t\tvar res = true;\r\n\t\t\tfor (var i = 0; i < dhx_catch.length; i++){\r\n\t\t\t\tif (dhx_catch[i]){\r\n\t\t\t\t\tvar zr = dhx_catch[i].apply(obj, arguments);\r\n\t\t\t\t\tres=res&&zr;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn res;\r\n\t\t};\r\n\t\tz.addEvent=function(ev){\r\n\t\t\tif (typeof (ev) == \"function\")\r\n\t\t\t\treturn dhx_catch.push(ev)-1;\r\n\t\t\treturn false;\r\n\t\t};\r\n\t\tz.removeEvent=function(id){\r\n\t\t\tdhx_catch[id]=null;\r\n\t\t};\r\n\t\treturn z;\r\n\t}\r\n};\r\n\r\nfunction makeEventable(obj){\r\n\r\n\tvar eventHost = new EventHost();\r\n\tobj.attachEvent=function(name, catcher, callObj){\r\n\t\tname='ev_'+name.toLowerCase();\r\n\t\tif (!eventHost[name])\r\n\t\t\teventHost[name]=new eventHost._eventCatcher(callObj||this);\r\n\r\n\t\treturn(name+':'+eventHost[name].addEvent(catcher)); //return ID (event name & event ID)\r\n\t};\r\n\tobj.attachAll = function(callback, callObj){\r\n\t\tthis.attachEvent('listen_all', callback, callObj);\r\n\t};\r\n\r\n\tobj.callEvent=function(name, arg0, callObj){\r\n\t\tif (eventHost._silent_mode) return true;\r\n\r\n\t\tvar handlerName = 'ev_'+name.toLowerCase();\r\n\r\n\t\tif (eventHost['ev_listen_all']){\r\n\t\t\teventHost['ev_listen_all'].apply(callObj || this, [name].concat(arg0));\r\n\t\t}\r\n\r\n\t\tif (eventHost[handlerName])\r\n\t\t\treturn eventHost[handlerName].apply(callObj || this, arg0);\r\n\t\treturn true;\r\n\t};\r\n\tobj.checkEvent=function(name){\r\n\t\treturn (!!eventHost['ev_'+name.toLowerCase()]);\r\n\t};\r\n\tobj.detachEvent=function(id){\r\n\t\tif (id){\r\n\t\t\tvar list = id.split(':');           //get EventName and ID\r\n\t\t\teventHost[list[0]].removeEvent(list[1]); //remove event\r\n\t\t}\r\n\t};\r\n\tobj.detachAllEvents = function(){\r\n\t\tfor (var name in eventHost){\r\n\t\t\tif (name.indexOf(\"ev_\") === 0)\r\n\t\t\t\tdelete eventHost[name];\r\n\t\t}\r\n\t};\r\n\r\n}\r\n\r\nmodule.exports = makeEventable;\n\n/***/ }),\n/* 3 */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar utils = __webpack_require__(0),\r\n\teventable = __webpack_require__(2),\r\n\tdomHelpers = __webpack_require__(1);\r\n\r\nvar Cell = (function () {\r\n\t\"use strict\";\r\n\r\n\tfunction Cell(parent, config, factory, gantt) {\r\n\t\tif (parent) {\r\n\t\t\tthis.$container = domHelpers.toNode(parent);\r\n\t\t\tthis.$parent = parent;\r\n\t\t}\r\n\t\t// save config\r\n\t\tthis.$config = utils.mixin(config, {\r\n\t\t\theaderHeight: 33\r\n\t\t});\r\n\t\tthis.$gantt = gantt;\r\n\t\t// set id\r\n\t\tthis.$id = config.id || \"c\" + utils.uid();\r\n\r\n\t\tthis.$name = \"cell\";\r\n\t\tthis.$factory = factory;\r\n\r\n\t\teventable(this);\r\n\r\n\t}\r\n\r\n\tCell.prototype.destructor = function () {\r\n\t\tthis.$parent = this.$container = this.$view = null;\r\n\r\n\t\tthis.callEvent(\"onDestroy\", []);\r\n\t\tthis.detachAllEvents();\r\n\t};\r\n\tCell.prototype.cell = function (id) {\r\n\t\treturn null;\r\n\t};\r\n\r\n\tCell.prototype.scrollTo = function(left, top){\r\n\r\n\t\tif (left*1 == left){\r\n\t\t\tthis.$view.scrollLeft = left;\r\n\t\t}\r\n\t\tif(top*1 == top){\r\n\t\t\tthis.$view.scrollTop = left;\r\n\t\t}\r\n\t};\r\n\r\n\tCell.prototype.clear = function(){\r\n\t\tthis.getNode().innerHTML = \"\";\r\n\t\tthis.getNode().className = \"gantt_layout_content\";\r\n\t\tthis.getNode().style.padding = \"0\";\r\n\t};\r\n\r\n\tCell.prototype.resize = function (final) {\r\n\t\tif (this.$parent) {\r\n\t\t\treturn this.$parent.resize(final);\r\n\t\t}\r\n\r\n\t\tif(final === false){\r\n\t\t\tthis.$preResize = true;\r\n\t\t}\r\n\r\n\t\tvar topCont = this.$container;\r\n\t\tvar x = topCont.offsetWidth;\r\n\t\tvar y = topCont.offsetHeight;\r\n\t\tvar topSize = this.getSize();\r\n\t\tif (topCont === document.body) {\r\n\t\t\tx = document.body.offsetWidth;\r\n\t\t\ty = document.body.offsetHeight;\r\n\t\t}\r\n\t\tif (x < topSize.minWidth) {\r\n\t\t\tx = topSize.minWidth;\r\n\t\t}\r\n\t\tif (x > topSize.maxWidth) {\r\n\t\t\tx = topSize.maxWidth;\r\n\t\t}\r\n\t\tif (y < topSize.minHeight) {\r\n\t\t\ty = topSize.minHeight;\r\n\t\t}\r\n\t\tif (y > topSize.maxHeight) {\r\n\t\t\ty = topSize.maxHeight;\r\n\t\t}\r\n\t\tthis.setSize(x, y);\r\n\r\n\t\tvar self = this;\r\n\r\n\t\tif(!this.$preResize){\r\n\t\t//\tself.callEvent(\"onResize\", [x, y]);\r\n\t\t}\r\n\t\tthis.$preResize = false;\r\n\t};\r\n\r\n\tCell.prototype.hide = function () {\r\n\t\tthis._hide(true);\r\n\t\tthis.resize();\r\n\t};\r\n\tCell.prototype.show = function (force) {\r\n\t\tthis._hide(false);\r\n\t\tif (force && this.$parent) {\r\n\t\t\tthis.$parent.show();\r\n\t\t}\r\n\t\tthis.resize();\r\n\t};\r\n\tCell.prototype._hide = function (mode) {\r\n\t\tif (mode === true && this.$view.parentNode) {\r\n\t\t\tthis.$view.parentNode.removeChild(this.$view);\r\n\t\t}\r\n\t\telse if (mode === false && !this.$view.parentNode) {\r\n\t\t\tvar index = this.$parent.cellIndex(this.$id);\r\n\t\t\tthis.$parent.moveView(this, index);\r\n\t\t}\r\n\t\tthis.$config.hidden = mode;\r\n\t};\r\n\tCell.prototype.$toHTML = function (content, css) {\r\n\t\tif (content === void 0) { content = \"\"; }\r\n\t\tcss = [(css || \"\"), (this.$config.css || \"\")].join(\" \");\r\n\t\tvar obj = this.$config;\r\n\t\tvar header = \"\";\r\n\t\tif (obj.raw) {\r\n\t\t\tcontent = typeof obj.raw === \"string\" ? obj.raw : \"\";\r\n\t\t}\r\n\t\telse {\r\n\t\t\tif (!content) {\r\n\t\t\t\tcontent = \"<div class='gantt_layout_content' \"+(css ? \" class='\"+css+\"' \" : \"\")+\" >\" + (obj.html || \"\") + \"</div>\";\r\n\t\t\t}\r\n\t\t\tif (obj.header) {\r\n\t\t\t\tvar collapseIcon = obj.canCollapse ? \"<div class='gantt_layout_header_arrow'></div>\" : \"\";\r\n\t\t\t\theader = \"<div class='gantt_layout_header'>\" + collapseIcon + \"<div class='gantt_layout_header_content'>\" + obj.header + \"</div></div>\";\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn \"<div class='gantt_layout_cell \" + css + \"' data-cell-id='\" + this.$id + \"'>\" + header + content + \"</div>\";\r\n\t};\r\n\tCell.prototype.$fill = function (node, parent) {\r\n\t\tthis.$view = node;\r\n\t\tthis.$parent = parent;\r\n\t\tthis.init();\r\n\t};\r\n\tCell.prototype.getNode = function () {\r\n\t\treturn (this.$view.querySelector(\"gantt_layout_cell\") || this.$view);\r\n\t};\r\n\tCell.prototype.init = function () {\r\n\t\t// [NOT-GOOD] code is executed for each component, while it still has only one handler, it is no good\r\n\r\n\t\tvar self = this;\r\n\t\tvar mouse = gantt.$services.getService(\"mouseEvents\");\r\n\t\tmouse.delegate(\"click\", \"gantt_header_arrow\", function(e){\r\n\t\t\tvar cellId = domHelpers.locateAttribute(e, \"data-cell-id\");\r\n\t\t\tif(cellId == self.$id){\r\n\t\t\t\tself.toggle();\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\tthis.callEvent(\"onReady\", []);\r\n\t};\r\n\tCell.prototype.toggle = function () {\r\n\t\tthis.$config.collapsed = !this.$config.collapsed;\r\n\t\tthis.resize();\r\n\t};\r\n\tCell.prototype.getSize = function () {\r\n\t\tvar size = {\r\n\t\t\theight: this.$config.height || 0,\r\n\t\t\twidth: this.$config.width || 0,\r\n\t\t\tgravity: this.$config.gravity || 1,\r\n\t\t\tminHeight: this.$config.minHeight || 0,\r\n\t\t\tminWidth: this.$config.minWidth || 0,\r\n\t\t\tmaxHeight: this.$config.maxHeight || 100000,\r\n\t\t\tmaxWidth: this.$config.maxWidth || 100000\r\n\t\t};\r\n\t\tif (this.$config.collapsed) {\r\n\t\t\tvar mode = this.$config.mode === \"x\";\r\n\t\t\tsize[mode ? \"width\" : \"height\"] = size[mode ? \"maxWidth\" : \"maxHeight\"] = this.$config.headerHeight;\r\n\t\t}\r\n\t\treturn size;\r\n\t};\r\n\r\n\tCell.prototype.getContentSize = function(){\r\n\r\n\t\tvar width = this.$lastSize.contentX;\r\n\t\tif(width !== width*1){\r\n\t\t\twidth = this.$lastSize.width;\r\n\t\t}\r\n\r\n\t\tvar height = this.$lastSize.contentY;\r\n\t\tif(height !== height*1){\r\n\t\t\theight = this.$lastSize.height;\r\n\t\t}\r\n\r\n\t\treturn {\r\n\t\t\twidth: width,\r\n\t\t\theight: height\r\n\t\t};\r\n\t};\r\n\r\n\tCell.prototype._getBorderSizes = function(){\r\n\t\tvar borders = {\r\n\t\t\ttop: 0,\r\n\t\t\tright: 0,\r\n\t\t\tbottom: 0,\r\n\t\t\tleft: 0,\r\n\t\t\thorizontal: 0,\r\n\t\t\tvertical: 0\r\n\t\t};\r\n\t\tif(this._currentBorders){\r\n\t\t\tif(this._currentBorders[this._borders.left]){\r\n\t\t\t\tborders.left = 1;\r\n\t\t\t\tborders.horizontal++;\r\n\t\t\t}\r\n\r\n\t\t\tif(this._currentBorders[this._borders.right]){\r\n\t\t\t\tborders.right = 1;\r\n\t\t\t\tborders.horizontal++;\r\n\t\t\t}\r\n\r\n\t\t\tif(this._currentBorders[this._borders.top]){\r\n\t\t\t\tborders.top = 1;\r\n\t\t\t\tborders.vertical++;\r\n\t\t\t}\r\n\r\n\t\t\tif(this._currentBorders[this._borders.bottom]){\r\n\t\t\t\tborders.bottom = 1;\r\n\t\t\t\tborders.vertical++;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn borders;\r\n\r\n\t};\r\n\r\n\tCell.prototype.setSize = function (x, y) {\r\n\t\tthis.$view.style.width = x + \"px\";\r\n\t\tthis.$view.style.height = y + \"px\";\r\n\r\n\t\tvar borders = this._getBorderSizes();\r\n\t\tvar contentY = y - borders.vertical;\r\n\t\tvar contentX = x - borders.horizontal;\r\n\r\n\t\tthis.$lastSize = { x: x, y: y, contentX: contentX, contentY: contentY };\r\n\t\tif (this.$config.header) {\r\n\t\t\tthis._sizeHeader();\r\n\t\t}else{\r\n\t\t\tthis._sizeContent();\r\n\t\t}\r\n\t};\r\n\r\n\tCell.prototype._borders = {\r\n\t\t\"left\":\"gantt_layout_cell_border_left\",\r\n\t\t\"right\":\"gantt_layout_cell_border_right\",\r\n\t\t\"top\":\"gantt_layout_cell_border_top\",\r\n\t\t\"bottom\":\"gantt_layout_cell_border_bottom\"\r\n\t};\r\n\r\n\tCell.prototype._setBorders = function(css, view){\r\n\t\tif(!view) {\r\n\t\t\tview = this;\r\n\t\t}\r\n\t\tvar node = view.$view;\r\n\r\n\t\tfor( var i in this._borders){\r\n\t\t\tdomHelpers.removeClassName(node, this._borders[i]);\r\n\t\t}\r\n\r\n\t\tif(typeof css == \"string\"){\r\n\t\t\tcss = [css];\r\n\t\t}\r\n\r\n\t\tvar cssHash = {};\r\n\r\n\t\tfor(var i = 0; i < css.length; i++){\r\n\t\t\tdomHelpers.addClassName(node, css[i]);\r\n\t\t\tcssHash[css[i]] = true;\r\n\t\t}\r\n\r\n\t\tview._currentBorders = cssHash;\r\n\t};\r\n\r\n\r\n\tCell.prototype._sizeContent = function(){\r\n\t\tvar content = this.$view.childNodes[0];\r\n\t\tif(content.className == \"gantt_layout_content\"){\r\n\t\t\tcontent.style.height = this.$lastSize.contentY + \"px\";\r\n\t\t}\r\n\t};\r\n\r\n\tCell.prototype._sizeHeader = function () {\r\n\t\tvar size = this.$lastSize;\r\n\t\tsize.contentY -= this.$config.headerHeight;\r\n\t\tvar header = this.$view.childNodes[0];\r\n\t\tvar content = this.$view.childNodes[1];\r\n\t\tvar xLayout = this.$config.mode === \"x\";\r\n\t\tif (this.$config.collapsed) {\r\n\t\t\tcontent.style.display = \"none\";\r\n\t\t\tif (xLayout) {\r\n\t\t\t\theader.className = \"gantt_layout_header collapsed_x\";\r\n\t\t\t\theader.style.width = size.y + \"px\";\r\n\t\t\t\tvar d = Math.floor(size.y / 2 - size.x / 2);\r\n\t\t\t\theader.style.transform = \"rotate(90deg) translate(\" + d + \"px, \" + d + \"px)\";\r\n\t\t\t\tcontent.style.display = \"none\";\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\theader.className = \"gantt_layout_header collapsed_y\";\r\n\t\t\t}\r\n\t\t}\r\n\t\telse {\r\n\t\t\tif (xLayout) {\r\n\t\t\t\theader.className = \"gantt_layout_header\";\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\theader.className = \"gantt_layout_header vertical\";\r\n\t\t\t}\r\n\t\t\theader.style.width = 'auto';\r\n\t\t\theader.style.transform = '';\r\n\t\t\tcontent.style.display = \"\";\r\n\t\t\tcontent.style.height = size.contentY + \"px\";\r\n\t\t}\r\n\t\theader.style.height = this.$config.headerHeight + \"px\";\r\n\t};\r\n\treturn Cell;\r\n}());\r\n\r\nmodule.exports = Cell;\r\n\n\n/***/ }),\n/* 4 */\n/***/ (function(module, exports) {\n\nmodule.exports = function (d, b) {\r\n\tfor (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\r\n\tfunction __() { this.constructor = d; }\r\n\td.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n};\n\n/***/ }),\n/* 5 */\n/***/ (function(module, exports) {\n\nvar env = {\r\n\tisIE: (navigator.userAgent.indexOf(\"MSIE\") >= 0 || navigator.userAgent.indexOf(\"Trident\") >= 0),\r\n\tisIE6: (!window.XMLHttpRequest && navigator.userAgent.indexOf(\"MSIE\") >= 0),\r\n\tisIE7: (navigator.userAgent.indexOf(\"MSIE 7.0\") >= 0 && navigator.userAgent.indexOf(\"Trident\") < 0),\r\n\tisIE8: (navigator.userAgent.indexOf(\"MSIE 8.0\") >= 0 && navigator.userAgent.indexOf(\"Trident\") >= 0),\r\n\tisOpera: (navigator.userAgent.indexOf(\"Opera\") >= 0),\r\n\tisChrome: (navigator.userAgent.indexOf(\"Chrome\") >= 0),\r\n\tisKHTML: (navigator.userAgent.indexOf(\"Safari\") >= 0 || navigator.userAgent.indexOf(\"Konqueror\") >= 0),\r\n\tisFF: (navigator.userAgent.indexOf(\"Firefox\") >= 0),\r\n\tisIPad: (navigator.userAgent.search(/iPad/gi) >= 0),\r\n\tisEdge: (navigator.userAgent.indexOf(\"Edge\")!=-1)\r\n};\r\n\r\nmodule.exports = env;\n\n/***/ }),\n/* 6 */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar __extends = __webpack_require__(4),\r\n\tdomHelpers = __webpack_require__(1),\r\n\tutils = __webpack_require__(0),\r\n\tCell = __webpack_require__(3);\r\n\r\nvar Layout = (function (_super) {\r\n\t\"use strict\";\r\n\r\n\t__extends(Layout, _super);\r\n\tfunction Layout(parent, config, factory) {\r\n\t\tvar _this = _super.apply(this, arguments) || this;\r\n\r\n\t\tif(parent)\r\n\t\t\t_this.$root = true;\r\n\r\n\t\t_this._parseConfig(config);\r\n\t\treturn _this;\r\n\t}\r\n\r\n\tLayout.prototype.destructor = function () {\r\n\t\tif (this.$container && this.$view) {\r\n\t\t\tdomHelpers.removeNode(this.$view);\r\n\t\t}\r\n\r\n\t\tfor (var i = 0; i < this.$cells.length; i++) {\r\n\t\t\tvar child = this.$cells[i];\r\n\t\t\tchild.destructor();\r\n\t\t}\r\n\t\tthis.$cells = [];\r\n\r\n\t\t_super.prototype.destructor.call(this);\r\n\t};\r\n\r\n\tLayout.prototype.resize = function(startStage){\r\n\t\tvar mainCall = false;\r\n\t\tif(this.$root){\r\n\t\t\t//console.log(\"root resize\");\r\n\t\t}\r\n\r\n\t\tif(this.$root && !this._resizeInProgress){\r\n\t\t\tthis.callEvent(\"onBeforeResize\", []);\r\n\t\t\tmainCall = true;\r\n\t\t\tthis._resizeInProgress = true;\r\n\t\t}\r\n\r\n\t\t_super.prototype.resize.call(this, true);\r\n\t\tif(mainCall && (startStage || startStage === undefined)){\r\n\t\t\tif(this.$config.autosize){\r\n\t\t\t\tthis.autosize(this.$config.autosize);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t_super.prototype.resize.call(this, false);\r\n\r\n\t\tif(mainCall && (!startStage || startStage === undefined)){\r\n\t\t\tthis._resizeInProgress = false;\r\n\t\t}\r\n\t\tif(this.$root){\r\n\t\t\tthis.callEvent(\"onResize\", []);\r\n\t\t\t//console.log(\"root resize end\");\r\n\t\t}\r\n\t};\r\n\r\n\tLayout.prototype.cell = function (id) {\r\n\t\tfor (var i = 0; i < this.$cells.length; i++) {\r\n\t\t\tvar child = this.$cells[i];\r\n\t\t\tif (child.$id === id) {\r\n\t\t\t\treturn child;\r\n\t\t\t}\r\n\t\t\tvar sub = child.cell(id);\r\n\t\t\tif (sub) {\r\n\t\t\t\treturn sub;\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\tLayout.prototype.cellIndex = function (id) {\r\n\t\tfor (var i = 0; i < this.$cells.length; i++) {\r\n\t\t\tif (this.$cells[i].$id === id) {\r\n\t\t\t\treturn i;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn -1;\r\n\t};\r\n\tLayout.prototype.moveView = function (view, ind) {\r\n\t\tif (this.$cells[ind] !== view) {\r\n\t\t\treturn window.alert(\"Not implemented\");\r\n\t\t}\r\n\t\telse {\r\n\t\t\tind += this.$config.header ? 1 : 0;\r\n\t\t\tvar node = this.$view;\r\n\t\t\tif (ind >= node.childNodes.length) {\r\n\t\t\t\tnode.appendChild(view.$view);\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tnode.insertBefore(view.$view, node.childNodes[ind]);\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\tLayout.prototype._parseConfig = function (config) {\r\n\t\tthis.$cells = [];\r\n\t\tthis._xLayout = !config.rows;\r\n\t\tvar cells = config.rows || config.cols || config.views;\r\n\t\tfor (var i = 0; i < cells.length; i++) {\r\n\t\t\tvar cell = cells[i];\r\n\t\t\tcell.mode = this._xLayout ? \"x\" : \"y\";\r\n\t\t\tvar $content = this.$factory.initUI(cell);\r\n\t\t\tif(!$content){\r\n\t\t\t\tcells.splice(i, 1);\r\n\t\t\t\ti--;\r\n\t\t\t}else{\r\n\t\t\t\tthis.$cells.push($content);\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\tLayout.prototype.getCells = function () {\r\n\t\treturn this.$cells;\r\n\t};\r\n\tLayout.prototype.render = function () {\r\n\t\tvar view = domHelpers.insertNode(this.$container, this.$toHTML());\r\n\t\tthis.$fill(view, null);\r\n\t\tthis.callEvent(\"onReady\", []);\r\n\t\tthis.resize();\r\n\r\n\t\t// do simple repaint after the first call\r\n\t\tthis.render = this.resize;\r\n\t};\r\n\tLayout.prototype.$fill = function (node, parent) {\r\n\t\tthis.$view = node;\r\n\t\tthis.$parent = parent;\r\n\t\tvar cells = domHelpers.getChildNodes(node, \"gantt_layout_cell\");\r\n\t\tfor (var i = cells.length - 1; i >= 0; i--) {\r\n\t\t\tvar sub = this.$cells[i];\r\n\t\t\tsub.$fill(cells[i], this);\r\n\t\t\t// initially hidden cell\r\n\t\t\tif (sub.$config.hidden) {\r\n\t\t\t\tsub.$view.parentNode.removeChild(sub.$view);\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\tLayout.prototype.$toHTML = function () {\r\n\t\tvar mode = this._xLayout ? \"x\" : \"y\";\r\n\t\tvar html = [];\r\n\t\tfor (var i = 0; i < this.$cells.length; i++) {\r\n\t\t\thtml.push(this.$cells[i].$toHTML());\r\n\t\t}\r\n\t\treturn _super.prototype.$toHTML.call(this, html.join(\"\"), (this.$root ? \"gantt_layout_root \" : \"\") + \"gantt_layout gantt_layout_\" + mode);\r\n\t};\r\n\r\n\tLayout.prototype.getContentSize = function(){\r\n\t\tvar contentWidth = 0,\r\n\t\t\tcontentHeight = 0;\r\n\r\n\t\tvar cellSize, cell, borders;\r\n\t\tfor (var i = 0; i < this.$cells.length; i++) {\r\n\t\t\tcell = this.$cells[i];\r\n\t\t\tif(cell.$config.hidden)\r\n\t\t\t\tcontinue;\r\n\r\n\t\t\tcellSize = cell.getContentSize();\r\n\t\t\tborders = cell._getBorderSizes();\r\n\r\n\t\t\tif(this._xLayout){\r\n\t\t\t\tcontentWidth += (cellSize.width + borders.horizontal);\r\n\t\t\t\tcontentHeight = Math.max(contentHeight, (cellSize.height + borders.vertical));\r\n\t\t\t}else{\r\n\t\t\t\tcontentWidth = Math.max(contentWidth, cellSize.width + borders.horizontal);\r\n\t\t\t\tcontentHeight += cellSize.height + borders.vertical;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tborders = this._getBorderSizes();\r\n\t\tcontentWidth += borders.horizontal;\r\n\t\tcontentHeight += borders.vertical;\r\n\r\n\t\tif(this.$root){\r\n\t\t\tcontentWidth += 1;\r\n\t\t\tcontentHeight += 1;\r\n\t\t}\r\n\r\n\t\treturn {\r\n\t\t\twidth: contentWidth,\r\n\t\t\theight: contentHeight\r\n\t\t};\r\n\t};\r\n\r\n\tLayout.prototype._cleanElSize = function(value){\r\n\t\treturn ((value || \"\").toString().replace(\"px\", \"\") * 1 || 0);\r\n\t};\r\n\tLayout.prototype._getBoxStyles = function(div){\r\n\t\tvar computed = null;\r\n\t\tif(window.getComputedStyle){\r\n\t\t\tcomputed = window.getComputedStyle(div, null);\r\n\t\t}else{\r\n\t\t\t//IE with elem.currentStyle does not calculate sizes from %, so will use the default approach\r\n\t\t\tcomputed = {\r\n\t\t\t\t\"width\":div.clientWidth,\r\n\t\t\t\t\"height\":div.clientHeight\r\n\t\t\t};\r\n\t\t}\r\n\t\tvar properties = [\r\n\t\t\t\"width\",\r\n\t\t\t\"height\",\r\n\r\n\t\t\t\"paddingTop\",\r\n\t\t\t\"paddingBottom\",\r\n\t\t\t\"paddingLeft\",\r\n\t\t\t\"paddingRight\",\r\n\r\n\t\t\t\"borderLeftWidth\",\r\n\t\t\t\"borderRightWidth\",\r\n\t\t\t\"borderTopWidth\",\r\n\t\t\t\"borderBottomWidth\"\r\n\t\t];\r\n\t\tvar styles = {\r\n\t\t\tboxSizing:(computed.boxSizing == \"border-box\")\r\n\t\t};\r\n\r\n\t\tif(computed.MozBoxSizing){\r\n\t\t\tstyles.boxSizing = (computed.MozBoxSizing == \"border-box\");\r\n\t\t}\r\n\t\tfor(var i =0; i < properties.length; i++){\r\n\t\t\tstyles[properties[i]] = computed[properties[i]] ? this._cleanElSize(computed[properties[i]]) : 0;\r\n\t\t}\r\n\r\n\r\n\t\tvar box = {\r\n\t\t\thorPaddings : (styles.paddingLeft + styles.paddingRight + styles.borderLeftWidth + styles.borderRightWidth),\r\n\t\t\tvertPaddings : (styles.paddingTop + styles.paddingBottom + styles.borderTopWidth + styles.borderBottomWidth),\r\n\t\t\tborderBox: styles.boxSizing,\r\n\t\t\tinnerWidth : styles.width,\r\n\t\t\tinnerHeight : styles.height,\r\n\t\t\touterWidth : styles.width,\r\n\t\t\touterHeight : styles.height\r\n\t\t};\r\n\r\n\r\n\t\tif(box.borderBox){\r\n\t\t\tbox.innerWidth -= box.horPaddings;\r\n\t\t\tbox.innerHeight -= box.vertPaddings;\r\n\t\t}else{\r\n\t\t\tbox.outerWidth += box.horPaddings;\r\n\t\t\tbox.outerHeight += box.vertPaddings;\r\n\t\t}\r\n\r\n\t\treturn box;\r\n\t};\r\n\r\n\tLayout.prototype.autosize = function(mode) {\r\n\t\tvar res = {x:false, y:false};\r\n\t\tif(mode === \"xy\"){\r\n\t\t\tres.x = res.y = true;\r\n\t\t}else if(mode === \"y\" || mode === true){\r\n\t\t\tres.y = true;\r\n\t\t}else if(mode === \"x\"){\r\n\t\t\tres.x = true;\r\n\t\t}\r\n\t\tvar boxSizes = this._getBoxStyles(this.$container);\r\n\t\tvar contentSizes = this.getContentSize();\r\n\r\n\t\tvar node = this.$container;\r\n\t\tif(res.x){\r\n\t\t\tif(boxSizes.borderBox){\r\n\t\t\t\tcontentSizes.width += boxSizes.horPaddings;\r\n\t\t\t}\r\n\t\t\tnode.style.width = contentSizes.width + \"px\";\r\n\t\t}\r\n\t\tif(res.y){\r\n\t\t\tif(boxSizes.borderBox){\r\n\t\t\t\tcontentSizes.height += boxSizes.vertPaddings;\r\n\t\t\t}\r\n\t\t\tnode.style.height = contentSizes.height + \"px\";\r\n\t\t}\r\n\t};\r\n\r\n\tLayout.prototype.getSize = function () {\r\n\t\tthis._sizes = [];\r\n\t\tvar width = 0;\r\n\t\tvar minWidth = 0;\r\n\t\tvar maxWidth = 100000;\r\n\t\tvar height = 0;\r\n\t\tvar maxHeight = 100000;\r\n\t\tvar minHeight = 0;\r\n\r\n\t\tfor (var i = 0; i < this.$cells.length; i++) {\r\n\r\n\t\t\tvar size = this._sizes[i] = this.$cells[i].getSize();\r\n\t\t\tif (this.$cells[i].$config.hidden) {\r\n\t\t\t\tcontinue;\r\n\t\t\t}\r\n\t\t\tif (this._xLayout) {\r\n\t\t\t\tif (!size.width && size.minWidth) {\r\n\t\t\t\t\twidth += size.minWidth;\r\n\t\t\t\t}\r\n\t\t\t\telse {\r\n\t\t\t\t\twidth += size.width;\r\n\t\t\t\t}\r\n\t\t\t\tmaxWidth += size.maxWidth;\r\n\t\t\t\tminWidth += size.minWidth;\r\n\t\t\t\theight = Math.max(height, size.height);\r\n\t\t\t\tmaxHeight = Math.min(maxHeight, size.maxHeight); // min of maxHeight\r\n\t\t\t\tminHeight = Math.max(minHeight, size.minHeight); // max of minHeight\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tif (!size.height && size.minHeight) {\r\n\t\t\t\t\theight += size.minHeight;\r\n\t\t\t\t}\r\n\t\t\t\telse {\r\n\t\t\t\t\theight += size.height;\r\n\t\t\t\t}\r\n\t\t\t\tmaxHeight += size.maxHeight;\r\n\t\t\t\tminHeight += size.minHeight;\r\n\t\t\t\twidth = Math.max(width, size.width);\r\n\t\t\t\tmaxWidth = Math.min(maxWidth, size.maxWidth); // min of maxWidth\r\n\t\t\t\tminWidth = Math.max(minWidth, size.minWidth); // max of minWidth\r\n\t\t\t}\r\n\t\t}\r\n\t\tvar self = _super.prototype.getSize.call(this);\r\n\t\t// maxWidth\r\n\t\tif (self.maxWidth >= 100000) {\r\n\t\t\tself.maxWidth = maxWidth;\r\n\t\t}\r\n\t\t// maxHeight\r\n\t\tif (self.maxHeight >= 100000) {\r\n\t\t\tself.maxHeight = maxHeight;\r\n\t\t}\r\n\t\t// minWidth\r\n\t\tself.minWidth = self.minWidth !== self.minWidth ? 0 : self.minWidth;// || self.width || Math.max(minWidth, width);\r\n\t\t// minHeight\r\n\t\tself.minHeight = self.minHeight !== self.minHeight ? 0 : self.minHeight;//self.minHeight || self.height || Math.max(minHeight, height);\r\n\t\t// sizes with paddings and margins\r\n\t\tif (this._xLayout) {\r\n\t\t\tself.minWidth += this.$config.margin * (this.$cells.length) || 0;\r\n\t\t\tself.minWidth += this.$config.padding * 2 || 0;\r\n\t\t\tself.minHeight += (this.$config.padding * 2) || 0;\r\n\t\t}\r\n\t\telse {\r\n\t\t\tself.minHeight += this.$config.margin * (this.$cells.length) || 0;\r\n\t\t\tself.minHeight += (this.$config.padding * 2) || 0;\r\n\t\t}\r\n\t\t\r\n\t\treturn self;\r\n\t};\r\n\t// calc total gravity and free space\r\n\tLayout.prototype._calcFreeSpace = function (s, cell, xLayout) {\r\n\t\tvar min = xLayout ? cell.minWidth : cell.minHeight;\r\n\t\tvar max = xLayout ? cell.maxWidth : cell.maxWidth;\r\n\t\tvar side = s;\r\n\t\tif (!side) {\r\n\t\t\tside = Math.floor(this._free / this._gravity * cell.gravity);\r\n\t\t\tif (side > max) {\r\n\t\t\t\tside = max;\r\n\t\t\t\tthis._free -= side;\r\n\t\t\t\tthis._gravity -= cell.gravity;\r\n\t\t\t}\r\n\t\t\tif (side < min) {\r\n\t\t\t\tside = min;\r\n\t\t\t\tthis._free -= side;\r\n\t\t\t\tthis._gravity -= cell.gravity;\r\n\t\t\t}\r\n\t\t}\r\n\t\telse {\r\n\t\t\tif (side > max) {\r\n\t\t\t\tside = max;\r\n\t\t\t}\r\n\t\t\tif (side < min) {\r\n\t\t\t\tside = min;\r\n\t\t\t}\r\n\t\t\tthis._free -= side;\r\n\t\t}\r\n\t\treturn side;\r\n\t};\r\n\tLayout.prototype._calcSize = function (s, size, xLayout) {\r\n\t\tvar side = s;\r\n\t\tvar min = xLayout ? size.minWidth : size.minHeight;\r\n\t\tvar max = xLayout ? size.maxWidth : size.maxHeight;\r\n\t\tif (!side) {\r\n\t\t\tside = Math.floor(this._free / this._gravity * size.gravity);\r\n\t\t}\r\n\t\tif (side > max) {\r\n\t\t\tside = max;\r\n\t\t}\r\n\t\tif (side < min) {\r\n\t\t\tside = min;\r\n\t\t}\r\n\t\treturn side;\r\n\t};\r\n\r\n\tLayout.prototype._configureBorders = function(){\r\n\t\tif(this.$root){\r\n\t\t\tthis._setBorders([\r\n\t\t\t\tthis._borders.left,\r\n\t\t\t\tthis._borders.top,\r\n\t\t\t\tthis._borders.right,\r\n\t\t\t\tthis._borders.bottom\r\n\t\t\t],\r\n\t\t\tthis);\r\n\t\t}\r\n\r\n\t\tvar borderClass = this._xLayout ? this._borders.right : this._borders.bottom;\r\n\r\n\t\tvar cells = this.$cells;\r\n\r\n\t\tvar lastVisibleIndex = cells.length - 1;\r\n\t\tfor(var i = lastVisibleIndex; i >= 0; i--){\r\n\t\t\tif (!cells[i].$config.hidden) {\r\n\t\t\t\tlastVisibleIndex = i;\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tfor (var i = 0; i < cells.length; i++) {\r\n\t\t\tif (cells[i].$config.hidden) {\r\n\t\t\t\tcontinue;\r\n\t\t\t}\r\n\r\n\t\t\tvar lastCell = i >= lastVisibleIndex;\r\n\t\t\tthis._setBorders(lastCell ? [] : [borderClass], cells[i]);\r\n\t\t}\r\n\t};\r\n\r\n\tLayout.prototype._updateCellVisibility = function(){\r\n\t\tvar oldVisibleCells = this._visibleCells || {};\r\n\t\tvar firstCall = !this._visibleCells;\r\n\t\tvar visibleCells = {};\r\n\t\tvar cell;\r\n\t\tfor (var i = 0; i < this._sizes.length; i++) {\r\n\t\t\tcell = this.$cells[i];\r\n\r\n\t\t\tif (!firstCall && cell.$config.hidden && oldVisibleCells[cell.$id]) {\r\n\t\t\t\tcell._hide(true);\r\n\t\t\t}else if(!cell.$config.hidden && !oldVisibleCells[cell.$id]){\r\n\t\t\t\tcell._hide(false);\r\n\t\t\t}\r\n\r\n\t\t\tif(!cell.$config.hidden){\r\n\t\t\t\tvisibleCells[cell.$id] = true;\r\n\t\t\t}\r\n\t\t}\r\n\t\tthis._visibleCells = visibleCells;\r\n\t};\r\n\r\n\tLayout.prototype.setSize = function (x, y) {\r\n\t\tthis._configureBorders();\r\n\t\t_super.prototype.setSize.call(this, x, y);\r\n\t\ty = this.$lastSize.contentY;\r\n\t\tx = this.$lastSize.contentX;\r\n\r\n\t\tif(this.$root){\r\n\t\t\ty -= 1;\r\n\t\t\tx -= 1;\r\n\t\t}\r\n\t\tvar padding = (this.$config.padding || 0);\r\n\t\tthis.$view.style.padding = padding + \"px\";\r\n\t\tthis._gravity = 0;\r\n\t\tthis._free = this._xLayout ? x : y;\r\n\t\tthis._free -= padding * 2;\r\n\t\t// calc all gravity\r\n\r\n\t\tvar cell,\r\n\t\t\tsize;\r\n\r\n\t\tthis._updateCellVisibility();\r\n\r\n\t\tfor (var i = 0; i < this._sizes.length; i++) {\r\n\t\t\tcell = this.$cells[i];\r\n\r\n\t\t\tif (cell.$config.hidden) {\r\n\t\t\t\tcontinue;\r\n\t\t\t}\r\n\t\t\tvar margin = (this.$config.margin || 0);\r\n\t\t\tif(cell.$name == \"resizer\" && !margin){\r\n\t\t\t\tmargin = -1;\r\n\t\t\t}\r\n\r\n\t\t\t// set margins to child cell\r\n\t\t\tvar cellView = cell.$view;\r\n\r\n\t\t\tvar marginSide = this._xLayout ? \"marginRight\" : \"marginBottom\";\r\n\t\t\tif (i !== this.$cells.length - 1) {\r\n\t\t\t\tcellView.style[marginSide] = margin + \"px\";\r\n\t\t\t\tthis._free -= margin; // calc free space without margin\r\n\t\t\t}\r\n\t\t\tsize = this._sizes[i];\r\n\t\t\tif (this._xLayout) {\r\n\t\t\t\tif (!size.width) {\r\n\t\t\t\t\tthis._gravity += size.gravity;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tif (!size.height) {\r\n\t\t\t\t\tthis._gravity += size.gravity;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\tfor (var i = 0; i < this._sizes.length; i++) {\r\n\t\t\tcell = this.$cells[i];\r\n\r\n\t\t\tif (cell.$config.hidden) {\r\n\t\t\t\tcontinue;\r\n\t\t\t}\r\n\t\t\tsize = this._sizes[i];\r\n\t\t\tvar width = size.width;\r\n\t\t\tvar height = size.height;\r\n\t\t\tif (this._xLayout) {\r\n\t\t\t\tthis._calcFreeSpace(width, size, true);\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tthis._calcFreeSpace(height, size, false);\r\n\t\t\t}\r\n\t\t}\r\n\t\tfor (var i = 0; i < this.$cells.length; i++) {\r\n\t\t\tcell = this.$cells[i];\r\n\r\n\t\t\tif (cell.$config.hidden) {\r\n\t\t\t\tcontinue;\r\n\t\t\t}\r\n\t\t\tsize = this._sizes[i];\r\n\t\t\tvar dx = void 0;\r\n\t\t\tvar dy = void 0;\r\n\t\t\tif (this._xLayout) {\r\n\t\t\t\tdx = this._calcSize(size.width, size, true);\r\n\t\t\t\tdy = y - padding * 2; // layout height without paddings\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tdx = x - padding * 2; // layout width without paddings\r\n\t\t\t\tdy = this._calcSize(size.height, size, false);\r\n\t\t\t}\r\n\r\n\t\t\tcell.setSize(dx, dy);\r\n\t\t}\r\n\r\n\t\tif(this.$root && !this._updatingScrollbars){\r\n\t\t\tthis._updatingScrollbars = true;\r\n\t\t\teachCell(function(cell){\r\n\t\t\t\tif(cell.$content && cell.$content.$name == \"scroller\"){\r\n\t\t\t\t\tcell.$content.toggleVisibility();\r\n\t\t\t\t}\r\n\t\t\t}, this);\r\n\t\t\tthis._updatingScrollbars = false;\r\n\t\t}\r\n\r\n\t};\r\n\r\n\tfunction eachCell(code, root){\r\n\t\tif(root.$cells){\r\n\t\t\tfor(var i = 0; i < root.$cells.length; i++){\r\n\t\t\t\tcode(root.$cells[i]);\r\n\t\t\t\teachCell(code, root.$cells[i]);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\r\n\treturn Layout;\r\n}(Cell));\r\n\r\nmodule.exports = Layout;\n\n/***/ }),\n/* 7 */\n/***/ (function(module, exports) {\n\nfunction checkTimeout(host, updPerSecond){\r\n\tif(!updPerSecond)\r\n\t\treturn true;\r\n\tvar timeout = 1000/updPerSecond;\r\n\tif(timeout < 1) return true;\r\n\r\n\tif(host._on_timeout)\r\n\t\treturn false;\r\n\r\n\tsetTimeout(function(){\r\n\t\tdelete host._on_timeout;\r\n\t}, timeout);\r\n\r\n\thost._on_timeout = true;\r\n\treturn true;\r\n}\r\n\r\nmodule.exports = checkTimeout;\n\n/***/ }),\n/* 8 */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar utils = __webpack_require__(0);\r\n\r\nvar uiFactory = function createFactory(gantt){\r\n\tvar views = {\r\n\t\t\"layout\": __webpack_require__(6),\r\n\t\t\"multiview\": __webpack_require__(9),\r\n\t\t\"viewcell\": __webpack_require__(10),\r\n\t\t\"resizer\": __webpack_require__(11),\r\n\t\t\"cell\": __webpack_require__(3)\r\n\t};\r\n\r\n\tfunction ui(cell) {\r\n\t\tvar content;\r\n\r\n\t\tif (cell.view){\r\n\t\t\tcontent = createView.call(this, \"viewcell\", null, cell);\r\n\t\t}else if (cell.resizer) {\r\n\t\t\tcontent = createView.call(this, \"resizer\", null, cell);\r\n\t\t}\r\n\t\telse if (cell.rows || cell.cols) {\r\n\t\t\tcontent = createView.call(this, \"layout\", null, cell);\r\n\t\t}\r\n\t\telse if (cell.views) {\r\n\t\t\tcontent = createView.call(this, \"multiview\", null, cell);\r\n\t\t}\r\n\t\telse {\r\n\t\t\tcontent = createView.call(this, \"cell\", null, cell);\r\n\t\t}\r\n\t\treturn content;\r\n\t}\r\n\t\r\n\tvar createdViews = {};\r\n\r\n\tfunction createView(name, parent, config) {\r\n\t\tvar creator = views[name];\r\n\r\n\t\tif(!creator || !creator.create)\r\n\t\t\treturn false;\r\n\r\n\t\tvar config = utils.copy(config);\r\n\t\tif(config.id && !config.css){\r\n\t\t\tconfig.css = config.id+\"_cell\";\r\n\t\t}\r\n\r\n\t\tvar view = new creator.create(parent, config, this, gantt);\r\n\r\n\t\tif(creator.configure){\r\n\t\t\tcreator.configure(view);\r\n\t\t}\r\n\r\n\t\tif(!view.$id){\r\n\t\t\tview.$id = config.id || gantt.uid();\r\n\t\t}\r\n\r\n\t\tif(!view.$parent && typeof parent == \"object\"){\r\n\t\t\tview.$parent = parent;\r\n\t\t}\r\n\t\tif(!view.$config){\r\n\t\t\tview.$config = config;\r\n\t\t}\r\n\r\n\t\tif(createdViews[view.$id]){\r\n\t\t\tview.$id = gantt.uid();\r\n\t\t}\r\n\r\n\t\tcreatedViews[view.$id] = view;\r\n\r\n\t\treturn view;\r\n\t}\r\n\r\n\tfunction reset(){\r\n\t\tcreatedViews = {};\r\n\t}\r\n\r\n\tfunction register(name, viewConstructor, configure){\r\n\t\tviews[name] = {create: viewConstructor, configure: configure};\r\n\t}\r\n\r\n\tfunction getView(id){\r\n\t\treturn createdViews[id];\r\n\t}\r\n\r\n\tvar factory = {\r\n\t\tinitUI:ui,\r\n\t\treset: reset,\r\n\t\tregisterView: register,\r\n\t\tcreateView: createView,\r\n\t\tgetView: getView\r\n\t};\r\n\r\n\treturn factory;\r\n};\r\n\r\nmodule.exports = {\r\n\tcreateFactory: uiFactory\r\n};\r\n\r\n\n\n/***/ }),\n/* 9 */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar __extends = __webpack_require__(4),\r\n\tLayout = __webpack_require__(6),\r\n\tCell = __webpack_require__(3);\r\n\r\nvar ViewLayout = (function (_super) {\r\n\t\"use strict\";\r\n\r\n\t__extends(ViewLayout, _super);\r\n\tfunction ViewLayout(parent, config, factory) {\r\n\t\tvar _this = _super.apply(this, arguments) || this;\r\n\t\tfor (var i = 0; i < _this.$cells.length; i++) {\r\n\t\t\t_this.$cells[i].$config.hidden = (i !== 0);\r\n\t\t}\r\n\t\t_this.$cell = _this.$cells[0];\r\n\t\treturn _this;\r\n\t}\r\n\tViewLayout.prototype.cell = function (id) {\r\n\t\tvar cell = _super.prototype.cell.call(this, id);\r\n\t\tif (!cell.$view) {\r\n\t\t\tthis.$fill(null, this);\r\n\t\t}\r\n\t\treturn cell;\r\n\t};\r\n\tViewLayout.prototype.moveView = function (view) {\r\n\t\tvar body = this.$view;\r\n\t\tif (this.$cell) {\r\n\t\t\tthis.$cell.$config.hidden = true;\r\n\t\t\tbody.removeChild(this.$cell.$view);\r\n\t\t}\r\n\t\tthis.$cell = view;\r\n\t\tbody.appendChild(view.$view);\r\n\t};\r\n\tViewLayout.prototype.setSize = function (x, y) {\r\n\t\tCell.prototype.setSize.call(this, x, y);\r\n\t\tvar size = this.$lastSize;\r\n\t\tthis.$cell.setSize(size.contentX, size.contentY);\r\n\t};\r\n\tViewLayout.prototype.getSize = function () {\r\n\t\tvar sizes = _super.prototype.getSize.call(this);\r\n\t\tif (this.$cell) {\r\n\t\t\tvar cellSize = this.$cell.getSize();\r\n\t\t\tif (this.$config.byMaxSize) {\r\n\t\t\t\tfor (var i = 0; i < this.$cells.length; i++) {\r\n\t\t\t\t\tvar otherCell = this.$cells[i].getSize();\r\n\t\t\t\t\tfor (var cell in cellSize) {\r\n\t\t\t\t\t\tcellSize[cell] = Math.max(cellSize[cell], otherCell[cell]);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tfor (var size in sizes) {\r\n\t\t\t\tsizes[size] = sizes[size] || cellSize[size];\r\n\t\t\t}\r\n\t\t\tsizes.gravity = Math.max(sizes.gravity, cellSize.gravity);\r\n\t\t}\r\n\t\treturn sizes;\r\n\t};\r\n\treturn ViewLayout;\r\n}(Layout));\r\n\r\nmodule.exports = ViewLayout;\n\n/***/ }),\n/* 10 */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar __extends = __webpack_require__(4),\r\n\tutils = __webpack_require__(0),\r\n\tfactory = __webpack_require__(8),\r\n\tCell = __webpack_require__(3);\r\n\r\nvar ViewCell = (function (_super) {\r\n\t\"use strict\";\r\n\r\n\t__extends(ViewCell, _super);\r\n\tfunction ViewCell(parent, config, factory) {\r\n\r\n\t\tvar _this = _super.apply(this, arguments) || this;\r\n\r\n\t\tif(config.view){\r\n\t\t\tif(config.id){\r\n\t\t\t\t// pass id to the nested view\r\n\t\t\t\tthis.$id = utils.uid();\r\n\t\t\t}\r\n\t\t\tthis.$content = this.$factory.createView(config.view, this, config);\r\n\t\t\tif(!this.$content)\r\n\t\t\t\treturn false;\r\n\t\t}\r\n\r\n\t\treturn _this;\r\n\t}\r\n\r\n\tViewCell.prototype.destructor = function(){\r\n\t\tthis.clear();\r\n\t\t_super.prototype.destructor.call(this);\r\n\t};\r\n\r\n\tViewCell.prototype.clear = function(){\r\n\r\n\t\tthis.$initialized = false;\r\n\r\n\t\t// call destructor\r\n\t\tif (this.$content){\r\n\t\t\tvar method = this.$content.unload || this.$content.destructor;\r\n\t\t\tif (method){\r\n\t\t\t\tmethod.call(this.$content);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t_super.prototype.clear.call(this);\r\n\r\n\t};\r\n\r\n\tViewCell.prototype.scrollTo = function(left, top){\r\n\r\n\t\tif(this.$content && this.$content.scrollTo){\r\n\t\t\tthis.$content.scrollTo(left, top);\r\n\t\t}else{\r\n\t\t\t_super.prototype.scrollTo.call(this, left, top);\r\n\t\t}\r\n\t};\r\n\r\n\tViewCell.prototype._setContentSize = function(x, y){\r\n\t\tvar borders = this._getBorderSizes();\r\n\t\tvar outerX = x + borders.horizontal;\r\n\t\tvar outerY = y + borders.vertical;\r\n\t\tthis.$config.width = outerX;\r\n\t\tthis.$config.height = outerY;\r\n\t};\r\n\r\n\tViewCell.prototype.setSize = function(x, y){\r\n\t\t_super.prototype.setSize.call(this, x, y);\r\n\r\n\t\tif(!this.$preResize && this.$content) {\r\n\t\t\tif (!this.$initialized) {\r\n\t\t\t\tthis.$initialized = true;\r\n\t\t\t\tvar header = this.$view.childNodes[0];\r\n\t\t\t\tvar content = this.$view.childNodes[1];\r\n\t\t\t\tif(!content) content = header;\r\n\r\n\t\t\t\t/*if(this.$content.$config){\r\n\t\t\t\t\tthis.$content.$config.width = this.$lastSize.contentX;\r\n\t\t\t\t\tthis.$content.$config.height = this.$lastSize.contentY;\r\n\t\t\t\t}*/\r\n\t\t\t\tthis.$content.init(content);\r\n\t\t\t} else {\r\n\t\t\t\tthis.$content.setSize(this.$lastSize.contentX, this.$lastSize.contentY);\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\r\n\tViewCell.prototype.getContentSize = function(){\r\n\t\tvar size = _super.prototype.getContentSize.call(this);\r\n\r\n\t\tif(this.$content && this.$initialized){\r\n\t\t\tvar childSize = this.$content.getSize();\r\n\t\t\tsize.width = childSize.contentX === undefined ? childSize.width : childSize.contentX;\r\n\t\t\tsize.height = childSize.contentY === undefined ? childSize.height : childSize.contentY;\r\n\t\t}\r\n\r\n\t\tvar borders = this._getBorderSizes();\r\n\t\tsize.width += borders.horizontal;\r\n\t\tsize.height += borders.vertical;\r\n\r\n\t\treturn size;\r\n\t};\r\n\r\n\treturn ViewCell;\r\n}(Cell));\r\n\r\nmodule.exports = ViewCell;\n\n/***/ }),\n/* 11 */\n/***/ (function(module, exports) {\n\nmodule.exports = null;\n\n/***/ }),\n/* 12 */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar utils = __webpack_require__(0);\r\n\r\nfunction ScaleHelper(gantt){\r\n\tvar dateHelper = gantt.date;\r\n\tvar services = gantt.$services;\r\n\r\n\treturn {\r\n\t\tgetSum: function (sizes, from, to) {\r\n\t\t\tif (to === undefined)\r\n\t\t\t\tto = sizes.length - 1;\r\n\t\t\tif (from === undefined)\r\n\t\t\t\tfrom = 0;\r\n\r\n\t\t\tvar summ = 0;\r\n\t\t\tfor (var i = from; i <= to; i++)\r\n\t\t\t\tsumm += sizes[i];\r\n\r\n\t\t\treturn summ;\r\n\t\t},\r\n\t\tsetSumWidth: function (sum_width, scale, from, to) {\r\n\t\t\tvar parts = scale.width;\r\n\r\n\t\t\tif (to === undefined)\r\n\t\t\t\tto = parts.length - 1;\r\n\t\t\tif (from === undefined)\r\n\t\t\t\tfrom = 0;\r\n\t\t\tvar length = to - from + 1;\r\n\r\n\t\t\tif (from > parts.length - 1 || length <= 0 || to > parts.length - 1)\r\n\t\t\t\treturn;\r\n\r\n\t\t\tvar oldWidth = this.getSum(parts, from, to);\r\n\r\n\t\t\tvar diff = sum_width - oldWidth;\r\n\r\n\t\t\tthis.adjustSize(diff, parts, from, to);\r\n\t\t\tthis.adjustSize(-diff, parts, to + 1);\r\n\r\n\t\t\tscale.full_width = this.getSum(parts);\r\n\t\t},\r\n\t\tsplitSize: function (width, count) {\r\n\t\t\tvar arr = [];\r\n\t\t\tfor (var i = 0; i < count; i++) arr[i] = 0;\r\n\r\n\t\t\tthis.adjustSize(width, arr);\r\n\t\t\treturn arr;\r\n\r\n\t\t},\r\n\t\tadjustSize: function (width, parts, from, to) {\r\n\t\t\tif (!from)\r\n\t\t\t\tfrom = 0;\r\n\t\t\tif (to === undefined)\r\n\t\t\t\tto = parts.length - 1;\r\n\r\n\t\t\tvar length = to - from + 1;\r\n\r\n\t\t\tvar full = this.getSum(parts, from, to);\r\n\r\n\t\t\tvar shared = 0;\r\n\r\n\t\t\tfor (var i = from; i <= to; i++) {\r\n\t\t\t\tvar share = Math.floor(width * (full ? (parts[i] / full) : (1 / length)));\r\n\r\n\t\t\t\tfull -= parts[i];\r\n\t\t\t\twidth -= share;\r\n\t\t\t\tlength--;\r\n\r\n\t\t\t\tparts[i] += share;\r\n\t\t\t\tshared += share;\r\n\t\t\t}\r\n\t\t\tparts[parts.length - 1] += width;\r\n\t\t\t//parts[parts.length - 1] += width - shared;\r\n\t\t},\r\n\t\tsortScales: function (scales) {\r\n\t\t\tfunction cellSize(unit, step) {\r\n\t\t\t\tvar d = new Date(1970, 0, 1);\r\n\t\t\t\treturn dateHelper.add(d, step, unit) - d;\r\n\t\t\t}\r\n\r\n\t\t\tscales.sort(function (a, b) {\r\n\t\t\t\tif (cellSize(a.unit, a.step) < cellSize(b.unit, b.step)) {\r\n\t\t\t\t\treturn 1;\r\n\t\t\t\t} else if (cellSize(a.unit, a.step) > cellSize(b.unit, b.step)) {\r\n\t\t\t\t\treturn -1;\r\n\t\t\t\t} else {\r\n\t\t\t\t\treturn 0;\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\tfor (var i = 0; i < scales.length; i++) {\r\n\t\t\t\tscales[i].index = i;\r\n\t\t\t}\r\n\t\t},\r\n\t\tprimaryScale: function () {\r\n\r\n\t\t\tvar config = services.getService(\"templateLoader\");\r\n\t\t\tconfig.initTemplate(\"date_scale\", undefined, undefined, services.config(), services.templates());\r\n\r\n\t\t\treturn {\r\n\t\t\t\tunit: services.config().scale_unit,\r\n\t\t\t\tstep: services.config().step,\r\n\t\t\t\ttemplate: services.templates().date_scale,\r\n\t\t\t\tdate: services.config().date_scale,\r\n\t\t\t\tcss: services.templates().scale_cell_class\r\n\t\t\t};\r\n\t\t},\r\n\r\n\t\tprepareConfigs: function (scales, min_coll_width, container_width, scale_height, minDate, maxDate) {\r\n\t\t\tvar heights = this.splitSize(scale_height, scales.length);\r\n\t\t\tvar full_width = container_width;\r\n\r\n\t\t\tvar configs = [];\r\n\t\t\tfor (var i = scales.length - 1; i >= 0; i--) {\r\n\t\t\t\tvar main_scale = (i == scales.length - 1);\r\n\t\t\t\tvar cfg = this.initScaleConfig(scales[i], minDate, maxDate);\r\n\t\t\t\tif (main_scale) {\r\n\t\t\t\t\tthis.processIgnores(cfg);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tthis.initColSizes(cfg, min_coll_width, full_width, heights[i]);\r\n\t\t\t\tthis.limitVisibleRange(cfg);\r\n\r\n\t\t\t\tif (main_scale) {\r\n\t\t\t\t\tfull_width = cfg.full_width;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tconfigs.unshift(cfg);\r\n\t\t\t}\r\n\r\n\r\n\t\t\tfor (var i = 0; i < configs.length - 1; i++) {\r\n\t\t\t\tthis.alineScaleColumns(configs[configs.length - 1], configs[i]);\r\n\t\t\t}\r\n\t\t\tfor (var i = 0; i < configs.length; i++) {\r\n\t\t\t\tthis.setPosSettings(configs[i]);\r\n\t\t\t}\r\n\t\t\treturn configs;\r\n\r\n\t\t},\r\n\t\tsetPosSettings: function (config) {\r\n\t\t\tfor (var i = 0, len = config.trace_x.length; i < len; i++) {\r\n\t\t\t\tconfig.left.push((config.width[i - 1] || 0) + (config.left[i - 1] || 0));\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\t_ignore_time_config: function (date, scale) {\r\n\r\n\t\t\tif (services.config().skip_off_time) {\r\n\t\t\t\tvar skip = true;\r\n\t\t\t\tvar probe = date;\r\n\r\n\t\t\t\t// check dates in case custom scale unit, e.g. {unit: \"month\", step: 3}\r\n\t\t\t\tfor (var i = 0; i < scale.step; i++) {\r\n\t\t\t\t\tif (i) {\r\n\t\t\t\t\t\tprobe = dateHelper.add(date, i, scale.unit);\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tskip = skip && !this.isWorkTime(probe, scale.unit);\r\n\t\t\t\t}\r\n\r\n\t\t\t\treturn skip;\r\n\t\t\t}\r\n\t\t\treturn false;\r\n\t\t},\r\n\t\t//defined in an extension\r\n\t\tprocessIgnores: function (config) {\r\n\t\t\tconfig.ignore_x = {};\r\n\t\t\tconfig.display_count = config.count;\r\n\t\t},\r\n\t\tinitColSizes: function (config, min_col_width, full_width, line_height) {\r\n\t\t\tvar cont_width = full_width;\r\n\r\n\t\t\tconfig.height = line_height;\r\n\r\n\t\t\tvar column_count = config.display_count === undefined ? config.count : config.display_count;\r\n\r\n\t\t\tif (!column_count)\r\n\t\t\t\tcolumn_count = 1;\r\n\r\n\t\t\tconfig.col_width = Math.floor(cont_width / column_count);\r\n\r\n\t\t\tif (min_col_width) {\r\n\t\t\t\tif (config.col_width < min_col_width) {\r\n\t\t\t\t\tconfig.col_width = min_col_width;\r\n\t\t\t\t\tcont_width = config.col_width * column_count;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tconfig.width = [];\r\n\t\t\tvar ignores = config.ignore_x || {};\r\n\t\t\tfor (var i = 0; i < config.trace_x.length; i++) {\r\n\t\t\t\tif (ignores[config.trace_x[i].valueOf()] || (config.display_count == config.count)) {\r\n\t\t\t\t\tconfig.width[i] = 0;\r\n\t\t\t\t} else {\r\n\t\t\t\t\t// width of month columns should be proportional month duration\r\n\t\t\t\t\tvar width = 1;\r\n\t\t\t\t\tif (config.unit == \"month\") {\r\n\t\t\t\t\t\tvar days = Math.round((dateHelper.add(config.trace_x[i], config.step, config.unit) - config.trace_x[i]) / (1000 * 60 * 60 * 24));\r\n\t\t\t\t\t\twidth = days;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tconfig.width[i] = width;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tthis.adjustSize(cont_width - this.getSum(config.width)/* 1 width per column from the code above */, config.width);\r\n\t\t\tconfig.full_width = this.getSum(config.width);\r\n\t\t},\r\n\t\tinitScaleConfig: function (config, min_date, max_date) {\r\n\t\t\tvar cfg = utils.mixin({\r\n\t\t\t\tcount: 0,\r\n\t\t\t\tcol_width: 0,\r\n\t\t\t\tfull_width: 0,\r\n\t\t\t\theight: 0,\r\n\t\t\t\twidth: [],\r\n\t\t\t\tleft: [],\r\n\t\t\t\ttrace_x: [],\r\n\t\t\t\ttrace_indexes: {},\r\n\t\t\t\tmin_date: new Date(min_date),\r\n\t\t\t\tmax_date: new Date(max_date)\r\n\t\t\t}, config);\r\n\r\n\t\t\tthis.eachColumn(config.unit, config.step, min_date, max_date, function (date) {\r\n\t\t\t\tcfg.count++;\r\n\t\t\t\tcfg.trace_x.push(new Date(date));\r\n\t\t\t\tcfg.trace_indexes[date.valueOf()] = cfg.trace_x.length - 1;\r\n\t\t\t});\r\n\r\n\t\t\treturn cfg;\r\n\t\t},\r\n\t\titerateScales: function (lower_scale, upper_scale, from, to, callback) {\r\n\t\t\tvar upper_dates = upper_scale.trace_x;\r\n\t\t\tvar lower_dates = lower_scale.trace_x;\r\n\r\n\t\t\tvar prev = from || 0;\r\n\t\t\tvar end = to || (lower_dates.length - 1);\r\n\t\t\tvar prevUpper = 0;\r\n\r\n\r\n\t\t\tfor (var up = 1; up < upper_dates.length; up++) {\r\n\t\t\t\tvar target_index = (lower_scale.trace_indexes[+upper_dates[up]]);\r\n\t\t\t\tif (target_index !== undefined && target_index <= end) {\r\n\t\t\t\t\tif (callback) {\r\n\t\t\t\t\t\tcallback.apply(this, [prevUpper, up, prev, target_index]);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tprev = target_index;\r\n\t\t\t\t\tprevUpper = up;\r\n\t\t\t\t\tcontinue;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\talineScaleColumns: function (lower_scale, upper_scale, from, to) {\r\n\t\t\tthis.iterateScales(lower_scale, upper_scale, from, to, function (upper_start, upper_end, lower_start, lower_end) {\r\n\t\t\t\tvar targetWidth = this.getSum(lower_scale.width, lower_start, lower_end - 1);\r\n\t\t\t\tvar actualWidth = this.getSum(upper_scale.width, upper_start, upper_end - 1);\r\n\t\t\t\tif (actualWidth != targetWidth) {\r\n\t\t\t\t\tthis.setSumWidth(targetWidth, upper_scale, upper_start, upper_end - 1);\r\n\t\t\t\t}\r\n\r\n\t\t\t});\r\n\t\t},\r\n\r\n\t\teachColumn: function (unit, step, min_date, max_date, callback) {\r\n\t\t\tvar start = new Date(min_date),\r\n\t\t\t\tend = new Date(max_date);\r\n\t\t\tif (dateHelper[unit + \"_start\"]) {\r\n\t\t\t\tstart = dateHelper[unit + \"_start\"](start);\r\n\t\t\t}\r\n\r\n\t\t\tvar curr = new Date(start);\r\n\t\t\tif (+curr >= +end) {\r\n\t\t\t\tend = dateHelper.add(curr, step, unit);\r\n\t\t\t}\r\n\t\t\twhile (+curr < +end) {\r\n\t\t\t\tcallback.call(this, new Date(curr));\r\n\t\t\t\tvar tzOffset = curr.getTimezoneOffset();\r\n\t\t\t\tcurr = dateHelper.add(curr, step, unit);\r\n\t\t\t\tcurr = gantt._correct_dst_change(curr, tzOffset, step, unit);\r\n\t\t\t\tif (dateHelper[unit + '_start'])\r\n\t\t\t\t\tcurr = dateHelper[unit + \"_start\"](curr);\r\n\t\t\t}\r\n\t\t},\r\n\t\tlimitVisibleRange: function (cfg) {\r\n\t\t\tvar dates = cfg.trace_x;\r\n\r\n\t\t\tvar left = 0, right = cfg.width.length - 1;\r\n\t\t\tvar diff = 0;\r\n\t\t\tif (+dates[0] < +cfg.min_date && left != right) {\r\n\t\t\t\tvar width = Math.floor(cfg.width[0] * ((dates[1] - cfg.min_date) / (dates[1] - dates[0])));\r\n\t\t\t\tdiff += cfg.width[0] - width;\r\n\t\t\t\tcfg.width[0] = width;\r\n\r\n\t\t\t\tdates[0] = new Date(cfg.min_date);\r\n\t\t\t}\r\n\r\n\t\t\tvar last = dates.length - 1;\r\n\t\t\tvar lastDate = dates[last];\r\n\t\t\tvar outDate = dateHelper.add(lastDate, cfg.step, cfg.unit);\r\n\t\t\tif (+outDate > +cfg.max_date && last > 0) {\r\n\t\t\t\tvar width = cfg.width[last] - Math.floor(cfg.width[last] * ((outDate - cfg.max_date) / (outDate - lastDate)));\r\n\t\t\t\tdiff += cfg.width[last] - width;\r\n\t\t\t\tcfg.width[last] = width;\r\n\t\t\t}\r\n\r\n\t\t\tif (diff) {\r\n\t\t\t\tvar full = this.getSum(cfg.width);\r\n\t\t\t\tvar shared = 0;\r\n\t\t\t\tfor (var i = 0; i < cfg.width.length; i++) {\r\n\t\t\t\t\tvar share = Math.floor(diff * (cfg.width[i] / full));\r\n\t\t\t\t\tcfg.width[i] += share;\r\n\t\t\t\t\tshared += share;\r\n\t\t\t\t}\r\n\t\t\t\tthis.adjustSize(diff - shared, cfg.width);\r\n\t\t\t}\r\n\r\n\t\t}\r\n\t};\r\n}\r\n\r\nmodule.exports = ScaleHelper;\r\n\n\n/***/ }),\n/* 13 */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar utils = __webpack_require__(0);\r\n\r\nvar configurable = function(){\r\n\treturn {\r\n\t\t$getConfig: function(){\r\n\t\t\tvar own = this.$config.config;\r\n\t\t\tvar global = this.$gantt.config;\r\n\t\t\tif(own){\r\n\t\t\t\treturn utils.mixin(own, global);\r\n\t\t\t}else{\r\n\t\t\t\treturn global;\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n};\r\n\r\nmodule.exports = function(obj){\r\n\tutils.mixin(obj, configurable());\r\n};\n\n/***/ }),\n/* 14 */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar powerArray = __webpack_require__(15);\r\nvar utils = __webpack_require__(0);\r\nvar eventable = __webpack_require__(2);\r\n\r\nvar DataStore = function(config){\r\n\tthis.pull = {};\r\n\tthis.$initItem = config.initItem;\r\n\tthis.visibleOrder = powerArray.$create();\r\n\tthis.fullOrder = powerArray.$create();\r\n\tthis._skip_refresh = false;\r\n\tthis._filterRule = null;\r\n\tthis._searchVisibleOrder = {};\r\n\teventable(this);\r\n\treturn this;\r\n};\r\nDataStore.prototype = {\r\n\r\n\t_parseInner: function(data){\r\n\t\tvar item = null,\r\n\t\t\tloaded = [];\r\n\t\tfor(var i = 0, len = data.length; i< len; i++){\r\n\t\t\titem = data[i];\r\n\t\t\tif(this.$initItem){\r\n\t\t\t\titem = this.$initItem(item);\r\n\t\t\t}\r\n\t\t\tif(this.callEvent(\"onItemLoading\", [item])){\r\n\t\t\t\tthis.pull[item.id] = item;\r\n\t\t\t\tthis.fullOrder.push(item.id);\r\n\t\t\t\tloaded.push(item);\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn loaded;\r\n\t},\r\n\tparse: function(data){\r\n\t\tthis.callEvent(\"onBeforeParse\", [data]);\r\n\t\tvar loaded = this._parseInner(data);\r\n\t\tthis.refresh();\r\n\t\tthis.callEvent(\"onParse\", [loaded]);\r\n\t},\r\n\tgetItem: function(id){\r\n\t\treturn this.pull[id];\r\n\t},\r\n\r\n\t_updateOrder: function(code){\r\n\t\tcode.call(this.visibleOrder);\r\n\t\tcode.call(this.fullOrder);\r\n\t},\r\n\tupdateItem: function(id, item){\r\n\t\tif (!utils.defined(item)) item = this.getItem(id);\r\n\r\n\t\tif (!this._skip_refresh) {\r\n\t\t\tif (this.callEvent(\"onBeforeUpdate\", [id, item]) === false) return false;\r\n\t\t}\r\n\t\tthis.pull[id]=item;\r\n\t\tif (!this._skip_refresh) {\r\n\t\t\tthis.callEvent(\"onAfterUpdate\", [id, item]);\r\n\t\t\tthis.callEvent(\"onStoreUpdated\", [id, item, \"update\"]);\r\n\t\t}\r\n\t},\r\n\r\n\t_removeItemInner: function(id){\r\n\t\t//clear from collections\r\n\t\t//this.visibleOrder.$remove(id);\r\n\t\tthis._updateOrder(function(){ this.$remove(id);});\r\n\t\tdelete this.pull[id];\r\n\t},\r\n\r\n\tremoveItem: function(id){\r\n\t\t//utils.assert(this.exists(id), \"Not existing ID in remove command\"+id);\r\n\r\n\t\tvar obj = this.getItem(id);\t//save for later event\r\n\t\tif (!this._skip_refresh) {\r\n\t\t\tif (this.callEvent(\"onBeforeDelete\", [id, obj]) === false) return false;\r\n\t\t}\r\n\r\n\t\tthis._removeItemInner(id);\r\n\r\n\t\tif (!this._skip_refresh) {\r\n\t\t\tthis.filter();\r\n\t\t\tthis.callEvent(\"onAfterDelete\", [id, obj]);\r\n\t\t\t//repaint signal\r\n\t\t\tthis.callEvent(\"onStoreUpdated\", [id, obj, \"delete\"]);\r\n\t\t}\r\n\t},\r\n\r\n\t_addItemInner: function(item, index){\r\n\t\t//in case of treetable order is sent as 3rd parameter\r\n\t\t//var order = index;\r\n\r\n\t\tif(this.exists(item.id)){\r\n\t\t\tthis.silent(function(){this.updateItem(item.id, item);});\r\n\t\t}else{\r\n\t\t\tvar order = this.visibleOrder;\r\n\r\n\t\t\t//by default item is added to the end of the list\r\n\t\t\tvar data_size = order.length;\r\n\r\n\t\t\tif (!utils.defined(index) || index < 0)\r\n\t\t\t\tindex = data_size;\r\n\t\t\t//check to prevent too big indexes\r\n\t\t\tif (index > data_size){\r\n\t\t\t\t//dhx.log(\"Warning\",\"DataStore:add\",\"Index of out of bounds\");\r\n\t\t\t\tindex = Math.min(order.length,index);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\r\n\t\t//gantt.assert(!this.exists(id), \"Not unique ID\");\r\n\r\n\t\tthis.pull[item.id]=item;\r\n\t\tif (!this._skip_refresh){\r\n\t\t\tthis._updateOrder(function(){ this.$insertAt(item.id,index);});\r\n\t\t}\r\n\r\n\t\t//order.$insertAt(item.id,index);\r\n\t},\r\n\r\n\r\n\tisVisible: function(id){\r\n\t\treturn this.visibleOrder.$find(id) > -1;\r\n\t},\r\n\tgetVisibleItems: function(){\r\n\t\treturn this.getIndexRange();\r\n\t},\r\n\r\n\taddItem: function(item, index){\r\n\t\tif (!utils.defined(item.id))\r\n\t\t\titem.id = utils.uid();\r\n\r\n\r\n\t\tvar id = item.id;\r\n\r\n\t\tif(this.$initItem){\r\n\t\t\titem = this.$initItem(item);\r\n\t\t}\r\n\r\n\t\tif (!this._skip_refresh){\r\n\t\t\tif (this.callEvent(\"onBeforeAdd\", [id, item]) === false) return false;\r\n\t\t}\r\n\r\n\r\n\t\tthis._addItemInner(item, index);\r\n\r\n\t\tif (!this._skip_refresh){\r\n\t\t\tthis.callEvent(\"onAfterAdd\",[id, item]);\r\n\t\t\t//repaint signal\r\n\t\t\tthis.callEvent(\"onStoreUpdated\",[id,item,\"add\"]);\r\n\t\t}\r\n\t\treturn id;\r\n\t},\r\n\r\n\t_changeIdInner: function(oldId, newId){\r\n\t\tif(this.pull[oldId])\r\n\t\t\tthis.pull[newId] = this.pull[oldId];\r\n\r\n\t\tthis.pull[newId].id = newId;\r\n\t\tthis._updateOrder(function(){\r\n\t\t\tthis[this.$find(oldId)] = newId;\r\n\t\t});\r\n\t\tthis._searchVisibleOrder[newId] = this._searchVisibleOrder[oldId];\r\n\t\tdelete this._searchVisibleOrder[oldId];\r\n\r\n\t\t//this.visibleOrder[this.visibleOrder.$find(oldId)]=newId;\r\n\t\tdelete this.pull[oldId];\r\n\t},\r\n\tchangeId: function(oldId, newId){\r\n\t\tthis._changeIdInner(oldId, newId);\r\n\r\n\t\tthis.callEvent(\"onIdChange\", [oldId, newId]);\r\n\r\n\t},\r\n\texists: function(id){\r\n\t\treturn !!(this.pull[id]);\r\n\t},\r\n\r\n\t_moveInner: function(sindex, tindex){\r\n\t\tvar id = this.getIdByIndex(sindex);\r\n\r\n\t\tthis._updateOrder(function(){\r\n\t\t\tthis.$removeAt(sindex);\r\n\t\t\tthis.$insertAt(id,Math.min(this.length, tindex));\r\n\t\t});\r\n\t\t//this.visibleOrder.$removeAt(sindex);\t//remove at old position\r\n\t\t//if (sindex<tindex) tindex--;\t//correct shift, caused by element removing\r\n\t\t//this.visibleOrder.$insertAt(id,Math.min(this.visibleOrder.length, tindex));\t//insert at new position\r\n\t},\r\n\r\n\tmove: function(sindex, tindex){\r\n\t\t//gantt.assert(sindex>=0 && tindex>=0, \"DataStore::move\",\"Incorrect indexes\");\r\n\r\n\t\tvar id = this.getIdByIndex(sindex);\r\n\t\tvar obj = this.getItem(id);\r\n\t\tthis._moveInner(sindex, tindex);\r\n\r\n\r\n\t\tif (!this._skip_refresh) {\r\n\t\t\t//repaint signal\r\n\t\t\tthis.callEvent(\"onStoreUpdated\", [id, obj, \"move\"]);\r\n\t\t}\r\n\t},\r\n\tclearAll: function(){\r\n\t\tthis.pull = {};\r\n\t\tthis.visibleOrder = powerArray.$create();\r\n\t\tthis.fullOrder = powerArray.$create();\r\n\t\tif (this._skip_refresh) return;\r\n\t\tthis.callEvent(\"onClearAll\",[]);\r\n\t\tthis.refresh();\r\n\t},\r\n\r\n\tsilent:function(code, master){\r\n\t\tthis._skip_refresh = true;\r\n\t\tcode.call(master||this);\r\n\t\tthis._skip_refresh = false;\r\n\t},\r\n\r\n\trefresh: function(id){\r\n\t\tif (this._skip_refresh) return;\r\n\t\tthis.filter();\r\n\t\tif (id)\r\n\t\t\tthis.callEvent(\"onStoreUpdated\",[id, this.pull[id], \"paint\"]);\r\n\t\telse\r\n\t\t\tthis.callEvent(\"onStoreUpdated\",[null,null,null]);\r\n\t},\r\n\r\n\tcount: function(){\r\n\t\treturn this.fullOrder.length;\r\n\t},\r\n\tcountVisible: function(){\r\n\t\treturn this.visibleOrder.length;\r\n\t},\r\n\r\n\tsort: function(sort){},\r\n\r\n\tserialize: function(){},\r\n\r\n\teachItem: function(code){\r\n\t\tfor (var i=0; i<this.fullOrder.length; i++) {\r\n\t\t\tvar item = this.pull[this.fullOrder[i]];\r\n\t\t\tcode.call(this, item);\r\n\t\t}\r\n\t},\r\n\t\r\n\tfilter: function(rule){\r\n\t\tvar filteredOrder = powerArray.$create();\r\n\t\tthis.eachItem(function(item){\r\n\t\t\tif(this.callEvent(\"onFilterItem\", [item.id, item])){\r\n\t\t\t\tfilteredOrder.push(item.id);\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\tthis.visibleOrder = filteredOrder;\r\n\t\tthis._searchVisibleOrder = {};\r\n\t\tfor(var i = 0; i < this.visibleOrder.length; i++){\r\n\t\t\tthis._searchVisibleOrder[this.visibleOrder[i]] = i;\r\n\t\t}\r\n\t},\r\n\r\n\tgetIndexRange: function(from, to){\r\n\t\tto=Math.min((to||Infinity),this.countVisible()-1);\r\n\r\n\t\tvar ret= [];\r\n\t\tfor (var i=(from||0); i <= to; i++)\r\n\t\t\tret.push(this.getItem(this.visibleOrder[i]));\r\n\t\treturn ret;\r\n\t},\r\n\tgetItems: function(){\r\n\t\tvar res = [];\r\n\t\tfor(var i = 0; i < this.fullOrder.length; i++){\r\n\t\t\tres.push(this.pull[this.fullOrder[i]]);\r\n\t\t}\r\n\t\treturn res;\r\n\t},\r\n\r\n\tgetIdByIndex: function(index){\r\n\t\treturn this.visibleOrder[index];\r\n\t},\r\n\tgetIndexById: function(id){\r\n\t\tvar res = this._searchVisibleOrder[id];\r\n\t\tif(res === undefined){\r\n\t\t\tres = -1;\r\n\t\t}\r\n\t\treturn res;\r\n\t},\r\n\tgerFirst: function(){\r\n\t\treturn this.visibleOrder[0];\r\n\t},\r\n\tgetLast: function(){\r\n\t\treturn this.visibleOrder[this.visibleOrder.length-1];\r\n\t},\r\n\tgetNext: function(id){\r\n\t\treturn this.visibleOrder[this.getIndexById(id) + 1];\r\n\t},\r\n\tgetPrev: function(id){\r\n\t\treturn this.visibleOrder[this.getIndexById(id) - 1];\r\n\t}\r\n};\r\n\r\nmodule.exports = DataStore;\n\n/***/ }),\n/* 15 */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar utils = __webpack_require__(0);\r\n\r\nvar $powerArray  = {\r\n\t$create: function(array){\r\n\t\treturn utils.mixin(array || [], this);\r\n\t},\r\n\t//remove element at specified position\r\n\t$removeAt:function(pos,len){\r\n\t\tif (pos>=0) this.splice(pos,(len||1));\r\n\t},\r\n\t//find element in collection and remove it\r\n\t$remove:function(value){\r\n\t\tthis.$removeAt(this.$find(value));\r\n\t},\r\n\t//add element to collection at specific position\r\n\t$insertAt:function(data,pos){\r\n\t\tif (!pos && pos!==0) \t//add to the end by default\r\n\t\t\tthis.push(data);\r\n\t\telse {\r\n\t\t\tvar b = this.splice(pos,(this.length-pos));\r\n\t\t\tthis[pos] = data;\r\n\t\t\tthis.push.apply(this,b); //reconstruct array without loosing this pointer\r\n\t\t}\r\n\t},\r\n\t//return index of element, -1 if it doesn't exists\r\n\t$find:function(data){\r\n\t\tfor (var i=0; i<this.length; i++)\r\n\t\t\tif (data==this[i]) return i;\r\n\t\treturn -1;\r\n\t},\r\n\t//execute some method for each element of array\r\n\t$each:function(functor,master){\r\n\t\tfor (var i=0; i < this.length; i++)\r\n\t\t\tfunctor.call((master||this),this[i]);\r\n\t},\r\n\t//create new array from source, by using results of functor\r\n\t$map:function(functor,master){\r\n\t\tfor (var i=0; i < this.length; i++)\r\n\t\t\tthis[i]=functor.call((master||this),this[i]);\r\n\t\treturn this;\r\n\t},\r\n\t$filter:function(functor, master){\r\n\t\tfor (var i=0; i < this.length; i++)\r\n\t\t\tif (!functor.call((master||this),this[i])){\r\n\t\t\t\tthis.splice(i,1);\r\n\t\t\t\ti--;\r\n\t\t\t}\r\n\t\treturn this;\r\n\t}\r\n};\r\n\r\nmodule.exports = $powerArray;\n\n/***/ }),\n/* 16 */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar ScaleHelper = __webpack_require__(12);\r\n\r\n\r\nfunction dateRangeResolver(gantt){\r\n\t//reset project timing\r\n\t//_get_tasks_data(gantt);\r\n\treturn gantt.getSubtaskDates();\r\n}\r\n\r\nfunction defaultRangeResolver(){\r\n\treturn {\r\n\t\tstart_date: new Date(),\r\n\t\tend_date: new Date()\r\n\t};\r\n}\r\n\r\nfunction resolveConfigRange(unit, gantt){\r\n\tvar range = {\r\n\t\tstart_date:null,\r\n\t\tend_date:null\r\n\t};\r\n\r\n\tif (gantt.config.start_date && gantt.config.end_date) {\r\n\t\trange.start_date = gantt.date[unit + \"_start\"](new Date(gantt.config.start_date));\r\n\r\n\t\tvar end = new Date(gantt.config.end_date);\r\n\t\tvar start_interval = gantt.date[unit + \"_start\"](new Date(end));\r\n\t\tif (+end != +start_interval) {\r\n\t\t\tend = gantt.date.add(start_interval, 1, unit);\r\n\t\t} else {\r\n\t\t\tend = start_interval;\r\n\t\t}\r\n\r\n\t\trange.end_date = end;\r\n\t}\r\n\treturn range;\r\n}\r\n\r\nfunction _scale_range_unit(gantt) {\r\n\tvar unit = gantt.config.scale_unit;\r\n\tif (gantt.config.scale_offset_minimal) {\r\n\r\n\t\tvar helper = new ScaleHelper(gantt);\r\n\t\tvar scales = [helper.primaryScale()].concat(gantt.config.subscales);\r\n\r\n\t\thelper.sortScales(scales);\r\n\t\tunit = scales[scales.length - 1].unit;\r\n\t}\r\n\treturn unit;\r\n}\r\n\r\nfunction _init_tasks_range(gantt) {\r\n\tvar unit = _scale_range_unit(gantt);\r\n\tvar range = resolveConfigRange(unit, gantt);\r\n\r\n\tif(!(range.start_date && range.end_date)){\r\n\t\trange = dateRangeResolver(gantt);\r\n\t\tif(!range.start_date || !range.end_date){\r\n\t\t\trange = defaultRangeResolver(gantt);\r\n\t\t}\r\n\r\n\t\trange.start_date = gantt.date[unit + \"_start\"](range.start_date);\r\n\t\trange.start_date = gantt.calculateEndDate({\r\n\t\t\tstart_date: gantt.date[unit + \"_start\"](range.start_date),\r\n\t\t\tduration: -1,\r\n\t\t\tunit: unit\r\n\t\t});//one free column before first task\r\n\r\n\t\trange.end_date = gantt.date[unit + \"_start\"](range.end_date);\r\n\t\trange.end_date = gantt.calculateEndDate({start_date: range.end_date, duration: 2, unit: unit});//one free column after last task\r\n\t}\r\n\r\n\tgantt._min_date = range.start_date;\r\n\tgantt._max_date = range.end_date;\r\n}\r\n\r\nfunction _adjust_scales(gantt) {\r\n\tif (gantt.config.fit_tasks) {\r\n\t\tvar old_min = +gantt._min_date,\r\n\t\t\told_max = +gantt._max_date;\r\n\t\t//this._init_tasks_range();\r\n\t\tif (+gantt._min_date != old_min || +gantt._max_date != old_max) {\r\n\t\t\tgantt.render();\r\n\r\n\t\t\tgantt.callEvent(\"onScaleAdjusted\", []);\r\n\t\t\treturn true;\r\n\t\t}\r\n\t}\r\n\treturn false;\r\n}\r\n\r\nmodule.exports = function updateTasksRange(gantt){\r\n\t_init_tasks_range(gantt);\r\n\t_adjust_scales(gantt);\r\n};\r\n\n\n/***/ }),\n/* 17 */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar utils = __webpack_require__(0);\r\n\r\nvar calendarArgumentsHelper = function(gantt){\r\n\treturn {\r\n\t\tgetWorkHoursArguments: function () {\r\n\t\t\tvar config = arguments[0];\r\n\t\t\tif (config instanceof Date) {\r\n\t\t\t\tconfig = {\r\n\t\t\t\t\tdate: config\r\n\t\t\t\t};\r\n\t\t\t} else {\r\n\t\t\t\tconfig = utils.mixin({}, config);\r\n\t\t\t}\r\n\t\t\treturn config;\r\n\t\t},\r\n\t\tsetWorkTimeArguments: function () {\r\n\t\t\treturn arguments[0];\r\n\t\t},\r\n\t\tunsetWorkTimeArguments: function () {\r\n\t\t\treturn arguments[0];\r\n\t\t},\r\n\t\tisWorkTimeArguments: function () {\r\n\t\t\tvar config = arguments[0];\r\n\t\t\tif (!config.date) {\r\n\t\t\t\tconfig = {};\r\n\t\t\t\tconfig.date = arguments[0];\r\n\t\t\t\tconfig.unit = arguments[1];\r\n\t\t\t\tconfig.task = arguments[2];\r\n\t\t\t\tconfig.calendar = arguments[3];\r\n\t\t\t} else {\r\n\t\t\t\tconfig = utils.mixin({}, config);\r\n\t\t\t\tconfig.unit = config.unit || gantt.config.duration_unit;\r\n\t\t\t\tconfig.task = config.task || null;\r\n\t\t\t\tconfig.calendar = config.calendar || null;\r\n\t\t\t}\r\n\r\n\t\t\tconfig.unit = config.unit || gantt.config.duration_unit;\r\n\r\n\t\t\treturn config;\r\n\t\t},\r\n\t\tgetClosestWorkTimeArguments: function (config) {\r\n\t\t\tconfig = arguments[0];\r\n\t\t\tif (config instanceof Date) {\r\n\t\t\t\tconfig = {\r\n\t\t\t\t\tdate: config\r\n\t\t\t\t};\r\n\t\t\t} else {\r\n\t\t\t\tconfig = utils.mixin({}, config);\r\n\t\t\t}\r\n\t\t\tconfig.dir = config.dir || 'any';\r\n\t\t\tconfig.unit = config.unit || gantt.config.duration_unit;\r\n\r\n\t\t\treturn config;\r\n\t\t},\r\n\r\n\t\tgetDurationConfig: function (start, end, task, calendar) {\r\n\t\t\tthis.start_date = start;\r\n\t\t\tthis.end_date = end;\r\n\t\t\tthis.task = task;\r\n\t\t\tthis.calendar = calendar;\r\n\t\t\tthis.unit = null;\r\n\t\t\tthis.step = null;\r\n\t\t\treturn this;\r\n\t\t},\r\n\t\t_getStartEndConfig: function (param) {\r\n\t\t\tvar argumentType = this.getDurationConfig;\r\n\t\t\tvar config;\r\n\t\t\tif (param instanceof argumentType)\r\n\t\t\t\treturn param;\r\n\r\n\t\t\tif (param instanceof Date) {\r\n\t\t\t\tconfig = new argumentType(arguments[0], arguments[1], arguments[2], arguments[3]);\r\n\t\t\t} else {\r\n\t\t\t\tconfig = new argumentType(param.start_date, param.end_date, param.task);\r\n\t\t\t\tif (param.id) {\r\n\t\t\t\t\tconfig.task = param;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tconfig.unit = config.unit || gantt.config.duration_unit;\r\n\t\t\tconfig.step = config.step || gantt.config.duration_step;\r\n\t\t\tconfig.start_date = config.start_date || config.start || config.date;\r\n\r\n\t\t\treturn config;\r\n\t\t},\r\n\r\n\t\tgetDurationArguments: function (start, end, unit, step) {\r\n\t\t\treturn this._getStartEndConfig.apply(this, arguments);\r\n\t\t},\r\n\r\n\t\thasDurationArguments: function (start, end, unit, step) {\r\n\t\t\treturn this._getStartEndConfig.apply(this, arguments);\r\n\t\t},\r\n\r\n\t\tcalculateEndDateArguments: function (start, duration, unit, step) {\r\n\t\t\tvar config = arguments[0];\r\n\t\t\tif (config instanceof Date) {\r\n\t\t\t\tconfig = {\r\n\t\t\t\t\tstart_date: arguments[0],\r\n\t\t\t\t\tduration: arguments[1],\r\n\t\t\t\t\tunit: arguments[2],\r\n\t\t\t\t\ttask: arguments[3],\r\n\t\t\t\t\tcalendar: arguments[4]\r\n\t\t\t\t};\r\n\t\t\t} else {\r\n\t\t\t\tconfig = utils.mixin({}, config);\r\n\t\t\t}\r\n\r\n\t\t\tconfig.unit = config.unit || gantt.config.duration_unit;\r\n\t\t\tconfig.step = config.step || gantt.config.duration_step;\r\n\r\n\t\t\treturn config;\r\n\t\t}\r\n\t};\r\n};\r\n\r\n\r\nmodule.exports = calendarArgumentsHelper;\n\n/***/ }),\n/* 18 */\n/***/ (function(module, exports, __webpack_require__) {\n\nmodule.exports = __webpack_require__(19);\n\n\n/***/ }),\n/* 19 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\r\nwindow.gantt = __webpack_require__(20)();\r\n\r\n__webpack_require__(95)(gantt);\r\n\n\n/***/ }),\n/* 20 */\n/***/ (function(module, exports, __webpack_require__) {\n\nmodule.exports = function() {\r\n\r\n\tvar gantt = {\r\n\t\tversion: \"5.0.1\",\r\n\t\ttemplates: {},\r\n\t\tkeys: {\r\n\t\t\tedit_save: 13,\r\n\t\t\tedit_cancel: 27\r\n\t\t}\r\n\t};\r\n\r\n\t__webpack_require__(21)(gantt);\r\n\r\n\tgantt.$services = gantt.$inject(__webpack_require__(22));\r\n\tgantt.config = gantt.$inject(__webpack_require__(23));\r\n\tgantt.ajax =  __webpack_require__(24)(gantt);\r\n\tgantt.date = __webpack_require__(25)(gantt);\r\n\tvar dnd = __webpack_require__(26)(gantt);\r\n\tgantt.$services.setService(\"dnd\", function(){return dnd;});\r\n\r\n\tgantt.$services.setService(\"config\", function () {\r\n\t\treturn gantt.config;\r\n\t});\r\n\tgantt.$services.setService(\"date\", function () {\r\n\t\treturn gantt.date;\r\n\t});\r\n\tgantt.$services.setService(\"locale\", function () {\r\n\t\treturn gantt.locale;\r\n\t});\r\n\tgantt.$services.setService(\"templates\", function () {\r\n\t\treturn gantt.templates;\r\n\t});\r\n\r\n\tvar templatesLoader = __webpack_require__(27)(gantt);\r\n\tgantt.$services.setService(\"templateLoader\", function () {\r\n\t\treturn templatesLoader;\r\n\t});\r\n\r\n\tvar eventable = __webpack_require__(2);\r\n\teventable(gantt);\r\n\r\n\tvar StateService = __webpack_require__(28);\r\n\tvar stateService = new StateService();\r\n\r\n\tstateService.registerProvider(\"global\", function () {\r\n\t\treturn {\r\n\t\t\tmin_date: gantt._min_date,\r\n\t\t\tmax_date: gantt._max_date,\r\n\t\t\tselected_task: gantt._selected_task\r\n\t\t};\r\n\t});\r\n\tgantt.getState = stateService.getState;\r\n\tgantt.$services.setService(\"state\", function () {\r\n\t\treturn stateService;\r\n\t});\r\n\r\n\tvar utils = __webpack_require__(0);\r\n\tutils.mixin(gantt, utils);\r\n\tgantt.env = __webpack_require__(5);\r\n\r\n\tutils.mixin(gantt, __webpack_require__(29)(gantt));\r\n\tvar uiApi = __webpack_require__(30).init(gantt);\r\n\tgantt.$ui = uiApi.factory;\r\n\tgantt.$ui.layers = uiApi.render;\r\n\tgantt.$mouseEvents = uiApi.mouseEvents;\r\n\tgantt.$services.setService(\"mouseEvents\", function () {\r\n\t\treturn gantt.$mouseEvents;\r\n\t});\r\n\tgantt.mixin(gantt, uiApi.layersApi);\r\n\r\n\t__webpack_require__(50)(gantt);\r\n\r\n\tgantt.$services.setService(\"layers\", function () {\r\n\t\treturn uiApi.layersService;\r\n\t});\r\n\r\n\t__webpack_require__(51)(gantt);\r\n\r\n\t__webpack_require__(57)(gantt);\r\n\t__webpack_require__(60)(gantt);\r\n\r\n\t__webpack_require__(66)(gantt);\r\n\t__webpack_require__(67)(gantt);\r\n\t__webpack_require__(68)(gantt);\r\n\t__webpack_require__(69)(gantt);\r\n\t__webpack_require__(70)(gantt);\r\n\t__webpack_require__(71)(gantt);\r\n\t__webpack_require__(78)(gantt);\r\n\t__webpack_require__(79)(gantt);\r\n\t__webpack_require__(80)(gantt);\r\n\t__webpack_require__(81)(gantt);\r\n\t__webpack_require__(82)(gantt);\r\n\t__webpack_require__(83)(gantt);\r\n\t__webpack_require__(84)(gantt);\r\n\t__webpack_require__(85)(gantt);\r\n\t__webpack_require__(86)(gantt);\r\n\t__webpack_require__(87)(gantt);\r\n\t__webpack_require__(88)(gantt);\r\n\t__webpack_require__(89)(gantt);\r\n\t__webpack_require__(90)(gantt);\r\n\t__webpack_require__(91)(gantt);\r\n\t__webpack_require__(92)(gantt);\r\n\t__webpack_require__(93)(gantt);\r\n\r\n\treturn gantt;\r\n};\n\n/***/ }),\n/* 21 */\n/***/ (function(module, exports) {\n\nmodule.exports = function(gantt){\r\n\tgantt.$inject = function(module){\r\n\t\treturn module(this.$services);\r\n\t};\r\n};\n\n/***/ }),\n/* 22 */\n/***/ (function(module, exports) {\n\nmodule.exports = function(){\r\n\tvar services = {};\r\n\tfunction register (name, getter){\r\n\t\tservices[name] = getter;\r\n\t}\r\n\r\n\tfunction getService(name){\r\n\t\tif(!services[name]){\r\n\t\t\treturn null;\r\n\t\t}\r\n\t\treturn services[name]();\r\n\t}\r\n\r\n\tvar servicesEnum = {\r\n\t\t\"config\": \"config\",\r\n\t\t\"templates\": \"templates\",\r\n\t\t\"locale\": \"locale\"\r\n\t};\r\n\r\n\treturn {\r\n\t\tservices: servicesEnum,\r\n\t\tsetService: register,\r\n\t\tgetService: getService,\r\n\t\tconfig: function(){\r\n\t\t\treturn this.getService(\"config\");\r\n\t\t},\r\n\t\ttemplates: function(){\r\n\t\t\treturn this.getService(\"templates\");\r\n\t\t},\r\n\t\tlocale: function(){\r\n\t\t\treturn this.getService(\"locale\");\r\n\t\t}\r\n\t};\r\n};\r\n/*\r\nvar services = {};\r\nfunction register (name, getter){\r\n\tservices[name] = getter;\r\n}\r\n\r\nfunction getService(name){\r\n\tif(!services[name]){\r\n\t\treturn null;\r\n\t}\r\n\treturn services[name]();\r\n}\r\n\r\nvar servicesEnum = {\r\n\t\"config\": \"config\",\r\n\t\"templates\": \"templates\",\r\n\t\"locale\": \"locale\"\r\n};\r\n\r\nmodule.exports = {\r\n\tservices: servicesEnum,\r\n\tsetService: register,\r\n\tgetService: getService,\r\n\tconfig: function(){\r\n\t\treturn this.getService(\"config\");\r\n\t},\r\n\ttemplates: function(){\r\n\t\treturn this.getService(\"templates\");\r\n\t},\r\n\tlocale: function(){\r\n\t\treturn this.getService(\"locale\");\r\n\t}\r\n};*/\n\n/***/ }),\n/* 23 */\n/***/ (function(module, exports) {\n\nmodule.exports = function() {\r\n\treturn {\r\n\t\tlayout: {\r\n\t\t\tcss: \"gantt_container\",\r\n\t\t\trows: [\r\n\t\t\t\t{\r\n\t\t\t\t\tcols: [\r\n\t\t\t\t\t\t{view: \"grid\", id: \"grid\", scrollX: \"scrollHor\", scrollY: \"scrollVer\"},\r\n\t\t\t\t\t\t{resizer: true, width: 1},\r\n\t\t\t\t\t\t{view: \"timeline\", id: \"timeline\", scrollX: \"scrollHor\", scrollY: \"scrollVer\"},\r\n\t\t\t\t\t\t{view: \"scrollbar\", scroll: \"y\", id: \"scrollVer\"}\r\n\t\t\t\t\t]\r\n\r\n\t\t\t\t},\r\n\t\t\t\t{view: \"scrollbar\", scroll: \"x\", id: \"scrollHor\", height: 20}\r\n\t\t\t]\r\n\t\t},\r\n\t\tlinks: {\r\n\t\t\t\"finish_to_start\": \"0\",\r\n\t\t\t\"start_to_start\": \"1\",\r\n\t\t\t\"finish_to_finish\": \"2\",\r\n\t\t\t\"start_to_finish\": \"3\"\r\n\t\t},\r\n\t\ttypes: {\r\n\t\t\t'task': 'task',\r\n\t\t\t'project': 'project',\r\n\t\t\t'milestone': 'milestone'\r\n\t\t},\r\n\t\tduration_unit: \"day\",\r\n\t\twork_time: false,\r\n\t\tcorrect_work_time: false,\r\n\t\tskip_off_time: false,\r\n\r\n\t\tcascade_delete: true,\r\n\r\n\t\tautosize: false,\r\n\t\tautosize_min_width: 0,\r\n\t\tautoscroll: true,\r\n\t\tautoscroll_speed: 30,\r\n\r\n\t\tshow_links: true,\r\n\t\tshow_task_cells: true,\r\n\t\t// replace backgroung of the task area with a canvas img\r\n\t\tstatic_background: false,\r\n\t\tbranch_loading: false,\r\n\t\tshow_loading: false,\r\n\t\tshow_chart: true,\r\n\t\tshow_grid: true,\r\n\t\tmin_duration: 60 * 60 * 1000,\r\n\t\txml_date: \"%d-%m-%Y %H:%i\",\r\n\t\tapi_date: \"%d-%m-%Y %H:%i\",\r\n\t\tstart_on_monday: true,\r\n\t\tserver_utc: false,\r\n\t\tshow_progress: true,\r\n\t\tfit_tasks: false,\r\n\t\tselect_task: true,\r\n\t\tscroll_on_click: true,\r\n\t\tpreserve_scroll: true,\r\n\t\treadonly: false,\r\n\r\n\t\t/*grid */\r\n\t\tdate_grid: \"%Y-%m-%d\",\r\n\r\n\t\tdrag_links: true,\r\n\t\tdrag_progress: true,\r\n\t\tdrag_resize: true,\r\n\t\tdrag_move: true,\r\n\t\tdrag_mode: {\r\n\t\t\t\"resize\": \"resize\",\r\n\t\t\t\"progress\": \"progress\",\r\n\t\t\t\"move\": \"move\",\r\n\t\t\t\"ignore\": \"ignore\"\r\n\t\t},\r\n\t\tround_dnd_dates: true,\r\n\t\tlink_wrapper_width: 20,\r\n\t\troot_id: 0,\r\n\r\n\t\tautofit: false, // grid column automatic fit grid_width config\r\n\t\tcolumns: [\r\n\t\t\t{name: \"text\", tree: true, width: '*', resize: true},\r\n\t\t\t{name: \"start_date\", align: \"center\", resize: true},\r\n\t\t\t{name: \"duration\", align: \"center\"},\r\n\t\t\t{name: \"add\", width: '44'}\r\n\t\t],\r\n\r\n\t\t/*scale*/\r\n\t\tstep: 1,\r\n\t\tscale_unit: \"day\",\r\n\t\tscale_offset_minimal: true,\r\n\t\tsubscales: [],\r\n\r\n\t\tinherit_scale_class: false,\r\n\r\n\t\ttime_step: 60,\r\n\t\tduration_step: 1,\r\n\t\tdate_scale: \"%d %M\",\r\n\t\ttask_date: \"%d %F %Y\",\r\n\t\ttime_picker: \"%H:%i\",\r\n\t\ttask_attribute: \"task_id\",\r\n\t\tlink_attribute: \"link_id\",\r\n\t\tlayer_attribute: \"data-layer\",\r\n\t\tbuttons_left: [\r\n\t\t\t\"gantt_save_btn\",\r\n\t\t\t\"gantt_cancel_btn\"\r\n\t\t],\r\n\t\t_migrate_buttons: {\r\n\t\t\t\"dhx_save_btn\": \"gantt_save_btn\",\r\n\t\t\t\"dhx_cancel_btn\": \"gantt_cancel_btn\",\r\n\t\t\t\"dhx_delete_btn\": \"gantt_delete_btn\"\r\n\t\t},\r\n\t\tbuttons_right: [\r\n\t\t\t\"gantt_delete_btn\"\r\n\t\t],\r\n\t\tlightbox: {\r\n\t\t\tsections: [\r\n\t\t\t\t{name: \"description\", height: 70, map_to: \"text\", type: \"textarea\", focus: true},\r\n\t\t\t\t{name: \"time\", type: \"duration\", map_to: \"auto\"}\r\n\t\t\t],\r\n\t\t\tproject_sections: [\r\n\t\t\t\t{name: \"description\", height: 70, map_to: \"text\", type: \"textarea\", focus: true},\r\n\t\t\t\t{name: \"type\", type: \"typeselect\", map_to: \"type\"},\r\n\t\t\t\t{name: \"time\", type: \"duration\", readonly: true, map_to: \"auto\"}\r\n\t\t\t],\r\n\t\t\tmilestone_sections: [\r\n\t\t\t\t{name: \"description\", height: 70, map_to: \"text\", type: \"textarea\", focus: true},\r\n\t\t\t\t{name: \"type\", type: \"typeselect\", map_to: \"type\"},\r\n\t\t\t\t{name: \"time\", type: \"duration\", single_date: true, map_to: \"auto\"}\r\n\t\t\t]\r\n\t\t},\r\n\t\tdrag_lightbox: true,\r\n\t\tsort: false,\r\n\t\tdetails_on_create: true,\r\n\t\tdetails_on_dblclick: true,\r\n\t\tinitial_scroll: true,\r\n\t\ttask_scroll_offset: 100,\r\n\r\n\t\torder_branch: false,\r\n\t\torder_branch_free: false,\r\n\r\n\t\ttask_height: \"full\",//number px of 'full' for row height\r\n\t\tmin_column_width: 70,\r\n\r\n\t\t// min width for grid column (when resizing)\r\n\t\tmin_grid_column_width: 70,\r\n\t\t// name of the attribute with column index for resize element\r\n\t\tgrid_resizer_column_attribute: \"column_index\",\r\n\t\t// name of the attribute with column index for resize element\r\n\t\tgrid_resizer_attribute: \"grid_resizer\",\r\n\r\n\t\t// grid width can be increased after the column has been resized\r\n\t\tkeep_grid_width: false,\r\n\r\n\t\t// grid width can be adjusted\r\n\t\tgrid_resize: false,\r\n\r\n\t\tshow_unscheduled: true,\r\n\r\n\t\t//\r\n\t\treadonly_property: \"readonly\",\r\n\t\teditable_property: \"editable\",\r\n\t\tcalendar_property: \"calendar_id\",\r\n\t\tresource_calendars: {},\r\n\r\n\t\ttype_renderers: {},\r\n\r\n\t\topen_tree_initially: false,\r\n\t\toptimize_render: true,\r\n\t\tprevent_default_scroll: false,\r\n\t\tshow_errors: true,\r\n\t\twai_aria_attributes: true,\r\n\t\tsmart_scales: true\r\n\t};\r\n};\r\n\n\n/***/ }),\n/* 24 */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar env = __webpack_require__(5);\r\n\r\nmodule.exports = function(gantt){\r\n\treturn {\r\n\r\n\t\t// if false - dhxr param will added to prevent caching on client side (default),\r\n\t\t// if true - do not add extra params\r\n\t\tcache: true,\r\n\r\n\t\t// default method for load/loadStruct, post/get allowed\r\n\t\t// get - since 4.1.1, this should fix 412 error for macos safari\r\n\t\tmethod: \"get\",\r\n\r\n\t\tparse: function(data) {\r\n\t\t\tif (typeof data !== \"string\") return data;\r\n\r\n\t\t\tvar obj;\r\n\t\t\tdata = data.replace(/^[\\s]+/,\"\");\r\n\t\t\tif (window.DOMParser && !env.isIE) { // ff,ie9\r\n\t\t\t\tobj = (new window.DOMParser()).parseFromString(data, \"text/xml\");\r\n\t\t\t} else if (window.ActiveXObject !== window.undefined) {\r\n\t\t\t\tobj = new window.ActiveXObject(\"Microsoft.XMLDOM\");\r\n\t\t\t\tobj.async = \"false\";\r\n\t\t\t\tobj.loadXML(data);\r\n\t\t\t}\r\n\t\t\treturn obj;\r\n\t\t},\r\n\t\txmltop: function(tagname, xhr, obj) {\r\n\t\t\tif (typeof xhr.status == \"undefined\" || xhr.status < 400) {\r\n\t\t\t\tvar xml = (!xhr.responseXML) ? this.parse(xhr.responseText || xhr) : (xhr.responseXML || xhr);\r\n\t\t\t\tif (xml && xml.documentElement !== null && !xml.getElementsByTagName(\"parsererror\").length) {\r\n\t\t\t\t\treturn xml.getElementsByTagName(tagname)[0];\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (obj !== -1) gantt.callEvent(\"onLoadXMLError\",[\"Incorrect XML\", arguments[1], obj]);\r\n\t\t\treturn document.createElement(\"DIV\");\r\n\t\t},\r\n\t\txpath: function(xpathExp, docObj) {\r\n\t\t\tif (!docObj.nodeName) docObj = docObj.responseXML || docObj;\r\n\t\t\tif (env.isIE) {\r\n\t\t\t\treturn docObj.selectNodes(xpathExp)||[];\r\n\t\t\t} else {\r\n\t\t\t\tvar rows = [];\r\n\t\t\t\tvar first;\r\n\t\t\t\tvar col = (docObj.ownerDocument||docObj).evaluate(xpathExp, docObj, null, XPathResult.ANY_TYPE, null);\r\n\r\n\t\t\t\twhile (true){\r\n\t\t\t\t\tfirst = col.iterateNext();\r\n\t\t\t\t\tif(first){\r\n\t\t\t\t\t\trows.push(first);\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\treturn rows;\r\n\t\t\t}\r\n\t\t},\r\n\t\tquery: function(config) {\r\n\t\t\tthis._call(\r\n\t\t\t\t(config.method || \"GET\"),\r\n\t\t\t\tconfig.url,\r\n\t\t\t\tconfig.data || \"\",\r\n\t\t\t\t(config.async || true),\r\n\t\t\t\tconfig.callback,\r\n\t\t\t\tnull,\r\n\t\t\t\tconfig.headers\r\n\t\t\t);\r\n\t\t},\r\n\t\tget: function(url, onLoad) {\r\n\t\t\tthis._call(\"GET\", url, null, true, onLoad);\r\n\t\t},\r\n\t\tgetSync: function(url) {\r\n\t\t\treturn this._call(\"GET\", url, null, false);\r\n\t\t},\r\n\t\tput: function(url, postData, onLoad) {\r\n\t\t\tthis._call(\"PUT\", url, postData, true, onLoad);\r\n\t\t},\r\n\t\tdel: function(url, postData, onLoad) {\r\n\t\t\tthis._call(\"DELETE\", url, postData, true, onLoad);\r\n\t\t},\r\n\t\tpost: function(url, postData, onLoad) {\r\n\t\t\tif (arguments.length == 1) {\r\n\t\t\t\tpostData = \"\";\r\n\t\t\t} else if (arguments.length == 2 && (typeof(postData) == \"function\" || typeof(window[postData]) == \"function\")) {\r\n\t\t\t\tonLoad = postData;\r\n\t\t\t\tpostData = \"\";\r\n\t\t\t} else {\r\n\t\t\t\tpostData = String(postData);\r\n\t\t\t}\r\n\t\t\tthis._call(\"POST\", url, postData, true, onLoad);\r\n\t\t},\r\n\t\tpostSync: function(url, postData) {\r\n\t\t\tpostData = (postData === null ? \"\" : String(postData));\r\n\t\t\treturn this._call(\"POST\", url, postData, false);\r\n\t\t},\r\n\t\tgetLong: function(url, onLoad) {\r\n\t\t\tthis._call(\"GET\", url, null, true, onLoad, {url:url});\r\n\t\t},\r\n\t\tpostLong: function(url, postData, onLoad) {\r\n\t\t\tif (arguments.length == 2 && (typeof(postData) == \"function\" || typeof(window[postData]))) {\r\n\t\t\t\tonLoad = postData;\r\n\t\t\t\tpostData = \"\";\r\n\t\t\t}\r\n\t\t\tthis._call(\"POST\", url, postData, true, onLoad, {url:url, postData:postData});\r\n\t\t},\r\n\t\t_call: function(method, url, postData, async, onLoad, longParams, headers) {\r\n\r\n\t\t\tvar t = (window.XMLHttpRequest && !env.isIE ? new XMLHttpRequest() : new ActiveXObject(\"Microsoft.XMLHTTP\"));\r\n\t\t\tvar isQt = (navigator.userAgent.match(/AppleWebKit/) !== null && navigator.userAgent.match(/Qt/) !== null && navigator.userAgent.match(/Safari/) !== null);\r\n\r\n\t\t\tif (!!async) {\r\n\t\t\t\tt.onreadystatechange = function() {\r\n\t\t\t\t\tif ((t.readyState == 4) || (isQt && t.readyState == 3)) { // what for long response and status 404?\r\n\t\t\t\t\t\tif (t.status != 200 || t.responseText === \"\")\r\n\t\t\t\t\t\t\tif (!gantt.callEvent(\"onAjaxError\", [t])) return;\r\n\r\n\t\t\t\t\t\twindow.setTimeout(function(){\r\n\t\t\t\t\t\t\tif (typeof(onLoad) == \"function\") {\r\n\t\t\t\t\t\t\t\tonLoad.apply(window, [{xmlDoc:t, filePath:url}]); // dhtmlx-compat, response.xmlDoc.responseXML/responseText\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tif (longParams) {\r\n\t\t\t\t\t\t\t\tif (typeof(longParams.postData) != \"undefined\") {\r\n\t\t\t\t\t\t\t\t\tthis.postLong(longParams.url, longParams.postData, onLoad);\r\n\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\tthis.getLong(longParams.url, onLoad);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tonLoad = null;\r\n\t\t\t\t\t\t\tt = null;\r\n\t\t\t\t\t\t},1);\r\n\t\t\t\t\t}\r\n\t\t\t\t};\r\n\t\t\t}\r\n\r\n\t\t\tif (method == \"GET\" && !this.cache) {\r\n\t\t\t\turl += (url.indexOf(\"?\")>=0?\"&\":\"?\")+\"dhxr\"+new Date().getTime()+\"=1\";\r\n\t\t\t}\r\n\r\n\t\t\tt.open(method, url, async);\r\n\r\n\t\t\tif (headers){\r\n\t\t\t\tfor (var key in headers)\r\n\t\t\t\t\tt.setRequestHeader(key, headers[key]);\r\n\t\t\t} else if (method.toUpperCase() == \"POST\" || method == \"PUT\" || method == \"DELETE\") {\r\n\t\t\t\tt.setRequestHeader(\"Content-Type\", \"application/x-www-form-urlencoded\");\r\n\t\t\t} else if (method == \"GET\") {\r\n\t\t\t\tpostData = null;\r\n\t\t\t}\r\n\r\n\t\t\tt.setRequestHeader(\"X-Requested-With\", \"XMLHttpRequest\");\r\n\r\n\t\t\tt.send(postData);\r\n\r\n\t\t\tif (!async) return {xmlDoc:t, filePath:url}; // dhtmlx-compat, response.xmlDoc.responseXML/responseText\r\n\r\n\t\t},\r\n\t\turlSeparator: function(str){\r\n\t\t\tif (str.indexOf(\"?\") != -1)\r\n\t\t\t\treturn \"&\";\r\n\t\t\telse\r\n\t\t\t\treturn \"?\";\r\n\t\t}\r\n\t};\r\n};\r\n\n\n/***/ }),\n/* 25 */\n/***/ (function(module, exports) {\n\nmodule.exports = function(gantt) {\r\n\tvar dateHelper = {\r\n\t\tinit: function () {\r\n\t\t\tvar locale = gantt.locale;\r\n\r\n\t\t\tvar s = locale.date.month_short;\r\n\t\t\tvar t = locale.date.month_short_hash = {};\r\n\t\t\tfor (var i = 0; i < s.length; i++)\r\n\t\t\t\tt[s[i]] = i;\r\n\r\n\t\t\tvar s = locale.date.month_full;\r\n\t\t\tvar t = locale.date.month_full_hash = {};\r\n\t\t\tfor (var i = 0; i < s.length; i++)\r\n\t\t\t\tt[s[i]] = i;\r\n\t\t},\r\n\t\tdate_part: function (date) {\r\n\t\t\tvar old = new Date(date);\r\n\t\t\tdate.setHours(0);\r\n\t\t\tthis.hour_start(date);\r\n\t\t\tif (date.getHours() && //shift to yesterday on dst\r\n\t\t\t\t(date.getDate() < old.getDate() || date.getMonth() < old.getMonth() || date.getFullYear() < old.getFullYear()))\r\n\t\t\t\tdate.setTime(date.getTime() + 60 * 60 * 1000 * (24 - date.getHours()));\r\n\t\t\treturn date;\r\n\t\t},\r\n\t\ttime_part: function (date) {\r\n\t\t\treturn (date.valueOf() / 1000 - date.getTimezoneOffset() * 60) % 86400;\r\n\t\t},\r\n\t\tweek_start: function (date) {\r\n\t\t\tvar shift = date.getDay();\r\n\t\t\tif (gantt.config.start_on_monday) {\r\n\t\t\t\tif (shift === 0) shift = 6;\r\n\t\t\t\telse shift--;\r\n\t\t\t}\r\n\t\t\treturn this.date_part(this.add(date, -1 * shift, \"day\"));\r\n\t\t},\r\n\t\tmonth_start: function (date) {\r\n\t\t\tdate.setDate(1);\r\n\t\t\treturn this.date_part(date);\r\n\t\t},\r\n\t\tquarter_start: function (date) {\r\n\t\t\tthis.month_start(date);\r\n\t\t\tvar m = date.getMonth(),\r\n\t\t\t\tres_month;\r\n\r\n\t\t\tif (m >= 9) {\r\n\t\t\t\tres_month = 9;\r\n\t\t\t} else if (m >= 6) {\r\n\t\t\t\tres_month = 6;\r\n\t\t\t} else if (m >= 3) {\r\n\t\t\t\tres_month = 3;\r\n\t\t\t} else {\r\n\t\t\t\tres_month = 0;\r\n\t\t\t}\r\n\r\n\t\t\tdate.setMonth(res_month);\r\n\t\t\treturn date;\r\n\t\t},\r\n\t\tyear_start: function (date) {\r\n\t\t\tdate.setMonth(0);\r\n\t\t\treturn this.month_start(date);\r\n\t\t},\r\n\t\tday_start: function (date) {\r\n\t\t\treturn this.date_part(date);\r\n\t\t},\r\n\t\thour_start: function (date) {\r\n\t\t\tif (date.getMinutes())\r\n\t\t\t\tdate.setMinutes(0);\r\n\t\t\tthis.minute_start(date);\r\n\r\n\t\t\treturn date;\r\n\t\t},\r\n\t\tminute_start: function (date) {\r\n\t\t\tif (date.getSeconds())\r\n\t\t\t\tdate.setSeconds(0);\r\n\t\t\tif (date.getMilliseconds())\r\n\t\t\t\tdate.setMilliseconds(0);\r\n\t\t\treturn date;\r\n\t\t},\r\n\t\t_add_days: function (date, inc) {\r\n\t\t\tvar ndate = new Date(date.valueOf());\r\n\r\n\t\t\tndate.setDate(ndate.getDate() + inc);\r\n\t\t\tif (inc >= 0 && (!date.getHours() && ndate.getHours()) &&//shift to yesterday on dst\r\n\t\t\t\t(ndate.getDate() <= date.getDate() || ndate.getMonth() < date.getMonth() || ndate.getFullYear() < date.getFullYear()))\r\n\t\t\t\tndate.setTime(ndate.getTime() + 60 * 60 * 1000 * (24 - ndate.getHours()));\r\n\t\t\treturn ndate;\r\n\t\t},\r\n\r\n\t\tadd: function (date, inc, mode) {\r\n\t\t\t/*jsl:ignore*/\r\n\t\t\tvar ndate = new Date(date.valueOf());\r\n\t\t\tswitch (mode) {\r\n\t\t\t\tcase \"day\":\r\n\t\t\t\t\tndate = this._add_days(ndate, inc);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase \"week\":\r\n\t\t\t\t\tndate = this._add_days(ndate, inc * 7);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase \"month\":\r\n\t\t\t\t\tndate.setMonth(ndate.getMonth() + inc);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase \"year\":\r\n\t\t\t\t\tndate.setYear(ndate.getFullYear() + inc);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase \"hour\":\r\n\t\t\t\t\t/*\r\n\t\t\t\t\t\tadding hours/minutes via setHour(getHour() + inc) gives weird result when\r\n\t\t\t\t\t\tadding one hour to the time before switch to a Daylight Saving time\r\n\r\n\t\t\t\t\t\texample: //Sun Mar 30 2014 01:00:00 GMT+0100 (W. Europe Standard Time)\r\n\t\t\t\t\t\tnew Date(2014, 02, 30, 1).setHours(2)\r\n\t\t\t\t\t\t>>Sun Mar 30 2014 01:00:00 GMT+0100 (W. Europe Standard Time)\r\n\r\n\t\t\t\t\t\tsetTime seems working as expected\r\n\t\t\t\t\t */\r\n\t\t\t\t\tndate.setTime(ndate.getTime() + inc * 60 * 60 * 1000);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase \"minute\":\r\n\r\n\t\t\t\t\tndate.setTime(ndate.getTime() + inc * 60 * 1000);\r\n\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tdefault:\r\n\t\t\t\t\treturn this[\"add_\" + mode](date, inc, mode);\r\n\t\t\t}\r\n\t\t\treturn ndate;\r\n\t\t\t/*jsl:end*/\r\n\t\t},\r\n\t\tadd_quarter: function (date, inc) {\r\n\t\t\treturn this.add(date, inc * 3, \"month\");\r\n\t\t},\r\n\r\n\t\tto_fixed: function (num) {\r\n\t\t\tif (num < 10) return \"0\" + num;\r\n\t\t\treturn num;\r\n\t\t},\r\n\t\tcopy: function (date) {\r\n\t\t\treturn new Date(date.valueOf());\r\n\t\t},\r\n\t\tdate_to_str: function (format, utc) {\r\n\t\t\tformat = format.replace(/%[a-zA-Z]/g, function (a) {\r\n\t\t\t\tswitch (a) {\r\n\t\t\t\t\tcase \"%d\":\r\n\t\t\t\t\t\treturn \"\\\"+to_fixed(date.getDate())+\\\"\";\r\n\t\t\t\t\tcase \"%m\":\r\n\t\t\t\t\t\treturn \"\\\"+to_fixed((date.getMonth()+1))+\\\"\";\r\n\t\t\t\t\tcase \"%j\":\r\n\t\t\t\t\t\treturn \"\\\"+date.getDate()+\\\"\";\r\n\t\t\t\t\tcase \"%n\":\r\n\t\t\t\t\t\treturn \"\\\"+(date.getMonth()+1)+\\\"\";\r\n\t\t\t\t\tcase \"%y\":\r\n\t\t\t\t\t\treturn \"\\\"+to_fixed(date.getFullYear()%100)+\\\"\";\r\n\t\t\t\t\tcase \"%Y\":\r\n\t\t\t\t\t\treturn \"\\\"+date.getFullYear()+\\\"\";\r\n\t\t\t\t\tcase \"%D\":\r\n\t\t\t\t\t\treturn \"\\\"+locale.date.day_short[date.getDay()]+\\\"\";\r\n\t\t\t\t\tcase \"%l\":\r\n\t\t\t\t\t\treturn \"\\\"+locale.date.day_full[date.getDay()]+\\\"\";\r\n\t\t\t\t\tcase \"%M\":\r\n\t\t\t\t\t\treturn \"\\\"+locale.date.month_short[date.getMonth()]+\\\"\";\r\n\t\t\t\t\tcase \"%F\":\r\n\t\t\t\t\t\treturn \"\\\"+locale.date.month_full[date.getMonth()]+\\\"\";\r\n\t\t\t\t\tcase \"%h\":\r\n\t\t\t\t\t\treturn \"\\\"+to_fixed((date.getHours()+11)%12+1)+\\\"\";\r\n\t\t\t\t\tcase \"%g\":\r\n\t\t\t\t\t\treturn \"\\\"+((date.getHours()+11)%12+1)+\\\"\";\r\n\t\t\t\t\tcase \"%G\":\r\n\t\t\t\t\t\treturn \"\\\"+date.getHours()+\\\"\";\r\n\t\t\t\t\tcase \"%H\":\r\n\t\t\t\t\t\treturn \"\\\"+to_fixed(date.getHours())+\\\"\";\r\n\t\t\t\t\tcase \"%i\":\r\n\t\t\t\t\t\treturn \"\\\"+to_fixed(date.getMinutes())+\\\"\";\r\n\t\t\t\t\tcase \"%a\":\r\n\t\t\t\t\t\treturn \"\\\"+(date.getHours()>11?\\\"pm\\\":\\\"am\\\")+\\\"\";\r\n\t\t\t\t\tcase \"%A\":\r\n\t\t\t\t\t\treturn \"\\\"+(date.getHours()>11?\\\"PM\\\":\\\"AM\\\")+\\\"\";\r\n\t\t\t\t\tcase \"%s\":\r\n\t\t\t\t\t\treturn \"\\\"+to_fixed(date.getSeconds())+\\\"\";\r\n\t\t\t\t\tcase \"%W\":\r\n\t\t\t\t\t\treturn \"\\\"+to_fixed(getISOWeek(date))+\\\"\";\r\n\t\t\t\t\tdefault:\r\n\t\t\t\t\t\treturn a;\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\tif (utc) format = format.replace(/date\\.get/g, \"date.getUTC\");\r\n\t\t\tvar dateToStr = new Function(\"date\", \"to_fixed\", \"locale\", \"getISOWeek\", \"return \\\"\" + format + \"\\\";\");\r\n\r\n\t\t\treturn function (date) {\r\n\t\t\t\treturn dateToStr(date, dateHelper.to_fixed, gantt.locale, dateHelper.getISOWeek);\r\n\t\t\t};\r\n\t\t},\r\n\t\tstr_to_date: function (format, utc) {\r\n\t\t\tvar splt = \"var temp=date.match(/[a-zA-Z]+|[0-9]+/g);\";\r\n\t\t\tvar mask = format.match(/%[a-zA-Z]/g);\r\n\t\t\tfor (var i = 0; i < mask.length; i++) {\r\n\t\t\t\tswitch (mask[i]) {\r\n\t\t\t\t\tcase \"%j\":\r\n\t\t\t\t\tcase \"%d\":\r\n\t\t\t\t\t\tsplt += \"set[2]=temp[\" + i + \"]||1;\";\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase \"%n\":\r\n\t\t\t\t\tcase \"%m\":\r\n\t\t\t\t\t\tsplt += \"set[1]=(temp[\" + i + \"]||1)-1;\";\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase \"%y\":\r\n\t\t\t\t\t\tsplt += \"set[0]=temp[\" + i + \"]*1+(temp[\" + i + \"]>50?1900:2000);\";\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase \"%g\":\r\n\t\t\t\t\tcase \"%G\":\r\n\t\t\t\t\tcase \"%h\":\r\n\t\t\t\t\tcase \"%H\":\r\n\t\t\t\t\t\tsplt += \"set[3]=temp[\" + i + \"]||0;\";\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase \"%i\":\r\n\t\t\t\t\t\tsplt += \"set[4]=temp[\" + i + \"]||0;\";\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase \"%Y\":\r\n\t\t\t\t\t\tsplt += \"set[0]=temp[\" + i + \"]||0;\";\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase \"%a\":\r\n\t\t\t\t\tcase \"%A\":\r\n\t\t\t\t\t\tsplt += \"set[3]=set[3]%12+((temp[\" + i + \"]||'').toLowerCase()=='am'?0:12);\";\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase \"%s\":\r\n\t\t\t\t\t\tsplt += \"set[5]=temp[\" + i + \"]||0;\";\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase \"%M\":\r\n\t\t\t\t\t\tsplt += \"set[1]=locale.date.month_short_hash[temp[\" + i + \"]]||0;\";\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase \"%F\":\r\n\t\t\t\t\t\tsplt += \"set[1]=locale.date.month_full_hash[temp[\" + i + \"]]||0;\";\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tdefault:\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tvar code = \"set[0],set[1],set[2],set[3],set[4],set[5]\";\r\n\t\t\tif (utc) code = \" Date.UTC(\" + code + \")\";\r\n\t\t\tvar strToDate = new Function(\"date\", \"locale\", \"var set=[0,0,1,0,0,0]; \" + splt + \" return new Date(\" + code + \");\");\r\n\r\n\t\t\treturn function (dateString) {\r\n\t\t\t\treturn strToDate(dateString, gantt.locale);\r\n\t\t\t};\r\n\t\t},\r\n\t\tgetISOWeek: function (ndate) {\r\n\t\t\tif (!ndate) return false;\r\n\t\t\tvar nday = ndate.getDay();\r\n\t\t\tif (nday === 0) {\r\n\t\t\t\tnday = 7;\r\n\t\t\t}\r\n\t\t\tvar first_thursday = new Date(ndate.valueOf());\r\n\t\t\tfirst_thursday.setDate(ndate.getDate() + (4 - nday));\r\n\t\t\tvar year_number = first_thursday.getFullYear(); // year of the first Thursday\r\n\t\t\tvar ordinal_date = Math.round((first_thursday.getTime() - new Date(year_number, 0, 1).getTime()) / 86400000); //ordinal date of the first Thursday - 1 (so not really ordinal date)\r\n\t\t\tvar week_number = 1 + Math.floor(ordinal_date / 7);\r\n\t\t\treturn week_number;\r\n\t\t},\r\n\t\tgetUTCISOWeek: function (ndate) {\r\n\t\t\treturn this.getISOWeek(ndate);\r\n\t\t},\r\n\t\tconvert_to_utc: function (date) {\r\n\t\t\treturn new Date(date.getUTCFullYear(), date.getUTCMonth(), date.getUTCDate(), date.getUTCHours(), date.getUTCMinutes(), date.getUTCSeconds());\r\n\t\t},\r\n\t\tparseDate: function (date, format) {\r\n\t\t\t// raw date may be of type string, number (timestamp) or something else\r\n\t\t\t// do not check for instanceof Date explicitly, since we may swap native date with different date implementation at some point\r\n\t\t\tif (date && !date.getFullYear) {\r\n\t\t\t\tif (gantt.defined(format)) {\r\n\t\t\t\t\tif (typeof(format) == \"string\")\r\n\t\t\t\t\t\tformat = gantt.defined(gantt.templates[format]) ? gantt.templates[format] : gantt.date.str_to_date(format);\r\n\t\t\t\t\telse\r\n\t\t\t\t\t\tformat = gantt.templates.xml_date;\r\n\t\t\t\t}\r\n\t\t\t\tif (date)\r\n\t\t\t\t\tdate = format(date);\r\n\t\t\t\telse\r\n\t\t\t\t\tdate = null;\r\n\t\t\t}\r\n\t\t\treturn date;\r\n\t\t}\r\n\t};\r\n\treturn dateHelper;\r\n};\n\n/***/ }),\n/* 26 */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar eventable = __webpack_require__(2);\r\nvar utils = __webpack_require__(0);\r\nvar timeout = __webpack_require__(7);\r\n\r\nmodule.exports = function(gantt){\r\n\tfunction DnD(obj, config) {\r\n\t\tthis._obj = obj;\r\n\t\tif (config) {\r\n\t\t\tthis._settings = config;\r\n\t\t}\r\n\t\teventable(this);\r\n\r\n\t\tvar inputMethods = this.getInputMethods();\r\n\r\n\t\tthis._drag_start_timer = null;\r\n\t\tgantt.attachEvent(\"onGanttScroll\", utils.bind(function (left, top) {\r\n\t\t\tthis.clearDragTimer();\r\n\t\t}, this));\r\n\r\n\t\tfor(var i = 0; i < inputMethods.length; i++){\r\n\t\t\t(utils.bind(function(input){\r\n\r\n\t\t\t\tutils.event(obj, input.down, utils.bind(function (e) {\r\n\t\t\t\t\tconfig.original_target = {target: e.target || e.srcElement};\r\n\t\t\t\t\tif (gantt.config.touch) {\r\n\t\t\t\t\t\tthis.clearDragTimer();\r\n\r\n\t\t\t\t\t\tthis._drag_start_timer = setTimeout(utils.bind(function () {\r\n\t\t\t\t\t\t\tthis.dragStart(obj, e, input);\r\n\t\t\t\t\t\t}, this), gantt.config.touch_drag);\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse {\r\n\t\t\t\t\t\tthis.dragStart(obj, e, input);\r\n\t\t\t\t\t}\r\n\t\t\t\t}, this));\r\n\r\n\t\t\t\tutils.event(document.body, input.up, utils.bind(function (e) {\r\n\t\t\t\t\tthis.clearDragTimer();\r\n\t\t\t\t}, this));\r\n\r\n\t\t\t}, this))(inputMethods[i]);\r\n\t\t}\r\n\t}\r\n\r\n\tDnD.prototype = {\r\n\t\ttraceDragEvents: function (domElement, inputMethod) {\r\n\t\t\tvar mousemove = utils.bind(function (e) {\r\n\t\t\t\treturn this.dragMove(domElement, e, inputMethod.accessor);\r\n\t\t\t}, this);\r\n\t\t\tvar scroll = utils.bind(function (e) {\r\n\t\t\t\treturn this.dragScroll(domElement, e);\r\n\t\t\t}, this);\r\n\r\n\t\t\tvar limited_mousemove = utils.bind(function (e) {\r\n\t\t\t\tif (e && e.preventDefault) //Cancel default action on DND\r\n\t\t\t\t\te.preventDefault();\r\n\t\t\t\t(e || event).cancelBubble = true;\r\n\t\t\t\tif (utils.defined(this.config.updates_per_second)) {\r\n\t\t\t\t\tif (!timeout(this, this.config.updates_per_second))\r\n\t\t\t\t\t\treturn true;\r\n\t\t\t\t}\r\n\t\t\t\treturn mousemove(e);\r\n\t\t\t}, this);\r\n\r\n\t\t\tvar mouseup = utils.bind(function (e) {\r\n\t\t\t\tutils.eventRemove(document.body, inputMethod.move, limited_mousemove);\r\n\t\t\t\tutils.eventRemove(document.body, inputMethod.up, mouseup);\r\n\t\t\t\treturn this.dragEnd(domElement);\r\n\t\t\t}, this);\r\n\r\n\r\n\t\t\tutils.event(document.body, inputMethod.move, limited_mousemove);\r\n\t\t\tutils.event(document.body, inputMethod.up, mouseup);\r\n\t\t},\r\n\t\tcheckPositionChange: function (pos) {\r\n\t\t\tvar diff_x = pos.x - this.config.pos.x;\r\n\t\t\tvar diff_y = pos.y - this.config.pos.y;\r\n\t\t\tvar distance = Math.sqrt(Math.pow(Math.abs(diff_x), 2) + Math.pow(Math.abs(diff_y), 2));\r\n\r\n\t\t\tif (distance > this.config.sensitivity) {\r\n\t\t\t\treturn true;\r\n\t\t\t} else {\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t},\r\n\t\tinitDnDMarker: function () {\r\n\t\t\t// create dnd placeholder and put it in dom\r\n\t\t\tvar marker = this.config.marker = document.createElement(\"div\");\r\n\t\t\tmarker.className = \"gantt_drag_marker\";\r\n\t\t\tmarker.innerHTML = \"Dragging object\";\r\n\t\t\tdocument.body.appendChild(marker);\r\n\t\t},\r\n\t\tbackupEventTarget: function (domEvent, getEvent) {\r\n\t\t\tif (!gantt.config.touch) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\t// keep original event target in DOM in order to keep dnd on touchmove event\r\n\t\t\tvar e = getEvent(domEvent);\r\n\r\n\t\t\tvar el = e.target || e.srcElement;\r\n\t\t\tvar copy = el.cloneNode(true);\r\n\t\t\t//this.config.target.target = copy;\r\n\t\t\tthis.config.original_target = {target: copy};\r\n\t\t\tthis.config.backup_element = el;\r\n\t\t\tel.parentNode.appendChild(copy);\r\n\r\n\t\t\tel.style.display = \"none\";\r\n\t\t\tdocument.body.appendChild(el);\r\n\t\t},\r\n\t\tgetInputMethods: function () {\r\n\t\t\t// bind actions to browser events\r\n\t\t\tvar inputMethods = [];\r\n\r\n\t\t\tinputMethods.push({\r\n\t\t\t\t\"move\": \"mousemove\",\r\n\t\t\t\t\"down\": \"mousedown\",\r\n\t\t\t\t\"up\": \"mouseup\",\r\n\t\t\t\t\"accessor\": function (e) {\r\n\t\t\t\t\treturn e;\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\tif (gantt.config.touch) {\r\n\r\n\t\t\t\tvar touchEventsSupported = true;\r\n\t\t\t\ttry{\r\n\t\t\t\t\tdocument.createEvent(\"TouchEvent\");\r\n\t\t\t\t}catch (e){\r\n\t\t\t\t\ttouchEventsSupported = false;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif(touchEventsSupported){\r\n\t\t\t\t\tinputMethods.push({\r\n\t\t\t\t\t\t\"move\": \"touchmove\",\r\n\t\t\t\t\t\t\"down\": \"touchstart\",\r\n\t\t\t\t\t\t\"up\": \"touchend\",\r\n\t\t\t\t\t\t\"accessor\": function (ev) {\r\n\t\t\t\t\t\t\tif (ev.touches && ev.touches.length > 1) return null;\r\n\t\t\t\t\t\t\tif (ev.touches[0])\r\n\t\t\t\t\t\t\t\treturn {\r\n\t\t\t\t\t\t\t\t\ttarget: document.elementFromPoint(ev.touches[0].clientX, ev.touches[0].clientY),\r\n\t\t\t\t\t\t\t\t\tpageX: ev.touches[0].pageX,\r\n\t\t\t\t\t\t\t\t\tpageY: ev.touches[0].pageY,\r\n\t\t\t\t\t\t\t\t\tclientX: ev.touches[0].clientX,\r\n\t\t\t\t\t\t\t\t\tclientY: ev.touches[0].clientY\r\n\t\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\t\telse\r\n\t\t\t\t\t\t\t\treturn ev;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t}else if(window.navigator.pointerEnabled){\r\n\t\t\t\t\tinputMethods.push({\r\n\t\t\t\t\t\t\"move\": \"pointermove\",\r\n\t\t\t\t\t\t\"down\": \"pointerdown\",\r\n\t\t\t\t\t\t\"up\": \"pointerup\",\r\n\t\t\t\t\t\t\"accessor\": function (ev) {\r\n\t\t\t\t\t\t\tif (ev.pointerType == \"mouse\") return null;\r\n\t\t\t\t\t\t\treturn ev;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\r\n\t\t\t\t}else if (window.navigator.msPointerEnabled){\r\n\t\t\t\t\tinputMethods.push({\r\n\t\t\t\t\t\t\"move\": \"MSPointerMove\",\r\n\t\t\t\t\t\t\"down\": \"MSPointerDown\",\r\n\t\t\t\t\t\t\"up\": \"MSPointerUp\",\r\n\t\t\t\t\t\t\"accessor\": function (ev) {\r\n\t\t\t\t\t\t\tif (ev.pointerType == ev.MSPOINTER_TYPE_MOUSE) return null;\r\n\t\t\t\t\t\t\treturn ev;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\treturn inputMethods;\r\n\t\t},\r\n\t\tclearDragTimer: function () {\r\n\t\t\tif (this._drag_start_timer) {\r\n\t\t\t\tclearTimeout(this._drag_start_timer);\r\n\t\t\t\tthis._drag_start_timer = null;\r\n\t\t\t}\r\n\t\t},\r\n\t\tdragStart: function (obj, e, inputMethod) {\r\n\t\t\tthis.config = {\r\n\t\t\t\tobj: obj,\r\n\t\t\t\tmarker: null,\r\n\t\t\t\tstarted: false,\r\n\t\t\t\tpos: this.getPosition(e),\r\n\t\t\t\tsensitivity: 4\r\n\t\t\t};\r\n\t\t\tif (this._settings)\r\n\t\t\t\tutils.mixin(this.config, this._settings, true);\r\n\r\n\r\n\t\t\tthis.traceDragEvents(obj, inputMethod);\r\n\r\n\t\t\tgantt._prevent_touch_scroll = true;\r\n\t\t\tdocument.body.className += \" gantt_noselect\";\r\n\r\n\t\t\tif (gantt.config.touch) {\r\n\t\t\t\tthis.dragMove(obj, e, inputMethod.accessor);\r\n\t\t\t}\r\n\r\n\t\t},\r\n\t\tdragMove: function (obj, e, getEvent) {\r\n\t\t\tvar source = getEvent(e);\r\n\t\t\tif (!source) return;\r\n\r\n\t\t\tif (!this.config.marker && !this.config.started) {\r\n\t\t\t\tvar pos = this.getPosition(source);\r\n\r\n\t\t\t\tif (gantt.config.touch || this.checkPositionChange(pos)) {\r\n\t\t\t\t\t// real drag starts here,\r\n\t\t\t\t\t// when user moves mouse at first time after onmousedown\r\n\t\t\t\t\tthis.config.started = true;\r\n\t\t\t\t\tthis.config.ignore = false;\r\n\t\t\t\t\tif (this.callEvent(\"onBeforeDragStart\", [obj, this.config.original_target]) === false) {\r\n\t\t\t\t\t\tthis.config.ignore = true;\r\n\t\t\t\t\t\treturn true;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthis.backupEventTarget(e, getEvent);\r\n\t\t\t\t\tthis.initDnDMarker();\r\n\t\t\t\t\tgantt._touch_feedback();\r\n\t\t\t\t\tthis.callEvent(\"onAfterDragStart\", [obj, this.config.original_target]);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.config.ignore = true;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\r\n\t\t\tif (!this.config.ignore) {\r\n\t\t\t\tsource.pos = this.getPosition(source);\r\n\t\t\t\tthis.config.marker.style.left = source.pos.x + \"px\";\r\n\t\t\t\tthis.config.marker.style.top = source.pos.y + \"px\";\r\n\t\t\t\tthis.callEvent(\"onDragMove\", [obj, source]);\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\tdragEnd: function (obj) {\r\n\t\t\tvar target = this.config.backup_element;\r\n\t\t\tif (target && target.parentNode) {\r\n\t\t\t\ttarget.parentNode.removeChild(target);\r\n\t\t\t}\r\n\t\t\tgantt._prevent_touch_scroll = false;\r\n\t\t\tif (this.config.marker) {\r\n\t\t\t\tthis.config.marker.parentNode.removeChild(this.config.marker);\r\n\t\t\t\tthis.config.marker = null;\r\n\r\n\t\t\t\tthis.callEvent(\"onDragEnd\", []);\r\n\t\t\t}\r\n\t\t\tdocument.body.className = document.body.className.replace(\" gantt_noselect\", \"\");\r\n\t\t},\r\n\r\n\t\tgetPosition: function (e) {\r\n\t\t\tvar x = 0, y = 0;\r\n\t\t\te = e || window.event;\r\n\t\t\tif (e.pageX || e.pageY) {\r\n\t\t\t\tx = e.pageX;\r\n\t\t\t\ty = e.pageY;\r\n\t\t\t} else if (e.clientX || e.clientY) {\r\n\t\t\t\tx = e.clientX + document.body.scrollLeft + document.documentElement.scrollLeft;\r\n\t\t\t\ty = e.clientY + document.body.scrollTop + document.documentElement.scrollTop;\r\n\t\t\t}\r\n\t\t\treturn {x: x, y: y};\r\n\t\t}\r\n\t};\r\n\r\n\treturn DnD;\r\n};\r\n\n\n/***/ }),\n/* 27 */\n/***/ (function(module, exports) {\n\n/*\r\n %d - the day as a number with a leading zero ( 01 to 31 );\r\n %j - the day as a number without a leading zero ( 1 to 31 );\r\n %D - the day as an abbreviation ( Sun to Sat );\r\n %l - the day as a full name ( Sunday to Saturday );\r\n %W - the ISO-8601 week number of the year. Weeks start on Monday; 1)\r\n %m - the month as a number without a leading zero ( 1 to 12 );\r\n %n - the month as a number with a leading zero ( 01 to 12);\r\n %M - the month as an abbreviation ( Jan to Dec );\r\n %F - the month as a full name ( January to December );\r\n %y - the year as a two-digit number ( 00 to 99 );\r\n %Y - the year as a four-digit number ( 19009999 );\r\n %h - the hour based on the 12-hour clock ( 00 to 11 );\r\n %H - the hour based on the 24-hour clock ( 00 to 23 );\r\n %i - the minute as a number with a leading zero ( 00 to 59 );\r\n %s - the second as a number without a leading zero ( 00 to 59 ); 2)\r\n %a - displays am (for times from midnight until noon) and pm (for times from noon until midnight);\r\n %A - displays AM (for times from midnight until noon) and PM (for times from noon until midnight).\r\n\r\n */\r\n\r\nmodule.exports = function(gantt) {\r\n\r\n\tvar regTemplates = {};\r\n\r\n\tfunction initTemplate(name, initial, template_name) {\r\n\t\ttemplate_name = template_name || name;\r\n\t\tvar config = gantt.config,\r\n\t\t\ttemplates = gantt.templates;\r\n\r\n\t\tif (gantt.config[name] && regTemplates[template_name] != config[name]) {\r\n\t\t\tif (!(initial && templates[template_name])) {\r\n\t\t\t\ttemplates[template_name] = gantt.date.date_to_str(config[name]);\r\n\t\t\t\tregTemplates[template_name] = config[name];\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tfunction initTemplates() {\r\n\t\tvar labels = gantt.locale.labels;\r\n\t\tlabels.gantt_save_btn = labels.icon_save;\r\n\t\tlabels.gantt_cancel_btn = labels.icon_cancel;\r\n\t\tlabels.gantt_delete_btn = labels.icon_delete;\r\n\r\n\r\n\t\tvar date = gantt.date;\r\n\r\n\t\t//build configuration based templates\r\n\t\tvar d = date.date_to_str;\r\n\t\tvar c = gantt.config;\r\n\t\tinitTemplate(\"date_scale\", true, undefined, gantt.config, gantt.templates);\r\n\t\tinitTemplate(\"date_grid\", true, \"grid_date_format\", gantt.config, gantt.templates);\r\n\t\tinitTemplate(\"task_date\", true, undefined, gantt.config, gantt.templates);\r\n\r\n\t\tgantt.mixin(gantt.templates, {\r\n\t\t\txml_date: date.str_to_date(c.xml_date, c.server_utc),\r\n\t\t\txml_format: d(c.xml_date, c.server_utc),\r\n\t\t\tapi_date: date.str_to_date(c.api_date),\r\n\t\t\tprogress_text: function (start, end, task) {\r\n\t\t\t\treturn \"\";\r\n\t\t\t},\r\n\t\t\tgrid_header_class: function (column, config) {\r\n\t\t\t\treturn \"\";\r\n\t\t\t},\r\n\r\n\t\t\ttask_text: function (start, end, task) {\r\n\t\t\t\treturn task.text;\r\n\t\t\t},\r\n\t\t\ttask_class: function (start, end, task) {\r\n\t\t\t\treturn \"\";\r\n\t\t\t},\r\n\t\t\tgrid_row_class: function (start, end, task) {\r\n\t\t\t\treturn \"\";\r\n\t\t\t},\r\n\t\t\ttask_row_class: function (start, end, task) {\r\n\t\t\t\treturn \"\";\r\n\t\t\t},\r\n\t\t\ttask_cell_class: function (item, date) {\r\n\t\t\t\treturn \"\";\r\n\t\t\t},\r\n\t\t\tscale_cell_class: function (date) {\r\n\t\t\t\treturn \"\";\r\n\t\t\t},\r\n\t\t\tscale_row_class: function (date) {\r\n\t\t\t\treturn \"\";\r\n\t\t\t},\r\n\r\n\t\t\tgrid_indent: function (item) {\r\n\t\t\t\treturn \"<div class='gantt_tree_indent'></div>\";\r\n\t\t\t},\r\n\t\t\tgrid_folder: function (item) {\r\n\t\t\t\treturn \"<div class='gantt_tree_icon gantt_folder_\" + (item.$open ? \"open\" : \"closed\") + \"'></div>\";\r\n\t\t\t},\r\n\t\t\tgrid_file: function (item) {\r\n\t\t\t\treturn \"<div class='gantt_tree_icon gantt_file'></div>\";\r\n\t\t\t},\r\n\t\t\tgrid_open: function (item) {\r\n\t\t\t\treturn \"<div class='gantt_tree_icon gantt_\" + (item.$open ? \"close\" : \"open\") + \"'></div>\";\r\n\t\t\t},\r\n\t\t\tgrid_blank: function (item) {\r\n\t\t\t\treturn \"<div class='gantt_tree_icon gantt_blank'></div>\";\r\n\t\t\t},\r\n\t\t\tdate_grid: function (date, item) {\r\n\t\t\t\tif (item && gantt.isUnscheduledTask(item) && gantt.config.show_unscheduled) {\r\n\t\t\t\t\treturn gantt.templates.task_unscheduled_time(item);\r\n\t\t\t\t} else {\r\n\t\t\t\t\treturn gantt.templates.grid_date_format(date);\r\n\t\t\t\t}\r\n\t\t\t},\r\n\r\n\t\t\ttask_time: function (start, end, ev) {\r\n\t\t\t\tif (gantt.isUnscheduledTask(ev) && gantt.config.show_unscheduled) {\r\n\t\t\t\t\treturn gantt.templates.task_unscheduled_time(ev);\r\n\t\t\t\t} else {\r\n\t\t\t\t\treturn gantt.templates.task_date(start) + \" - \" + gantt.templates.task_date(end);\r\n\t\t\t\t}\r\n\t\t\t},\r\n\r\n\t\t\ttask_unscheduled_time: function (task) {\r\n\t\t\t\treturn \"\";\r\n\t\t\t},\r\n\r\n\t\t\ttime_picker: d(c.time_picker),\r\n\t\t\tlink_class: function (link) {\r\n\t\t\t\treturn \"\";\r\n\t\t\t},\r\n\t\t\tlink_description: function (link) {\r\n\t\t\t\tvar from = gantt.getTask(link.source),\r\n\t\t\t\t\tto = gantt.getTask(link.target);\r\n\r\n\t\t\t\treturn \"<b>\" + from.text + \"</b> &ndash;  <b>\" + to.text + \"</b>\";\r\n\t\t\t},\r\n\r\n\t\t\tdrag_link: function (from, from_start, to, to_start) {\r\n\t\t\t\tfrom = gantt.getTask(from);\r\n\t\t\t\tvar labels = gantt.locale.labels;\r\n\r\n\t\t\t\tvar text = \"<b>\" + from.text + \"</b> \" + (from_start ? labels.link_start : labels.link_end) + \"<br/>\";\r\n\t\t\t\tif (to) {\r\n\t\t\t\t\tto = gantt.getTask(to);\r\n\t\t\t\t\ttext += \"<b> \" + to.text + \"</b> \" + (to_start ? labels.link_start : labels.link_end) + \"<br/>\";\r\n\t\t\t\t}\r\n\t\t\t\treturn text;\r\n\t\t\t},\r\n\t\t\tdrag_link_class: function (from, from_start, to, to_start) {\r\n\t\t\t\tvar add = \"\";\r\n\r\n\t\t\t\tif (from && to) {\r\n\t\t\t\t\tvar allowed = gantt.isLinkAllowed(from, to, from_start, to_start);\r\n\t\t\t\t\tadd = \" \" + (allowed ? \"gantt_link_allow\" : \"gantt_link_deny\");\r\n\t\t\t\t}\r\n\r\n\t\t\t\treturn \"gantt_link_tooltip\" + add;\r\n\t\t\t},\r\n\r\n\t\t\t/* used for aria-labels of bar elements and for tooltip.js */\r\n\t\t\ttooltip_date_format: date.date_to_str(\"%Y-%m-%d\"),\r\n\t\t\ttooltip_text: function (start, end, event) {\r\n\t\t\t\treturn \"<b>Task:</b> \" + event.text + \"<br/><b>Start date:</b> \" + gantt.templates.tooltip_date_format(start) + \"<br/><b>End date:</b> \" + gantt.templates.tooltip_date_format(end);\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\treturn {\r\n\t\tinitTemplates: initTemplates,\r\n\t\tinitTemplate: initTemplate\r\n\t};\r\n\r\n};\n\n/***/ }),\n/* 28 */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar utils = __webpack_require__(0);\r\n\r\nvar StateService = (function(){\r\n\tvar stateProviders = {};\r\n\r\n\tfunction getState(){\r\n\t\tvar res = {};\r\n\t\tfor(var i in stateProviders){\r\n\t\t\tutils.mixin(res, stateProviders[i](), true);\r\n\t\t}\r\n\t\treturn res;\r\n\t}\r\n\r\n\tfunction registerProvider(name, provider){\r\n\t\tstateProviders[name] = provider;\r\n\t}\r\n\r\n\tfunction unregisterProvider(name){\r\n\t\tdelete stateProviders[name];\r\n\t}\r\n\r\n\treturn {\r\n\t\tgetState: getState,\r\n\t\tregisterProvider: registerProvider,\r\n\t\tunregisterProvider: unregisterProvider\r\n\t};\r\n});\r\n\r\nmodule.exports = StateService;\r\n\r\n\n\n/***/ }),\n/* 29 */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar utils = __webpack_require__(0);\r\nvar domHelpers = __webpack_require__(1);\r\n\r\nmodule.exports = function(gantt) {\r\n\r\n\tvar _dhx_msg_cfg = null;\r\n\r\n\tfunction callback(config, result) {\r\n\t\tvar usercall = config.callback;\r\n\t\tmodalBox.hide(config.box);\r\n\r\n\t\t_dhx_msg_cfg = config.box = null;\r\n\t\tif (usercall)\r\n\t\t\tusercall(result);\r\n\t}\r\n\r\n\tfunction modal_key(e) {\r\n\t\tif (_dhx_msg_cfg) {\r\n\t\t\te = e || event;\r\n\t\t\tvar code = e.which || event.keyCode;\r\n\t\t\tvar preventDefault = false;\r\n\r\n\t\t\tif (messageBox.keyboard) {\r\n\t\t\t\tif (code == 13 || code == 32) {\r\n\t\t\t\t\t// default behavior is to confirm/submit popup on space/enter\r\n\t\t\t\t\t// if browser focus is set on button element - do button click instead of default behavior\r\n\t\t\t\t\tvar target = e.target || e.srcElement;\r\n\t\t\t\t\tif (domHelpers.getClassName(target).indexOf(\"gantt_popup_button\") > -1 && target.click) {\r\n\t\t\t\t\t\ttarget.click();\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tcallback(_dhx_msg_cfg, true);\r\n\t\t\t\t\t\tpreventDefault = true;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (code == 27) {\r\n\t\t\t\t\tcallback(_dhx_msg_cfg, false);\r\n\t\t\t\t\tpreventDefault = true;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tif (preventDefault) {\r\n\t\t\t\tif (e.preventDefault)\r\n\t\t\t\t\te.preventDefault();\r\n\t\t\t\treturn !(e.cancelBubble = true);\r\n\t\t\t}\r\n\t\t\treturn;\r\n\t\t}\r\n\t}\r\n\r\n\tif (document.attachEvent)\r\n\t\tdocument.attachEvent(\"onkeydown\", modal_key);\r\n\telse\r\n\t\tdocument.addEventListener(\"keydown\", modal_key, true);\r\n\r\n\tfunction modality(mode) {\r\n\t\tif (!modality.cover) {\r\n\t\t\tmodality.cover = document.createElement(\"DIV\");\r\n\t\t\t//necessary for IE only\r\n\t\t\tmodality.cover.onkeydown = modal_key;\r\n\t\t\tmodality.cover.className = \"dhx_modal_cover\";\r\n\t\t\tdocument.body.appendChild(modality.cover);\r\n\t\t}\r\n\t\tvar height = document.body.scrollHeight;\r\n\t\tmodality.cover.style.display = mode ? \"inline-block\" : \"none\";\r\n\t}\r\n\r\n\tfunction button(text, className, result) {\r\n\t\tvar buttonAriaAttrs = gantt._waiAria.messageButtonAttrString(text);\r\n\t\tvar button_css = \"gantt_\" + className.toLowerCase().replace(/ /g, \"_\") + \"_button\" + \" dhtmlx_\" + className.toLowerCase().replace(/ /g, \"_\") + \"_button\"; // dhtmlx_ok_button, dhtmlx_click_me_button\r\n\t\treturn \"<div \" + buttonAriaAttrs + \" class='gantt_popup_button dhtmlx_popup_button \" + button_css + \"' result='\" + result + \"' ><div>\" + text + \"</div></div>\";\r\n\t}\r\n\r\n\tfunction info(text) {\r\n\t\tif (!messageBox.area) {\r\n\t\t\tmessageBox.area = document.createElement(\"DIV\");\r\n\t\t\tmessageBox.area.className = \"gantt_message_area dhtmlx_message_area\";\r\n\t\t\tmessageBox.area.style[messageBox.position] = \"5px\";\r\n\t\t\tdocument.body.appendChild(messageBox.area);\r\n\t\t}\r\n\r\n\t\tmessageBox.hide(text.id);\r\n\t\tvar message = document.createElement(\"DIV\");\r\n\t\tmessage.innerHTML = \"<div>\" + text.text + \"</div>\";\r\n\t\tmessage.className = \"gantt-info dhtmlx-info gantt-\" + text.type + \" dhtmlx-\" + text.type;\r\n\t\tmessage.onclick = function () {\r\n\t\t\tmessageBox.hide(text.id);\r\n\t\t\ttext = null;\r\n\t\t};\r\n\r\n\t\tgantt._waiAria.messageInfoAttr(message);\r\n\r\n\t\tif (messageBox.position == \"bottom\" && messageBox.area.firstChild)\r\n\t\t\tmessageBox.area.insertBefore(message, messageBox.area.firstChild);\r\n\t\telse\r\n\t\t\tmessageBox.area.appendChild(message);\r\n\r\n\t\tif (text.expire > 0)\r\n\t\t\tmessageBox.timers[text.id] = window.setTimeout(function () {\r\n\t\t\t\tmessageBox.hide(text.id);\r\n\t\t\t}, text.expire);\r\n\r\n\t\tmessageBox.pull[text.id] = message;\r\n\t\tmessage = null;\r\n\r\n\t\treturn text.id;\r\n\t}\r\n\r\n\tfunction getFirstDefined() {\r\n\t\tvar values = [].slice.apply(arguments, [0]);\r\n\r\n\t\tfor (var i = 0; i < values.length; i++) {\r\n\t\t\tif (values[i]) {\r\n\t\t\t\treturn values[i];\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tfunction _boxStructure(config, ok, cancel) {\r\n\t\tvar box = document.createElement(\"DIV\");\r\n\r\n\t\tvar locale = gantt.locale;\r\n\r\n\t\tvar contentId = utils.uid();\r\n\t\tgantt._waiAria.messageModalAttr(box, contentId);\r\n\r\n\r\n\t\tbox.className = \" gantt_modal_box dhtmlx_modal_box gantt-\" + config.type + \" dhtmlx-\" + config.type;\r\n\t\tbox.setAttribute(\"dhxbox\", 1);\r\n\r\n\t\tvar inner = '';\r\n\r\n\t\tif (config.width)\r\n\t\t\tbox.style.width = config.width;\r\n\t\tif (config.height)\r\n\t\t\tbox.style.height = config.height;\r\n\t\tif (config.title)\r\n\t\t\tinner += '<div class=\"gantt_popup_title dhtmlx_popup_title\">' + config.title + '</div>';\r\n\t\tinner += '<div class=\"gantt_popup_text dhtmlx_popup_text\" id=\"' + contentId + '\"><span>' + (config.content ? '' : config.text) + '</span></div><div  class=\"gantt_popup_controls dhtmlx_popup_controls\">';\r\n\t\tif (ok)\r\n\t\t\tinner += button(getFirstDefined(config.ok, gantt.locale.labels.message_ok, \"OK\"), \"ok\", true);\r\n\t\tif (cancel)\r\n\t\t\tinner += button(getFirstDefined(config.cancel, gantt.locale.labels.message_cancel, \"Cancel\"), \"cancel\", false);\r\n\r\n\t\tif (config.buttons) {\r\n\t\t\tfor (var i = 0; i < config.buttons.length; i++) {\r\n\t\t\t\tvar btn = config.buttons[i];\r\n\t\t\t\tif (typeof btn == \"object\") {\r\n\t\t\t\t\t// Support { label:\"Save\", css:\"main_button\", value:\"save\" }\r\n\t\t\t\t\tvar label = btn.label;\r\n\t\t\t\t\tvar css = btn.css || (\"gantt_\" + btn.label.toLowerCase() + \"_button dhtmlx_\" + btn.label.toLowerCase() + \"_button\");\r\n\t\t\t\t\tvar value = btn.value || i;\r\n\t\t\t\t\tinner += button(label, css, value);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tinner += button(btn, btn, i);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tinner += '</div>';\r\n\t\tbox.innerHTML = inner;\r\n\r\n\t\tif (config.content) {\r\n\t\t\tvar node = config.content;\r\n\t\t\tif (typeof node == \"string\")\r\n\t\t\t\tnode = document.getElementById(node);\r\n\t\t\tif (node.style.display == 'none')\r\n\t\t\t\tnode.style.display = \"\";\r\n\t\t\tbox.childNodes[config.title ? 1 : 0].appendChild(node);\r\n\t\t}\r\n\r\n\t\tbox.onclick = function (e) {\r\n\t\t\te = e || event;\r\n\t\t\tvar source = e.target || e.srcElement;\r\n\t\t\tif (!source.className) source = source.parentNode;\r\n\t\t\tif (source.className.split(\" \")[0] == \"gantt_popup_button\") {\r\n\t\t\t\tvar result = source.getAttribute(\"result\");\r\n\t\t\t\tresult = (result == \"true\") || (result == \"false\" ? false : result);\r\n\t\t\t\tcallback(config, result);\r\n\t\t\t}\r\n\t\t};\r\n\t\tconfig.box = box;\r\n\t\tif (ok || cancel)\r\n\t\t\t_dhx_msg_cfg = config;\r\n\r\n\t\treturn box;\r\n\t}\r\n\r\n\tfunction _createBox(config, ok, cancel) {\r\n\t\tvar box = config.tagName ? config : _boxStructure(config, ok, cancel);\r\n\r\n\t\tif (!config.hidden)\r\n\t\t\tmodality(true);\r\n\t\tdocument.body.appendChild(box);\r\n\t\tvar x = Math.abs(Math.floor(((window.innerWidth || document.documentElement.offsetWidth) - box.offsetWidth) / 2));\r\n\t\tvar y = Math.abs(Math.floor(((window.innerHeight || document.documentElement.offsetHeight) - box.offsetHeight) / 2));\r\n\t\tif (config.position == \"top\")\r\n\t\t\tbox.style.top = \"-3px\";\r\n\t\telse\r\n\t\t\tbox.style.top = y + 'px';\r\n\t\tbox.style.left = x + 'px';\r\n\t\t//necessary for IE only\r\n\t\tbox.onkeydown = modal_key;\r\n\r\n\t\tmodalBox.focus(box);\r\n\r\n\t\tif (config.hidden)\r\n\t\t\tmodalBox.hide(box);\r\n\r\n\t\tgantt.callEvent(\"onMessagePopup\", [box]);\r\n\t\treturn box;\r\n\t}\r\n\r\n\tfunction alertPopup(config) {\r\n\t\treturn _createBox(config, true, false);\r\n\t}\r\n\r\n\tfunction confirmPopup(config) {\r\n\t\treturn _createBox(config, true, true);\r\n\t}\r\n\r\n\tfunction boxPopup(config) {\r\n\t\treturn _createBox(config);\r\n\t}\r\n\r\n\tfunction box_params(text, type, callback) {\r\n\t\tif (typeof text != \"object\") {\r\n\t\t\tif (typeof type == \"function\") {\r\n\t\t\t\tcallback = type;\r\n\t\t\t\ttype = \"\";\r\n\t\t\t}\r\n\t\t\ttext = {text: text, type: type, callback: callback};\r\n\t\t}\r\n\t\treturn text;\r\n\t}\r\n\r\n\tfunction params(text, type, expire, id) {\r\n\t\tif (typeof text != \"object\")\r\n\t\t\ttext = {text: text, type: type, expire: expire, id: id};\r\n\t\ttext.id = text.id || utils.uid();\r\n\t\ttext.expire = text.expire || messageBox.expire;\r\n\t\treturn text;\r\n\t}\r\n\r\n\tvar alertBox = function () {\r\n\t\tvar text = box_params.apply(this, arguments);\r\n\t\ttext.type = text.type || \"confirm\";\r\n\t\treturn alertPopup(text);\r\n\t};\r\n\tvar confirmBox = function () {\r\n\t\tvar text = box_params.apply(this, arguments);\r\n\t\ttext.type = text.type || \"alert\";\r\n\t\treturn confirmPopup(text);\r\n\t};\r\n\tvar modalBox = function () {\r\n\t\tvar text = box_params.apply(this, arguments);\r\n\t\ttext.type = text.type || \"alert\";\r\n\t\treturn boxPopup(text);\r\n\t};\r\n\tmodalBox.hide = function (node) {\r\n\t\twhile (node && node.getAttribute && !node.getAttribute(\"dhxbox\"))\r\n\t\t\tnode = node.parentNode;\r\n\t\tif (node) {\r\n\t\t\tnode.parentNode.removeChild(node);\r\n\t\t\tmodality(false);\r\n\r\n\t\t\tgantt.callEvent(\"onAfterMessagePopup\", [node]);\r\n\t\t}\r\n\t};\r\n\r\n\tvar domHelpers = __webpack_require__(1);\r\n\r\n\tmodalBox.focus = function (node) {\r\n\t\tsetTimeout(function () {\r\n\t\t\tvar focusable = domHelpers.getFocusableNodes(node);\r\n\t\t\tif (focusable.length) {\r\n\t\t\t\tif (focusable[0].focus) focusable[0].focus();\r\n\t\t\t}\r\n\t\t}, 1);\r\n\t};\r\n\r\n\tvar messageBox = function (text, type, expire, id) {\r\n\t\ttext = params.apply(this, arguments);\r\n\t\ttext.type = text.type || \"info\";\r\n\r\n\t\tvar subtype = text.type.split(\"-\")[0];\r\n\t\tswitch (subtype) {\r\n\t\t\tcase \"alert\":\r\n\t\t\t\treturn alertPopup(text);\r\n\t\t\tcase \"confirm\":\r\n\t\t\t\treturn confirmPopup(text);\r\n\t\t\tcase \"modalbox\":\r\n\t\t\t\treturn boxPopup(text);\r\n\t\t\tdefault:\r\n\t\t\t\treturn info(text);\r\n\t\t}\r\n\t};\r\n\r\n\tmessageBox.seed = (new Date()).valueOf();\r\n\tmessageBox.uid = utils.uid;\r\n\tmessageBox.expire = 4000;\r\n\tmessageBox.keyboard = true;\r\n\tmessageBox.position = \"top\";\r\n\tmessageBox.pull = {};\r\n\tmessageBox.timers = {};\r\n\r\n\tmessageBox.hideAll = function () {\r\n\t\tfor (var key in messageBox.pull)\r\n\t\t\tmessageBox.hide(key);\r\n\t};\r\n\tmessageBox.hide = function (id) {\r\n\t\tvar obj = messageBox.pull[id];\r\n\t\tif (obj && obj.parentNode) {\r\n\t\t\twindow.setTimeout(function () {\r\n\t\t\t\tobj.parentNode.removeChild(obj);\r\n\t\t\t\tobj = null;\r\n\t\t\t}, 2000);\r\n\t\t\tobj.className += \" hidden\";\r\n\r\n\t\t\tif (messageBox.timers[id])\r\n\t\t\t\twindow.clearTimeout(messageBox.timers[id]);\r\n\t\t\tdelete messageBox.pull[id];\r\n\t\t}\r\n\t};\r\n\r\n\treturn {\r\n\t\talert: alertBox,\r\n\t\tconfirm: confirmBox,\r\n\t\tmessage: messageBox,\r\n\t\tmodalbox: modalBox\r\n\t};\r\n};\n\n/***/ }),\n/* 30 */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar uiFactory = __webpack_require__(8),\r\n\tmouseEvents = __webpack_require__(31),\r\n\tcreateLayers = __webpack_require__(32),\r\n\tCell = __webpack_require__(3),\r\n\tLayout = __webpack_require__(6),\r\n\tViewLayout = __webpack_require__(9),\r\n\tViewCell = __webpack_require__(10),\r\n\tResizer = __webpack_require__(11),\r\n\tScrollbar = __webpack_require__(35),\r\n\tTimeline = __webpack_require__(36),\r\n\tGrid = __webpack_require__(38);\r\n\r\nvar renderTaskBar = __webpack_require__(40),\r\n\trenderTaskBg = __webpack_require__(41),\r\n\trenderLink = __webpack_require__(42),\r\n\tgridRenderer = __webpack_require__(43);\r\n\r\nvar mainGridInitializer = __webpack_require__(44);\r\nvar mainTimelineInitializer = __webpack_require__(46);\r\nvar mainLayoutInitializer = __webpack_require__(49);\r\n\r\nfunction initUI(gantt){\r\n\tfunction inheritGridConfig(id){\r\n\t\treturn {\r\n\t\t\t//width: gantt.config.grid_width\r\n\t\t};\r\n\t}\r\n\r\n\tfunction attachInitializer(view, initializer){\r\n\t\tvar ext = initializer(gantt);\r\n\t\tif(ext.onCreated)\r\n\t\t\text.onCreated(view);\r\n\t\tview.attachEvent(\"onReady\", function(){\r\n\t\t\tif(ext.onInitialized)\r\n\t\t\t\text.onInitialized(view);\r\n\t\t});\r\n\t\tview.attachEvent(\"onDestroy\", function(){\r\n\t\t\tif(ext.onDestroyed)\r\n\t\t\t\text.onDestroyed(view);\r\n\t\t});\r\n\t}\r\n\r\n\tvar factory = uiFactory.createFactory(gantt);\r\n\tfactory.registerView(\"cell\", Cell);\r\n\tfactory.registerView(\"resizer\", Resizer);\r\n\tfactory.registerView(\"scrollbar\", Scrollbar);\r\n\tfactory.registerView(\"layout\", Layout, function(view){\r\n\t\tvar id = view.$config ? view.$config.id : null;\r\n\t\tif(id === \"main\"){\r\n\t\t\tattachInitializer(view, mainLayoutInitializer);\r\n\t\t}\r\n\t});\r\n\tfactory.registerView(\"viewcell\", ViewCell);\r\n\tfactory.registerView(\"multiview\", ViewLayout);\r\n\tfactory.registerView(\"timeline\", Timeline, function(view){\r\n\t\tvar id = view.$config ? view.$config.id : null;\r\n\t\tif(id === \"timeline\" || view.$config.bind == \"task\"){\r\n\t\t\tattachInitializer(view, mainTimelineInitializer);\r\n\t\t}\r\n\t});\r\n\tfactory.registerView(\"grid\", Grid, function(view){\r\n\t\tvar id = view.$config ? view.$config.id : null;\r\n\t\tif(id === \"grid\" || view.$config.bind == \"task\"){\r\n\t\t\tattachInitializer(view, mainGridInitializer);\r\n\t\t}\r\n\t});\r\n\r\n\tvar layersEngine = createLayers(gantt);\r\n\r\n\treturn {\r\n\t\tfactory:factory,\r\n\t\tmouseEvents: mouseEvents.init(gantt),\r\n\t\tlayersApi: layersEngine.init(),\r\n\t\trender:{\r\n\t\t\tgridLine: gridRenderer(gantt),\r\n\t\t\ttaskBg: renderTaskBg(gantt),\r\n\t\t\ttaskBar: renderTaskBar(gantt),\r\n\t\t\tlink: renderLink(gantt)\r\n\t\t},\r\n\t\tlayersService: {\r\n\t\t\tgetDataRender: function(name){\r\n\t\t\t\treturn layersEngine.getDataRender(name, gantt);\r\n\t\t\t},\r\n\t\t\tcreateDataRender: function(config){\r\n\t\t\t\treturn layersEngine.createDataRender(config, gantt);\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n}\r\n\r\nmodule.exports = {\r\n\tinit: initUI\r\n};\n\n/***/ }),\n/* 31 */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar domHelpers = __webpack_require__(1);\r\n\r\nvar createMouseHandler = (function(domHelpers) {\r\n\treturn function (gantt) {\r\n\t\tvar eventHandlers = {\r\n\t\t\t\"click\": {},\r\n\t\t\t\"doubleclick\": {},\r\n\t\t\t\"contextMenu\": {}\r\n\t\t};\r\n\r\n\t\tfunction addEventTarget(event, className, handler, root) {\r\n\t\t\tif(!eventHandlers[event][className]){\r\n\t\t\t\teventHandlers[event][className] = [];\r\n\t\t\t}\r\n\r\n\t\t\teventHandlers[event][className].push({\r\n\t\t\t\thandler: handler,\r\n\t\t\t\troot: root\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\tfunction callHandler(eventName, className, root, args) {\r\n\t\t\tvar handlers = eventHandlers[eventName][className];\r\n\t\t\tif(handlers){\r\n\t\t\t\tfor(var i = 0; i < handlers.length; i++){\r\n\t\t\t\t\tif(!root || root == handlers[i].root == root){\r\n\t\t\t\t\t\thandlers[i].handler.apply(this, args);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tfunction onClick(e) {\r\n\t\t\te = e || window.event;\r\n\t\t\tvar trg = e.target || e.srcElement;\r\n\t\t\tvar id = gantt.locate(e);\r\n\r\n\t\t\tvar res = true;\r\n\t\t\tif (id !== null) {\r\n\t\t\t\tres = !gantt.checkEvent(\"onTaskClick\") || gantt.callEvent(\"onTaskClick\", [id, e]);\r\n\t\t\t} else {\r\n\t\t\t\tgantt.callEvent(\"onEmptyClick\", [e]);\r\n\t\t\t}\r\n\r\n\t\t\tvar targets = eventHandlers.click;\r\n\r\n\t\t\tif (res) {\r\n\t\t\t\tvar default_action = findEventHandler(e, trg, targets, id);\r\n\t\t\t\tif (!default_action)\r\n\t\t\t\t\treturn;\r\n\r\n\t\t\t\tif (id && gantt.getTask(id) && gantt.config.select_task) {\r\n\t\t\t\t\tgantt.selectTask(id);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tfunction onContextMenu(e) {\r\n\t\t\te = e || window.event;\r\n\t\t\tvar src = e.target || e.srcElement,\r\n\t\t\t\ttaskId = gantt.locate(src),\r\n\t\t\t\tlinkId = gantt.locate(src, gantt.config.link_attribute);\r\n\r\n\t\t\tvar res = !gantt.checkEvent(\"onContextMenu\") || gantt.callEvent(\"onContextMenu\", [taskId, linkId, e]);\r\n\t\t\tif (!res) {\r\n\t\t\t\tif (e.preventDefault)\r\n\t\t\t\t\te.preventDefault();\r\n\t\t\t\telse\r\n\t\t\t\t\te.returnValue = false;\r\n\t\t\t}\r\n\t\t\treturn res;\r\n\t\t}\r\n\r\n\t\tfunction findEventHandler(e, trg, hash, id) {\r\n\t\t\tvar res = true;\r\n\t\t\twhile (trg) {\r\n\t\t\t\tvar css = domHelpers.getClassName(trg);\r\n\t\t\t\tif (css) {\r\n\t\t\t\t\tcss = css.split(\" \");\r\n\t\t\t\t\tfor (var i = 0; i < css.length; i++) {\r\n\t\t\t\t\t\tif (!css[i]) continue;\r\n\t\t\t\t\t\tif (hash[css[i]]) {\r\n\t\t\t\t\t\t\tvar delegateHandlers = hash[css[i]];\r\n\r\n\t\t\t\t\t\t\tfor(var h = 0; h < delegateHandlers.length; h++){\r\n\t\t\t\t\t\t\t\tif(delegateHandlers[h].root){\r\n\t\t\t\t\t\t\t\t\tif(!domHelpers.isChildOf(trg, delegateHandlers[h].root)){\r\n\t\t\t\t\t\t\t\t\t\tcontinue;\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tvar handler = delegateHandlers[h].handler.call(gantt, e, id, trg);\r\n\t\t\t\t\t\t\t\tres = res && !(typeof handler != \"undefined\" && handler !== true);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\ttrg = trg.parentNode;\r\n\t\t\t}\r\n\t\t\treturn res;\r\n\t\t}\r\n\r\n\t\tfunction onDoubleClick(e) {\r\n\t\t\te = e || window.event;\r\n\t\t\tvar trg = e.target || e.srcElement;\r\n\t\t\tvar id = gantt.locate(e);\r\n\t\t\tvar res = !gantt.checkEvent(\"onTaskDblClick\") || gantt.callEvent(\"onTaskDblClick\", [id, e]);\r\n\t\t\tif (res) {\r\n\t\t\t\tvar default_action = findEventHandler(e, trg, eventHandlers.doubleclick, id);\r\n\t\t\t\tif (!default_action)\r\n\t\t\t\t\treturn;\r\n\r\n\t\t\t\tif (id !== null && gantt.getTask(id)) {\r\n\t\t\t\t\tif (res && gantt.config.details_on_dblclick) {\r\n\t\t\t\t\t\tgantt.showLightbox(id);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tfunction onMouseMove(e) {\r\n\t\t\tif (gantt.checkEvent(\"onMouseMove\")) {\r\n\t\t\t\tvar id = gantt.locate(e);\r\n\t\t\t\tgantt._last_move_event = e;\r\n\t\t\t\tgantt.callEvent(\"onMouseMove\", [id, e]);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tfunction detach(eventName, className, handler, root) {\r\n\t\t\tif (eventHandlers[eventName]) {\r\n\t\t\t\tfor(var i = 0; i < eventHandlers[eventName].length; i++){\r\n\t\t\t\t\tif(eventHandlers[eventName][i].root == root){\r\n\t\t\t\t\t\teventHandlers[eventName].splice(i, 1);\r\n\t\t\t\t\t\ti--;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tvar globalHandlers = [];\r\n\r\n\t\tfunction reset(node){\r\n\r\n\t\t\tfor(var i = 0; i < globalHandlers.length; i++){\r\n\t\t\t\tgantt.eventRemove(globalHandlers[i][0], globalHandlers[i][1], globalHandlers[i][2]);\r\n\t\t\t}\r\n\t\t\tglobalHandlers = [];\r\n\r\n\t\t\tif(node){\r\n\t\t\t\tglobalHandlers.push([node, \"click\", onClick]);\r\n\t\t\t\tglobalHandlers.push([node, \"dblclick\", onDoubleClick]);\r\n\t\t\t\tglobalHandlers.push([node, \"mousemove\", onMouseMove]);\r\n\t\t\t\tglobalHandlers.push([node, \"contextmenu\", onContextMenu]);\r\n\t\t\t\tfor(var i = 0; i < globalHandlers.length; i++){\r\n\t\t\t\t\tgantt.event(globalHandlers[i][0], globalHandlers[i][1], globalHandlers[i][2]);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\r\n\r\n\t\treturn {\r\n\t\t\treset: reset,\r\n\t\t\tglobal: function(event, classname, handler){\r\n\t\t\t\taddEventTarget(event, classname, handler, null);\r\n\t\t\t},\r\n\t\t\tdelegate: addEventTarget,\r\n\t\t\tdetach: detach,\r\n\t\t\tcallHandler: callHandler\r\n\t\t};\r\n\t};\r\n\r\n})(domHelpers);\r\n\r\n\r\nmodule.exports = {\r\n\tinit:createMouseHandler\r\n};\n\n/***/ }),\n/* 32 */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar createLayerFactory = __webpack_require__(33);\r\n\r\nvar createLayerEngine = function(gantt){\r\n\tvar factory = createLayerFactory(gantt);\r\n\treturn {\r\n\t\tgetDataRender: function(name){\r\n\t\t\treturn gantt.$services.getService(\"layer:\" + name) || null;\r\n\t\t},\r\n\t\tcreateDataRender: function(config){\r\n\t\t\tvar name = config.name,\r\n\t\t\t\tdefaultContainer = config.defaultContainer,\r\n\t\t\t\tpreviusSiblingContainer = config.defaultContainerSibling;\r\n\r\n\t\t\tvar layers = factory.createGroup(\r\n\t\t\t\tdefaultContainer,\r\n\t\t\t\tpreviusSiblingContainer,\r\n\t\t\t\tfunction(item){\r\n\t\t\t\t\tif(layers.filters){\r\n\t\t\t\t\t\tfor(var i = 0; i < layers.filters.length; i++){\r\n\t\t\t\t\t\t\tif(layers.filters[i](item) === false){\r\n\t\t\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\treturn true;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t);\r\n\r\n\t\t\tgantt.$services.setService(\"layer:\" + name, function(){\r\n\t\t\t\treturn layers;\r\n\t\t\t});\r\n\r\n\t\t\tgantt.attachEvent(\"onGanttReady\", function () {\r\n\t\t\t\tlayers.addLayer();// init layers on start\r\n\t\t\t});\r\n\r\n\t\t\treturn layers;\r\n\t\t},\r\n\t\tinit: function(){\r\n\t\t\tvar taskLayers = this.createDataRender({\r\n\t\t\t\tname: \"task\",\r\n\t\t\t\tdefaultContainer: function(){return gantt.$task_data; },\r\n\t\t\t\tdefaultContainerSibling: function(){return gantt.$task_links; },\r\n\t\t\t\tfilter: function(item){\r\n\r\n\t\t\t\t}\r\n\t\t\t}, gantt);\r\n\r\n\t\t\tvar linkLayers = this.createDataRender({\r\n\t\t\t\tname: \"link\",\r\n\t\t\t\tdefaultContainer: function(){return gantt.$task_data; }\r\n\t\t\t}, gantt);\r\n\r\n\t\t\treturn {\r\n\t\t\t\taddTaskLayer: function(config){\r\n\t\t\t\t\treturn taskLayers.addLayer(config);\r\n\t\t\t\t},\r\n\r\n\t\t\t\t/*getTaskLayer: function(id){\r\n\t\t\t\t\treturn taskLayers.getLayer(id);\r\n\t\t\t\t},*/\r\n\r\n\t\t\t\t_getTaskLayers: function(){\r\n\t\t\t\t\treturn taskLayers.getLayers();\r\n\t\t\t\t},\r\n\t\t\t\tremoveTaskLayer: function(id){\r\n\t\t\t\t\ttaskLayers.removeLayer(id);\r\n\t\t\t\t},\r\n\t\t\t\t/*eachTaskLayer: function(code){\r\n\t\t\t\t\ttaskLayers.eachLayer(code);\r\n\t\t\t\t},*/\r\n\t\t\t\t_clearTaskLayers: function(){\r\n\t\t\t\t\ttaskLayers.clear();\r\n\t\t\t\t},\r\n\t\t\t\taddLinkLayer: function(config){\r\n\t\t\t\t\treturn linkLayers.addLayer(config);\r\n\t\t\t\t},\r\n\t\t\t\t/*getLinkLayer: function(id){\r\n\t\t\t\t\treturn linkLayers.getLayer(id);\r\n\t\t\t\t},*/\r\n\t\t\t\t_getLinkLayers: function(){\r\n\t\t\t\t\treturn linkLayers.getLayers();\r\n\t\t\t\t},\r\n\t\t\t\tremoveLinkLayer: function(id){\r\n\t\t\t\t\tlinkLayers.removeLayer(id);\r\n\t\t\t\t},\r\n\t\t\t\t/*eachLinkLayer: function(code){\r\n\t\t\t\t\tlinkLayers.eachLayer(code);\r\n\t\t\t\t},*/\r\n\t\t\t\t_clearLinkLayers: function(){\r\n\t\t\t\t\tlinkLayers.clear();\r\n\t\t\t\t}\r\n\t\t\t};\r\n\t\t}\r\n\t};\r\n};\r\n\r\nmodule.exports = createLayerEngine;\n\n/***/ }),\n/* 33 */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar renderFactoryProvider = __webpack_require__(34);\r\nvar utils = __webpack_require__(0);\r\n\r\nvar layerFactory = function(gantt){\r\n\r\n\tvar renderFactory = renderFactoryProvider(gantt);\r\n\treturn {\r\n\tcreateGroup: function (get_container, rel_root, defaultFilters) {\r\n\r\n\t\treturn {\r\n\t\t\ttempCollection: [],\r\n\t\t\trenderers: {},\r\n\t\t\tcontainer: get_container,\r\n\t\t\tfilters: [],\r\n\t\t\tgetLayers: function () {\r\n\t\t\t\tvar res = [];\r\n\t\t\t\tfor (var i in this.renderers) {\r\n\t\t\t\t\tres.push(this.renderers[i]);\r\n\t\t\t\t}\r\n\t\t\t\treturn res;\r\n\t\t\t},\r\n\t\t\tgetLayer: function (id) {\r\n\t\t\t\treturn this.renderers[id];\r\n\t\t\t},\r\n\t\t\t_add: function (layer) {\r\n\t\t\t\tif (layer) {\r\n\t\t\t\t\tlayer.id = layer.id || utils.uid();\r\n\t\t\t\t\tthis.tempCollection.push(layer);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (!this.container()) return;\r\n\r\n\t\t\t\tvar container = this.container();\r\n\r\n\t\t\t\tvar pending = this.tempCollection;\r\n\t\t\t\tfor (var i = 0; i < pending.length; i++) {\r\n\t\t\t\t\tlayer = pending[i];\r\n\r\n\r\n\t\t\t\t\tvar node = layer.container,\r\n\t\t\t\t\t\tid = layer.id,\r\n\t\t\t\t\t\ttopmost = layer.topmost;\r\n\t\t\t\t\tif (!node.parentNode) {\r\n\t\t\t\t\t\t//insert on top or below the tasks\r\n\t\t\t\t\t\tif (topmost) {\r\n\t\t\t\t\t\t\tcontainer.appendChild(node);\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tvar rel = rel_root ? rel_root() : container.firstChild;\r\n\t\t\t\t\t\t\tif (rel)\r\n\t\t\t\t\t\t\t\tcontainer.insertBefore(node, rel);\r\n\t\t\t\t\t\t\telse\r\n\t\t\t\t\t\t\t\tcontainer.appendChild(node);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthis.renderers[id] = renderFactory.getRenderer(\r\n\t\t\t\t\t\tid,\r\n\t\t\t\t\t\tlayer,\r\n\t\t\t\t\t\tnode\r\n\t\t\t\t\t);\r\n\t\t\t\t\tthis.tempCollection.splice(i, 1);\r\n\t\t\t\t\ti--;\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\taddLayer: function (config) {\r\n\t\t\t\t//config = prepareConfig(config);\r\n\t\t\t\tif(config){\r\n\t\t\t\t\tif(typeof config == \"function\"){\r\n\t\t\t\t\t\tconfig = {renderer: config};\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif(config.filter === undefined){\r\n\t\t\t\t\t\tconfig.filter = mergeFilters(defaultFilters || []);\r\n\t\t\t\t\t}else if(config.filter instanceof Array){\r\n\t\t\t\t\t\tconfig.filter.push(defaultFilters);\r\n\t\t\t\t\t\tconfig.filter = mergeFilters(config.filter);\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif(!config.container){\r\n\t\t\t\t\t\tconfig.container = document.createElement(\"div\");\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tthis._add(config);\r\n\t\t\t\treturn (config ? config.id : undefined);\r\n\t\t\t},\r\n\t\t\teachLayer: function(code){\r\n\t\t\t\tfor (var i in this.renderers) {\r\n\t\t\t\t\tcode(this.renderers[i]);\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tremoveLayer: function (id) {\r\n\t\t\t\tthis.renderers[id].unload();\r\n\t\t\t\tdelete this.renderers[id];\r\n\t\t\t},\r\n\t\t\tclear: function () {\r\n\t\t\t\tfor (var i in this.renderers) {\r\n\t\t\t\t\tthis.renderers[i].unload();\r\n\t\t\t\t}\r\n\t\t\t\tthis.renderers = {};\r\n\t\t\t}//,\r\n\t\t\t//prepareConfig: prepareConfig\r\n\t\t};\r\n\t}\r\n};};\r\n\r\n\r\nfunction mergeFilters(filter_methods){\r\n\tif(!(filter_methods instanceof Array)){\r\n\t\tfilter_methods = Array.prototype.slice.call(arguments, 0);\r\n\t}\r\n\r\n\treturn function(obj){\r\n\t\tvar res = true;\r\n\t\tfor(var i = 0, len = filter_methods.length; i < len; i++){\r\n\t\t\tvar filter_method = filter_methods[i];\r\n\t\t\tif(filter_method){\r\n\t\t\t\tres = res && (filter_method(obj.id, obj) !== false);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn res;\r\n\t};\r\n}\r\n\r\n\r\nmodule.exports = layerFactory;\r\n\n\n/***/ }),\n/* 34 */\n/***/ (function(module, exports) {\n\nvar rendererFactory = function(gantt){\r\n\tvar services = gantt.$services;\r\n\r\n\t//hash of dom elements is needed to redraw single bar/link\r\n\tvar task_area_pulls = {},\r\n\t\ttask_area_renderers = {};\r\n\r\n\tfunction getRenderer(id, layer, node) {\r\n\r\n\t\tif (task_area_renderers[id])\r\n\t\t\treturn task_area_renderers[id];\r\n\r\n\t\tif (!layer.renderer)\r\n\t\t\tgantt.assert(false, \"Invalid renderer call\");\r\n\r\n\t\tvar renderOne = function(item){\r\n\t\t\treturn layer.renderer.call(this, item, layer.host);\r\n\t\t} ;\r\n\r\n\t\tvar filter = layer.filter;\r\n\r\n\t\tif (node)\r\n\t\t\tnode.setAttribute(services.config().layer_attribute, true);\r\n\r\n\t\ttask_area_renderers[id] = {\r\n\t\t\trender_item: function (item, container) {\r\n\t\t\t\tcontainer = container || node;\r\n\r\n\t\t\t\tif (filter) {\r\n\t\t\t\t\tif (!filter(item)) {\r\n\t\t\t\t\t\tthis.remove_item(item.id);\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tvar dom = renderOne.call(gantt, item);\r\n\t\t\t\tthis.append(item, dom, container);\r\n\r\n\t\t\t},\r\n\r\n\t\t\tclear: function (container) {\r\n\t\t\t\tthis.rendered = task_area_pulls[id] = {};\r\n\t\t\t\tthis.clear_container(container);\r\n\t\t\t},\r\n\t\t\tclear_container: function (container) {\r\n\t\t\t\tcontainer = container || node;\r\n\t\t\t\tif (container)\r\n\t\t\t\t\tcontainer.innerHTML = \"\";\r\n\t\t\t},\r\n\t\t\trender_items: function (items, container) {\r\n\t\t\t\tcontainer = container || node;\r\n\r\n\t\t\t\tvar buffer = document.createDocumentFragment();\r\n\t\t\t\tthis.clear(container);\r\n\t\t\t\tfor (var i = 0, vis = items.length; i < vis; i++) {\r\n\t\t\t\t\tthis.render_item(items[i], buffer);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tcontainer.appendChild(buffer);\r\n\t\t\t},\r\n\t\t\tappend: function (item, node, container) {\r\n\t\t\t\tif (!node) {\r\n\t\t\t\t\tif (this.rendered[item.id]) {\r\n\t\t\t\t\t\tthis.remove_item(item.id);\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (this.rendered[item.id] && this.rendered[item.id].parentNode) {\r\n\t\t\t\t\tthis.replace_item(item.id, node);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tcontainer.appendChild(node);\r\n\t\t\t\t}\r\n\t\t\t\tthis.rendered[item.id] = node;\r\n\r\n\t\t\t},\r\n\t\t\treplace_item: function (item_id, newNode) {\r\n\t\t\t\tvar item = this.rendered[item_id];\r\n\t\t\t\tif (item && item.parentNode) {\r\n\t\t\t\t\titem.parentNode.replaceChild(newNode, item);\r\n\t\t\t\t}\r\n\t\t\t\tthis.rendered[item_id] = newNode;\r\n\t\t\t},\r\n\t\t\tremove_item: function (item_id) {\r\n\t\t\t\tthis.hide(item_id);\r\n\t\t\t\tdelete this.rendered[item_id];\r\n\t\t\t},\r\n\t\t\thide: function (item_id) {\r\n\t\t\t\tvar item = this.rendered[item_id];\r\n\t\t\t\tif (item && item.parentNode) {\r\n\t\t\t\t\titem.parentNode.removeChild(item);\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\trestore: function (item) {\r\n\t\t\t\tvar dom = this.rendered[item.id];\r\n\t\t\t\tif (dom) {\r\n\t\t\t\t\tif (!dom.parentNode) {\r\n\t\t\t\t\t\tthis.append(item, dom, node);\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.render_item(item, node);\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tchange_id: function (oldid, newid) {\r\n\t\t\t\tthis.rendered[newid] = this.rendered[oldid];\r\n\t\t\t\tdelete this.rendered[oldid];\r\n\t\t\t},\r\n\t\t\trendered: task_area_pulls[id],\r\n\t\t\tnode: node,\r\n\t\t\tunload: function () {\r\n\t\t\t\tthis.clear();\r\n\t\t\t\tdelete task_area_renderers[id];\r\n\t\t\t\tdelete task_area_pulls[id];\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\treturn task_area_renderers[id];\r\n\t}\r\n\r\n\r\n\tfunction clearRenderers() {\r\n\t\tfor (var i in task_area_renderers) {\r\n\t\t\tgetRenderer(i).unload();\r\n\t\t}\r\n\t}\r\n\r\n\treturn {\r\n\t\tgetRenderer: getRenderer,\r\n\t\tclearRenderers: clearRenderers\r\n\t};\r\n\r\n};\r\n\r\nmodule.exports = rendererFactory;\n\n/***/ }),\n/* 35 */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar __extends = __webpack_require__(4),\r\n\tdomHelpers = __webpack_require__(1),\r\n\tutils = __webpack_require__(0),\r\n\tenv = __webpack_require__(5),\r\n\teventable = __webpack_require__(2),\r\n\tCell = __webpack_require__(3);\r\n\r\nvar ScrollbarCell = (function (_super) {\r\n\t\"use strict\";\r\n\r\n\t__extends(ScrollbarCell, _super);\r\n\tfunction ScrollbarCell(parent, config, factory, gantt) {\r\n\r\n\t\tvar _this = _super.apply(this, arguments) || this;\r\n\t\tthis.$config = utils.mixin(config, {scroll: \"x\"});\r\n\t\t_this._scrollHorizontalHandler = utils.bind(_this._scrollHorizontalHandler, _this);\r\n\t\t_this._scrollVerticalHandler = utils.bind(_this._scrollVerticalHandler, _this);\r\n\t\t_this._outerScrollVerticalHandler = utils.bind(_this._outerScrollVerticalHandler, _this);\r\n\t\t_this._outerScrollHorizontalHandler = utils.bind(_this._outerScrollHorizontalHandler, _this);\r\n\t\t_this._mouseWheelHandler = utils.bind(_this._mouseWheelHandler, _this);\r\n\r\n\t\tthis.$config.hidden = true;\r\n\t\tvar size = gantt.config.scroll_size;\r\n\t\tif(this._isHorizontal()){\r\n\t\t\t_this.$config.height = size;\r\n\t\t\t_this.$parent.$config.height = size;\r\n\t\t}else{\r\n\t\t\t_this.$config.width = size;\r\n\t\t\t_this.$parent.$config.width = size;\r\n\t\t}\r\n\r\n\t\tthis.$config.scrollPosition = 0;\r\n\r\n\t\t_this.$name = \"scroller\";\r\n\t\treturn _this;\r\n\t}\r\n\r\n\tScrollbarCell.prototype.init = function(container){\r\n\t\tcontainer.innerHTML = this.$toHTML();\r\n\t\tthis.$view = container.firstChild;\r\n\r\n\t\tif(!this.$view){\r\n\t\t\tthis.init();\r\n\t\t}\r\n\t\tif(this._isVertical()){\r\n\t\t\tthis._initVertical();\r\n\t\t}else{\r\n\t\t\tthis._initHorizontal();\r\n\t\t}\r\n\t\tthis._initMouseWheel();\r\n\t\tthis._initLinkedViews();\r\n\t};\r\n\r\n\tScrollbarCell.prototype.$toHTML = function () {\r\n\t\tvar className = this._isHorizontal() ? \"gantt_hor_scroll\" : \"gantt_ver_scroll\";\r\n\t\treturn \"<div class='gantt_layout_cell \"+className+\"'><div style='\"+(this._isHorizontal() ? \"width:2000px\" : \"height:2000px\")+\"'></div></div>\";\r\n\t};\r\n\r\n\tScrollbarCell.prototype._getRootParent = function(){\r\n\t\tvar parent = this.$parent;\r\n\t\twhile(parent && parent.$parent){\r\n\t\t\tparent = parent.$parent;\r\n\t\t}\r\n\t\tif(parent){\r\n\t\t\treturn parent;\r\n\t\t}\r\n\t};\r\n\r\n\r\n\tfunction eachCell(root, res){\r\n\t\tres.push(root);\r\n\t\tif(root.$cells){\r\n\t\t\tfor(var i = 0; i < root.$cells.length; i++){\r\n\t\t\t\teachCell(root.$cells[i], res);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\tScrollbarCell.prototype._eachView = function(){\r\n\t\tvar res = [];\r\n\t\teachCell(this._getRootParent(), res);\r\n\t\treturn res;\r\n\t};\r\n\r\n\tScrollbarCell.prototype._getLinkedViews = function(){\r\n\t\tvar views = this._eachView();\r\n\t\tvar res = [];\r\n\t\tfor(var i = 0; i < views.length; i++){\r\n\t\t\tif(views[i].$config && ((this._isVertical() && views[i].$config.scrollY == this.$id) || (this._isHorizontal() && views[i].$config.scrollX == this.$id)) ){\r\n\t\t\t\tres.push(views[i]);\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn res;\r\n\t};\r\n\r\n\r\n\tScrollbarCell.prototype._initHorizontal = function(){\r\n\t\tthis.$scroll_hor = this.$view;\r\n\t\tutils.event(this.$view, \"scroll\", this._scrollHorizontalHandler);\r\n\r\n\t};\r\n\r\n\tScrollbarCell.prototype._initLinkedViews = function(){\r\n\t\tvar views = this._getLinkedViews();\r\n\t\tvar css = this._isVertical() ?\"gantt_layout_outer_scroll gantt_layout_outer_scroll_vertical\" : \"gantt_layout_outer_scroll gantt_layout_outer_scroll_horizontal\";\r\n\t\tfor(var i = 0; i < views.length; i++){\r\n\t\t\t//views[i].$config.css = [views[i].$config.css || \"\", css].join(\" \");\r\n\t\t\tdomHelpers.addClassName(views[i].$view || views[i].getNode(), css);\r\n\t\t}\r\n\t};\r\n\r\n\tScrollbarCell.prototype._initVertical = function(){\r\n\t\tthis.$scroll_ver = this.$view;\r\n\t\tutils.event(this.$view, \"scroll\", this._scrollVerticalHandler);\r\n\t};\r\n\r\n\tScrollbarCell.prototype._updateLinkedViews = function(){\r\n\t\tvar root = this._getRootParent();\r\n\t};\r\n\r\n\tScrollbarCell.prototype._initMouseWheel = function(){\r\n\t\tvar ff = env.isFF;\r\n\t\tif (ff)\r\n\t\t\tutils.event(this._getRootParent().$view, \"wheel\", this._mouseWheelHandler);\r\n\t\telse\r\n\t\t\tutils.event(this._getRootParent().$view, \"mousewheel\", this._mouseWheelHandler);\r\n\t};\r\n\r\n\r\n\r\n\r\n\tScrollbarCell.prototype.scrollHorizontally = function(left){\r\n\t\tif(this._scrolling) return;\r\n\t\tthis._scrolling = true;\r\n\r\n\t\tthis.$scroll_hor.scrollLeft = left;\r\n\t\tleft = this.$scroll_hor.scrollLeft;\r\n\r\n\t\tvar views = this._getLinkedViews();\r\n\t\tfor(var i = 0; i < views.length; i++){\r\n\t\t\tif(views[i].scrollTo){\r\n\t\t\t\tviews[i].scrollTo(left, undefined);\r\n\t\t\t}\r\n\t\t}\r\n\t\tvar oldSize = this.$config.scrollPosition;\r\n\t\tthis.$config.scrollPosition = left;\r\n\t\tthis.callEvent(\"onScroll\", [oldSize, left, this.$config.scroll]);\r\n\t\tthis._scrolling = false;\r\n\t};\r\n\tScrollbarCell.prototype.scrollVertically = function(top){\r\n\t\tif(this._scrolling) return;\r\n\t\tthis._scrolling = true;\r\n\r\n\t\tthis.$scroll_ver.scrollTop = top;\r\n\t\ttop = this.$scroll_ver.scrollTop;\r\n\r\n\t\tvar views = this._getLinkedViews();\r\n\r\n\t\tfor(var i = 0; i < views.length; i++){\r\n\t\t\tif(views[i].scrollTo){\r\n\t\t\t\tviews[i].scrollTo(undefined, top);\r\n\t\t\t}\r\n\t\t}\r\n\t\tvar oldSize = this.$config.scrollPosition;\r\n\t\tthis.$config.scrollPosition = top;\r\n\t\tthis.callEvent(\"onScroll\", [oldSize, top, this.$config.scroll]);\r\n\t\tthis._scrolling = false;\r\n\t};\r\n\r\n\tScrollbarCell.prototype._isVertical = function(){\r\n\t\treturn this.$config.scroll == \"y\";\r\n\t};\r\n\tScrollbarCell.prototype._isHorizontal = function(){\r\n\t\treturn this.$config.scroll == \"x\";\r\n\t};\r\n\tScrollbarCell.prototype._scrollHorizontalHandler = function (e) {\r\n\t\tif(this._isVertical() || this._scrolling){\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\t//in safari we can catch previous onscroll after setting new value from mouse-wheel event\r\n\t\t//set delay to prevent value drifiting\r\n\t\tif ((new Date()) - ( this._wheel_time || 0 ) < 100) return true;\r\n\t\tif (gantt._touch_scroll_active) return;\r\n\t\tvar left = this.$scroll_hor.scrollLeft;\r\n\r\n\t\tthis.scrollHorizontally(left);\r\n\r\n\t\tthis._oldLeft = this.$scroll_hor.scrollLeft;\r\n\t};\r\n\tScrollbarCell.prototype._outerScrollHorizontalHandler = function(e){\r\n\t\tif(this._isVertical()){\r\n\t\t\treturn;\r\n\t\t}\r\n\t};\r\n\r\n\tScrollbarCell.prototype.show = function(){\r\n\t\tthis.$parent.show();\r\n\t};\r\n\tScrollbarCell.prototype.hide = function(){\r\n\t\tthis.$parent.hide();\r\n\t};\r\n\r\n\tScrollbarCell.prototype._getScrollSize = function(){\r\n\t\tvar scrollSize = 0;\r\n\t\tvar outerSize = 0;\r\n\r\n\t\tvar linked = this._getLinkedViews();\r\n\t\tvar view;\r\n\t\tvar scrollProperty = this._isHorizontal() ? \"contentX\" : \"contentY\";\r\n\t\tvar outerProperty = this._isHorizontal() ? \"x\" : \"y\";\r\n\t\tfor(var i = 0; i < linked.length; i++){\r\n\t\t\tview = linked[i];\r\n\t\t\tif(!(view && view.$content && view.$content.getSize)) continue;\r\n\r\n\t\t\tvar sizes = view.$content.getSize();\r\n\r\n\t\t\tif(sizes[scrollProperty] > sizes[outerProperty] && sizes[scrollProperty] > scrollSize){\r\n\t\t\t\tscrollSize = sizes[scrollProperty];\r\n\t\t\t\touterSize = sizes[outerProperty];\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn {\r\n\t\t\touterScroll: outerSize,\r\n\t\t\tinnerScroll: scrollSize\r\n\t\t};\r\n\t};\r\n\r\n\tScrollbarCell.prototype.scroll = function(position){\r\n\t\tif(this._isHorizontal()){\r\n\t\t\tthis.scrollHorizontally(position);\r\n\t\t}else{\r\n\t\t\tthis.scrollVertically(position);\r\n\t\t}\r\n\t};\r\n\r\n\tScrollbarCell.prototype.getScrollState = function(){\r\n\t\treturn {\r\n\t\t\tvisible: this._isVisible(),\r\n\t\t\tdirection: this.$config.scroll,\r\n\t\t\tsize: this._isHorizontal() ? this.$config.width : this.$config.height,\r\n\t\t\tscrollSize: this.$config.scrollSize || 0,\r\n\t\t\tposition: this.$config.scrollPosition || 0\r\n\t\t};\r\n\t};\r\n\r\n\tScrollbarCell.prototype.setSize = function(width, height){\r\n\t\t_super.prototype.setSize.apply(this, arguments);\r\n\r\n\t\tvar scrollSizes = this._getScrollSize();\r\n\t\tif(scrollSizes.innerScroll && width > scrollSizes.outerScroll){\r\n\t\t\tscrollSizes.innerScroll += (width - scrollSizes.outerScroll);\r\n\t\t}\r\n\t\tthis.$config.scrollSize = scrollSizes.innerScroll;\r\n\r\n\t\tthis.$config.width = width;\r\n\t\tthis.$config.height = height;\r\n\t\tthis._setScrollSize(scrollSizes.innerScroll);\r\n\t};\r\n\r\n\tScrollbarCell.prototype._isVisible = function(){\r\n\t\treturn !!(this.$parent && this.$parent.$view.parentNode);\r\n\t};\r\n\r\n\tScrollbarCell.prototype.toggleVisibility = function(){\r\n\t\tvar scrollSizes = this._getScrollSize();\r\n\t\tif(!scrollSizes.innerScroll && (this.$parent && this.$parent.$view.parentNode)){\r\n\t\t\tthis.hide();\r\n\t\t}else if(scrollSizes.innerScroll && !(this.$parent && this.$parent.$view.parentNode)){\r\n\t\t\tthis.show();\r\n\t\t}\r\n\t};\r\n\r\n\tScrollbarCell.prototype._setScrollSize = function(size){\r\n\t\tvar property = this._isHorizontal() ? \"width\" : \"height\";\r\n\t\tvar scrollbar = this._isHorizontal() ? this.$scroll_hor : this.$scroll_ver;\r\n\r\n\t\tvar offset = 0;\r\n\t\tif(this._isVertical()){\r\n\t\t\tvar prev = null;\r\n\t\t\tvar cells = this.$parent.$parent.getCells();\r\n\r\n\t\t\tfor (var i = 0; i < cells.length; i++) {\r\n\t\t\t\tif (this.$parent === cells[i]) {\r\n\t\t\t\t\tprev = cells[i - 1];\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif(prev && (prev.$config.view == \"timeline\" || prev.$config.view == \"grid\")){\r\n\t\t\t\toffset = prev.$content.$getConfig().scale_height;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tvar node = scrollbar.firstChild;\r\n\r\n\t\tif(offset && this._isVertical()){\r\n\r\n\t\t\tscrollbar.style.height = (this.$config.height - offset) + \"px\";\r\n\t\t\tscrollbar.style.top = (offset-1) + \"px\";\r\n\t\t\tdomHelpers.addClassName(scrollbar, this.$parent._borders.top);\r\n\t\t}else{\r\n\t\t\tscrollbar.style.top = \"auto\";\r\n\t\t\tdomHelpers.removeClassName(scrollbar, this.$parent._borders.top);\r\n\t\t}\r\n\r\n\t\tnode.style[property] = size + \"px\";\r\n\t};\r\n\r\n\tScrollbarCell.prototype._scrollVerticalHandler = function (e) {\r\n\t\tif(this._scrollHorizontalHandler() || this._scrolling){\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tif (gantt._touch_scroll_active) return;\r\n\t\tvar top = this.$scroll_ver.scrollTop;\r\n\t\tvar prev = this._oldTop;\r\n\t\tif(top == prev) return;\r\n\r\n\t\tthis.scrollVertically(top);\r\n\r\n\t\tthis._oldTop = this.$scroll_ver.scrollTop;\r\n\r\n\t};\r\n\tScrollbarCell.prototype._outerScrollVerticalHandler = function(e){\r\n\t\tif(this._scrollHorizontalHandler()){\r\n\t\t\treturn;\r\n\t\t}\r\n\t};\r\n\r\n\tScrollbarCell.prototype._checkWheelTarget = function(targetNode){\r\n\t\tvar connectedViews = this._getLinkedViews().concat(this);\r\n\r\n\t\tfor(var i = 0; i < connectedViews.length; i++){\r\n\t\t\tvar node = connectedViews[i].$view;\r\n\t\t\tif(domHelpers.isChildOf(targetNode, node)){\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn false;\r\n\t};\r\n\r\n\tScrollbarCell.prototype._mouseWheelHandler = function(e){\r\n\t\tvar target = e.target || e.srcElement;\r\n\r\n\t\tif(!this._checkWheelTarget(target))\r\n\t\t\treturn;\r\n\r\n\t\tthis._wheel_time = new Date();\r\n\r\n\t\tvar res = {};\r\n\t\tvar ff = env.isFF;\r\n\t\tvar wx = ff ? (e.deltaX*-20) : e.wheelDeltaX*2;\r\n\t\tvar wy = ff ? (e.deltaY*-40) : e.wheelDelta;\r\n\r\n\t\tif(e.shiftKey && !(e.deltaX || e.wheelDeltaX)){\r\n\t\t\t// shift+mousewheel for horizontal scroll\r\n\t\t\twx = wy*2;\r\n\t\t\twy = 0;\r\n\t\t}\r\n\r\n\t\tif (wx && Math.abs(wx) > Math.abs(wy)){\r\n\t\t\tif(this._isVertical()){\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tif(res.x) return true;//no horisontal scroll, must not block scrolling\r\n\t\t\tif(!this.$scroll_hor || !this.$scroll_hor.offsetWidth) return true;\r\n\r\n\t\t\tvar dir  = wx/-40;\r\n\t\t\tvar oldLeft = this._oldLeft;\r\n\t\t\tvar left = oldLeft+dir*30;\r\n\t\t\tthis.scrollHorizontally(left);\r\n\t\t\tthis.$scroll_hor.scrollLeft = left;\r\n\t\t\t// not block scroll if position hasn't changed\r\n\t\t\tif(oldLeft == this.$scroll_hor.scrollLeft){\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\r\n\t\t\tthis._oldLeft = this.$scroll_hor.scrollLeft;\r\n\t\t} else {\r\n\t\t\tif(this._isHorizontal()){\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tif(res.y) return true;//no vertical scroll, must not block scrolling\r\n\t\t\tif(!this.$scroll_ver || !this.$scroll_ver.offsetHeight) return true;\r\n\r\n\t\t\tvar dir  = wy/-40;\r\n\t\t\tif (typeof wy == \"undefined\")\r\n\t\t\t\tdir = e.detail;\r\n\r\n\t\t\tvar oldTop = this._oldTop;\r\n\t\t\tvar top = this.$scroll_ver.scrollTop+dir*30;\r\n\r\n\t\t\t//if(!gantt.config.prevent_default_scroll &&\r\n\t\t\t//\t(gantt._cached_scroll_pos && ((gantt._cached_scroll_pos.y == top) || (gantt._cached_scroll_pos.y <= 0 && top <= 0)))) return true;\r\n\r\n\r\n\t\t\tthis.scrollVertically(top);\r\n\t\t\tthis.$scroll_ver.scrollTop = top;\r\n\r\n\t\t\t// not block scroll if position hasn't changed\r\n\t\t\tif(oldTop == this.$scroll_ver.scrollTop){\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t\tthis._oldTop = this.$scroll_ver.scrollTop;\r\n\t\t}\r\n\r\n\t\tif (e.preventDefault)\r\n\t\t\te.preventDefault();\r\n\t\te.cancelBubble=true;\r\n\t\treturn false;\r\n\t};\r\n\r\n\treturn ScrollbarCell;\r\n})(Cell);\r\n\r\nmodule.exports = ScrollbarCell;\n\n/***/ }),\n/* 36 */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar ScaleHelper = __webpack_require__(12);\r\nvar configurable = __webpack_require__(13);\r\nvar eventable = __webpack_require__(2);\r\nvar utils = __webpack_require__(0);\r\n\r\nvar canvasRender = __webpack_require__(37);\r\n\r\nvar Timeline = function(parent, config, factory, gantt){\r\n\tthis.$config = utils.mixin({}, config || {});\r\n\tthis.$scaleHelper = new ScaleHelper(gantt);\r\n\tthis.$gantt = gantt;\r\n\teventable(this);\r\n\tconfigurable(this);\r\n};\r\n\r\nTimeline.prototype = {\r\n\tinit: function(container){\r\n\t\tcontainer.innerHTML += \"<div class='gantt_task' style='width:inherit;height:inherit;'></div>\";\r\n\t\tthis.$task = container.childNodes[0];\r\n\r\n\t\tthis.$task.innerHTML = \"<div class='gantt_task_scale'></div><div class='gantt_data_area'></div>\";\r\n\t\tthis.$task_scale = this.$task.childNodes[0];\r\n\r\n\t\tthis.$task_data = this.$task.childNodes[1];\r\n\t\tthis.$task_data.innerHTML = \"<div class='gantt_task_bg'></div><div class='gantt_links_area'></div><div class='gantt_bars_area'></div>\";\r\n\t\tthis.$task_bg = this.$task_data.childNodes[0];\r\n\t\tthis.$task_links = this.$task_data.childNodes[1];\r\n\t\tthis.$task_bars = this.$task_data.childNodes[2];\r\n\r\n\t\tthis._tasks = {\r\n\t\t\tcol_width: 0,\r\n\t\t\twidth: [], // width of each column\r\n\t\t\tfull_width: 0, // width of all columns\r\n\t\t\ttrace_x: [],\r\n\t\t\trendered: {}\r\n\t\t};\r\n\r\n\t\tvar config = this.$getConfig();\r\n\t\tvar attr = config[this.$config.bind + \"_attribute\"];\r\n\t\tvar linksAttr = config[this.$config.bindLinks + \"_attribute\"];\r\n\t\tif(!attr && this.$config.bind){\r\n\t\t\tattr = this.$config.bind + \"_id\";\r\n\t\t}\r\n\t\tif(!linksAttr && this.$config.bindLinks){\r\n\t\t\tlinksAttr = this.$config.bindLinks + \"_id\";\r\n\t\t}\r\n\t\tthis.$config.item_attribute = attr || null;\r\n\t\tthis.$config.link_attribute = linksAttr || null;\r\n\r\n\t\tvar layers = this._createLayerConfig();\r\n\t\tif(!this.$config.layers){\r\n\t\t\tthis.$config.layers = layers.tasks;\r\n\t\t}\r\n\t\tif(!this.$config.linkLayers){\r\n\t\t\tthis.$config.linkLayers = layers.links;\r\n\t\t}\r\n\r\n\t\tthis._attachLayers(this.$gantt);\r\n\t\tthis.callEvent(\"onReady\", []);\r\n\t\t//this.refresh();\r\n\t},\r\n\r\n\tsetSize: function(width, height){\r\n\t\tvar config = this.$getConfig();\r\n\r\n\t\tif(width*1 === width){\r\n\t\t\tthis.$config.width = width;\r\n\t\t}\r\n\t\tif(height*1 === height){\r\n\r\n\t\t\tthis.$config.height = height;\r\n\t\t\tvar dataHeight = Math.max(this.$config.height - config.scale_height);\r\n\t\t\tthis.$task_data.style.height = dataHeight + 'px';\r\n\t\t}\r\n\r\n\t\tthis.refresh();\r\n\t\tthis.$task_bg.style.backgroundImage = \"\";\r\n\r\n\t\tif(config.smart_rendering){\r\n\t\t\tvar store = this.$gantt.getDatastore(this.$config.bind);\r\n\t\t\tthis.$task_bg.style.height = config.row_height * store.countVisible() +\"px\";\r\n\t\t}else{\r\n\t\t\tthis.$task_bg.style.height = \"\";\r\n\t\t}\r\n\r\n\t\tvar scale = this._tasks;\r\n\t\t//timeline area layers\r\n\t\tvar data_els = this.$task_data.childNodes;\r\n\t\tfor(var i= 0, len = data_els.length; i < len; i++){\r\n\t\t\tvar el = data_els[i];\r\n\t\t\tif(el.hasAttribute(\"data-layer\") && el.style)\r\n\t\t\t\tel.style.width = scale.full_width + \"px\";\r\n\t\t}\r\n\t},\r\n\r\n\tisVisible: function(){\r\n\t\tif(this.$parent && this.$parent.$config){\r\n\t\t\treturn !this.$parent.$config.hidden;\r\n\t\t}else{\r\n\t\t\treturn this.$task.offsetWidth;\r\n\t\t}\r\n\t},\r\n\r\n\tgetSize: function(){\r\n\t\tvar config = this.$getConfig();\r\n\t\tvar store = this.$gantt.getDatastore(this.$config.bind);\r\n\r\n\t\treturn {\r\n\t\t\tx: this.$config.width,\r\n\t\t\ty: this.$config.height,\r\n\t\t\tcontentX: this.isVisible() ? this._tasks.full_width : 0,\r\n\t\t\tcontentY: config.scale_height + config.row_height * store.countVisible()\r\n\t\t};\r\n\t},\r\n\r\n\tscrollTo: function(left, top){\r\n\t\tif(!this.isVisible())\r\n\t\t\treturn;\r\n\r\n\t\tif(top*1 === top){\r\n\t\t\tthis.$config.scrollTop = top;\r\n\t\t\tthis.$task_data.scrollTop = this.$config.scrollTop;\r\n\t\t}\r\n\t\tif (left*1 === left){\r\n\t\t\tthis.$task.scrollLeft = left;\r\n\t\t\tthis.$config.scrollLeft = this.$task.scrollLeft;\r\n\t\t}\r\n\r\n\t\tthis._refreshScales();\r\n\t},\r\n\r\n\t_refreshScales: function _refreshScales() {\r\n\t\tif(!this.isVisible())\r\n\t\t\treturn;\r\n\r\n\t\tvar config = this.$getConfig();\r\n\t\tif (!config.smart_scales) return;\r\n\r\n\t\tvar x = this.$config.scrollLeft;\r\n\t\tvar width = this.$config.width;\r\n\r\n\t\tvar scales = this._scales;\r\n\t\tthis.$task_scale.innerHTML = this._getScaleChunkHtml(scales, x, x + width);\r\n\t},\r\n\t_createLayerConfig: function(){\r\n\t\tvar self = this;\r\n\t\tvar taskFilter = function(){\r\n\t\t\treturn self.isVisible();\r\n\t\t};\r\n\r\n\t\tvar taskLayers = [\r\n\t\t\t{\r\n\t\t\t\texpose: true,\r\n\t\t\t\trenderer: this.$gantt.$ui.layers.taskBar,\r\n\t\t\t\tcontainer: this.$task_bars,\r\n\t\t\t\tfilter: [taskFilter]\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\trenderer: this.$gantt.$ui.layers.taskBg,\r\n\t\t\t\tcontainer: this.$task_bg,\r\n\t\t\t\tfilter: [\r\n\t\t\t\t\tfunction(){\r\n\t\t\t\t\t\treturn !self.$getConfig().static_background;\r\n\t\t\t\t\t},\r\n\t\t\t\t\ttaskFilter\r\n\t\t\t\t]\r\n\t\t\t}\r\n\t\t];\r\n\r\n\t\tvar linkLayers = [\r\n\t\t\t{\r\n\t\t\t\texpose: true,\r\n\t\t\t\trenderer: this.$gantt.$ui.layers.link,\r\n\t\t\t\tcontainer: this.$task_links,\r\n\t\t\t\tfilter: [taskFilter]\r\n\t\t\t}\r\n\t\t];\r\n\r\n\t\treturn {\r\n\t\t\ttasks: taskLayers,\r\n\t\t\tlinks: linkLayers\r\n\t\t};\r\n\r\n\t},\r\n\r\n\t_attachLayers: function(gantt){\r\n\t\tthis._taskLayers = [];\r\n\t\tthis._linkLayers = [];\r\n\r\n\t\tvar self = this;\r\n\r\n\t\tvar layers = this.$gantt.$services.getService(\"layers\");\r\n\r\n\t\tif(this.$config.bind){\r\n\t\t\tvar taskRenderer = layers.getDataRender(this.$config.bind);\r\n\r\n\t\t\tif(!taskRenderer){\r\n\t\t\t\ttaskRenderer = layers.createDataRender({\r\n\t\t\t\t\tname: this.$config.bind,\r\n\t\t\t\t\tdefaultContainer: function(){ return self.$task_data;}\r\n\t\t\t\t});\r\n\t\t\t}\r\n\r\n\t\t\ttaskRenderer.container = function(){ return self.$task_data;};\r\n\r\n\t\t\tvar taskLayers = this.$config.layers;\r\n\t\t\tfor(var i = 0; taskLayers && i < taskLayers.length; i++){\r\n\t\t\t\tvar layer = taskLayers[i];\r\n\r\n\t\t\t\tif(typeof layer == \"function\"){\r\n\t\t\t\t\tlayer = {renderer: layer};\r\n\t\t\t\t}\r\n\r\n\t\t\t\tlayer.host = this;\r\n\t\t\t\tvar bar_layer = taskRenderer.addLayer(layer);\r\n\t\t\t\tthis._taskLayers.push(bar_layer);\r\n\t\t\t\tif(layer.expose){\r\n\t\t\t\t\tthis._taskRenderer = taskRenderer.getLayer(bar_layer);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tvar staticRender = canvasRender.create();\r\n\t\t\tthis.$gantt.attachEvent(\"onDataRender\", function () {\r\n\t\t\t\tif(!self.isVisible())\r\n\t\t\t\t\treturn;\r\n\t\t\t\tvar config = self.$getConfig();\r\n\t\t\t\tif(config.static_background) {\r\n\t\t\t\t\tvar store = self.$gantt.getDatastore(self.$config.bind);\r\n\t\t\t\t\tstaticRender.render(self.$task_bg, config, self.getScale(), config.row_height * store.countVisible());\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\tif(this.$config.bindLinks){\r\n\t\t\tvar linkRenderer = layers.getDataRender(this.$config.bindLinks);\r\n\r\n\t\t\tif(!linkRenderer){\r\n\t\t\t\tlinkRenderer = layers.createDataRender({\r\n\t\t\t\t\tname: this.$config.bindLinks,\r\n\t\t\t\t\tdefaultContainer: function(){ return self.$task_data;}\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t\tvar linkLayers = this.$config.linkLayers;\r\n\t\t\tfor(var i = 0; linkLayers && i < linkLayers.length; i++){\r\n\t\t\t\tvar layer = linkLayers[i];\r\n\t\t\t\tlayer.host = this;\r\n\t\t\t\tvar linkLayer = linkRenderer.addLayer(layer);\r\n\t\t\t\tthis._taskLayers.push(linkLayer);\r\n\t\t\t\tif(linkLayers[i].expose){\r\n\t\t\t\t\tthis._linkRenderer = linkRenderer.getLayer(linkLayer);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\r\n\t_clearLayers: function(gantt){\r\n\t\tvar layers = this.$gantt.$services.getService(\"layers\");\r\n\t\tvar taskRenderer = layers.getDataRender(this.$config.bind);\r\n\t\tvar linkRenderer = layers.getDataRender(this.$config.bindLinks);\r\n\r\n\t\tfor(var i = 0; i < this._taskLayers.length; i++){\r\n\t\t\ttaskRenderer.removeLayer(this._taskLayers[i]);\r\n\t\t}\r\n\t\tfor(var i = 0; i < this._linkLayers.length; i++){\r\n\t\t\tlinkRenderer.removeLayer(this._linkLayers[i]);\r\n\t\t}\r\n\r\n\t\tthis._linkLayers = [];\r\n\t\tthis._taskLayers = [];\r\n\t},\r\n\r\n\t_render_tasks_scales: function _render_tasks_scales() {\r\n\t\tvar config = this.$getConfig();\r\n\r\n\t\tvar scales_html = \"\",\r\n\t\t\touter_width = 0,\r\n\t\t\tscale_height = 0;\r\n\r\n\t\tvar state = this.$gantt.getState();\r\n\r\n\t\tif (this.isVisible()) {\r\n\t\t\tvar helpers = this.$scaleHelper;\r\n\t\t\tvar scales = this._getScales();\r\n\t\t\tscale_height = (config.scale_height - 1);\r\n\r\n\t\t\tvar availWidth = this.$config.width;\r\n\t\t\tif(config.autosize == \"x\" || config.autosize == \"xy\"){\r\n\t\t\t\tavailWidth = Math.max(config.autosize_min_width, 0);\r\n\t\t\t}\r\n\r\n\t\t\tvar cfgs = helpers.prepareConfigs(scales, config.min_column_width, availWidth, scale_height, state.min_date, state.max_date);\r\n\t\t\tvar cfg = this._tasks = cfgs[cfgs.length - 1];\r\n\t\t\tthis._scales = cfgs;\r\n\r\n\t\t\tscales_html = this._getScaleChunkHtml(cfgs, 0, this.$config.width);\r\n\r\n\t\t\touter_width = cfg.full_width + \"px\";//cfg.full_width + (this._scroll_sizes().y ? scrollSizes.scroll_size : 0) + \"px\";\r\n\t\t\tscale_height += \"px\";\r\n\t\t}\r\n\r\n\t\tthis.$task_scale.style.height = scale_height;\r\n\r\n\t\tthis.$task_data.style.width =\r\n\t\t\tthis.$task_scale.style.width = outer_width;\r\n\r\n\t\tthis.$task_scale.innerHTML = scales_html;\r\n\r\n\t},\r\n\r\n\t_getScaleChunkHtml: function _get_scale_chunk_html (scales, fromPos, toPos) {\r\n\t\tvar templates = this.$gantt.$services.templates();\r\n\t\tvar html = [];\r\n\r\n\t\tvar css = templates.scale_row_class;\r\n\t\tfor (var i = 0; i < scales.length; i++) {\r\n\t\t\tvar cssClass = \"gantt_scale_line\";\r\n\t\t\tvar tplClass = css(scales[i]);\r\n\t\t\tif (tplClass) {\r\n\t\t\t\tcssClass += \" \" + tplClass;\r\n\t\t\t}\r\n\r\n\t\t\thtml.push(\"<div class=\\\"\" + cssClass + \"\\\" style=\\\"height:\" + (scales[i].height) +\r\n\t\t\t\t\"px;position:relative;line-height:\" + (scales[i].height) + \"px\\\">\" + this._prepareScaleHtml(scales[i], fromPos, toPos) + \"</div>\");\r\n\t\t}\r\n\r\n\t\treturn html.join(\"\");\r\n\t},\r\n\t_prepareScaleHtml: function _prepare_scale_html(config, fromPos, toPos) {\r\n\t\tvar globalConfig = this.$getConfig();\r\n\t\tvar globalTemplates = this.$gantt.$services.templates();\r\n\r\n\t\tvar cells = [];\r\n\t\tvar date = null, content = null, css = null;\r\n\r\n\t\tif (config.template || config.date) {\r\n\t\t\tcontent = config.template || this.$gantt.date.date_to_str(config.date);\r\n\t\t}\r\n\r\n\t\tvar startIndex = 0,\r\n\t\t\tendIndex = config.count;\r\n\r\n\t\tif (globalConfig.smart_scales && (!isNaN(fromPos) && !isNaN(toPos))) {\r\n\t\t\tstartIndex = _findBinary(config.left, fromPos);\r\n\t\t\tendIndex = _findBinary(config.left, toPos) + 1;\r\n\t\t}\r\n\r\n\t\tcss = config.css || function () {\r\n\t\t\t};\r\n\t\tif (!config.css && globalConfig.inherit_scale_class) {\r\n\t\t\tcss = globalTemplates.scale_cell_class;\r\n\t\t}\r\n\r\n\t\tfor (var i = startIndex; i < endIndex; i++) {\r\n\t\t\tif (!config.trace_x[i]) break;\r\n\r\n\t\t\tdate = new Date(config.trace_x[i]);\r\n\t\t\tvar value = content.call(this, date),\r\n\t\t\t\twidth = config.width[i],\r\n\t\t\t\theight = config.height - (globalConfig.smart_scales ? (config.index ? 1 : 0) : 0),\r\n\t\t\t\tleft = config.left[i],\r\n\t\t\t\tstyle = \"\",\r\n\t\t\t\ttemplate = \"\",\r\n\t\t\t\tcssclass = \"\";\r\n\r\n\t\t\tif (width) {\r\n\t\t\t\tvar position = globalConfig.smart_scales ? (\"position:absolute;left:\" + left + \"px\") : \"\";\r\n\r\n\t\t\t\tstyle = \"width:\" + (width) + \"px;height:\" + height + \"px;\" + position;\r\n\t\t\t\tcssclass = \"gantt_scale_cell\" + (i == config.count - 1 ? \" gantt_last_cell\" : \"\");\r\n\r\n\t\t\t\ttemplate = css.call(this, date);\r\n\t\t\t\tif (template) cssclass += \" \" + template;\r\n\r\n\t\t\t\tvar ariaAttr = this.$gantt._waiAria.getTimelineCellAttr(value);\r\n\t\t\t\tvar cell = \"<div class='\" + cssclass + \"'\" + ariaAttr + \" style='\" + style + \"'>\" + value + \"</div>\";\r\n\t\t\t\tcells.push(cell);\r\n\t\t\t} else {\r\n\t\t\t\t//do not render ignored cells\r\n\t\t\t}\r\n\r\n\t\t}\r\n\t\treturn cells.join(\"\");\r\n\t},\r\n\tdateFromPos: function dateFromPos(x) {\r\n\t\tvar scale = this._tasks;\r\n\t\tif (x < 0 || x > scale.full_width || !scale.full_width) {\r\n\t\t\treturn null;\r\n\t\t}\r\n\r\n\t\tvar ind = _findBinary(this._tasks.left, x);\r\n\t\tvar summ = this._tasks.left[ind];\r\n\r\n\t\tvar col_width = scale.width[ind] || scale.col_width;\r\n\t\tvar part = 0;\r\n\t\tif (col_width)\r\n\t\t\tpart = (x - summ) / col_width;\r\n\r\n\t\tvar unit = 0;\r\n\t\tif (part) {\r\n\t\t\tunit = this._getColumnDuration(scale, scale.trace_x[ind]);\r\n\t\t}\r\n\r\n\t\tvar date = new Date(scale.trace_x[ind].valueOf() + Math.round(part * unit));\r\n\t\treturn date;\r\n\t},\r\n\tposFromDate: function posFromDate(date) {\r\n\t\tif (!this.isVisible())\r\n\t\t\treturn 0;\r\n\r\n\t\tvar ind = this.columnIndexByDate(date);\r\n\t\tthis.$gantt.assert(ind >= 0, \"Invalid day index\");\r\n\r\n\t\tvar wholeCells = Math.floor(ind);\r\n\t\tvar partCell = ind % 1;\r\n\r\n\t\tvar pos = this._tasks.left[Math.min(wholeCells, this._tasks.width.length - 1)];\r\n\t\tif (wholeCells == this._tasks.width.length)\r\n\t\t\tpos += this._tasks.width[this._tasks.width.length - 1];\r\n\t\t//for(var i=1; i <= wholeCells; i++)\r\n\t\t//\tpos += gantt._tasks.width[i-1];\r\n\r\n\t\tif (partCell) {\r\n\t\t\tif (wholeCells < this._tasks.width.length) {\r\n\t\t\t\tpos += this._tasks.width[wholeCells] * (partCell % 1);\r\n\t\t\t} else {\r\n\t\t\t\tpos += 1;\r\n\t\t\t}\r\n\r\n\t\t}\r\n\t\treturn Math.round(pos);\r\n\t},\r\n\tcolumnIndexByDate: function columnIndexByDate(date) {\r\n\t\tvar pos = new Date(date).valueOf();\r\n\t\tvar days = this._tasks.trace_x,\r\n\t\t\tignores = this._tasks.ignore_x;\r\n\r\n\t\tvar state = this.$gantt.getState();\r\n\r\n\t\tif (pos <= state.min_date)\r\n\t\t\treturn 0;\r\n\r\n\t\tif (pos >= state.max_date)\r\n\t\t\treturn days.length;\r\n\r\n\t\t/*var day = null;\r\n\t\t for (var xind = 0, length = days.length-1; xind < length; xind++) {\r\n\t\t // | 8:00, 8:30 | 8:15 should be checked against 8:30\r\n\t\t // clicking at the most left part of the cell, say 8:30 should create event in that cell, not previous one\r\n\t\t day = +days[xind+1];\r\n\t\t if (pos < day && !ignores[day])\r\n\t\t break;\r\n\t\t }*/\r\n\r\n\t\tvar day_ind = _findBinary(days, pos);\r\n\t\tvar day = +this._tasks.trace_x[day_ind];\r\n\t\twhile (ignores[day]) {\r\n\t\t\tday = this._tasks.trace_x[++day_ind];\r\n\t\t}\r\n\r\n\t\tif (!day) return 0;\r\n\r\n\t\treturn day_ind + ((date - days[day_ind]) / this._getColumnDuration(this._tasks, days[day_ind]));\r\n\t},\r\n\tgetItemPosition:function (task, start_date, end_date) {\r\n\t\tvar x = this.posFromDate(start_date || task.start_date);\r\n\t\tvar x2 = this.posFromDate(end_date || task.end_date);\r\n\t\tx2 = Math.max(x, x2);\r\n\t\tvar y = this.getItemTop(task.id);\r\n\t\tvar height = this.$gantt.getTaskHeight();\r\n\t\treturn {\r\n\t\t\tleft: x,\r\n\t\t\ttop: y,\r\n\t\t\theight: height,\r\n\t\t\twidth: Math.max((x2 - x), 0)\r\n\t\t};\r\n\t},\r\n\r\n\tgetItemHeight: function(){\r\n\t\tvar config = this.$getConfig();\r\n\r\n\t\t// height of the bar item\r\n\t\tvar height = config.task_height;\r\n\r\n\t\tif (height == \"full\") {\r\n\t\t\tvar offset = config.task_height_offset || 5;\r\n\t\t\theight = config.row_height - offset;\r\n\t\t}\r\n\t\t//item height cannot be bigger than row height\r\n\t\theight = Math.min(height, config.row_height);\r\n\t\treturn Math.max(height, 0);\r\n\t},\r\n\r\n\tgetRowTop: function(index){\r\n\t\treturn index * this.$getConfig().row_height;\r\n\t},\r\n\r\n\tgetItemTop: function (task_id) {\r\n\t\tif(this.$config.bind){\r\n\t\t\tvar store = this.$gantt.getDatastore(this.$config.bind);\r\n\t\t\tif(!store) return 0;\r\n\r\n\t\t\treturn store.getIndexById(task_id) * this.$gantt.config.row_height;\r\n\r\n\t\t}else{\r\n\t\t\treturn 0;\r\n\t\t}\r\n\r\n\t},\r\n\r\n\tgetScale: function(){\r\n\t\treturn this._tasks;\r\n\t},\r\n\r\n\t_getScales: function _get_scales() {\r\n\t\tvar config = this.$getConfig();\r\n\t\tvar helpers = this.$scaleHelper;\r\n\t\tvar scales = [helpers.primaryScale()].concat(config.subscales);\r\n\r\n\t\thelpers.sortScales(scales);\r\n\t\treturn scales;\r\n\t},\r\n\r\n\t_getColumnDuration: function _get_coll_duration(scale, date) {\r\n\t\treturn this.$gantt.date.add(date, scale.step, scale.unit) - date;\r\n\t},\r\n\r\n\trefresh: function(){\r\n\t\tthis._render_tasks_scales();\r\n\t},\r\n\r\n\tdestroy: function(){\r\n\t\tvar gantt = this.$gantt;\r\n\t\tthis._clearLayers(gantt);\r\n\r\n\t\tthis.$task = null;\r\n\t\tthis.$task_scale = null;\r\n\t\tthis.$task_data = null;\r\n\t\tthis.$task_bg = null;\r\n\t\tthis.$task_links = null;\r\n\t\tthis.$task_bars = null;\r\n\r\n\t\tthis.$gantt = null;\r\n\t}\r\n};\r\n\r\nmodule.exports = Timeline;\r\n\r\nfunction _findBinary(array, target) {\r\n\t// modified binary search, target value not exactly match array elements, looking for closest one\r\n\r\n\tvar low = 0, high = array.length - 1, i, item, prev;\r\n\twhile (low <= high) {\r\n\r\n\t\ti = Math.floor((low + high) / 2);\r\n\t\titem = +array[i];\r\n\t\tprev = +array[i - 1];\r\n\t\tif (item < target) {\r\n\t\t\tlow = i + 1;\r\n\t\t\tcontinue;\r\n\t\t}\r\n\t\tif (item > target) {\r\n\t\t\tif (!(!isNaN(prev) && prev < target)) {\r\n\t\t\t\thigh = i - 1;\r\n\t\t\t\tcontinue;\r\n\t\t\t} else {\r\n\t\t\t\t// if target is between 'i' and 'i-1' return 'i - 1'\r\n\t\t\t\treturn i - 1;\r\n\t\t\t}\r\n\r\n\t\t}\r\n\t\twhile (+array[i] == +array[i + 1]) i++;\r\n\r\n\t\treturn i;\r\n\t}\r\n\treturn array.length - 1;\r\n}\r\n\r\n\n\n/***/ }),\n/* 37 */\n/***/ (function(module, exports) {\n\nvar createStaticBgHelper = function(){\r\n\treturn {\r\n\t\trender: function(){}\r\n\t};\r\n};\r\n\r\nmodule.exports = {\r\n\tcreate: function(){\r\n\t\treturn createStaticBgHelper();\r\n\t}\r\n};\r\n\r\n\n\n/***/ }),\n/* 38 */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar domHelpers = __webpack_require__(1),\r\n\tutils = __webpack_require__(0),\r\n\teventable = __webpack_require__(2),\r\n\tgridResize = __webpack_require__(39),\r\n\tconfigurable = __webpack_require__(13);\r\n\r\nvar Grid = function(parent, config, factory, gantt){\r\n\tthis.$config = utils.mixin({}, config || {});\r\n\tthis.$gantt = gantt;\r\n\tthis.$parent = parent;\r\n\tconfigurable(this);\r\n\teventable(this);\r\n\tthis.$state = {};\r\n};\r\n\r\nGrid.prototype = {\r\n\tinit: function(container){\r\n\t\tvar gantt = this.$gantt;\r\n\t\tvar gridAriaAttr = gantt._waiAria.gridAttrString();\r\n\t\tvar gridDataAriaAttr = gantt._waiAria.gridDataAttrString();\r\n\r\n\t\tcontainer.innerHTML = \"<div class='gantt_grid' style='height:inherit;width:inherit;' \"+gridAriaAttr+\"></div>\";\r\n\t\tthis.$grid = container.childNodes[0];\r\n\r\n\t\tthis.$grid.innerHTML = \"<div class='gantt_grid_scale' \"+\r\n\t\t\tgantt._waiAria.gridScaleRowAttrString()+\"></div><div class='gantt_grid_data' \"+gridDataAriaAttr+\"></div>\";\r\n\r\n\t\tthis.$grid_scale = this.$grid.childNodes[0];\r\n\t\tthis.$grid_data = this.$grid.childNodes[1];\r\n\r\n\t\tvar attr = this.$getConfig()[this.$config.bind + \"_attribute\"];\r\n\t\tif(!attr && this.$config.bind){\r\n\t\t\tattr = this.$config.bind + \"_id\";\r\n\t\t}\r\n\t\tthis.$config.item_attribute = attr || null;\r\n\t\tvar layers = this._createLayerConfig();\r\n\t\tif(!this.$config.layers){\r\n\t\t\tthis.$config.layers = layers;\r\n\t\t}\r\n\r\n\t\tvar resizer = gridResize(this.$gantt, this);\r\n\t\tresizer.init();\r\n\t\tthis._renderHeaderResizers = resizer.doOnRender;\r\n\r\n\t\tthis._addLayers(this.$gantt);\r\n\t\tthis.callEvent(\"onReady\", []);\r\n\t\t//this.refresh();\r\n\t},\r\n\tsetSize: function(width, height){\r\n\t\tthis.$config.width = width;\r\n\t\tthis.$state.width = width;\r\n\t\tthis.$state.height = height;\r\n\t\tthis._setColumnsWidth(width);\r\n\r\n\t\tvar config = this.$getConfig();\r\n\t\tvar dataHeight = Math.max(this.$state.height - config.scale_height, 0);\r\n\t\tthis.$grid_data.style.height = dataHeight + \"px\";\r\n\t\tthis.refresh();\r\n\t},\r\n\tgetSize: function(){\r\n\r\n\t\tvar config = this.$getConfig();\r\n\r\n\t\tvar size = {\r\n\t\t\tx: this.$state.width,\r\n\t\t\ty: this.$state.height,\r\n\t\t\tcontentX: this._getGridWidth(),\r\n\t\t\tcontentY: config.scale_height\r\n\t\t};\r\n\r\n\t\tvar store = this.$gantt.getDatastore(this.$config.bind);\r\n\t\tif(store){\r\n\t\t\tsize.contentY += config.row_height * store.countVisible();\r\n\t\t}\r\n\t\treturn size;\r\n\t},\r\n\trefresh: function(){\r\n\t\tthis._calculateGridWidth();\r\n\t\tthis._renderGridHeader();\r\n\t},\r\n\tscrollTo: function(left, top){\r\n\t\tif(!this.isVisible())\r\n\t\t\treturn;\r\n\r\n\t\tif (left*1 == left){\r\n\t\t\tthis.$grid.scrollLeft = left;\r\n\t\t\tthis.$state.scrollLeft = this.$grid.scrollLeft;\r\n\t\t}\r\n\r\n\t\tvar config = this.$getConfig();\r\n\t\tif(top*1 == top){\r\n\t\t\tthis.$grid_data.scrollTop = top;\r\n\t\t\tthis.$state.scrollTop = this.$grid_data.scrollTop;\r\n\t\t\tif(config.smart_rendering && this.$grid_data.scrollTop !== top){\r\n\t\t\t\tthis.$grid_data.scrollTop = top % config.row_height;\r\n\t\t\t\tthis.$state.scrollTop = this.$grid_data.scrollTop;\r\n\t\t\t}\r\n\t\t}else{\r\n\t\t\tif(config.smart_rendering && this.$grid_data.scrollTop !== this.$state.scrollTop){\r\n\t\t\t\tthis.$grid_data.scrollTop = this.$state.scrollTop % config.row_height;\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\tgetGridColumns: function(){\r\n\t\tvar config = this.$getConfig();\r\n\t\treturn config.columns;\r\n\t},\r\n\tisVisible: function(){\r\n\t\tif(this.$parent && this.$parent.$config){\r\n\t\t\treturn !this.$parent.$config.hidden;\r\n\t\t}else{\r\n\t\t\treturn this.$grid.offsetWidth;\r\n\t\t}\r\n\t},\r\n\r\n\t_createLayerConfig: function(){\r\n\t\tvar gantt = this.$gantt;\r\n\t\tvar self = this;\r\n\t\tvar layers = [\r\n\t\t\t{\r\n\t\t\t\trenderer: gantt.$ui.layers.gridLine,\r\n\t\t\t\tcontainer: this.$grid_data,\r\n\t\t\t\tfilter: [function(){\r\n\t\t\t\t\treturn self.isVisible();\r\n\t\t\t\t}]\r\n\t\t\t}\r\n\t\t];\r\n\t\treturn layers;\r\n\t},\r\n\r\n\t_addLayers: function(gantt){\r\n\t\tif(!this.$config.bind)\r\n\t\t\treturn;\r\n\r\n\t\tthis._taskLayers = [];\r\n\r\n\t\tvar self = this;\r\n\r\n\t\tvar layers = this.$gantt.$services.getService(\"layers\");\r\n\t\tvar taskRenderer = layers.getDataRender(this.$config.bind);\r\n\r\n\t\tif(!taskRenderer){\r\n\t\t\ttaskRenderer = layers.createDataRender({\r\n\t\t\t\tname: this.$config.bind,\r\n\t\t\t\tdefaultContainer: function(){ return self.$grid_data;}\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\tvar taskLayers = this.$config.layers;\r\n\t\tfor(var i = 0; taskLayers && i < taskLayers.length; i++){\r\n\t\t\tvar layer = taskLayers[i];\r\n\t\t\tlayer.host = this;\r\n\t\t\tvar bar_layer = taskRenderer.addLayer(layer);\r\n\t\t\tthis._taskLayers.push(bar_layer);\r\n\t\t}\r\n\t},\r\n\r\n\t_clearLayers: function(gantt){\r\n\t\tvar layers = this.$gantt.$services.getService(\"layers\");\r\n\t\tvar taskRenderer = layers.getDataRender(this.$config.bind);\r\n\r\n\t\tfor(var i = 0; i < this._taskLayers.length; i++){\r\n\t\t\ttaskRenderer.removeLayer(this._taskLayers[i]);\r\n\t\t}\r\n\r\n\t\tthis._taskLayers = [];\r\n\t},\r\n\r\n\t_setColumnsWidth: function(newWidth){\r\n\t\tvar config = this.$getConfig();\r\n\t\tvar columns = this.getGridColumns(),\r\n\t\t\tcolumns_width = 0,\r\n\t\t\tfinal_width = newWidth;\r\n\r\n\t\tfor (var i = 0, l = columns.length; i < l; i++) {\r\n\t\t\tcolumns_width += columns[i].width*1;\r\n\t\t}\r\n\r\n\t\tif(isNaN(columns_width)){\r\n\t\t\tthis._calculateGridWidth();\r\n\t\t}\r\n\t\tcolumns_width = 0;\r\n\t\tfor (var i = 0, l = columns.length; i < l; i++) {\r\n\t\t\tcolumns_width += columns[i].width*1;\r\n\t\t}\r\n\r\n\t\tvar columns_count = columns.length,\r\n\t\t\textra_width = final_width - columns_width;\r\n\r\n\t\tvar colShare = 0;\r\n\t\tfor (var i = 0; i < columns_count; i++) {\r\n\t\t\tvar share = Math.floor(extra_width * (columns[i].width / columns_width));\r\n\t\t\tcolumns_width -= columns[i].width;\r\n\t\t\tcolShare = columns[i].width + share;\r\n\r\n\t\t\tif ((columns[i].min_width && colShare >= columns[i].min_width) || !columns[i].min_width ||\r\n\t\t\t\tcolShare > columns[i].width) {\r\n\t\t\t\textra_width -= share;\r\n\t\t\t\tcolumns[i].width = colShare;\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tvar iterator = extra_width > 0 ? 1 : -1;\r\n\t\twhile ((extra_width > 0 && iterator === 1) || (extra_width < 0 && iterator === -1)) {\r\n\t\t\tvar curExtra = extra_width;\r\n\t\t\tfor (i = 0; i < columns_count; i++) {\r\n\t\t\t\tvar newWidth = columns[i].width + iterator;\r\n\r\n\t\t\t\tif ((columns[i].min_width && newWidth >= columns[i].min_width) || !columns[i].min_width ||\r\n\t\t\t\t\tcolShare > columns[i].width) {\r\n\t\t\t\t\textra_width -= iterator;\r\n\t\t\t\t\tcolumns[i].width = newWidth;\r\n\t\t\t\t\tif (!extra_width) {\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (curExtra == extra_width) {\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t//if (this.callEvent(\"onGridResizeEnd\", [config.grid_width, final_width]) === false)\r\n\t\t//\treturn;\r\n\r\n\t\tconfig.grid_width = final_width;\r\n\t\tthis.$config.width = final_width;\r\n\t\t//this.$state.width = final_width;\r\n\t},\r\n\r\n\t_getColsTotalWidth: function(){\r\n\t\tvar columns = this.getGridColumns();\r\n\t\tvar cols_width = 0;\r\n\r\n\t\tfor (var i = 0; i < columns.length; i++) {\r\n\t\t\tvar v = parseFloat(columns[i].width);\r\n\t\t\tif (window.isNaN(v)) {\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t\tcols_width += v;\r\n\t\t}\r\n\t\treturn cols_width;\r\n\t},\r\n\t_calculateGridWidth: function(){\r\n\t\tvar config = this.$getConfig();\r\n\t\tvar columns = this.getGridColumns();\r\n\t\tvar cols_width = 0;\r\n\t\tvar unknown = [];\r\n\t\tvar width = [];\r\n\r\n\t\tfor (var i = 0; i < columns.length; i++) {\r\n\t\t\tvar v = parseFloat(columns[i].width);\r\n\t\t\tif (window.isNaN(v)) {\r\n\t\t\t\tv = 50;\r\n\t\t\t\tunknown.push(i);\r\n\t\t\t}\r\n\t\t\twidth[i] = v;\r\n\t\t\tcols_width += v;\r\n\t\t}\r\n\r\n\t\tif (config.autofit || unknown.length) {\r\n\t\t\tvar diff = this._getGridWidth() - cols_width;\r\n\t\t\t// TODO: logic may be improved for proportional changing of width\r\n\t\t\tvar step = diff / (unknown.length > 0 ? unknown.length : (width.length > 0 ? width.length : 1));\r\n\t\t\tif (unknown.length > 0) {\r\n\t\t\t\t// there are several columns with undefined width\r\n\t\t\t\tvar delta = diff / (unknown.length ? unknown.length : 1);\r\n\t\t\t\tfor (var i = 0; i < unknown.length; i++) {\r\n\t\t\t\t\tvar index = unknown[i];\r\n\t\t\t\t\twidth[index] += delta;\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\t// delta must be added for all columns\r\n\t\t\t\tvar delta = diff / (width.length ? width.length : 1);\r\n\t\t\t\tfor (var i = 0; i < width.length; i++)\r\n\t\t\t\t\twidth[i] += delta;\r\n\t\t\t}\r\n\r\n\t\t\tfor (var i = 0; i < width.length; i++) {\r\n\t\t\t\tcolumns[i].width = width[i];\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tvar changed = (this._getGridWidth() != cols_width);\r\n\t\t\tthis.$config.width = cols_width;\r\n\t\t\tconfig.grid_width = cols_width;\r\n\t\t\tif(changed){\r\n\t\t\t\tthis.$parent._setContentSize(cols_width, this.$config.height);\r\n//\t\t\t\tthis.$parent.$config.width = cols_width;\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\r\n\t_renderGridHeader: function(){\r\n\t\tvar gantt = this.$gantt;\r\n\t\tvar config = this.$getConfig();\r\n\t\tvar locale = this.$gantt.locale;\r\n\t\tvar templates = this.$gantt.templates;\r\n\r\n\t\tvar columns = this.getGridColumns();\r\n\t\tvar cells = [];\r\n\t\tvar width = 0,\r\n\t\t\tlabels = locale.labels;\r\n\r\n\t\tvar lineHeigth = config.scale_height - 2;\r\n\r\n\t\tfor (var i = 0; i < columns.length; i++) {\r\n\t\t\tvar last = i == columns.length - 1;\r\n\t\t\tvar col = columns[i];\r\n\r\n\t\t\t// ensure columns have non-empty names\r\n\t\t\tif (!col.name) {\r\n\t\t\t\tcol.name = gantt.uid() + \"\";\r\n\t\t\t}\r\n\r\n\t\t\tvar colWidth = col.width * 1;\r\n\t\t\tif (last && this._getGridWidth() > width + colWidth)\r\n\t\t\t\tcol.width = colWidth = this._getGridWidth() - width;\r\n\t\t\twidth += colWidth;\r\n\t\t\tvar sort = (this._sort && col.name == this._sort.name) ? (\"<div class='gantt_sort gantt_\" + this._sort.direction + \"'></div>\") : \"\";\r\n\t\t\tvar cssClass = [\"gantt_grid_head_cell\",\r\n\t\t\t\t(\"gantt_grid_head_\" + col.name),\r\n\t\t\t\t(last ? \"gantt_last_cell\" : \"\"),\r\n\t\t\t\ttemplates.grid_header_class(col.name, col)].join(\" \");\r\n\r\n\t\t\tvar style = \"width:\" + (colWidth - (last ? 1 : 0)) + \"px;\";\r\n\t\t\tvar label = (col.label || labels[\"column_\" + col.name]);\r\n\t\t\tlabel = label || \"\";\r\n\r\n\t\t\tvar ariaAttrs = gantt._waiAria.gridScaleCellAttrString(col, label);\r\n\r\n\t\t\tvar cell = \"<div class='\" + cssClass + \"' style='\" + style + \"' \" + ariaAttrs + \" column_id='\" + col.name + \"'>\" + label + sort + \"</div>\";\r\n\t\t\tcells.push(cell);\r\n\t\t}\r\n\t\tthis.$grid_scale.style.height = (config.scale_height - 1) + \"px\";\r\n\t\tthis.$grid_scale.style.lineHeight = lineHeigth + \"px\";\r\n\t\tthis.$grid_scale.style.width = (width) + \"px\";\r\n\t\tthis.$grid_scale.innerHTML = cells.join(\"\");\r\n\r\n\t\tif(this._renderHeaderResizers){\r\n\t\t\tthis._renderHeaderResizers();\r\n\t\t}\r\n\t},\r\n\r\n\t_getGridWidth: function(){\r\n\t\treturn this.$config.width;\r\n\t},\r\n\r\n\tdestroy: function(){\r\n\t\tthis._clearLayers(this.$gantt);\r\n\r\n\t\tthis.$grid = null;\r\n\t\tthis.$grid_scale = null;\r\n\t\tthis.$grid_data = null;\r\n\t\tthis.$gantt = null;\r\n\t\tthis.callEvent(\"onDestroy\", []);\r\n\t\tthis.detachAllEvents();\r\n\t}\r\n};\r\n\r\nmodule.exports = Grid;\r\n\n\n/***/ }),\n/* 39 */\n/***/ (function(module, exports) {\n\nfunction createResizer(gantt, grid){\r\n\treturn {\r\n\t\tinit: function(){},\r\n\t\tdoOnRender: function(){}\r\n\t};\r\n}\r\n\r\nmodule.exports = createResizer;\n\n/***/ }),\n/* 40 */\n/***/ (function(module, exports) {\n\nfunction createTaskRenderer(gantt){\r\n\r\n\tfunction _render_task_element(task, view) {\r\n\t\tvar config = view.$getConfig();\r\n\t\tvar painters = config.type_renderers;\r\n\t\tvar renderer = painters[gantt.getTaskType(task.type)],\r\n\t\t\tdefaultRenderer = _task_default_render;\r\n\r\n\t\tif (!renderer) {\r\n\t\t\trenderer = defaultRenderer;\r\n\t\t}\r\n\t\treturn renderer.call(gantt, task, view, gantt.bind(defaultRenderer, gantt));\r\n\t}\r\n\r\n\tfunction _task_default_render(task, view) {\r\n\t\tif (gantt._isAllowedUnscheduledTask(task))\r\n\t\t\treturn;\r\n\r\n\r\n\t\tvar pos = view.getItemPosition(task);\r\n\r\n\t\tvar cfg = view.$getConfig();\r\n\t\tvar height = view.getItemHeight();\r\n\r\n\t\tvar taskType = gantt.getTaskType(task.type);\r\n\r\n\t\tvar padd = Math.floor((gantt.config.row_height - height) / 2);\r\n\t\tif (taskType == cfg.types.milestone && cfg.link_line_width > 1) {\r\n\t\t\t//little adjust milestone position, so horisontal corners would match link arrow when thickness of link line is more than 1px\r\n\t\t\tpadd += 1;\r\n\t\t}\r\n\r\n\t\tif (taskType == cfg.types.milestone){\r\n\t\t\tpos.left -= Math.round(height / 2);\r\n\t\t\tpos.width = height;\r\n\t\t}\r\n\r\n\t\tvar div = document.createElement(\"div\");\r\n\r\n\t\tvar width = Math.round(pos.width);\r\n\r\n\t\tif(view.$config.item_attribute){\r\n\t\t\tdiv.setAttribute(view.$config.item_attribute, task.id);\r\n\t\t}\r\n\r\n\t\tif (cfg.show_progress && taskType != cfg.types.milestone) {\r\n\t\t\t_render_task_progress(task, div, width);\r\n\t\t}\r\n\r\n\t\t//use separate div to display content above progress bar\r\n\t\tvar content = _render_task_content(task, width);\r\n\t\tif (task.textColor) {\r\n\t\t\tcontent.style.color = task.textColor;\r\n\t\t}\r\n\t\tdiv.appendChild(content);\r\n\r\n\t\tvar css = _combine_item_class(\"gantt_task_line\",\r\n\t\t\tgantt.templates.task_class(task.start_date, task.end_date, task),\r\n\t\t\ttask.id,\r\n\t\t\tview);\r\n\t\tif (task.color || task.progressColor || task.textColor) {\r\n\t\t\tcss += \" gantt_task_inline_color\";\r\n\t\t}\r\n\t\tdiv.className = css;\r\n\r\n\t\tvar styles = [\r\n\t\t\t\"left:\" + pos.left + \"px\",\r\n\t\t\t\"top:\" + (padd + pos.top) + 'px',\r\n\t\t\t\"height:\" + height + 'px',\r\n\t\t\t\"line-height:\" + (Math.max(height < 30 ? height - 2 : height, 0)) + 'px',\r\n\t\t\t\"width:\" + width + 'px'\r\n\t\t];\r\n\t\tif (task.color) {\r\n\t\t\tstyles.push(\"background-color:\" + task.color);\r\n\t\t}\r\n\t\tif (task.textColor) {\r\n\t\t\tstyles.push(\"color:\" + task.textColor);\r\n\t\t}\r\n\r\n\t\tdiv.style.cssText = styles.join(\";\");\r\n\t\tvar side = _render_leftside_content(task);\r\n\t\tif (side) div.appendChild(side);\r\n\r\n\t\tside = _render_rightside_content(task);\r\n\t\tif (side) div.appendChild(side);\r\n\r\n\t\tgantt._waiAria.setTaskBarAttr(task, div);\r\n\r\n\t\tvar state = gantt.getState();\r\n\r\n\t\tif (!gantt.isReadonly(task)) {\r\n\t\t\tif (cfg.drag_resize && !gantt.isSummaryTask(task) && taskType != cfg.types.milestone) {\r\n\t\t\t\t_render_pair(div, \"gantt_task_drag\", task, function (css) {\r\n\t\t\t\t\tvar el = document.createElement(\"div\");\r\n\t\t\t\t\tel.className = css;\r\n\t\t\t\t\treturn el;\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t\tif (cfg.drag_links && cfg.show_links) {\r\n\t\t\t\t_render_pair(div, \"gantt_link_control\", task, function (css) {\r\n\t\t\t\t\tvar outer = document.createElement(\"div\");\r\n\t\t\t\t\touter.className = css;\r\n\t\t\t\t\touter.style.cssText = [\r\n\t\t\t\t\t\t\"height:\" + height + 'px',\r\n\t\t\t\t\t\t\"line-height:\" + height + 'px'\r\n\t\t\t\t\t].join(\";\");\r\n\t\t\t\t\tvar inner = document.createElement(\"div\");\r\n\t\t\t\t\tinner.className = \"gantt_link_point\";\r\n\r\n\t\t\t\t\tvar showLinkPoints = false;\r\n\t\t\t\t\tif(state.link_source_id && cfg.touch){\r\n\t\t\t\t\t\tshowLinkPoints = true;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tinner.style.display = showLinkPoints ? \"block\" : \"\";\r\n\t\t\t\t\touter.appendChild(inner);\r\n\t\t\t\t\treturn outer;\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn div;\r\n\t}\r\n\r\n\tfunction _render_side_content(task, template, cssClass) {\r\n\t\tif (!template) return null;\r\n\r\n\t\tvar text = template(task.start_date, task.end_date, task);\r\n\t\tif (!text) return null;\r\n\t\tvar content = document.createElement(\"div\");\r\n\t\tcontent.className = \"gantt_side_content \" + cssClass;\r\n\t\tcontent.innerHTML = text;\r\n\t\treturn content;\r\n\t}\r\n\r\n\tfunction _render_leftside_content(task) {\r\n\t\tvar css = \"gantt_left \" + _get_link_crossing_css(true, task);\r\n\t\treturn _render_side_content(task, gantt.templates.leftside_text, css);\r\n\t}\r\n\r\n\tfunction _render_rightside_content(task) {\r\n\t\tvar css = \"gantt_right \" + _get_link_crossing_css(false, task);\r\n\t\treturn _render_side_content(task, gantt.templates.rightside_text, css);\r\n\t}\r\n\r\n\tfunction _get_link_crossing_css(left, task) {\r\n\t\tvar cond = _get_conditions(left);\r\n\r\n\t\tfor (var i in cond) {\r\n\t\t\tvar links = task[i];\r\n\t\t\tfor (var ln = 0; ln < links.length; ln++) {\r\n\t\t\t\tvar link = gantt.getLink(links[ln]);\r\n\r\n\t\t\t\tfor (var tp = 0; tp < cond[i].length; tp++) {\r\n\t\t\t\t\tif (link.type == cond[i][tp]) {\r\n\t\t\t\t\t\treturn \"gantt_link_crossing\";\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn \"\";\r\n\t}\r\n\r\n\r\n\tfunction _render_task_content(task, width) {\r\n\t\tvar content = document.createElement(\"div\");\r\n\t\tif (gantt.getTaskType(task.type) != gantt.config.types.milestone)\r\n\t\t\tcontent.innerHTML = gantt.templates.task_text(task.start_date, task.end_date, task);\r\n\t\tcontent.className = \"gantt_task_content\";\r\n\t\t//content.style.width = width + 'px';\r\n\t\treturn content;\r\n\t}\r\n\r\n\tfunction _render_task_progress(task, element, maxWidth) {\r\n\t\tvar done = task.progress * 1 || 0;\r\n\r\n\t\tmaxWidth = Math.max(maxWidth - 2, 0);//2px for borders\r\n\t\tvar pr = document.createElement(\"div\");\r\n\t\tvar width = Math.round(maxWidth * done);\r\n\r\n\t\twidth = Math.min(maxWidth, width);\r\n\t\tif (task.progressColor) {\r\n\t\t\tpr.style.backgroundColor = task.progressColor;\r\n\t\t\tpr.style.opacity = 1;\r\n\t\t}\r\n\t\tpr.style.width = width + 'px';\r\n\t\tpr.className = \"gantt_task_progress\";\r\n\t\tpr.innerHTML = gantt.templates.progress_text(task.start_date, task.end_date, task);\r\n\r\n\t\tvar wrapper = document.createElement(\"div\");\r\n\t\twrapper.className = \"gantt_task_progress_wrapper\";\r\n\t\twrapper.appendChild(pr);\r\n\t\telement.appendChild(wrapper);\r\n\r\n\t\tif (gantt.config.drag_progress && !gantt.isReadonly(task)) {\r\n\t\t\tvar drag = document.createElement(\"div\");\r\n\t\t\tdrag.style.left = width + 'px';\r\n\t\t\tdrag.className = \"gantt_task_progress_drag\";\r\n\t\t\tpr.appendChild(drag);\r\n\t\t\telement.appendChild(drag);\r\n\t\t}\r\n\t}\r\n\r\n\tfunction _get_conditions(leftside) {\r\n\t\tif (leftside) {\r\n\t\t\treturn {\r\n\t\t\t\t$source: [\r\n\t\t\t\t\tgantt.config.links.start_to_start\r\n\t\t\t\t],\r\n\t\t\t\t$target: [\r\n\t\t\t\t\tgantt.config.links.start_to_start,\r\n\t\t\t\t\tgantt.config.links.finish_to_start\r\n\t\t\t\t]\r\n\t\t\t};\r\n\t\t} else {\r\n\t\t\treturn {\r\n\t\t\t\t$source: [\r\n\t\t\t\t\tgantt.config.links.finish_to_start,\r\n\t\t\t\t\tgantt.config.links.finish_to_finish\r\n\t\t\t\t],\r\n\t\t\t\t$target: [\r\n\t\t\t\t\tgantt.config.links.finish_to_finish\r\n\t\t\t\t]\r\n\t\t\t};\r\n\t\t}\r\n\t}\r\n\r\n\tfunction _combine_item_class(basic, template, itemId, view) {\r\n\t\tvar cfg = view.$getConfig();\r\n\t\tvar css = [basic];\r\n\t\tif (template)\r\n\t\t\tcss.push(template);\r\n\r\n\t\tvar state = gantt.getState();\r\n\r\n\t\tvar task = gantt.getTask(itemId);\r\n\r\n\t\tif (gantt.getTaskType(task.type) == cfg.types.milestone) {\r\n\t\t\tcss.push(\"gantt_milestone\");\r\n\t\t}\r\n\r\n\t\tif (gantt.getTaskType(task.type) == cfg.types.project) {\r\n\t\t\tcss.push(\"gantt_project\");\r\n\t\t}\r\n\r\n\t\tif (gantt.isSummaryTask(task))\r\n\t\t\tcss.push(\"gantt_dependent_task\");\r\n\r\n\t\tif (cfg.select_task && itemId == state.selected_task)\r\n\t\t\tcss.push(\"gantt_selected\");\r\n\r\n\t\tif (itemId == state.drag_id) {\r\n\t\t\tcss.push(\"gantt_drag_\" + state.drag_mode);\r\n\t\t\tif (state.touch_drag) {\r\n\t\t\t\tcss.push(\"gantt_touch_\" + state.drag_mode);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif (state.link_source_id == itemId)\r\n\t\t\tcss.push(\"gantt_link_source\");\r\n\r\n\t\tif (state.link_target_id == itemId)\r\n\t\t\tcss.push(\"gantt_link_target\");\r\n\r\n\r\n\t\tif (cfg.highlight_critical_path && gantt.isCriticalTask) {\r\n\t\t\tif (gantt.isCriticalTask(task))\r\n\t\t\t\tcss.push(\"gantt_critical_task\");\r\n\t\t}\r\n\r\n\t\tif (state.link_landing_area &&\r\n\t\t\t(state.link_target_id && state.link_source_id) &&\r\n\t\t\t(state.link_target_id != state.link_source_id)) {\r\n\r\n\t\t\tvar from_id = state.link_source_id;\r\n\t\t\tvar from_start = state.link_from_start;\r\n\t\t\tvar to_start = state.link_to_start;\r\n\r\n\t\t\tvar allowDrag = gantt.isLinkAllowed(from_id, itemId, from_start, to_start);\r\n\r\n\t\t\tvar dragClass = \"\";\r\n\t\t\tif (allowDrag) {\r\n\t\t\t\tif (to_start)\r\n\t\t\t\t\tdragClass = \"link_start_allow\";\r\n\t\t\t\telse\r\n\t\t\t\t\tdragClass = \"link_finish_allow\";\r\n\t\t\t} else {\r\n\t\t\t\tif (to_start)\r\n\t\t\t\t\tdragClass = \"link_start_deny\";\r\n\t\t\t\telse\r\n\t\t\t\t\tdragClass = \"link_finish_deny\";\r\n\t\t\t}\r\n\t\t\tcss.push(dragClass);\r\n\t\t}\r\n\t\treturn css.join(\" \");\r\n\t}\r\n\r\n\tfunction _render_pair(parent, css, task, content) {\r\n\t\tvar state = gantt.getState();\r\n\r\n\t\tif (+task.start_date >= +state.min_date)\r\n\t\t\tparent.appendChild(content(css + \" task_left\"));\r\n\r\n\t\tif (+task.end_date <= +state.max_date)\r\n\t\t\tparent.appendChild(content(css + \" task_right\"));\r\n\t}\r\n\r\n\treturn _render_task_element;\r\n}\r\n\r\nmodule.exports = createTaskRenderer;\n\n/***/ }),\n/* 41 */\n/***/ (function(module, exports) {\n\nfunction createTaskBgRender(gantt){\r\n\t//this.getTaskTop\r\n\tfunction _render_bg_line(item, view) {\r\n\t\tvar config = view.$getConfig();\r\n\t\tvar cfg = view.getScale();\r\n\t\tvar count = cfg.count;\r\n\t\tvar row = document.createElement(\"div\");\r\n\t\tif (config.show_task_cells) {\r\n\t\t\tfor (var j = 0; j < count; j++) {\r\n\t\t\t\tvar width = cfg.width[j],\r\n\t\t\t\t\tcssclass = \"\";\r\n\r\n\t\t\t\tif (width > 0) {//do not render skipped columns\r\n\t\t\t\t\tvar cell = document.createElement(\"div\");\r\n\t\t\t\t\tcell.style.width = (width) + \"px\";\r\n\r\n\t\t\t\t\tcssclass = \"gantt_task_cell\" + (j == count - 1 ? \" gantt_last_cell\" : \"\");\r\n\t\t\t\t\tcssTemplate = gantt.templates.task_cell_class(item, cfg.trace_x[j]);\r\n\t\t\t\t\tif (cssTemplate)\r\n\t\t\t\t\t\tcssclass += \" \" + cssTemplate;\r\n\t\t\t\t\tcell.className = cssclass;\r\n\r\n\t\t\t\t\trow.appendChild(cell);\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\t\t}\r\n\t\tvar odd = gantt.getGlobalTaskIndex(item.id) % 2 !== 0;\r\n\t\tvar cssTemplate = gantt.templates.task_row_class(item.start_date, item.end_date, item);\r\n\t\tvar css = \"gantt_task_row\" + (odd ? \" odd\" : \"\") + (cssTemplate ? ' ' + cssTemplate : '');\r\n\r\n\t\tif (gantt.getState().selected_task == item.id) {\r\n\t\t\tcss += \" gantt_selected\";\r\n\t\t}\r\n\r\n\t\t//var row = \"<div class='\" + css + \"' \" + this.config.task_attribute + \"='\" + item.id + \"'>\" + cells.join(\"\") + \"</div>\";\r\n\r\n\t\trow.className = css;\r\n\r\n\t\tif (config.smart_rendering) {\r\n\t\t\trow.style.position = \"absolute\";\r\n\t\t\trow.style.top = view.getItemPosition(item).top + \"px\";\r\n\t\t\trow.style.width = \"100%\";\r\n\t\t}\r\n\t\trow.style.height = (config.row_height) + \"px\";\r\n\r\n\t\tif(view.$config.item_attribute){\r\n\t\t\trow.setAttribute(view.$config.item_attribute, item.id);\r\n\t\t}\r\n\r\n\t\treturn row;\r\n\t}\r\n\r\n\treturn _render_bg_line;\r\n}\r\n\r\nmodule.exports = createTaskBgRender;\n\n/***/ }),\n/* 42 */\n/***/ (function(module, exports) {\n\n\r\nfunction createLinkRender(gantt){\r\n\r\nfunction _render_link_element(link, view) {\r\n\tvar config = view.$getConfig();\r\n\tvar dots = path_builder.get_points(link, view);\r\n\tvar lines = drawer.get_lines(dots, view);\r\n\r\n\tvar div = document.createElement(\"div\");\r\n\r\n\tvar css = \"gantt_task_link\";\r\n\r\n\tif (link.color) {\r\n\t\tcss += \" gantt_link_inline_color\";\r\n\t}\r\n\tvar cssTemplate = gantt.templates.link_class ? gantt.templates.link_class(link) : \"\";\r\n\tif (cssTemplate) {\r\n\t\tcss += \" \" + cssTemplate;\r\n\t}\r\n\r\n\tif (config.highlight_critical_path && gantt.isCriticalLink) {\r\n\t\tif (gantt.isCriticalLink(link))\r\n\t\t\tcss += \" gantt_critical_link\";\r\n\t}\r\n\r\n\tdiv.className = css;\r\n\r\n\tif(view.$config.link_attribute){\r\n\t\tdiv.setAttribute(view.$config.link_attribute, link.id);\r\n\t}\r\n\r\n\tfor (var i = 0; i < lines.length; i++) {\r\n\t\tif (i == lines.length - 1) {\r\n\t\t\tlines[i].size -= config.link_arrow_size;\r\n\t\t}\r\n\t\tvar el = drawer.render_line(lines[i], lines[i + 1], view);\r\n\t\tif (link.color) {\r\n\t\t\tel.firstChild.style.backgroundColor = link.color;\r\n\t\t}\r\n\t\tdiv.appendChild(el);\r\n\t}\r\n\r\n\tvar direction = lines[lines.length - 1].direction;\r\n\tvar endpoint = _render_link_arrow(dots[dots.length - 1], direction, view);\r\n\tif (link.color) {\r\n\t\tendpoint.style.borderColor = link.color;\r\n\t}\r\n\tdiv.appendChild(endpoint);\r\n\r\n\tgantt._waiAria.linkAttr(link, div);\r\n\r\n\treturn div;\r\n}\r\n\r\nfunction _render_link_arrow(point, direction, view) {\r\n\tvar config = view.$getConfig();\r\n\tvar div = document.createElement(\"div\");\r\n\tvar top = point.y;\r\n\tvar left = point.x;\r\n\r\n\tvar size = config.link_arrow_size;\r\n\tvar line_width = config.row_height;\r\n\tvar className = \"gantt_link_arrow gantt_link_arrow_\" + direction;\r\n\tswitch (direction) {\r\n\t\tcase drawer.dirs.right:\r\n\t\t\ttop -= (size - line_width) / 2;\r\n\t\t\tleft -= size;\r\n\t\t\tbreak;\r\n\t\tcase drawer.dirs.left:\r\n\t\t\ttop -= (size - line_width) / 2;\r\n\t\t\tbreak;\r\n\t\tcase drawer.dirs.up:\r\n\t\t\tleft -= size;\r\n\t\t\tbreak;\r\n\t\tcase drawer.dirs.down:\r\n\t\t\ttop += size * 2;\r\n\t\t\tleft -= size;\r\n\t\t\tbreak;\r\n\t\tdefault:\r\n\t\t\tbreak;\r\n\t}\r\n\tdiv.style.cssText = [\r\n\t\t\"top:\" + top + \"px\",\r\n\t\t\"left:\" + left + 'px'].join(';');\r\n\tdiv.className = className;\r\n\r\n\treturn div;\r\n}\r\n\r\n\r\nvar drawer = {\r\n\tcurrent_pos: null,\r\n\tdirs: {\"left\": 'left', \"right\": 'right', \"up\": 'up', \"down\": 'down'},\r\n\tpath: [],\r\n\tclear: function () {\r\n\t\tthis.current_pos = null;\r\n\t\tthis.path = [];\r\n\t},\r\n\tpoint: function (pos) {\r\n\t\tthis.current_pos = gantt.copy(pos);\r\n\t},\r\n\tget_lines: function (dots) {\r\n\t\tthis.clear();\r\n\t\tthis.point(dots[0]);\r\n\t\tfor (var i = 1; i < dots.length; i++) {\r\n\t\t\tthis.line_to(dots[i]);\r\n\t\t}\r\n\t\treturn this.get_path();\r\n\t},\r\n\tline_to: function (pos) {\r\n\t\tvar next = gantt.copy(pos);\r\n\t\tvar prev = this.current_pos;\r\n\r\n\t\tvar line = this._get_line(prev, next);\r\n\t\tthis.path.push(line);\r\n\t\tthis.current_pos = next;\r\n\t},\r\n\tget_path: function () {\r\n\t\treturn this.path;\r\n\t},\r\n\tget_wrapper_sizes: function (v, view) {\r\n\t\tvar config = view.$getConfig();\r\n\t\tvar res,\r\n\t\t\twrapper_size = config.link_wrapper_width,\r\n\t\t\tline_size = config.link_line_width,\r\n\t\t\ty = v.y + (config.row_height - wrapper_size) / 2;\r\n\t\tswitch (v.direction) {\r\n\t\t\tcase this.dirs.left:\r\n\t\t\t\tres = {\r\n\t\t\t\t\ttop: y,\r\n\t\t\t\t\theight: wrapper_size,\r\n\t\t\t\t\tlineHeight: wrapper_size,\r\n\t\t\t\t\tleft: v.x - v.size - wrapper_size / 2,\r\n\t\t\t\t\twidth: v.size + wrapper_size\r\n\t\t\t\t};\r\n\t\t\t\tbreak;\r\n\t\t\tcase this.dirs.right:\r\n\t\t\t\tres = {\r\n\t\t\t\t\ttop: y,\r\n\t\t\t\t\tlineHeight: wrapper_size,\r\n\t\t\t\t\theight: wrapper_size,\r\n\t\t\t\t\tleft: v.x - wrapper_size / 2,\r\n\t\t\t\t\twidth: v.size + wrapper_size\r\n\t\t\t\t};\r\n\t\t\t\tbreak;\r\n\t\t\tcase this.dirs.up:\r\n\t\t\t\tres = {\r\n\t\t\t\t\ttop: y - v.size,\r\n\t\t\t\t\tlineHeight: v.size + wrapper_size,\r\n\t\t\t\t\theight: v.size + wrapper_size,\r\n\t\t\t\t\tleft: v.x - wrapper_size / 2,\r\n\t\t\t\t\twidth: wrapper_size\r\n\t\t\t\t};\r\n\t\t\t\tbreak;\r\n\t\t\tcase this.dirs.down:\r\n\t\t\t\tres = {\r\n\t\t\t\t\ttop: y /*- wrapper_size/2*/,\r\n\t\t\t\t\tlineHeight: v.size + wrapper_size,\r\n\t\t\t\t\theight: v.size + wrapper_size,\r\n\t\t\t\t\tleft: v.x - wrapper_size / 2,\r\n\t\t\t\t\twidth: wrapper_size\r\n\t\t\t\t};\r\n\t\t\t\tbreak;\r\n\t\t\tdefault:\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\r\n\t\treturn res;\r\n\t},\r\n\tget_line_sizes: function (v, view) {\r\n\t\tvar config = view.$getConfig();\r\n\t\tvar res,\r\n\t\t\tline_size = config.link_line_width,\r\n\t\t\twrapper_size = config.link_wrapper_width,\r\n\t\t\tsize = v.size + line_size;\r\n\t\tswitch (v.direction) {\r\n\t\t\tcase this.dirs.left:\r\n\t\t\tcase this.dirs.right:\r\n\t\t\t\tres = {\r\n\t\t\t\t\theight: line_size,\r\n\t\t\t\t\twidth: size,\r\n\t\t\t\t\tmarginTop: (wrapper_size - line_size) / 2,\r\n\t\t\t\t\tmarginLeft: (wrapper_size - line_size) / 2\r\n\t\t\t\t};\r\n\t\t\t\tbreak;\r\n\t\t\tcase this.dirs.up:\r\n\t\t\tcase this.dirs.down:\r\n\t\t\t\tres = {\r\n\t\t\t\t\theight: size,\r\n\t\t\t\t\twidth: line_size,\r\n\t\t\t\t\tmarginTop: (wrapper_size - line_size) / 2,\r\n\t\t\t\t\tmarginLeft: (wrapper_size - line_size) / 2\r\n\t\t\t\t};\r\n\t\t\t\tbreak;\r\n\t\t\tdefault:\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\r\n\r\n\t\treturn res;\r\n\t},\r\n\trender_line: function (v, end, view) {\r\n\t\tvar pos = this.get_wrapper_sizes(v, view);\r\n\t\tvar wrapper = document.createElement(\"div\");\r\n\t\twrapper.style.cssText = [\r\n\t\t\t\"top:\" + pos.top + \"px\",\r\n\t\t\t\"left:\" + pos.left + \"px\",\r\n\t\t\t\"height:\" + pos.height + \"px\",\r\n\t\t\t\"width:\" + pos.width + \"px\"\r\n\t\t].join(';');\r\n\t\twrapper.className = \"gantt_line_wrapper\";\r\n\r\n\t\tvar innerPos = this.get_line_sizes(v, view);\r\n\t\tvar inner = document.createElement(\"div\");\r\n\t\tinner.style.cssText = [\r\n\t\t\t\"height:\" + innerPos.height + \"px\",\r\n\t\t\t\"width:\" + innerPos.width + \"px\",\r\n\t\t\t\"margin-top:\" + innerPos.marginTop + \"px\",\r\n\t\t\t\"margin-left:\" + innerPos.marginLeft + \"px\"\r\n\t\t].join(\";\");\r\n\r\n\t\tinner.className = \"gantt_link_line_\" + v.direction;\r\n\t\twrapper.appendChild(inner);\r\n\r\n\t\treturn wrapper;\r\n\t},\r\n\t_get_line: function (from, to) {\r\n\t\tvar direction = this.get_direction(from, to);\r\n\t\tvar vect = {\r\n\t\t\tx: from.x,\r\n\t\t\ty: from.y,\r\n\t\t\tdirection: this.get_direction(from, to)\r\n\t\t};\r\n\t\tif (direction == this.dirs.left || direction == this.dirs.right) {\r\n\t\t\tvect.size = Math.abs(from.x - to.x);\r\n\t\t} else {\r\n\t\t\tvect.size = Math.abs(from.y - to.y);\r\n\t\t}\r\n\t\treturn vect;\r\n\t},\r\n\tget_direction: function (from, to) {\r\n\t\tvar direction = 0;\r\n\t\tif (to.x < from.x) {\r\n\t\t\tdirection = this.dirs.left;\r\n\t\t} else if (to.x > from.x) {\r\n\t\t\tdirection = this.dirs.right;\r\n\t\t} else if (to.y > from.y) {\r\n\t\t\tdirection = this.dirs.down;\r\n\t\t} else {\r\n\t\t\tdirection = this.dirs.up;\r\n\t\t}\r\n\t\treturn direction;\r\n\t}\r\n\r\n};\r\n\r\nvar path_builder = {\r\n\r\n\tpath: [],\r\n\tclear: function () {\r\n\t\tthis.path = [];\r\n\t},\r\n\tcurrent: function () {\r\n\t\treturn this.path[this.path.length - 1];\r\n\t},\r\n\tpoint: function (next) {\r\n\t\tif (!next)\r\n\t\t\treturn this.current();\r\n\r\n\t\tthis.path.push(gantt.copy(next));\r\n\t\treturn next;\r\n\t},\r\n\tpoint_to: function (direction, diff, point) {\r\n\t\tif (!point)\r\n\t\t\tpoint = gantt.copy(this.point());\r\n\t\telse\r\n\t\t\tpoint = {x: point.x, y: point.y};\r\n\t\tvar dir = drawer.dirs;\r\n\t\tswitch (direction) {\r\n\t\t\tcase (dir.left):\r\n\t\t\t\tpoint.x -= diff;\r\n\t\t\t\tbreak;\r\n\t\t\tcase (dir.right):\r\n\t\t\t\tpoint.x += diff;\r\n\t\t\t\tbreak;\r\n\t\t\tcase (dir.up):\r\n\t\t\t\tpoint.y -= diff;\r\n\t\t\t\tbreak;\r\n\t\t\tcase (dir.down):\r\n\t\t\t\tpoint.y += diff;\r\n\t\t\t\tbreak;\r\n\t\t\tdefault:\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\t\treturn this.point(point);\r\n\t},\r\n\tget_points: function (link, view) {\r\n\t\tvar config = view.$getConfig();\r\n\t\tvar pt = this.get_endpoint(link, view);\r\n\t\tvar xy = gantt.config;\r\n\r\n\r\n\t\tvar dy = pt.e_y - pt.y;\r\n\t\tvar dx = pt.e_x - pt.x;\r\n\r\n\t\tvar dir = drawer.dirs;\r\n\r\n\t\tthis.clear();\r\n\t\tthis.point({x: pt.x, y: pt.y});\r\n\r\n\t\tvar shiftX = 2 * xy.link_arrow_size;//just random size for first line\r\n\r\n\r\n\t\tvar forward = (pt.e_x > pt.x);\r\n\t\tif (link.type == config.links.start_to_start) {\r\n\t\t\tthis.point_to(dir.left, shiftX);\r\n\t\t\tif (forward) {\r\n\t\t\t\tthis.point_to(dir.down, dy);\r\n\t\t\t\tthis.point_to(dir.right, dx);\r\n\t\t\t} else {\r\n\t\t\t\tthis.point_to(dir.right, dx);\r\n\t\t\t\tthis.point_to(dir.down, dy);\r\n\t\t\t}\r\n\t\t\tthis.point_to(dir.right, shiftX);\r\n\r\n\t\t} else if (link.type == config.links.finish_to_start) {\r\n\t\t\tforward = (pt.e_x > (pt.x + 2 * shiftX));\r\n\t\t\tthis.point_to(dir.right, shiftX);\r\n\t\t\tif (forward) {\r\n\t\t\t\tdx -= shiftX;\r\n\t\t\t\tthis.point_to(dir.down, dy);\r\n\t\t\t\tthis.point_to(dir.right, dx);\r\n\t\t\t} else {\r\n\t\t\t\tdx -= 2 * shiftX;\r\n\t\t\t\tvar sign = dy > 0 ? 1 : -1;\r\n\r\n\t\t\t\tthis.point_to(dir.down, sign * (xy.row_height / 2));\r\n\t\t\t\tthis.point_to(dir.right, dx);\r\n\t\t\t\tthis.point_to(dir.down, sign * ( Math.abs(dy) - (xy.row_height / 2)));\r\n\t\t\t\tthis.point_to(dir.right, shiftX);\r\n\t\t\t}\r\n\r\n\t\t} else if (link.type == config.links.finish_to_finish) {\r\n\t\t\tthis.point_to(dir.right, shiftX);\r\n\t\t\tif (forward) {\r\n\t\t\t\tthis.point_to(dir.right, dx);\r\n\t\t\t\tthis.point_to(dir.down, dy);\r\n\t\t\t} else {\r\n\t\t\t\tthis.point_to(dir.down, dy);\r\n\t\t\t\tthis.point_to(dir.right, dx);\r\n\t\t\t}\r\n\t\t\tthis.point_to(dir.left, shiftX);\r\n\t\t} else if (link.type == config.links.start_to_finish) {\r\n\r\n\t\t\tforward = (pt.e_x > (pt.x - 2 * shiftX));\r\n\t\t\tthis.point_to(dir.left, shiftX);\r\n\r\n\t\t\tif (!forward) {\r\n\t\t\t\tdx += shiftX;\r\n\t\t\t\tthis.point_to(dir.down, dy);\r\n\t\t\t\tthis.point_to(dir.right, dx);\r\n\t\t\t} else {\r\n\t\t\t\tdx += 2 * shiftX;\r\n\t\t\t\tvar sign = dy > 0 ? 1 : -1;\r\n\t\t\t\tthis.point_to(dir.down, sign * (xy.row_height / 2));\r\n\t\t\t\tthis.point_to(dir.right, dx);\r\n\t\t\t\tthis.point_to(dir.down, sign * ( Math.abs(dy) - (xy.row_height / 2)));\r\n\t\t\t\tthis.point_to(dir.left, shiftX);\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn this.path;\r\n\t},\r\n\tget_endpoint: function (link, view) {\r\n\t\tvar config = view.$getConfig();\r\n\t\tvar types = config.links;\r\n\t\tvar from_start = false, to_start = false;\r\n\r\n\t\tif (link.type == types.start_to_start) {\r\n\t\t\tfrom_start = to_start = true;\r\n\t\t} else if (link.type == types.finish_to_finish) {\r\n\t\t\tfrom_start = to_start = false;\r\n\t\t} else if (link.type == types.finish_to_start) {\r\n\t\t\tfrom_start = false;\r\n\t\t\tto_start = true;\r\n\t\t} else if (link.type == types.start_to_finish) {\r\n\t\t\tfrom_start = true;\r\n\t\t\tto_start = false;\r\n\t\t} else {\r\n\t\t\tgantt.assert(false, \"Invalid link type\");\r\n\t\t}\r\n\r\n\t\tvar source = gantt.getTask(link.source);\r\n\t\tvar target = gantt.getTask(link.target);\r\n\r\n\t\tvar from = getMilestonePosition(source, view),\r\n\t\t\tto = getMilestonePosition(target, view);\r\n\r\n\t\treturn {\r\n\t\t\tx: from_start ? from.left : (from.left + from.width),\r\n\t\t\te_x: to_start ? to.left : (to.left + to.width),\r\n\t\t\ty: from.top,\r\n\t\t\te_y: to.top\r\n\t\t};\r\n\t}\r\n};\r\n\r\nfunction getMilestonePosition(task, view){\r\n\tvar config = view.$getConfig();\r\n\tvar pos = view.getItemPosition(task);\r\n\tif(gantt.getTaskType(task.type) == config.types.milestone){\r\n\t\tvar milestoneHeight = gantt.getTaskHeight();\r\n\t\tvar milestoneWidth = Math.sqrt(2*milestoneHeight*milestoneHeight);\r\n\t\tpos.left -= milestoneWidth / 2;\r\n\t\tpos.width = milestoneWidth;\r\n\t}\r\n\treturn pos;\r\n}\r\n\r\nreturn _render_link_element;\r\n\r\n}\r\n\r\nmodule.exports = createLinkRender;\n\n/***/ }),\n/* 43 */\n/***/ (function(module, exports) {\n\nfunction createGridLineRender(gantt){\r\n\tfunction _render_grid_item(item, view) {\r\n\t\t//if (!_is_grid_visible.call(this))\r\n\t\t//\treturn null;\r\n\r\n\t\tvar columns = view.getGridColumns();\r\n\t\tvar config = view.$getConfig();\r\n\r\n\t\tvar cells = [];\r\n\t\tvar width = 0;\r\n\t\tvar has_child;\r\n\t\tfor (var i = 0; i < columns.length; i++) {\r\n\t\t\tvar last = i == columns.length - 1;\r\n\t\t\tvar col = columns[i];\r\n\t\t\tvar cell;\r\n\r\n\t\t\tvar value;\r\n\t\t\tvar textValue;\r\n\t\t\tif (col.name == \"add\") {\r\n\t\t\t\tvar aria = gantt._waiAria.gridAddButtonAttrString(col);\r\n\r\n\t\t\t\tvalue = \"<div \" + aria + \" class='gantt_add'></div>\";\r\n\t\t\t\ttextValue = \"\";\r\n\t\t\t} else {\r\n\t\t\t\tif (col.template)\r\n\t\t\t\t\tvalue = col.template(item);\r\n\t\t\t\telse\r\n\t\t\t\t\tvalue = item[col.name];\r\n\r\n\t\t\t\tif (value instanceof Date)\r\n\t\t\t\t\tvalue = gantt.templates.date_grid(value, item);\r\n\t\t\t\ttextValue = value;\r\n\t\t\t\tvalue = \"<div class='gantt_tree_content'>\" + value + \"</div>\";\r\n\t\t\t}\r\n\t\t\tvar css = \"gantt_cell\" + (last ? \" gantt_last_cell\" : \"\");\r\n\r\n\t\t\tvar tree = \"\";\r\n\t\t\tif (col.tree) {\r\n\t\t\t\tfor (var j = 0; j < item.$level; j++)\r\n\t\t\t\t\ttree += gantt.templates.grid_indent(item);\r\n\r\n\t\t\t\thas_child = gantt._has_children(item.id);\r\n\t\t\t\tif (has_child) {\r\n\t\t\t\t\ttree += gantt.templates.grid_open(item);\r\n\t\t\t\t\ttree += gantt.templates.grid_folder(item);\r\n\t\t\t\t} else {\r\n\t\t\t\t\ttree += gantt.templates.grid_blank(item);\r\n\t\t\t\t\ttree += gantt.templates.grid_file(item);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tvar style = \"width:\" + (col.width - (last ? 1 : 0)) + \"px;\";\r\n\t\t\tif (this.defined(col.align))\r\n\t\t\t\tstyle += \"text-align:\" + col.align + \";\";\r\n\r\n\t\t\tvar aria = gantt._waiAria.gridCellAttrString(col, textValue);\r\n\r\n\t\t\tcell = \"<div class='\" + css + \"' style='\" + style + \"' \" + aria + \">\" + tree + value + \"</div>\";\r\n\t\t\tcells.push(cell);\r\n\t\t}\r\n\t\tvar css = gantt.getGlobalTaskIndex(item.id) % 2 === 0 ? \"\" : \" odd\";\r\n\t\tcss += (item.$transparent) ? \" gantt_transparent\" : \"\";\r\n\r\n\t\tcss += (item.$dataprocessor_class ? \" \" + item.$dataprocessor_class : \"\");\r\n\r\n\t\tif (gantt.templates.grid_row_class) {\r\n\t\t\tvar css_template = gantt.templates.grid_row_class.call(gantt, item.start_date, item.end_date, item);\r\n\t\t\tif (css_template)\r\n\t\t\t\tcss += \" \" + css_template;\r\n\t\t}\r\n\r\n\t\tif (gantt.getState().selected_task == item.id) {\r\n\t\t\tcss += \" gantt_selected\";\r\n\t\t}\r\n\t\tvar el = document.createElement(\"div\");\r\n\t\tel.className = \"gantt_row\" + css;\r\n\t\tel.style.height = config.row_height + \"px\";\r\n\t\tel.style.lineHeight = (config.row_height) + \"px\";\r\n\t\t\r\n\t\tif(view.$config.item_attribute){\r\n\t\t\tel.setAttribute(view.$config.item_attribute, item.id);\r\n\t\t}\r\n\r\n\t\tgantt._waiAria.taskRowAttr(item, el);\r\n\r\n\t\tel.innerHTML = cells.join(\"\");\r\n\t\treturn el;\r\n\t}\r\n\r\n\treturn _render_grid_item;\r\n}\r\n\r\nmodule.exports = createGridLineRender;\r\n\r\n\n\n/***/ }),\n/* 44 */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar utils = __webpack_require__(0);\r\nvar rowDnd = __webpack_require__(45);\r\n\r\nvar initializer = (function(){\r\n\treturn function(gantt){\r\n\t\treturn {\r\n\t\t\tonCreated: function (grid) {\r\n\t\t\t\tgrid.$config = utils.mixin(grid.$config, {\r\n\t\t\t\t\tbind: \"task\"\r\n\t\t\t\t});\r\n\t\t\t\tif(grid.$config.id == \"grid\") {\r\n\t\t\t\t\tthis.extendGantt(grid);\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tonInitialized: function (grid) {\r\n\t\t\t\tvar config = grid.$getConfig();\r\n\t\t\t\tif (config.order_branch) {\r\n\t\t\t\t\trowDnd.init(grid.$gantt, grid);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tthis.initEvents(grid, gantt);\r\n\t\t\t\tif(grid.$config.id == \"grid\") {\r\n\t\t\t\t\tthis.extendDom(grid);\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tonDestroyed: function (grid) {\r\n\t\t\t\tthis.clearEvents(grid, gantt);\r\n\t\t\t},\r\n\r\n\t\t\tinitEvents: function (grid, gantt) {\r\n\t\t\t\tthis._eventHandlers = [];\r\n\t\t\t\tvar mouseEvents = gantt.$services.getService(\"mouseEvents\");\r\n\r\n\t\t\t\tthis._eventHandlers.push([\"click\", \"gantt_close\", gantt.bind(function (e, id, trg) {\r\n\t\t\t\t\tthis.close(id);\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}, gantt)]);\r\n\t\t\t\tthis._eventHandlers.push([\"click\", \"gantt_open\", gantt.bind(function (e, id, trg) {\r\n\t\t\t\t\tthis.open(id);\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}, gantt)]);\r\n\r\n\t\t\t\tthis._eventHandlers.push([\"click\", \"gantt_row\", gantt.bind(function (e, id, trg) {\r\n\t\t\t\t\tvar config = grid.$getConfig();\r\n\t\t\t\t\tif (id !== null) {\r\n\t\t\t\t\t\tvar task = this.getTask(id);\r\n\t\t\t\t\t\tif (config.scroll_on_click)\r\n\t\t\t\t\t\t\tthis.showDate(task.start_date);\r\n\t\t\t\t\t\tgantt.callEvent(\"onTaskRowClick\", [id, trg]);\r\n\t\t\t\t\t}\r\n\t\t\t\t}, gantt)]);\r\n\r\n\t\t\t\tthis._eventHandlers.push([\"click\", \"gantt_grid_head_cell\", gantt.bind(function (e, id, trg) {\r\n\t\t\t\t\tvar column = trg.getAttribute(\"column_id\");\r\n\r\n\t\t\t\t\tif (!gantt.callEvent(\"onGridHeaderClick\", [column, e]))\r\n\t\t\t\t\t\treturn;\r\n\r\n\t\t\t\t\tvar config = grid.$getConfig();\r\n\r\n\t\t\t\t\tif (column == \"add\") {\r\n\t\t\t\t\t\tmouseEvents.callHandler(\"click\", \"gantt_add\", undefined, [e, config.root_id]);\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif (config.sort) {\r\n\t\t\t\t\t\tvar sorting_method = column,\r\n\t\t\t\t\t\t\tconf;\r\n\r\n\t\t\t\t\t\tfor (var i = 0; i < config.columns.length; i++) {\r\n\t\t\t\t\t\t\tif (config.columns[i].name == column) {\r\n\t\t\t\t\t\t\t\tconf = config.columns[i];\r\n\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tif (conf && conf.sort !== undefined && conf.sort !== true) {\r\n\t\t\t\t\t\t\tsorting_method = conf.sort;\r\n\r\n\t\t\t\t\t\t\tif (!sorting_method) { // column sort property 'false', no sorting\r\n\t\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tvar sort = (this._sort && this._sort.direction && this._sort.name == column) ? this._sort.direction : \"desc\";\r\n\t\t\t\t\t\t// invert sort direction\r\n\t\t\t\t\t\tsort = (sort == \"desc\") ? \"asc\" : \"desc\";\r\n\t\t\t\t\t\tthis._sort = {\r\n\t\t\t\t\t\t\tname: column,\r\n\t\t\t\t\t\t\tdirection: sort\r\n\t\t\t\t\t\t};\r\n\t\t\t\t\t\tthis.sort(sorting_method, sort == \"desc\");\r\n\t\t\t\t\t}\r\n\t\t\t\t}, gantt)]);\r\n\t\t\t\tthis._eventHandlers.push([\"click\", \"gantt_add\", gantt.bind(function (e, id, trg) {\r\n\t\t\t\t\tvar config = grid.$getConfig();\r\n\t\t\t\t\tif (config.readonly) return;\r\n\r\n\t\t\t\t\tvar item = {};\r\n\t\t\t\t\tthis.createTask(item, id ? id : gantt.config.root_id);\r\n\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}, gantt)]);\r\n\r\n\t\t\t\tfor (var i = 0; i < this._eventHandlers.length; i++) {\r\n\t\t\t\t\tvar h = this._eventHandlers[i];\r\n\t\t\t\t\tmouseEvents.delegate(h[0], h[1], h[2], this.$grid);\r\n\t\t\t\t}\r\n\t\t\t},\r\n\r\n\t\t\tclearEvents: function(grid, gantt){\r\n\t\t\t\tvar mouseEvents = gantt.$services.getService(\"mouseEvents\");\r\n\t\t\t\tfor(var i = 0; i < this._eventHandlers.length; i++){\r\n\t\t\t\t\tvar h = this._eventHandlers[i];\r\n\t\t\t\t\tmouseEvents.detach(h[0], h[1], h[2], grid.$grid);\r\n\t\t\t\t}\r\n\t\t\t\tthis._eventHandlers = [];\r\n\t\t\t},\r\n\r\n\t\t\textendDom: function(grid){\r\n\t\t\t\tgantt.$grid = grid.$grid;\r\n\t\t\t\tgantt.$grid_scale = grid.$grid_scale;\r\n\t\t\t\tgantt.$grid_data = grid.$grid_data;\r\n\t\t\t},\r\n\t\t\textendGantt: function(grid){\r\n\r\n\t\t\t\tgantt.getGridColumns = gantt.bind(grid.getGridColumns, grid);\r\n\r\n\t\t\t\tgrid.attachEvent(\"onColumnResizeStart\", function(){\r\n\t\t\t\t\treturn gantt.callEvent(\"onColumnResizeStart\", arguments);\r\n\t\t\t\t});\r\n\t\t\t\tgrid.attachEvent(\"onColumnResize\", function(){\r\n\t\t\t\t\treturn gantt.callEvent(\"onColumnResize\", arguments);\r\n\t\t\t\t});\r\n\t\t\t\tgrid.attachEvent(\"onColumnResizeEnd\", function(){\r\n\t\t\t\t\treturn gantt.callEvent(\"onColumnResizeEnd\", arguments);\r\n\t\t\t\t});\r\n\r\n\t\t\t\tgrid.attachEvent(\"onColumnResizeComplete\", function(columns, totalWidth){\r\n\t\t\t\t\tgantt.config.grid_width = totalWidth;\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t};\r\n\t};\r\n})();\r\n\r\nmodule.exports = initializer;\n\n/***/ }),\n/* 45 */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar domHelpers = __webpack_require__(1);\r\n\r\nfunction _init_dnd(gantt, grid) {\r\n\tvar DnD = gantt.$services.getService(\"dnd\");\r\n\r\n\tif(!grid.$config.bind || !gantt.getDatastore(grid.$config.bind)){\r\n\t\treturn;\r\n\t}\r\n\r\n\tfunction locate(e){\r\n\t\treturn domHelpers.locateAttribute(e, grid.$config.item_attribute);\r\n\t}\r\n\r\n\tfunction getStore(){\r\n\t\treturn gantt.getDatastore(grid.$config.bind);\r\n\t}\r\n\r\n\tvar dnd = new DnD(grid.$grid_data, {updates_per_second: 60});\r\n\tif (gantt.defined(grid.$getConfig().dnd_sensitivity))\r\n\t\tdnd.config.sensitivity = grid.$getConfig().dnd_sensitivity;\r\n\r\n\tdnd.attachEvent(\"onBeforeDragStart\", gantt.bind(function (obj, e) {\r\n\t\tvar el = locate(e);\r\n\t\tif (!el) return false;\r\n\t\tif (gantt.hideQuickInfo) gantt._hideQuickInfo();\r\n\r\n\t\tvar id = el.getAttribute(grid.$config.item_attribute);\r\n\r\n\t\tvar datastore = getStore();\r\n\r\n\t\tvar task = datastore.getItem(id);\r\n\r\n\t\tif (gantt.isReadonly(task))\r\n\t\t\treturn false;\r\n\r\n\t\tdnd.config.initial_open_state = task.$open;\r\n\t\tif (!gantt.callEvent(\"onRowDragStart\", [id, e.target || e.srcElement, e])) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t}, gantt));\r\n\r\n\tdnd.attachEvent(\"onAfterDragStart\", gantt.bind(function (obj, e) {\r\n\t\tvar el = locate(e);\r\n\t\tdnd.config.marker.innerHTML = el.outerHTML;\r\n\t\tdnd.config.id = el.getAttribute(grid.$config.item_attribute);\r\n\r\n\t\tvar store = getStore();\r\n\r\n\t\tvar task = store.getItem(dnd.config.id);\r\n\t\tdnd.config.index = store.getBranchIndex(dnd.config.id);\r\n\t\tdnd.config.parent = task.parent;\r\n\t\ttask.$open = false;\r\n\t\ttask.$transparent = true;\r\n\t\tthis.refreshData();\r\n\t}, gantt));\r\n\r\n\tdnd.lastTaskOfLevel = function (level) {\r\n\t\tvar last_item = null;\r\n\t\tvar store = getStore();\r\n\t\tvar tasks = store.getItems();\r\n\t\tfor (var i = 0, len = tasks.length; i < len; i++) {\r\n\t\t\tif (tasks[i].$level == level) {\r\n\t\t\t\tlast_item = tasks[i];\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn last_item ? last_item.id : null;\r\n\t};\r\n\tdnd._getGridPos = gantt.bind(function (e) {\r\n\t\tvar pos = domHelpers.getNodePosition(grid.$grid_data);\r\n\t\tvar store = getStore();\r\n\t\t// row offset\r\n\t\tvar x = pos.x;\r\n\t\tvar y = e.pos.y - 10;\r\n\r\n\t\tvar config = grid.$getConfig();\r\n\t\t// prevent moving row out of grid_data container\r\n\t\tif (y < pos.y) y = pos.y;\r\n\t\tvar gridHeight = store.countVisible() * config.row_height;\r\n\t\tif (y > pos.y + gridHeight - config.row_height) y = pos.y + gridHeight - config.row_height;\r\n\r\n\t\tpos.x = x;\r\n\t\tpos.y = y;\r\n\t\treturn pos;\r\n\t}, gantt);\r\n\tdnd._getTargetY = gantt.bind(function (e) {\r\n\t\tvar pos = domHelpers.getNodePosition(grid.$grid_data);\r\n\r\n\t\tvar y = e.pageY - pos.y + grid.$state.scrollTop;\r\n\t\tif (y < 0)\r\n\t\t\ty = 0;\r\n\t\treturn y;\r\n\t}, gantt);\r\n\tdnd._getTaskByY = gantt.bind(function (y, dropIndex) {\r\n\r\n\t\tvar config = grid.$getConfig(),\r\n\t\t\tstore = getStore();\r\n\r\n\t\ty = y || 0;\r\n\t\tif (config.smart_rendering) {\r\n\t\t\ty += grid.$grid_data.scrollTop;\r\n\t\t}\r\n\r\n\t\tvar index = Math.floor(y / config.row_height);\r\n\t\tindex = dropIndex < index ? index - 1 : index;\r\n\r\n\t\tif (index > store.countVisible() - 1)\r\n\t\t\treturn null;\r\n\r\n\t\treturn store.getIdByIndex(index);\r\n\t}, gantt);\r\n\tdnd.attachEvent(\"onDragMove\", gantt.bind(function (obj, e) {\r\n\t\tvar dd = dnd.config;\r\n\t\tvar pos = dnd._getGridPos(e);\r\n\r\n\t\tvar config = grid.$getConfig(),\r\n\t\t\tstore = getStore();\r\n\r\n\t\t// setting position of row\r\n\t\tdd.marker.style.left = pos.x + 10 + \"px\";\r\n\t\tdd.marker.style.top = pos.y + \"px\";\r\n\r\n\t\t// highlight row when mouseover\r\n\t\tvar item = store.getItem(dnd.config.id);\r\n\t\tvar targetY = dnd._getTargetY(e);\r\n\t\tvar el = dnd._getTaskByY(targetY, store.getIndexById(item.id));\r\n\r\n\t\tif (!store.exists(el)) {\r\n\t\t\tel = dnd.lastTaskOfLevel(config.order_branch_free ? item.$level : 0);\r\n\t\t\tif (el == dnd.config.id) {\r\n\t\t\t\tel = null;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tfunction allowedLevel(next, item) {\r\n\t\t\treturn (!(store.isChildOf(over.id, item.id)) && (next.$level == item.$level || config.order_branch_free));\r\n\t\t}\r\n\r\n\t\tif (store.exists(el)) {\r\n\t\t\tvar over = store.getItem(el);\r\n\r\n\t\t\tif (store.getIndexById(over.id) * config.row_height + config.row_height / 2 < targetY) {\r\n\t\t\t\t//hovering over bottom part of item, check can be drop to bottom\r\n\t\t\t\tvar index = store.getIndexById(over.id);\r\n\t\t\t\tvar nextId = store.getNext(over.id);//adds +1 when hovering over placeholder\r\n\t\t\t\tvar next = store.getItem(nextId);\r\n\t\t\t\tif (next) {\r\n\t\t\t\t\tif (next.id != item.id) {\r\n\t\t\t\t\t\tover = next; //there is a valid target\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse {\r\n\t\t\t\t\t\tif (config.order_branch_free) {\r\n\t\t\t\t\t\t\tif (!(store.isChildOf(item.id, over.id) && store.getChildren(over.id).length == 1))\r\n\t\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t\telse {\r\n\t\t\t\t\t\t\t\tstore.move(item.id, store.getBranchIndex(over.id) + 1, store.getParent(over.id));\r\n\t\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\telse {\r\n\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\t//we at end of the list, check and drop at the end of list\r\n\t\t\t\t\tnextId = store.getIdByIndex(index);\r\n\t\t\t\t\tnext = store.getItem(nextId);\r\n\r\n\t\t\t\t\tif (allowedLevel(next, item) && next.id != item.id) {\r\n\t\t\t\t\t\tstore.move(item.id, -1, store.getParent(next.id));\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\telse if (config.order_branch_free) {\r\n\t\t\t\tif (over.id != item.id && allowedLevel(over, item)) {\r\n\t\t\t\t\tif (!store.hasChild(over.id)) {\r\n\t\t\t\t\t\tover.$open = true;\r\n\t\t\t\t\t\tstore.move(item.id, -1, over.id);\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (store.getIndexById(over.id) || config.row_height / 3 < targetY) return;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t//if item is on different level, check the one before it\r\n\t\t\tvar index = store.getIndexById(over.id),\r\n\t\t\t\tprevId = store.getIdByIndex(index - 1);\r\n\r\n\t\t\tvar prev = store.getItem(prevId);\r\n\r\n\t\t\tvar shift = 1;\r\n\t\t\twhile ((!prev || prev.id == over.id) && index - shift >= 0) {\r\n\r\n\t\t\t\tprevId = store.getIdByIndex(index - shift);\r\n\t\t\t\tprev = store.getItem(prevId);\r\n\t\t\t\tshift++;\r\n\t\t\t}\r\n\r\n\t\t\tif (item.id == over.id) return;\r\n\t\t\t//replacing item under cursor\r\n\t\t\tif (allowedLevel(over, item) && item.id != over.id) {\r\n\t\t\t\tstore.move(item.id, 0, 0, over.id);\r\n\r\n\t\t\t} else if (over.$level == item.$level - 1 && !store.getChildren(over.id).length) {\r\n\t\t\t\tstore.move(item.id, 0, over.id);\r\n\r\n\t\t\t} else if (prev && (allowedLevel(prev, item)) && (item.id != prev.id)) {\r\n\t\t\t\tstore.move(item.id, -1, store.getParent(prev.id));\r\n\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn true;\r\n\t}, gantt));\r\n\r\n\tdnd.attachEvent(\"onDragEnd\", gantt.bind(function () {\r\n\t\tvar store = getStore();\r\n\t\tvar task = store.getItem(dnd.config.id);\r\n\t\ttask.$transparent = false;\r\n\t\ttask.$open = dnd.config.initial_open_state;\r\n\r\n\t\tif (this.callEvent(\"onBeforeRowDragEnd\", [dnd.config.id, dnd.config.parent, dnd.config.index]) === false) {\r\n\t\t\tstore.move(dnd.config.id, dnd.config.index, dnd.config.parent);\r\n\t\t\ttask.$drop_target = null;\r\n\t\t} else {\r\n\t\t\tthis.callEvent(\"onRowDragEnd\", [dnd.config.id, task.$drop_target]);\r\n\t\t}\r\n\r\n\t\tstore.refresh(task.id);\r\n\t\t//this.refreshData();\r\n\t}, gantt));\r\n}\r\n\r\nmodule.exports = {\r\n\tinit: _init_dnd\r\n};\n\n/***/ }),\n/* 46 */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar utils = __webpack_require__(0),\r\n\ttaskDnD = __webpack_require__(47),\r\n\tlinkDnD = __webpack_require__(48),\r\n\tdomHelpers = __webpack_require__(1);\r\n\r\nvar initializer = (function(){\r\n\treturn function(gantt){\r\n\t\tvar services = gantt.$services;\r\n\t\treturn {\r\n\t\t\tonCreated: function (timeline) {\r\n\t\t\t\tvar config = timeline.$config;\r\n\t\t\t\tconfig.bind = utils.defined(config.bind) ? config.bind : \"task\";\r\n\t\t\t\tconfig.bindLinks = utils.defined(config.bindLinks) ? config.bindLinks : \"link\";\r\n\r\n\t\t\t\ttimeline._linksDnD = linkDnD.createLinkDND();\r\n\t\t\t\ttimeline._tasksDnD = taskDnD.createTaskDND();\r\n\t\t\t\ttimeline._tasksDnD.extend(timeline);\r\n\r\n\t\t\t\tif(timeline.$config.id == \"timeline\") {\r\n\t\t\t\t\tthis.extendGantt(timeline);\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tonInitialized: function (timeline) {\r\n\t\t\t\tthis._attachDomEvents(gantt);\r\n\t\t\t\tthis._attachGanttEvents(gantt);\r\n\t\t\t\tthis._attachStateProvider(gantt);\r\n\r\n\t\t\t\ttimeline._tasksDnD.init(timeline, gantt);\r\n\t\t\t\ttimeline._linksDnD.init(timeline, gantt);\r\n\r\n\t\t\t\tif(timeline.$config.id == \"timeline\"){\r\n\t\t\t\t\tthis.extendDom(timeline);\r\n\t\t\t\t}\r\n\r\n\t\t\t},\r\n\t\t\tonDestroyed: function (timeline) {\r\n\t\t\t\tthis._clearGanttEvents(gantt);\r\n\t\t\t\tthis._clearDomEvents(gantt);\r\n\t\t\t\tthis._clearStateProvider(gantt);\r\n\t\t\t},\r\n\t\t\textendDom: function(timeline){\r\n\t\t\t\tgantt.$task = timeline.$task;\r\n\t\t\t\tgantt.$task_scale = timeline.$task_scale;\r\n\t\t\t\tgantt.$task_data = timeline.$task_data;\r\n\t\t\t\tgantt.$task_bg = timeline.$task_bg;\r\n\t\t\t\tgantt.$task_links = timeline.$task_links;\r\n\t\t\t\tgantt.$task_bars = timeline.$task_bars;\r\n\t\t\t},\r\n\r\n\t\t\textendGantt: function(timeline){\r\n\t\t\t\tgantt.dateFromPos = gantt.bind(timeline.dateFromPos, timeline);\r\n\t\t\t\tgantt.posFromDate = gantt.bind(timeline.posFromDate, timeline);\r\n\t\t\t\tgantt.getRowTop = gantt.bind(timeline.getRowTop, timeline);\r\n\t\t\t\tgantt.getTaskTop = gantt.bind(timeline.getItemTop, timeline);\r\n\t\t\t\tgantt.getTaskPosition = gantt.bind(timeline.getItemPosition, timeline);\r\n\t\t\t\tgantt.getTaskHeight = gantt.bind(timeline.getItemHeight, timeline);\r\n\t\t\t\tgantt.columnIndexByDate = gantt.bind(timeline.columnIndexByDate, timeline);\r\n\t\t\t\tgantt.roundTaskDates = gantt.bind(timeline.roundTaskDates, timeline);\r\n\t\t\t\tgantt.getScale = gantt.bind(timeline.getScale, timeline);\r\n\t\t\t\tgantt.getTaskNode = function (id) {\r\n\t\t\t\t\treturn timeline._taskRenderer.rendered[id];\r\n\t\t\t\t};\r\n\t\t\t\tgantt.getLinkNode = function (id) {\r\n\t\t\t\t\treturn timeline._linkRenderer.rendered[id];\r\n\t\t\t\t};\r\n\r\n\t\t\t},\r\n\r\n\t\t\t_attachDomEvent: function (event, className, handler){\r\n\t\t\t\tif(!this._events){\r\n\t\t\t\t\tthis._events = [];\r\n\t\t\t\t}\r\n\t\t\t\tvar mouseEvents = services.getService(\"mouseEvents\");\r\n\t\t\t\tvar e = {event:event, className: className, handler:handler, root:this.$task};\r\n\t\t\t\tmouseEvents.delegate(e.event, e.className, e.handler, e.root);\r\n\t\t\t\tthis._events.push(e);\r\n\t\t\t},\r\n\r\n\t\t\t_clearDomEvents: function(){\r\n\t\t\t\tvar mouseEvents = services.getService(\"mouseEvents\");\r\n\t\t\t\tfor(var i = 0; i < this._events.length; i++){\r\n\t\t\t\t\tvar e = this._events[i];\r\n\t\t\t\t\tmouseEvents.detach(e.event, e.className, e.handler, e.root);\r\n\t\t\t\t}\r\n\t\t\t\tthis._events = [];\r\n\t\t\t},\r\n\r\n\t\t\t_attachDomEvents: function(gantt){\r\n\t\t\t\tfunction _delete_link_handler(id, e) {\r\n\t\t\t\t\tif (id && this.callEvent(\"onLinkDblClick\", [id, e])) {\r\n\r\n\t\t\t\t\t\tvar link = this.getLink(id);\r\n\t\t\t\t\t\tif (this.isReadonly(link)) return;\r\n\r\n\t\t\t\t\t\tvar title = \"\";\r\n\t\t\t\t\t\tvar question = this.locale.labels.link + \" \" + this.templates.link_description(this.getLink(id)) + \" \" + this.locale.labels.confirm_link_deleting;\r\n\r\n\t\t\t\t\t\twindow.setTimeout(function () {\r\n\t\t\t\t\t\t\tgantt._dhtmlx_confirm(question, title, function () {\r\n\t\t\t\t\t\t\t\tgantt.deleteLink(id);\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t}, (this.config.touch ? 300 : 1));\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tthis._attachDomEvent(\"click\", \"gantt_task_link\", gantt.bind(function (e, trg) {\r\n\t\t\t\t\tvar id = this.locate(e, this.config.link_attribute);\r\n\t\t\t\t\tif (id) {\r\n\t\t\t\t\t\tthis.callEvent(\"onLinkClick\", [id, e]);\r\n\t\t\t\t\t}\r\n\t\t\t\t}, gantt));\r\n\r\n\t\t\t\tthis._attachDomEvent(\"click\", \"gantt_scale_cell\", gantt.bind(function (e, trg) {\r\n\t\t\t\t\tvar pos = domHelpers.getRelativeEventPosition(e, gantt.$task_data);\r\n\t\t\t\t\tvar date = gantt.dateFromPos(pos.x);\r\n\t\t\t\t\tvar coll = Math.floor(gantt.columnIndexByDate(date));\r\n\r\n\t\t\t\t\tvar coll_date = gantt.getScale().trace_x[coll];\r\n\r\n\t\t\t\t\tgantt.callEvent(\"onScaleClick\", [e, coll_date]);\r\n\t\t\t\t}, gantt));\r\n\r\n\t\t\t\tthis._attachDomEvent(\"doubleclick\", \"gantt_task_link\", gantt.bind(function (e, id, trg) {\r\n\t\t\t\t\tvar id = this.locate(e, gantt.config.link_attribute);\r\n\t\t\t\t\t_delete_link_handler.call(this, id, e);\r\n\t\t\t\t}, gantt));\r\n\r\n\t\t\t\tthis._attachDomEvent(\"doubleclick\", \"gantt_link_point\", gantt.bind(function (e, id, trg) {\r\n\t\t\t\t\tvar id = this.locate(e),\r\n\t\t\t\t\t\ttask = this.getTask(id);\r\n\r\n\t\t\t\t\tvar link = null;\r\n\t\t\t\t\tif (trg.parentNode && domHelpers.getClassName(trg.parentNode)) {\r\n\t\t\t\t\t\tif (domHelpers.getClassName(trg.parentNode).indexOf(\"_left\") > -1) {\r\n\t\t\t\t\t\t\tlink = task.$target[0];\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tlink = task.$source[0];\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (link)\r\n\t\t\t\t\t\t_delete_link_handler.call(this, link, e);\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}, gantt));\r\n\t\t\t},\r\n\r\n\t\t\t_attachGanttEvents: function(gantt){\r\n\t\t\t\tthis._clearGanttEvents(gantt);\r\n\r\n\t\t\t\tfunction refreshId(renders, oldId, newId, item) {\r\n\t\t\t\t\tfor (var i = 0; i < renders.length; i++) {\r\n\t\t\t\t\t\trenders[i].change_id(oldId, newId);\r\n\t\t\t\t\t\trenders[i].render_item(item);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tthis._onTaskIdChange = gantt.attachEvent(\"onTaskIdChange\", function (oldId, newId) {\r\n\t\t\t\t\trefreshId(gantt._getTaskLayers(), oldId, newId, gantt.getTask(newId));\r\n\t\t\t\t});\r\n\r\n\t\t\t\tif (this._onLinkIdChange)\r\n\t\t\t\t\tgantt.detachEvent(this._onLinkIdChange);\r\n\r\n\t\t\t\tthis._onLinkIdChange = gantt.attachEvent(\"onLinkIdChange\", function (oldId, newId) {\r\n\t\t\t\t\trefreshId(gantt._getLinkLayers(), oldId, newId, gantt.getLink(newId));\r\n\t\t\t\t});\r\n\t\t\t},\r\n\r\n\t\t\t_clearGanttEvents: function(gantt){\r\n\t\t\t\tif (this._onTaskIdChange)\r\n\t\t\t\t\tgantt.detachEvent(this._onTaskIdChange);\r\n\t\t\t\tif (this._onLinkIdChange)\r\n\t\t\t\t\tgantt.detachEvent(this._onLinkIdChange);\r\n\t\t\t},\r\n\r\n\t\t\t_attachStateProvider: function(){\r\n\t\t\t\tvar self = this;\r\n\t\t\t\tvar state = services.getService(\"state\");\r\n\t\t\t\tstate.registerProvider(\"tasksTimeline\", function(){\r\n\t\t\t\t\treturn {\r\n\t\t\t\t\t\tscale_unit: self._tasks ? self._tasks.unit : undefined,\r\n\t\t\t\t\t\tscale_step:  self._tasks ? self._tasks.step  : undefined\r\n\t\t\t\t\t};\r\n\t\t\t\t});\r\n\t\t\t},\r\n\r\n\t\t\t_clearStateProvider: function(){\r\n\t\t\t\tvar state = services.getService(\"state\");\r\n\t\t\t\tstate.unregisterProvider(\"tasksTimeline\");\r\n\t\t\t}\r\n\t\t};\r\n\t};\r\n\r\n})();\r\n\r\nmodule.exports = initializer;\n\n/***/ }),\n/* 47 */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar domHelpers = __webpack_require__(1),\r\n\tutils = __webpack_require__(0);\r\nvar timeout = __webpack_require__(7);\r\n\r\nfunction createTaskDND(timeline, gantt){\r\n\tvar services = gantt.$services;\r\n\treturn {\r\n\t\tdrag: null,\r\n\t\t_events: {\r\n\t\t\tbefore_start: {},\r\n\t\t\tbefore_finish: {},\r\n\t\t\tafter_finish: {}\r\n\t\t},\r\n\t\t_handlers: {},\r\n\t\tinit: function () {\r\n\t\t\tthis.clear_drag_state();\r\n\t\t\tvar drag = gantt.config.drag_mode;\r\n\t\t\tthis.set_actions();\r\n\r\n\t\t\tvar stateService = services.getService(\"state\");\r\n\t\t\tstateService.registerProvider(\"tasksDnd\", utils.bind(function(){\r\n\t\t\t\treturn {\r\n\t\t\t\t\tdrag_id : this.drag ? this.drag.id : undefined,\r\n\t\t\t\t\tdrag_mode : this.drag ? this.drag.mode : undefined,\r\n\t\t\t\t\tdrag_from_start : this.drag ? this.drag.left : undefined\r\n\t\t\t\t};\r\n\t\t\t}, this));\r\n\r\n\t\t\tvar evs = {\r\n\t\t\t\t\"before_start\": \"onBeforeTaskDrag\",\r\n\t\t\t\t\"before_finish\": \"onBeforeTaskChanged\",\r\n\t\t\t\t\"after_finish\": \"onAfterTaskDrag\"\r\n\t\t\t};\r\n\t\t\t//for now, all drag operations will trigger the same events\r\n\t\t\tfor (var stage in this._events) {\r\n\t\t\t\tfor (var mode in drag) {\r\n\t\t\t\t\tthis._events[stage][mode] = evs[stage];\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tthis._handlers[drag.move] = this._move;\r\n\t\t\tthis._handlers[drag.resize] = this._resize;\r\n\t\t\tthis._handlers[drag.progress] = this._resize_progress;\r\n\r\n\t\t},\r\n\t\tset_actions: function () {\r\n\t\t\tvar data = timeline.$task_data;\r\n\t\t\tgantt.event(data, \"mousemove\", gantt.bind(function (e) {\r\n\t\t\t\tthis.on_mouse_move(e || event);\r\n\t\t\t}, this));\r\n\t\t\tgantt.event(data, \"mousedown\", gantt.bind(function (e) {\r\n\t\t\t\tthis.on_mouse_down(e || event);\r\n\t\t\t}, this));\r\n\t\t\tgantt.event(data, \"mouseup\", gantt.bind(function (e) {\r\n\t\t\t\tthis.on_mouse_up(e || event);\r\n\t\t\t}, this));\r\n\t\t},\r\n\r\n\t\tclear_drag_state: function () {\r\n\t\t\tthis.drag = {\r\n\t\t\t\tid: null,\r\n\t\t\t\tmode: null,\r\n\t\t\t\tpos: null,\r\n\t\t\t\tstart_x: null,\r\n\t\t\t\tstart_y: null,\r\n\t\t\t\tobj: null,\r\n\t\t\t\tleft: null\r\n\t\t\t};\r\n\t\t},\r\n\t\t_resize: function (ev, shift, drag) {\r\n\t\t\tvar cfg = timeline.$getConfig();\r\n\t\t\tvar coords_x = this._drag_task_coords(ev, drag);\r\n\t\t\tif (drag.left) {\r\n\t\t\t\tev.start_date = gantt.dateFromPos(coords_x.start + shift);\r\n\t\t\t\tif (!ev.start_date) {\r\n\t\t\t\t\tev.start_date = new Date(gantt.getState().min_date);\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tev.end_date = gantt.dateFromPos(coords_x.end + shift);\r\n\t\t\t\tif (!ev.end_date) {\r\n\t\t\t\t\tev.end_date = new Date(gantt.getState().max_date);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tif (ev.end_date - ev.start_date < cfg.min_duration) {\r\n\t\t\t\tif (drag.left)\r\n\t\t\t\t\tev.start_date = gantt.calculateEndDate({start_date: ev.end_date, duration: -1, task: ev});\r\n\t\t\t\telse\r\n\t\t\t\t\tev.end_date = gantt.calculateEndDate({start_date: ev.start_date, duration: 1, task: ev});\r\n\t\t\t}\r\n\t\t\tgantt._init_task_timing(ev);\r\n\t\t},\r\n\t\t_resize_progress: function (ev, shift, drag) {\r\n\t\t\tvar coords_x = this._drag_task_coords(ev, drag);\r\n\r\n\t\t\tvar diff = Math.max(0, drag.pos.x - coords_x.start);\r\n\t\t\tev.progress = Math.min(1, diff / (coords_x.end - coords_x.start));\r\n\t\t},\r\n\t\t_move: function (ev, shift, drag) {\r\n\t\t\tvar coords_x = this._drag_task_coords(ev, drag);\r\n\t\t\tvar new_start = gantt.dateFromPos(coords_x.start + shift),\r\n\t\t\t\tnew_end = gantt.dateFromPos(coords_x.end + shift);\r\n\t\t\tif (!new_start) {\r\n\t\t\t\tev.start_date = new Date(gantt.getState().min_date);\r\n\t\t\t\tev.end_date = gantt.dateFromPos(gantt.posFromDate(ev.start_date) + (coords_x.end - coords_x.start));\r\n\t\t\t} else if (!new_end) {\r\n\t\t\t\tev.end_date = new Date(gantt.getState().max_date);\r\n\t\t\t\tev.start_date = gantt.dateFromPos(gantt.posFromDate(ev.end_date) - (coords_x.end - coords_x.start));\r\n\t\t\t} else {\r\n\t\t\t\tev.start_date = new_start;\r\n\t\t\t\tev.end_date = new_end;\r\n\t\t\t}\r\n\t\t},\r\n\t\t_drag_task_coords: function (t, drag) {\r\n\t\t\tvar start = drag.obj_s_x = drag.obj_s_x || gantt.posFromDate(t.start_date);\r\n\t\t\tvar end = drag.obj_e_x = drag.obj_e_x || gantt.posFromDate(t.end_date);\r\n\t\t\treturn {\r\n\t\t\t\tstart: start,\r\n\t\t\t\tend: end\r\n\t\t\t};\r\n\t\t},\r\n\t\t_mouse_position_change: function (oldPos, newPos) {\r\n\t\t\tvar dx = oldPos.x - newPos.x,\r\n\t\t\t\tdy = oldPos.y - newPos.y;\r\n\t\t\treturn Math.sqrt(dx * dx + dy * dy);\r\n\t\t},\r\n\t\t_is_number: function (n) {\r\n\t\t\treturn !isNaN(parseFloat(n)) && isFinite(n);\r\n\t\t},\r\n\r\n\t\ton_mouse_move: function (e) {\r\n\t\t\tif (this.drag.start_drag) {\r\n\t\t\t\tvar pos = domHelpers.getRelativeEventPosition(e, gantt.$task_data);\r\n\r\n\t\t\t\tvar sX = this.drag.start_drag.start_x,\r\n\t\t\t\t\tsY = this.drag.start_drag.start_y;\r\n\r\n\t\t\t\tif ((Date.now() - this.drag.timestamp > 50) ||\r\n\t\t\t\t\t(this._is_number(sX) && this._is_number(sY) && this._mouse_position_change({\r\n\t\t\t\t\t\tx: sX,\r\n\t\t\t\t\t\ty: sY\r\n\t\t\t\t\t}, pos) > 20)) {\r\n\t\t\t\t\tthis._start_dnd(e);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tvar drag = this.drag;\r\n\r\n\t\t\tif (drag.mode) {\r\n\t\t\t\tif (!timeout(this, 40))//limit update frequency\r\n\t\t\t\t\treturn;\r\n\r\n\t\t\t\tthis._update_on_move(e);\r\n\r\n\t\t\t}\r\n\t\t},\r\n\t\t_update_on_move: function (e) {\r\n\t\t\tvar drag = this.drag;\r\n\r\n\t\t\tif (drag.mode) {\r\n\t\t\t\tvar pos = domHelpers.getRelativeEventPosition(e, gantt.$task_data);\r\n\t\t\t\tif (drag.pos && drag.pos.x == pos.x)\r\n\t\t\t\t\treturn;\r\n\r\n\t\t\t\tdrag.pos = pos;\r\n\r\n\t\t\t\tvar curr_date = gantt.dateFromPos(pos.x);\r\n\t\t\t\tif (!curr_date || isNaN(curr_date.getTime()))\r\n\t\t\t\t\treturn;\r\n\r\n\r\n\t\t\t\tvar shift = pos.x - drag.start_x;\r\n\t\t\t\tvar ev = gantt.getTask(drag.id);\r\n\r\n\r\n\t\t\t\tif (this._handlers[drag.mode]) {\r\n\t\t\t\t\tvar original = gantt.mixin({}, ev);\r\n\t\t\t\t\tvar copy = gantt.mixin({}, ev);\r\n\t\t\t\t\tthis._handlers[drag.mode].apply(this, [copy, shift, drag]);\r\n\t\t\t\t\tgantt.mixin(ev, copy, true);\r\n\t\t\t\t\t//gantt._update_parents(drag.id, true);\r\n\t\t\t\t\tgantt.callEvent(\"onTaskDrag\", [ev.id, drag.mode, copy, original, e]);\r\n\r\n\t\t\t\t\tgantt.mixin(ev, copy, true);\r\n\t\t\t\t\tgantt._update_parents(drag.id);\r\n\t\t\t\t\tgantt.refreshTask(drag.id);\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\ton_mouse_down: function (e, src) {\r\n\t\t\t// on Mac we do not get onmouseup event when clicking right mouse button leaving us in dnd state\r\n\t\t\t// let's ignore right mouse button then\r\n\t\t\tif (e.button == 2 && e.button !== undefined)\r\n\t\t\t\treturn;\r\n\r\n\t\t\tvar config = timeline.$getConfig();\r\n\t\t\tvar id = gantt.locate(e);\r\n\t\t\tvar task = null;\r\n\t\t\tif (gantt.isTaskExists(id)) {\r\n\t\t\t\ttask = gantt.getTask(id);\r\n\t\t\t}\r\n\r\n\t\t\tif (gantt.isReadonly(task) || this.drag.mode) return;\r\n\r\n\t\t\tthis.clear_drag_state();\r\n\r\n\t\t\tsrc = src || (e.target || e.srcElement);\r\n\r\n\t\t\tvar className = domHelpers.getClassName(src);\r\n\t\t\tif (!className || !this._get_drag_mode(className)) {\r\n\t\t\t\tif (src.parentNode)\r\n\t\t\t\t\treturn this.on_mouse_down(e, src.parentNode);\r\n\t\t\t\telse\r\n\t\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tvar drag = this._get_drag_mode(className);\r\n\r\n\t\t\tif (!drag) {\r\n\t\t\t\tif (gantt.checkEvent(\"onMouseDown\") && gantt.callEvent(\"onMouseDown\", [className.split(\" \")[0]])) {\r\n\t\t\t\t\tif (src.parentNode)\r\n\t\t\t\t\t\treturn this.on_mouse_down(e, src.parentNode);\r\n\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tif (drag.mode && drag.mode != config.drag_mode.ignore && config[\"drag_\" + drag.mode]) {\r\n\t\t\t\t\tid = gantt.locate(src);\r\n\t\t\t\t\ttask = gantt.copy(gantt.getTask(id) || {});\r\n\r\n\t\t\t\t\tif (gantt.isReadonly(task)) {\r\n\t\t\t\t\t\tthis.clear_drag_state();\r\n\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif (gantt.isSummaryTask(task) && drag.mode != config.drag_mode.progress) {//only progress drag is allowed for tasks with flexible duration\r\n\t\t\t\t\t\tthis.clear_drag_state();\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tdrag.id = id;\r\n\t\t\t\t\tvar pos = domHelpers.getRelativeEventPosition(e, gantt.$task_data);\r\n\r\n\t\t\t\t\tdrag.start_x = pos.x;\r\n\t\t\t\t\tdrag.start_y = pos.y;\r\n\t\t\t\t\tdrag.obj = task;\r\n\t\t\t\t\tthis.drag.start_drag = drag;\r\n\t\t\t\t\tthis.drag.timestamp = Date.now();\r\n\r\n\t\t\t\t} else\r\n\t\t\t\t\tthis.clear_drag_state();\r\n\t\t\t}\r\n\t\t},\r\n\t\t_fix_dnd_scale_time: function (task, drag) {\r\n\t\t\tvar config = timeline.$getConfig();\r\n\t\t\tvar unit = gantt.getScale().unit,\r\n\t\t\t\tstep = gantt.getScale().step;\r\n\t\t\tif (!config.round_dnd_dates) {\r\n\t\t\t\tunit = 'minute';\r\n\t\t\t\tstep = config.time_step;\r\n\t\t\t}\r\n\r\n\t\t\tfunction fixStart(task) {\r\n\t\t\t\tvar config = timeline.$getConfig();\r\n\t\t\t\tif (!gantt.isWorkTime(task.start_date, undefined, task))\r\n\t\t\t\t\ttask.start_date = gantt.calculateEndDate({\r\n\t\t\t\t\t\tstart_date: task.start_date,\r\n\t\t\t\t\t\tduration: -1,\r\n\t\t\t\t\t\tunit: config.duration_unit,\r\n\t\t\t\t\t\ttask: task\r\n\t\t\t\t\t});\r\n\t\t\t}\r\n\r\n\t\t\tfunction fixEnd(task) {\r\n\t\t\t\tvar config = timeline.$getConfig();\r\n\t\t\t\tif (!gantt.isWorkTime(new Date(task.end_date - 1), undefined, task))\r\n\t\t\t\t\ttask.end_date = gantt.calculateEndDate({\r\n\t\t\t\t\t\tstart_date: task.end_date,\r\n\t\t\t\t\t\tduration: 1,\r\n\t\t\t\t\t\tunit: config.duration_unit,\r\n\t\t\t\t\t\ttask: task\r\n\t\t\t\t\t});\r\n\t\t\t}\r\n\r\n\t\t\tif (drag.mode == config.drag_mode.resize) {\r\n\t\t\t\tif (drag.left) {\r\n\t\t\t\t\ttask.start_date = gantt.roundDate({date: task.start_date, unit: unit, step: step});\r\n\t\t\t\t\tfixStart(task);\r\n\t\t\t\t} else {\r\n\t\t\t\t\ttask.end_date = gantt.roundDate({date: task.end_date, unit: unit, step: step});\r\n\t\t\t\t\tfixEnd(task);\r\n\t\t\t\t}\r\n\t\t\t} else if (drag.mode == config.drag_mode.move) {\r\n\t\t\t\ttask.start_date = gantt.roundDate({date: task.start_date, unit: unit, step: step});\r\n\t\t\t\tfixStart(task);\r\n\r\n\t\t\t\ttask.end_date = gantt.calculateEndDate(task);\r\n\t\t\t}\r\n\t\t},\r\n\t\t_fix_working_times: function (task, drag) {\r\n\t\t\tvar config = timeline.$getConfig();\r\n\t\t\tvar drag = drag || {mode: config.drag_mode.move};\r\n\t\t\tif (config.work_time && config.correct_work_time) {\r\n\t\t\t\tif (drag.mode == config.drag_mode.resize) {\r\n\t\t\t\t\tif (drag.left) {\r\n\t\t\t\t\t\ttask.start_date = gantt.getClosestWorkTime({date: task.start_date, dir: 'future', task: task});\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\ttask.end_date = gantt.getClosestWorkTime({date: task.end_date, dir: 'past', task: task});\r\n\t\t\t\t\t}\r\n\t\t\t\t} else if (drag.mode == config.drag_mode.move) {\r\n\t\t\t\t\tgantt.correctTaskWorkTime(task);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\ton_mouse_up: function (e) {\r\n\r\n\t\t\tvar drag = this.drag;\r\n\t\t\tif (drag.mode && drag.id) {\r\n\t\t\t\tvar config = timeline.$getConfig();\r\n\t\t\t\t//drop\r\n\t\t\t\tvar ev = gantt.getTask(drag.id);\r\n\r\n\t\t\t\tif (config.work_time && config.correct_work_time) {\r\n\t\t\t\t\tthis._fix_working_times(ev, drag);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tthis._fix_dnd_scale_time(ev, drag);\r\n\r\n\t\t\t\tgantt._init_task_timing(ev);\r\n\r\n\t\t\t\tif (!this._fireEvent(\"before_finish\", drag.mode, [drag.id, drag.mode, gantt.copy(drag.obj), e])) {\r\n\t\t\t\t\t//drag.obj._dhx_changed = false;\r\n\t\t\t\t\tthis.clear_drag_state();\r\n\t\t\t\t\tdrag.obj._dhx_changed = false;\r\n\t\t\t\t\tgantt.mixin(ev, drag.obj, true);\r\n\r\n\t\t\t\t\tgantt.refreshTask(ev.id);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tvar drag_id = drag.id;\r\n\r\n\t\t\t\t\tgantt._init_task_timing(ev);\r\n\r\n\t\t\t\t\tthis.clear_drag_state();\r\n\t\t\t\t\tgantt.updateTask(ev.id);\r\n\t\t\t\t\tthis._fireEvent(\"after_finish\", drag.mode, [drag_id, drag.mode, e]);\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\t\t\tthis.clear_drag_state();\r\n\t\t},\r\n\t\t_get_drag_mode: function (className) {\r\n\t\t\tvar config = timeline.$getConfig();\r\n\t\t\tvar modes = config.drag_mode;\r\n\t\t\tvar classes = (className || \"\").split(\" \");\r\n\t\t\tvar classname = classes[0];\r\n\t\t\tvar drag = {mode: null, left: null};\r\n\t\t\tswitch (classname) {\r\n\t\t\t\tcase \"gantt_task_line\":\r\n\t\t\t\tcase \"gantt_task_content\":\r\n\t\t\t\t\tdrag.mode = modes.move;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase \"gantt_task_drag\":\r\n\t\t\t\t\tdrag.mode = modes.resize;\r\n\t\t\t\t\tif (classes[1] && classes[1].indexOf(\"left\", classes[1].length - \"left\".length) !== -1) {\r\n\t\t\t\t\t\tdrag.left = true;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tdrag.left = false;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase \"gantt_task_progress_drag\":\r\n\t\t\t\t\tdrag.mode = modes.progress;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase \"gantt_link_control\":\r\n\t\t\t\tcase \"gantt_link_point\":\r\n\t\t\t\t\tdrag.mode = modes.ignore;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tdefault:\r\n\t\t\t\t\tdrag = null;\r\n\t\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t\treturn drag;\r\n\r\n\t\t},\r\n\r\n\t\t_start_dnd: function (e) {\r\n\t\t\tvar drag = this.drag = this.drag.start_drag;\r\n\t\t\tdelete drag.start_drag;\r\n\r\n\t\t\tvar cfg = timeline.$getConfig();\r\n\t\t\tvar id = drag.id;\r\n\t\t\tif (!cfg[\"drag_\" + drag.mode] || !gantt.callEvent(\"onBeforeDrag\", [id, drag.mode, e]) || !this._fireEvent(\"before_start\", drag.mode, [id, drag.mode, e])) {\r\n\t\t\t\tthis.clear_drag_state();\r\n\t\t\t} else {\r\n\t\t\t\tdelete drag.start_drag;\r\n\t\t\t\tgantt.callEvent(\"onTaskDragStart\", []);\r\n\t\t\t}\r\n\r\n\t\t},\r\n\t\t_fireEvent: function (stage, mode, params) {\r\n\t\t\tgantt.assert(this._events[stage], \"Invalid stage:{\" + stage + \"}\");\r\n\r\n\t\t\tvar trigger = this._events[stage][mode];\r\n\r\n\t\t\tgantt.assert(trigger, \"Unknown after drop mode:{\" + mode + \"}\");\r\n\t\t\tgantt.assert(params, \"Invalid event arguments\");\r\n\r\n\r\n\t\t\tif (!gantt.checkEvent(trigger))\r\n\t\t\t\treturn true;\r\n\r\n\t\t\treturn gantt.callEvent(trigger, params);\r\n\t\t},\r\n\r\n\t\tround_task_dates: function(task){\r\n\t\t\tvar drag_state = this.drag;\r\n\t\t\tvar config = timeline.$getConfig();\r\n\t\t\tif (!drag_state) {\r\n\t\t\t\tdrag_state = {mode: config.drag_mode.move};\r\n\t\t\t}\r\n\t\t\tthis._fix_dnd_scale_time(task, drag_state);\r\n\t\t}\r\n\t};\r\n}\r\n\r\nfunction initTaskDND() {\r\n\tvar _tasks_dnd;\r\n\treturn {\r\n\t\textend: function(timeline){\r\n\t\t\ttimeline.roundTaskDates = function (task) {\r\n\t\t\t\t_tasks_dnd.round_task_dates(task);\r\n\t\t\t};\r\n\r\n\t\t},\r\n\t\tinit: function(timeline, gantt){\r\n\t\t\t_tasks_dnd = createTaskDND(timeline, gantt);\r\n\t\t\t// TODO: entry point for touch handlers, move touch to timeline\r\n\t\t\ttimeline._tasks_dnd = _tasks_dnd;\r\n\t\t\treturn _tasks_dnd.init(gantt);\r\n\t\t},\r\n\t\tdestroy: function(){\r\n\r\n\t\t}\r\n\t};\r\n}\r\n\r\nmodule.exports = {\r\n\tcreateTaskDND: initTaskDND\r\n};\r\n\n\n/***/ }),\n/* 48 */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar domHelpers = __webpack_require__(1);\r\n\r\nvar initLinksDND = function(timeline, gantt) {\r\n\tvar _link_landing,\r\n\t\t_link_target_task,\r\n\t\t_link_target_task_start,\r\n\t\t_link_source_task,\r\n\t\t_link_source_task_start;\r\n\r\n\r\n\tfunction getMilestoneWidth() {\r\n\t\treturn timeline.getItemHeight();\r\n\t}\r\n\r\n\tfunction getVisibleMilestoneWidth() {\r\n\t\tvar origWidth = timeline.getItemHeight();//m-s have square shape\r\n\t\treturn Math.sqrt(2 * origWidth * origWidth);\r\n\t}\r\n\r\n\tfunction getDndState(){\r\n\t\treturn {\r\n\t\t\tlink_source_id : _link_source_task,\r\n\t\t\tlink_target_id : _link_target_task,\r\n\t\t\tlink_from_start : _link_source_task_start,\r\n\t\t\tlink_to_start : _link_target_task_start,\r\n\t\t\tlink_landing_area : _link_landing\r\n\t\t};\r\n\t}\r\n\r\n\tvar services = gantt.$services;\r\n\r\n\tvar state = services.getService(\"state\");\r\n\tvar DnD = services.getService(\"dnd\");\r\n\r\n\tstate.registerProvider(\"linksDnD\", getDndState);\r\n\r\n\tvar dnd = new DnD(timeline.$task_bars, { sensitivity : 0, updates_per_second : 60 }),\r\n\t\tstart_marker = \"task_left\",\r\n\t\tend_marker = \"task_right\",\r\n\t\tlink_edge_marker = \"gantt_link_point\",\r\n\t\tlink_landing_hover_area = \"gantt_link_control\";\r\n\r\n\tdnd.attachEvent(\"onBeforeDragStart\", gantt.bind(function(obj,e) {\r\n\t\tvar target = (e.target||e.srcElement);\r\n\t\tresetDndState();\r\n\t\tif(gantt.getState().drag_id)\r\n\t\t\treturn false;\r\n\r\n\t\tif(domHelpers.locateClassName(target, link_edge_marker)){\r\n\t\t\tif(domHelpers.locateClassName(target, start_marker))\r\n\t\t\t\t_link_source_task_start = true;\r\n\r\n\t\t\tvar sid = gantt.locate(e);\r\n\t\t\t_link_source_task = sid;\r\n\r\n\t\t\tvar t = gantt.getTask(sid);\r\n\t\t\tif(gantt.isReadonly(t)){\r\n\t\t\t\tresetDndState();\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\r\n\t\t\tvar shift = 0;\r\n\t\t\tif(gantt.getTaskType(t.type) == gantt.config.types.milestone){\r\n\t\t\t\tshift = (getVisibleMilestoneWidth() - getMilestoneWidth())/2;\r\n\t\t\t}\r\n\r\n\t\t\tthis._dir_start = getLinePos(t, !!_link_source_task_start, shift);\r\n\t\t\treturn true;\r\n\t\t}else{\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t}, this));\r\n\r\n\tdnd.attachEvent(\"onAfterDragStart\", gantt.bind(function(obj,e) {\r\n\t\tif(gantt.config.touch) {\r\n\t\t\tgantt.refreshData();\r\n\t\t}\r\n\t\tupdateMarkedHtml(dnd.config.marker);\r\n\t}, this));\r\n\r\n\tfunction getLinePos(task, to_start, shift){\r\n\t\tvar taskPos = getMilestonePosition(task, function(task){ return gantt.getTaskPosition(task);});\r\n\r\n\t\tvar pos = {x: taskPos.x, y: taskPos.y};\r\n\t\tif(!to_start){\r\n\t\t\tpos.x = taskPos.xEnd;\r\n\t\t}\r\n\r\n\t\t//var pos = gantt._get_task_pos(task, !!to_start);\r\n\t\tpos.y += gantt.config.row_height/2;\r\n\r\n\t\tshift = shift || 0;\r\n\t\tpos.x += (to_start ? -1 : 1)*shift;\r\n\t\treturn pos;\r\n\t}\r\n\r\n\tfunction getMilestonePosition(task, getTaskPosition){\r\n\t\tvar pos = getTaskPosition(task);\r\n\r\n\t\tvar res = {\r\n\t\t\tx: pos.left,\r\n\t\t\ty: pos.top,\r\n\t\t\twidth: pos.width,\r\n\t\t\theight: pos.height\r\n\t\t};\r\n\t\tres.xEnd = res.x + res.width;\r\n\t\tres.yEnd = res.y + res.height;\r\n\r\n\t\tif(gantt.getTaskType(task.type) == gantt.config.types.milestone){\r\n\t\t\tvar milestoneHeight = gantt.getTaskHeight();\r\n\t\t\tvar milestoneWidth = Math.sqrt(2*milestoneHeight*milestoneHeight);\r\n\t\t\tpos.x -= milestoneWidth / 2;\r\n\t\t\tpos.xEnd += milestoneWidth / 2;\r\n\t\t\tpos.width = pos.xEnd - pos.x;\r\n\t\t}\r\n\r\n\r\n\t\treturn res;\r\n\t}\r\n\r\n\tdnd.attachEvent(\"onDragMove\", gantt.bind(function(obj,e) {\r\n\t\tvar dd = dnd.config;\r\n\t\tvar pos = dnd.getPosition(e);\r\n\t\tadvanceMarker(dd.marker, pos);\r\n\t\tvar landing = !!domHelpers.locateClassName(e, link_landing_hover_area);\r\n\r\n\t\tvar prevTarget = _link_target_task;\r\n\t\tvar prevLanding = _link_landing;\r\n\t\tvar prevToStart = _link_target_task_start;\r\n\r\n\t\tvar targ = gantt.locate(e),\r\n\t\t\tto_start = true;\r\n\t\tif(landing){\r\n\t\t\t//refreshTask\r\n\t\t\tto_start = !domHelpers.locateClassName(e, end_marker);\r\n\t\t\tlanding = !!targ;\r\n\t\t}\r\n\r\n\t\t_link_target_task = targ;\r\n\t\t_link_landing = landing;\r\n\t\t_link_target_task_start = to_start;\r\n\r\n\t\tif(landing){\r\n\t\t\tvar t = gantt.getTask(targ);\r\n\r\n\t\t\tvar node = domHelpers.locateClassName(e, link_landing_hover_area);\r\n\t\t\tvar shift = 0;\r\n\t\t\tif(node){\r\n\t\t\t\tshift = Math.floor(node.offsetWidth  / 2);\r\n\t\t\t}\r\n\r\n\t\t\tthis._dir_end = getLinePos(t, !!_link_target_task_start,shift);\r\n\t\t}else{\r\n\t\t\tthis._dir_end = domHelpers.getRelativeEventPosition(e, timeline.$task_data);\r\n\t\t}\r\n\r\n\t\tvar targetChanged = !(prevLanding == landing && prevTarget == targ && prevToStart == to_start);\r\n\t\tif(targetChanged){\r\n\t\t\tif(prevTarget)\r\n\t\t\t\tgantt.refreshTask(prevTarget, false);\r\n\t\t\tif(targ)\r\n\t\t\t\tgantt.refreshTask(targ, false);\r\n\t\t}\r\n\r\n\t\tif(targetChanged){\r\n\t\t\tupdateMarkedHtml(dd.marker);\r\n\t\t}\r\n\r\n\t\tshowDirectingLine(this._dir_start.x, this._dir_start.y, this._dir_end.x, this._dir_end.y);\r\n\r\n\t\treturn true;\r\n\t}, this));\r\n\r\n\r\n\tdnd.attachEvent(\"onDragEnd\", gantt.bind(function() {\r\n\t\tvar drag = getDndState();\r\n\r\n\t\tif(drag.link_source_id && drag.link_target_id && drag.link_source_id != drag.link_target_id){\r\n\t\t\tvar type = gantt._get_link_type(drag.link_from_start, drag.link_to_start);\r\n\r\n\t\t\tvar link = {source : drag.link_source_id, target: drag.link_target_id, type:type};\r\n\t\t\tif(link.type && gantt.isLinkAllowed(link))\r\n\t\t\t\tgantt.addLink(link);\r\n\t\t}\r\n\r\n\t\tresetDndState();\r\n\r\n\t\tif(gantt.config.touch) {\r\n\t\t\tgantt.refreshData();\r\n\t\t}\r\n\t\telse {\r\n\t\t\tif (drag.link_source_id)\r\n\t\t\t\tgantt.refreshTask(drag.link_source_id, false);\r\n\t\t\tif (drag.link_target_id)\r\n\t\t\t\tgantt.refreshTask(drag.link_target_id, false);\r\n\t\t}\r\n\t\tremoveDirectionLine();\r\n\t}, this));\r\n\r\n\tfunction updateMarkedHtml(marker){\r\n\t\tvar link = getDndState();\r\n\r\n\t\tvar css = [\"gantt_link_tooltip\"];\r\n\t\tif(link.link_source_id && link.link_target_id){\r\n\t\t\tif(gantt.isLinkAllowed(link.link_source_id, link.link_target_id, link.link_from_start, link.link_to_start)){\r\n\t\t\t\tcss.push(\"gantt_allowed_link\");\r\n\t\t\t}else{\r\n\t\t\t\tcss.push(\"gantt_invalid_link\");\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tvar className = gantt.templates.drag_link_class(link.link_source_id, link.link_from_start, link.link_target_id, link.link_to_start);\r\n\t\tif(className)\r\n\t\t\tcss.push(className);\r\n\r\n\t\tvar html = \"<div class='\"+className+ \"'>\" +\r\n\t\t\tgantt.templates.drag_link(link.link_source_id, link.link_from_start, link.link_target_id, link.link_to_start) +\r\n\t\t\t\"</div>\";\r\n\t\tmarker.innerHTML = html;\r\n\t}\r\n\r\n\tfunction advanceMarker(marker, pos){\r\n\t\tmarker.style.left = pos.x + 5 + \"px\";\r\n\t\tmarker.style.top = pos.y + 5 + \"px\";\r\n\t}\r\n\r\n\tfunction resetDndState(){\r\n\t\t_link_source_task =\r\n\t\t\t_link_source_task_start =\r\n\t\t\t\t_link_target_task = null;\r\n\t\t_link_target_task_start = true;\r\n\t}\r\n\tfunction showDirectingLine(s_x, s_y, e_x, e_y){\r\n\t\tvar div = getDirectionLine();\r\n\r\n\t\tvar link = getDndState();\r\n\r\n\t\tvar css = [\"gantt_link_direction\"];\r\n\t\tif(gantt.templates.link_direction_class){\r\n\t\t\tcss.push(gantt.templates.link_direction_class(link.link_source_id, link.link_from_start, link.link_target_id, link.link_to_start));\r\n\t\t}\r\n\r\n\t\tvar dist =Math.sqrt( (Math.pow(e_x - s_x, 2)) + (Math.pow(e_y - s_y, 2)) );\r\n\t\tdist = Math.max(0, dist - 3);\r\n\t\tif(!dist)\r\n\t\t\treturn;\r\n\r\n\t\tdiv.className = css.join(\" \");\r\n\t\tvar tan = (e_y - s_y)/(e_x - s_x),\r\n\t\t\tangle = Math.atan(tan);\r\n\r\n\t\tif(coordinateCircleQuarter(s_x, e_x, s_y, e_y) == 2){\r\n\t\t\tangle += Math.PI;\r\n\t\t}else if(coordinateCircleQuarter(s_x, e_x, s_y, e_y) == 3){\r\n\t\t\tangle -= Math.PI;\r\n\t\t}\r\n\r\n\r\n\r\n\t\tvar sin = Math.sin(angle),\r\n\t\t\tcos = Math.cos(angle),\r\n\t\t\ttop = Math.round(s_y),\r\n\t\t\tleft = Math.round(s_x);\r\n\r\n\r\n\t\tvar style = [\r\n\t\t\t\"-webkit-transform: rotate(\"+angle+\"rad)\",\r\n\t\t\t\"-moz-transform: rotate(\"+angle+\"rad)\",\r\n\t\t\t\"-ms-transform: rotate(\"+angle+\"rad)\",\r\n\t\t\t\"-o-transform: rotate(\"+angle+\"rad)\",\r\n\t\t\t\"transform: rotate(\"+angle+\"rad)\",\r\n\t\t\t\"width:\" + Math.round(dist) + \"px\"\r\n\t\t];\r\n\r\n\t\tif(window.navigator.userAgent.indexOf(\"MSIE 8.0\") != -1){\r\n\t\t\t//ms-filter breaks styles in ie9, so add it only for 8th\r\n\t\t\tstyle.push(\"-ms-filter: \\\"\" + ieTransform(sin, cos) + \"\\\"\");\r\n\r\n\t\t\tvar shiftLeft = Math.abs(Math.round(s_x - e_x)),\r\n\t\t\t\tshiftTop = Math.abs(Math.round(e_y - s_y));\r\n\t\t\t//fix rotation axis\r\n\t\t\tswitch(coordinateCircleQuarter(s_x, e_x, s_y, e_y)){\r\n\t\t\t\tcase 1:\r\n\t\t\t\t\ttop -= shiftTop;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 2:\r\n\t\t\t\t\tleft -= shiftLeft;\r\n\t\t\t\t\ttop -= shiftTop;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 3:\r\n\t\t\t\t\tleft -= shiftLeft;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tdefault:\r\n\t\t\t\t\tbreak;\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tstyle.push(\"top:\" +  top + \"px\");\r\n\t\tstyle.push(\"left:\" +  left + \"px\");\r\n\r\n\t\tdiv.style.cssText = style.join(\";\");\r\n\t}\r\n\r\n\tfunction ieTransform(sin, cos){\r\n\t\treturn \"progid:DXImageTransform.Microsoft.Matrix(\"+\r\n\t\t\t\"M11 = \"+cos+\",\"+\r\n\t\t\t\"M12 = -\"+sin+\",\"+\r\n\t\t\t\"M21 = \"+sin+\",\"+\r\n\t\t\t\"M22 = \"+cos+\",\"+\r\n\t\t\t\"SizingMethod = 'auto expand'\"+\r\n\t\t\")\";\r\n\t}\r\n\tfunction coordinateCircleQuarter(sX, eX, sY, eY){\r\n\t\tif(eX >= sX){\r\n\t\t\tif(eY <= sY){\r\n\t\t\t\treturn 1;\r\n\t\t\t}else{\r\n\t\t\t\treturn 4;\r\n\t\t\t}\r\n\t\t}else{\r\n\t\t\tif(eY <= sY){\r\n\t\t\t\treturn 2;\r\n\t\t\t}else{\r\n\t\t\t\treturn 3;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t}\r\n\tfunction getDirectionLine(){\r\n\t\tif(!dnd._direction){\r\n\t\t\tdnd._direction = document.createElement(\"div\");\r\n\t\t\ttimeline.$task_links.appendChild(dnd._direction);\r\n\t\t}\r\n\t\treturn dnd._direction;\r\n\t}\r\n\tfunction removeDirectionLine(){\r\n\t\tif(dnd._direction){\r\n\t\t\tif (dnd._direction.parentNode)\t//the event line can be detached because of data refresh\r\n\t\t\t\tdnd._direction.parentNode.removeChild(dnd._direction);\r\n\r\n\t\t\tdnd._direction = null;\r\n\t\t}\r\n\t}\r\n};\r\n\r\nmodule.exports = {\r\n\tcreateLinkDND: function(){\r\n\t\treturn {\r\n\t\t\tinit: initLinksDND\r\n\t\t};\r\n\t}\r\n};\n\n/***/ }),\n/* 49 */\n/***/ (function(module, exports) {\n\nvar initializer = (function() {\r\n\treturn function (gantt) {\r\n\t\treturn {\r\n\r\n\t\t\tgetVerticalScrollbar: function(){\r\n\t\t\t\treturn gantt.$ui.getView(\"scrollVer\");\r\n\t\t\t},\r\n\t\t\tgetHorizontalScrollbar: function(){\r\n\t\t\t\treturn gantt.$ui.getView(\"scrollHor\");\r\n\t\t\t},\r\n\r\n\t\t\tonCreated: function (layout) {\r\n\t\t\t\tvar first = true;\r\n\t\t\t\tlayout.attachEvent(\"onBeforeResize\", function(){\r\n\t\t\t\t\tvar mainTimeline = gantt.$ui.getView(\"timeline\");\r\n\t\t\t\t\tmainTimeline.$config.hidden = mainTimeline.$parent.$config.hidden = !gantt.config.show_chart;\r\n\r\n\t\t\t\t\tvar mainGrid = gantt.$ui.getView(\"grid\");\r\n\t\t\t\t\tvar showGrid = gantt.config.show_grid;\r\n\t\t\t\t\tif(first) {\r\n\t\t\t\t\t\tvar colsWidth = mainGrid._getColsTotalWidth();\r\n\t\t\t\t\t\tif(colsWidth !== false){\r\n\t\t\t\t\t\t\tgantt.config.grid_width = colsWidth;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tshowGrid = showGrid && !!gantt.config.grid_width;\r\n\t\t\t\t\t\tgantt.config.show_grid = showGrid;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tmainGrid.$config.hidden = mainGrid.$parent.$config.hidden = !showGrid;\r\n\r\n\t\t\t\t\tif(!mainGrid.$config.hidden){\r\n\t\t\t\t\t\tmainGrid.$config.width = gantt.config.grid_width;\r\n\t\t\t\t\t\tmainGrid.$parent._setContentSize(mainGrid.$config.width, mainGrid.$config.height);\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tfirst = false;\r\n\r\n\t\t\t\t});\r\n\r\n\t\t\t\tgantt._getVerticalScrollbar = this.getVerticalScrollbar;\r\n\t\t\t\tgantt._getHorizontalScrollbar = this.getHorizontalScrollbar;\r\n\r\n\t\t\t\tvar vertical = this.getVerticalScrollbar();\r\n\t\t\t\tvar horizontal = this.getHorizontalScrollbar();\r\n\t\t\t\tif(vertical){\r\n\t\t\t\t\tvertical.attachEvent(\"onScroll\", function(oldPos, newPos, dir){\r\n\t\t\t\t\t\tvar scrollState = gantt.getScrollState();\r\n\t\t\t\t\t\tgantt.callEvent(\"onGanttScroll\", [scrollState.x, oldPos, scrollState.x, newPos]);\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t\tif(horizontal){\r\n\t\t\t\t\thorizontal.attachEvent(\"onScroll\", function(oldPos, newPos, dir){\r\n\t\t\t\t\t\tvar scrollState = gantt.getScrollState();\r\n\t\t\t\t\t\tgantt.callEvent(\"onGanttScroll\", [oldPos, scrollState.y, newPos, scrollState.y]);\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\r\n\t\t\t},\r\n\t\t\tonInitialized: function (layout) {\r\n\t\t\t\tvar grid = gantt.$ui.getView(\"grid\");\r\n\t\t\t\tif(!(grid.$parent && grid.$parent.$parent && grid.$parent.$parent._xLayout)){\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tvar parent = grid.$parent.$parent;\r\n\t\t\t\tvar siblings = parent.getCells();\r\n\t\t\t\tvar next;\r\n\t\t\t\tfor(var i = 0; i < siblings.length; i++){\r\n\t\t\t\t\tif(siblings[i] === grid.$parent){\r\n\t\t\t\t\t\tnext = siblings[i + 1];\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// expose grid resize events\r\n\t\t\t\tif(next && next.$name == \"resizer\"){\r\n\t\t\t\t\tvar initialWidth;\r\n\t\t\t\t\tnext.attachEvent(\"onResizeStart\", function(prevCellWidth, nextCellWidth){\r\n\t\t\t\t\t\tinitialWidth = prevCellWidth;\r\n\t\t\t\t\t\treturn gantt.callEvent(\"onGridResizeStart\", [prevCellWidth]);\r\n\t\t\t\t\t});\r\n\t\t\t\t\tnext.attachEvent(\"onResize\", function(newBehindSize, newFrontSize){\r\n\t\t\t\t\t\treturn gantt.callEvent(\"onGridResize\", [initialWidth, newFrontSize]);\r\n\t\t\t\t\t});\r\n\t\t\t\t\tnext.attachEvent(\"onResizeEnd\", function(oldBackSize, oldFrontSize, newBackSize, newFrontSize){\r\n\r\n\t\t\t\t\t\tvar res = gantt.callEvent(\"onGridResizeEnd\", [oldBackSize, newBackSize]);\r\n\t\t\t\t\t\tif(res){\r\n\t\t\t\t\t\t\tgantt.config.grid_width = newBackSize;\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\treturn res;\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\r\n\t\t\t},\r\n\t\t\tonDestroyed: function (timeline) {\r\n\r\n\t\t\t}\r\n\t\t};\r\n\t};\r\n})();\r\n\r\nmodule.exports = initializer;\n\n/***/ }),\n/* 50 */\n/***/ (function(module, exports) {\n\nmodule.exports = function(gantt) {\r\n\tdelete gantt.addTaskLayer;\r\n\tdelete gantt.addLinkLayer;\r\n};\n\n/***/ }),\n/* 51 */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar utils = __webpack_require__(0);\r\nvar facadeFactory = __webpack_require__(52);\r\nvar calculateScaleRange = __webpack_require__(16);\r\nfunction initDataStores(gantt){\r\n\r\n\tvar facade = facadeFactory.create();\r\n\tutils.mixin(gantt, facade);\r\n\tvar tasksStore = gantt.createDatastore({\r\n\t\tname: \"task\",\r\n\t\ttype: \"treeDatastore\",\r\n\t\tinitItem: utils.bind(_init_task, gantt)\r\n\t});\r\n\r\n\tvar linksStore = gantt.createDatastore({\r\n\t\tname: \"link\",\r\n\t\tinitItem: utils.bind(_init_link, gantt)\r\n\t});\r\n\r\n\tvar scrollState;\r\n\ttasksStore.attachEvent(\"onBeforeRefreshAll\", function(){\r\n\t\tgantt.callEvent(\"onBeforeDataRender\", []);\r\n\t\tscrollState = gantt.getScrollState();\r\n\r\n\t\tvar order = tasksStore.getVisibleItems();\r\n\r\n\t\tfor(var i=0; i < order.length; i++){\r\n\t\t\tvar item = order[i];\r\n\t\t\titem.$index = i;\r\n\t\t\tgantt.resetProjectDates(item);\r\n\t\t}\r\n\r\n\t});\r\n\r\n\ttasksStore.attachEvent(\"onAfterRefreshAll\", function(){\r\n\t\tif(scrollState.x || scrollState.y){\r\n\t\t\tgantt.scrollTo(scrollState.x, scrollState.y);\r\n\t\t}\r\n\t\tgantt.callEvent(\"onDataRender\", []);\r\n\t});\r\n\r\n\ttasksStore.attachEvent(\"onFilterItem\", function(id, task){\r\n\t\tvar min = null, max = null;\r\n\t\tif (gantt.config.start_date && gantt.config.end_date) {\r\n\t\t\tif (gantt._isAllowedUnscheduledTask(task)) return true;\r\n\t\t\tmin = gantt.config.start_date.valueOf();\r\n\t\t\tmax = gantt.config.end_date.valueOf();\r\n\r\n\t\t\tif (+task.start_date > max || +task.end_date < +min)\r\n\t\t\t\treturn false;\r\n\t\t}\r\n\t\treturn true;\r\n\t});\r\n\r\n\ttasksStore.attachEvent(\"onIdChange\", function(oldId, newId){\r\n\t\tgantt._update_flags(oldId, newId);\r\n\t});\r\n\r\n\ttasksStore.attachEvent(\"onAfterUpdate\", function(id){\r\n\t\tgantt._update_parents(id);\r\n\t});\r\n\r\n\ttasksStore.attachEvent(\"onAfterItemMove\", function(sid, parent, tindex){\r\n\t\tvar source = gantt.getTask(sid);\r\n\r\n\t\tif(this.getNext(sid)){\r\n\t\t\tsource.$drop_target = this.getNext(sid);\r\n\t\t}else{\r\n\t\t\tvar prev = this.getPrev(sid);\r\n\t\t\tif(prev){\r\n\t\t\t\tif(prev.id == this.getParent(sid)){\r\n\t\t\t\t\tsource.$drop_target = parent;\r\n\t\t\t\t}else{\r\n\t\t\t\t\tsource.$drop_target = \"next:\" + prev;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn true;\r\n\t});\r\n\r\n\ttasksStore.attachEvent(\"onStoreUpdated\", function(id, item, action){\r\n\t\tif(action == \"delete\"){\r\n\t\t\tgantt._update_flags(id, null);\r\n\t\t}\r\n\r\n\t\tif(gantt.config.fit_tasks){\r\n\t\t\tvar oldState = gantt.getState();\r\n\t\t\tcalculateScaleRange(gantt);\r\n\t\t\tvar newState = gantt.getState();\r\n\r\n\t\t\t//this._init_tasks_range();\r\n\t\t\tif (+oldState.min_date != +newState.min_date || +oldState.max_date != +newState.max_date) {\r\n\t\t\t\tgantt.render();\r\n\r\n\t\t\t\tgantt.callEvent(\"onScaleAdjusted\", []);\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tif(action == \"add\"){\r\n\t\t\tgantt.$layout.resize();\r\n\t\t}else if(!id || action == \"move\" || action == \"delete\"){\r\n\t\t\tlinksStore.refresh();\r\n\t\t}\r\n\r\n\t\t/*if(!id || action == \"move\" || action == \"delete\"){\r\n\t\t\tlinksStore.refresh();\r\n\t\t}*/\r\n\t});\r\n\r\n\tlinksStore.attachEvent(\"onAfterAdd\", function(id, link){\r\n\t\tsync_link(link);\r\n\t});\r\n\tlinksStore.attachEvent(\"onAfterUpdate\", function(id, link){\r\n\t\tsync_links();\r\n\t});\r\n\tlinksStore.attachEvent(\"onAfterDelete\", function(id, link){\r\n\t\tsync_link_delete(link);\r\n\t});\r\n\tlinksStore.attachEvent(\"onIdChange\", function(oldId, newId){\r\n\t\tsync_link_delete(gantt.mixin({id:oldId}, gantt.$data.linksStore.getItem(newId)));\r\n\t\tsync_link(gantt.$data.linksStore.getItem(newId));\r\n\t});\r\n\r\n\tlinksStore.attachEvent(\"onFilterItem\", function(id, link){\r\n\t\tif (!gantt.config.show_links) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t\tif (!(gantt.isTaskVisible(link.source) && gantt.isTaskVisible(link.target)) ||\r\n\t\t\tgantt._isAllowedUnscheduledTask(gantt.getTask(link.source)) || gantt._isAllowedUnscheduledTask(gantt.getTask(link.target)))\r\n\t\t\treturn false;\r\n\r\n\t\treturn gantt.callEvent(\"onBeforeLinkDisplay\", [id, link]);\r\n\t});\r\n\r\n\r\n\tgantt.attachEvent(\"onAfterLinkDelete\", function(id, link) {\r\n\t\tgantt.refreshTask(link.source);\r\n\t\tgantt.refreshTask(link.target);\r\n\t});\r\n\r\n\tgantt.attachEvent(\"onParse\", sync_links);\r\n\r\n\tmapEvents({\r\n\t\tsource: linksStore,\r\n\t\ttarget: gantt,\r\n\t\tevents:{\r\n\t\t\t\"onItemLoading\":\"onLinkLoading\",\r\n\t\t\t\"onBeforeAdd\":\"onBeforeLinkAdd\",\r\n\t\t\t\"onAfterAdd\":\"onAfterLinkAdd\",\r\n\t\t\t\"onBeforeUpdate\":\"onBeforeLinkUpdate\",\r\n\t\t\t\"onAfterUpdate\":\"onAfterLinkUpdate\",\r\n\t\t\t\"onBeforeDelete\":\"onBeforeLinkDelete\",\r\n\t\t\t\"onAfterDelete\":\"onAfterLinkDelete\",\r\n\t\t\t\"onIdChange\":\"onLinkIdChange\"\r\n\t\t}\r\n\t});\r\n\r\n\tmapEvents({\r\n\t\tsource: tasksStore,\r\n\t\ttarget: gantt,\r\n\t\tevents:{\r\n\t\t\t\"onItemLoading\":\"onTaskLoading\",\r\n\t\t\t\"onBeforeAdd\":\"onBeforeTaskAdd\",\r\n\t\t\t\"onAfterAdd\":\"onAfterTaskAdd\",\r\n\t\t\t\"onBeforeUpdate\":\"onBeforeTaskUpdate\",\r\n\t\t\t\"onAfterUpdate\":\"onAfterTaskUpdate\",\r\n\t\t\t\"onBeforeDelete\":\"onBeforeTaskDelete\",\r\n\t\t\t\"onAfterDelete\":\"onAfterTaskDelete\",\r\n\t\t\t\"onIdChange\":\"onTaskIdChange\",\r\n\t\t\t\"onBeforeItemMove\":\"onBeforeItemMove\",\r\n\t\t\t\"onAfterItemMove\":\"onAfterItemMove\",\r\n\t\t\t\"onFilterItem\":\"onBeforeTaskDisplay\"\r\n\t\t}\r\n\t});\r\n\r\n\tgantt.$data = {\r\n\t\ttasksStore: tasksStore,\r\n\t\tlinksStore: linksStore\r\n\t};\r\n\r\n\tfunction sync_link(link){\r\n\t\tif(gantt.isTaskExists(link.source)){\r\n\t\t\tvar sourceTask = gantt.getTask(link.source);\r\n\t\t\tsourceTask.$source = sourceTask.$source || [];\r\n\t\t\tsourceTask.$source.push(link.id);\r\n\t\t}\r\n\t\tif(gantt.isTaskExists(link.target)){\r\n\t\t\tvar targetTask = gantt.getTask(link.target);\r\n\t\t\ttargetTask.$target = targetTask.$target || [];\r\n\t\t\ttargetTask.$target.push(link.id);\r\n\t\t}\r\n\t}\r\n\r\n\tfunction sync_link_delete(link){\r\n\t\tif(gantt.isTaskExists(link.source)){\r\n\t\t\tvar sourceTask = gantt.getTask(link.source);\r\n\t\t\tfor(var i = 0; i < sourceTask.$source.length; i++){\r\n\t\t\t\tif(sourceTask.$source[i] == link.id){\r\n\t\t\t\t\tsourceTask.$source.splice(i, 1);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\tif(gantt.isTaskExists(link.target)){\r\n\t\t\tvar targetTask = gantt.getTask(link.target);\r\n\t\t\tfor(var i = 0; i < targetTask.$target.length; i++){\r\n\t\t\t\tif(targetTask.$target[i] == link.id){\r\n\t\t\t\t\ttargetTask.$target.splice(i, 1);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tfunction sync_links() {\r\n\t\tvar task = null;\r\n\t\tvar tasks = gantt.$data.tasksStore.getItems();\r\n\r\n\t\tfor(var i = 0, len = tasks.length; i < len; i++){\r\n\t\t\ttask = tasks[i];\r\n\t\t\ttask.$source = [];\r\n\t\t\ttask.$target = [];\r\n\t\t}\r\n\r\n\t\tvar links = gantt.$data.linksStore.getItems();\r\n\t\tfor (var i = 0, len = links.length; i < len; i++) {\r\n\r\n\t\t\tvar link = links[i];\r\n\t\t\tsync_link(link);\r\n\t\t}\r\n\t}\r\n\r\n\tfunction mapEvents(conf){\r\n\t\tvar mapFrom = conf.source;\r\n\t\tvar mapTo = conf.target;\r\n\t\tfor(var i in conf.events){\r\n\t\t\t(function(sourceEvent, targetEvent){\r\n\t\t\t\tmapFrom.attachEvent(sourceEvent, function(){\r\n\t\t\t\t\treturn mapTo.callEvent(targetEvent, Array.prototype.slice.call(arguments));\r\n\t\t\t\t}, targetEvent);\r\n\t\t\t})(i, conf.events[i]);\r\n\t\t}\r\n\t}\r\n\r\n\tfunction _init_task(task) {\r\n\t\tif (!this.defined(task.id))\r\n\t\t\ttask.id = this.uid();\r\n\r\n\t\tif (task.start_date)\r\n\t\t\ttask.start_date = gantt.date.parseDate(task.start_date, \"xml_date\");\r\n\t\tif (task.end_date)\r\n\t\t\ttask.end_date = gantt.date.parseDate(task.end_date, \"xml_date\");\r\n\r\n\r\n\t\tvar duration = null;\r\n\t\tif (task.duration || task.duration === 0) {\r\n\t\t\ttask.duration = duration = task.duration * 1;\r\n\t\t}\r\n\r\n\t\tif (duration) {\r\n\t\t\tif (task.start_date && !task.end_date) {\r\n\t\t\t\ttask.end_date = this.calculateEndDate(task);\r\n\t\t\t} else if (!task.start_date && task.end_date) {\r\n\t\t\t\ttask.start_date = this.calculateEndDate({\r\n\t\t\t\t\tstart_date: task.end_date,\r\n\t\t\t\t\tduration: -task.duration,\r\n\t\t\t\t\ttask: task\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t}\r\n\r\n\r\n\t\tif (this._isAllowedUnscheduledTask(task)) {\r\n\t\t\tthis._set_default_task_timing(task);\r\n\t\t}\r\n\t\tthis._init_task_timing(task);\r\n\t\tif (task.start_date && task.end_date)\r\n\t\t\tthis.correctTaskWorkTime(task);\r\n\r\n\t\ttask.$source = [];\r\n\t\ttask.$target = [];\r\n\t\tif (task.parent === undefined) {\r\n\t\t\tthis.setParent(task, this.config.root_id);\r\n\t\t}\r\n\r\n\t\tif (!this.defined(task.$open)) {\r\n\t\t\ttask.$open = this.defined(task.open) ? task.open : this.config.open_tree_initially;\r\n\t\t}\r\n\t\ttask.$level = this.calculateTaskLevel(task);\r\n\t\treturn task;\r\n\t}\r\n\r\n\tfunction _init_link(link) {\r\n\t\tif (!this.defined(link.id))\r\n\t\t\tlink.id = this.uid();\r\n\t\treturn link;\r\n\t}\r\n}\r\n\r\n\r\nmodule.exports = initDataStores;\r\n\n\n/***/ }),\n/* 52 */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar utils = __webpack_require__(0);\r\nvar createTasksFacade = __webpack_require__(53),\r\n\tcreateLinksFacade = __webpack_require__(54),\r\n\tDataStore = __webpack_require__(14),\r\n\tTreeDataStore = __webpack_require__(55);\r\nvar datastoreRender = __webpack_require__(56);\r\n\r\nfunction getDatastores(){\r\n\tvar storeNames = this.$services.getService(\"datastores\");\r\n\tvar res = [];\r\n\tfor(var i = 0; i < storeNames.length; i++){\r\n\t\tres.push(this.getDatastore(storeNames[i]));\r\n\t}\r\n\treturn res;\r\n}\r\n\r\nvar createDatastoreFacade = function(){\r\n\treturn {\r\n\tcreateDatastore: function(config){\r\n\r\n\t\tvar $StoreType = (config.type || \"\").toLowerCase() == \"treedatastore\" ? TreeDataStore : DataStore;\r\n\r\n\t\tvar store = new $StoreType({\r\n\t\t\tinitItem: config.initItem\r\n\t\t});\r\n\r\n\t\tif(config.name){\r\n\r\n\t\t\tthis.$services.setService(\"datastore:\" + config.name, function(){return store;});\r\n\t\t\tvar storeList = this.$services.getService(\"datastores\");\r\n\t\t\tif(!storeList){\r\n\t\t\t\tstoreList = [];\r\n\t\t\t\tthis.$services.setService(\"datastores\", function(){return storeList;});\r\n\t\t\t}\r\n\t\t\tstoreList.push(config.name);\r\n\r\n\t\t\tdatastoreRender.bindDataStore(config.name, this);\r\n\t\t}\r\n\r\n\t\treturn store;\r\n\t},\r\n\tgetDatastore: function(name){\r\n\t\treturn this.$services.getService(\"datastore:\" + name);\r\n\t},\r\n\r\n\trefreshData: function () {\r\n\t\tvar stores = getDatastores.call(this);\r\n\t\tfor(var i = 0; i < stores.length; i++){\r\n\t\t\tstores[i].refresh();\r\n\t\t}\r\n\t},\r\n\r\n\tisChildOf: function(childId, parentId){\r\n\t\treturn this.$data.tasksStore.isChildOf(childId, parentId);\r\n\t},\r\n\r\n\trefreshTask: function (taskId, refresh_links) {\r\n\t\tvar task = this.getTask(taskId);\r\n\t\tif (task && this.isTaskVisible(taskId)) {\r\n\t\t\tthis.$data.tasksStore.refresh(taskId);\r\n\r\n\t\t\tif (refresh_links !== undefined && !refresh_links)\r\n\t\t\t\treturn;\r\n\t\t\tfor (var i = 0; i < task.$source.length; i++) {\r\n\t\t\t\tthis.refreshLink(task.$source[i]);\r\n\t\t\t}\r\n\t\t\tfor (var i = 0; i < task.$target.length; i++) {\r\n\t\t\t\tthis.refreshLink(task.$target[i]);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t},\r\n\trefreshLink: function (linkId) {\r\n\t\tthis.$data.linksStore.refresh(linkId);\r\n\t},\r\n\r\n\tsilent: function(code){\r\n\t\tvar gantt = this;\r\n\t\tgantt.$data.tasksStore.silent(function(){\r\n\t\t\tgantt.$data.linksStore.silent(function(){\r\n\t\t\t\tcode();\r\n\t\t\t});\r\n\t\t});\r\n\t},\r\n\tsort: function (field, desc, parent, silent) {\r\n\t\tvar render = !silent;//4th argument to cancel redraw after sorting\r\n\r\n\t\tif (!this.isTaskExists(parent)) {\r\n\t\t\tparent = this.config.root_id;\r\n\t\t}\r\n\r\n\t\tif (!field) field = \"order\";\r\n\t\tvar criteria = (typeof(field) == \"string\") ? (function (a, b) {\r\n\t\t\tif (a[field] == b[field]) {\r\n\t\t\t\treturn 0;\r\n\t\t\t}\r\n\r\n\t\t\tvar result = a[field] > b[field];\r\n\t\t\treturn result ? 1 : -1;\r\n\t\t}) : field;\r\n\r\n\t\tif (desc) {\r\n\t\t\tvar original_criteria = criteria;\r\n\t\t\tcriteria = function (a, b) {\r\n\t\t\t\treturn original_criteria(b, a);\r\n\t\t\t};\r\n\t\t}\r\n\r\n\t\tvar els = this.getChildren(parent);\r\n\t\tif (els) {\r\n\t\t\tvar temp = [];\r\n\t\t\tfor (var i = els.length - 1; i >= 0; i--)\r\n\t\t\t\ttemp[i] = this.$data.tasksStore.getItem(els[i]);\r\n\r\n\t\t\ttemp.sort(criteria);\r\n\r\n\t\t\tfor (var i = 0; i < temp.length; i++) {\r\n\t\t\t\tels[i] = temp[i].id;\r\n\t\t\t\tthis.sort(field, desc, els[i], true);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif (render) {\r\n\t\t\tthis.render();\r\n\t\t}\r\n\t},\r\n\tclearAll: function () {\r\n\t\tvar stores = getDatastores.call(this);\r\n\t\tfor(var i = 0; i < stores.length; i++){\r\n\t\t\tstores[i].clearAll();\r\n\t\t}\r\n\r\n\t\tthis._update_flags();\r\n\t\tthis.userdata = {};\r\n\t\tthis.callEvent(\"onClear\", []);\r\n\t\tthis.refreshData();\r\n\t},\r\n\t_clear_data: function () {\r\n\t\tthis.$data.tasksStore.clearAll();\r\n\t\tthis.$data.linksStore.clearAll();\r\n\t\tthis._update_flags();\r\n\t\tthis.userdata = {};\r\n\t},\r\n\r\n\t_has_children: function (id) {\r\n\t\treturn this.getChildren(id).length > 0;\r\n\t}\r\n};\r\n};\r\n\r\nfunction createFacade(){\r\n\tvar res = utils.mixin({}, createDatastoreFacade());\r\n\tutils.mixin(res, createTasksFacade());\r\n\tutils.mixin(res, createLinksFacade());\r\n\treturn res;\r\n}\r\n\r\n\r\n\r\n\r\nmodule.exports = {create: createFacade};\n\n/***/ }),\n/* 53 */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar utils = __webpack_require__(0);\r\n\r\nvar createTasksDatastoreFacade = function(){\r\n\treturn {\r\n\tgetTask: function (id) {\r\n\t\tthis.assert(id, \"Invalid argument for gantt.getTask\");\r\n\t\tvar task = this.$data.tasksStore.getItem(id);\r\n\t\tthis.assert(task, \"Task not found id=\" + id);\r\n\t\treturn task;\r\n\t},\r\n\tgetTaskByTime: function (from, to) {\r\n\t\tvar p = this.$data.tasksStore.getItems();\r\n\r\n\t\tvar res = [];\r\n\r\n\t\tif (!(from || to)) {\r\n\t\t\tres = p;\r\n\t\t} else {\r\n\t\t\tfrom = +from || -Infinity;\r\n\t\t\tto = +to || Infinity;\r\n\t\t\tfor (var t = 0; t < p.length; t++){\r\n\t\t\t\tvar task = p[t];\r\n\t\t\t\tif (+task.start_date < to && +task.end_date > from)\r\n\t\t\t\t\tres.push(task);\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn res;\r\n\t},\r\n\tisTaskExists: function (id) {\r\n\t\treturn this.$data.tasksStore.exists(id);\r\n\t},\r\n\tupdateTask: function (id, item) {\r\n\t\tif (!utils.defined(item)) item = this.getTask(id);\r\n\t\tthis.$data.tasksStore.updateItem(id, item);\r\n\t\tthis.refreshTask(id);\r\n\t},\r\n\taddTask: function (item, parent, index) {\r\n\t\tif (!utils.defined(item.id))\r\n\t\t\titem.id = utils.uid();\r\n\r\n\t\tif (!utils.defined(parent)) parent = this.getParent(item) || 0;\r\n\t\tif (!this.isTaskExists(parent)) parent = 0;\r\n\t\tthis.setParent(item, parent);\r\n\r\n\t\treturn this.$data.tasksStore.addItem(item, index, parent);\r\n\t},\r\n\tdeleteTask: function (id) {\r\n\t\treturn this.$data.tasksStore.removeItem(id);\r\n\t},\r\n\tgetTaskCount: function () {\r\n\t\treturn this.$data.tasksStore.count();\r\n\t},\r\n\tgetVisibleTaskCount: function () {\r\n\t\treturn this.$data.tasksStore.countVisible();\r\n\t},\r\n\tgetTaskIndex: function (id) {\r\n\t\treturn this.$data.tasksStore.getBranchIndex(id);\r\n\t},\r\n\tgetGlobalTaskIndex: function (id) {\r\n\t\tthis.assert(id, \"Invalid argument\");\r\n\t\treturn this.$data.tasksStore.getIndexById(id);\r\n\t},\r\n\teachTask: function (code, parent, master) {\r\n\t\treturn this.$data.tasksStore.eachItem(utils.bind(code, master||this), parent);\r\n\t},\r\n\teachParent: function (callback, startTask, master) {\r\n\t\treturn this.$data.tasksStore.eachParent(utils.bind(callback, master || this), startTask);\r\n\t},\r\n\tchangeTaskId: function (oldid, newid) {\r\n\t\tthis.$data.tasksStore.changeId(oldid, newid);\r\n\t\tvar task = this.$data.tasksStore.getItem(newid);\r\n\r\n\t\tvar links = [];\r\n\r\n\t\tif (task.$source) {\r\n\t\t\tlinks = links.concat(task.$source);\r\n\t\t}\r\n\t\tif (task.$target) {\r\n\t\t\tlinks = links.concat(task.$target);\r\n\t\t}\r\n\r\n\t\tfor (var i = 0; i < links.length; i++) {\r\n\t\t\tvar link = this.getLink(links[i]);\r\n\t\t\tif (link.source == oldid) {\r\n\t\t\t\tlink.source = newid;\r\n\t\t\t}\r\n\t\t\tif (link.target == oldid) {\r\n\t\t\t\tlink.target = newid;\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\tcalculateTaskLevel: function (item) {\r\n\t\treturn this.$data.tasksStore.calculateItemLevel(item);\r\n\t},\r\n\tgetNext: function (id) {\r\n\t\treturn this.$data.tasksStore.getNext(id);\r\n\t},\r\n\tgetPrev: function (id) {\r\n\t\treturn this.$data.tasksStore.getPrev(id);\r\n\t},\r\n\tgetParent: function (id) {\r\n\t\treturn this.$data.tasksStore.getParent(id);\r\n\t},\r\n\tsetParent: function (task, new_pid) {\r\n\t\treturn this.$data.tasksStore.setParent(task, new_pid);\r\n\t},\r\n\tgetSiblings: function (id) {\r\n\t\treturn this.$data.tasksStore.getChildren(id);\r\n\t},\r\n\tgetNextSibling: function (id) {\r\n\t\treturn this.$data.tasksStore.getNextSibling(id);\r\n\t},\r\n\tgetPrevSibling: function (id) {\r\n\t\treturn this.$data.tasksStore.getPrevSibling(id);\r\n\t},\r\n\tgetTaskByIndex: function(index){\r\n\t\tvar id = this.$data.tasksStore.getIdByIndex(index);\r\n\t\tif(this.isTaskExists(id)){\r\n\t\t\treturn this.getTask(id);\r\n\t\t}else{\r\n\t\t\treturn null;\r\n\t\t}\r\n\t},\r\n\tgetChildren: function (id) {\r\n\t\treturn this.$data.tasksStore.getChildren(id);\r\n\t},\r\n\thasChild: function (id) {\r\n\t\treturn this.$data.tasksStore.hasChild(id);\r\n\t},\r\n\topen: function (id) {\r\n\t\tgantt._set_item_state(id, true);\r\n\t\tthis.callEvent(\"onTaskOpened\", [id]);\r\n\t},\r\n\tclose: function (id) {\r\n\t\tgantt._set_item_state(id, false);\r\n\t\tthis.callEvent(\"onTaskClosed\", [id]);\r\n\t},\r\n\t_set_item_state:function (id, state) {\r\n\t\tif(this.isTaskExists(id)){\r\n\t\t\tthis.getTask(id).$open = !!state;\r\n\t\t\tgantt._refresh_on_toggle_element(id);\r\n\t\t}\r\n\t},\r\n\t_refresh_on_toggle_element: function (id) {\r\n\t\tthis.render();\r\n\t},\r\n\tmoveTask: function (sid, tindex, parent) {\r\n\t\tthis.$data.tasksStore.move.apply(this.$data.tasksStore, arguments);\r\n\t}\r\n};\r\n};\r\n\r\nmodule.exports = createTasksDatastoreFacade;\r\n\r\n\r\n\n\n/***/ }),\n/* 54 */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar utils = __webpack_require__(0);\r\n\r\n\r\nvar createLinksStoreFacade = function(){\r\n\treturn {\r\n\tgetLinkCount: function () {\r\n\t\treturn this.$data.linksStore.count();\r\n\t},\r\n\r\n\tgetLink : function (id) {\r\n\t\treturn this.$data.linksStore.getItem(id);\r\n\t},\r\n\r\n\tgetLinks : function () {\r\n\t\treturn this.$data.linksStore.getIndexRange();\r\n\t},\r\n\r\n\tisLinkExists : function (id) {\r\n\t\treturn this.$data.linksStore.exists(id);\r\n\t},\r\n\r\n\taddLink : function (link) {\r\n\t\treturn this.$data.linksStore.addItem(link);\r\n\t},\r\n\r\n\tupdateLink : function (id, data) {\r\n\t\tif (!utils.defined(data))\r\n\t\t\tdata = this.getLink(id);\r\n\t\tthis.$data.linksStore.updateItem(id, data);\r\n\t},\r\n\r\n\tdeleteLink : function (id) {\r\n\t\treturn this.$data.linksStore.removeItem(id);\r\n\t},\r\n\r\n\tchangeLinkId : function (oldid, newid) {\r\n\t\treturn this.$data.linksStore.changeId(oldid, newid);\r\n\t}\r\n};\r\n};\r\n\r\nmodule.exports = createLinksStoreFacade;\n\n/***/ }),\n/* 55 */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar powerArray = __webpack_require__(15);\r\nvar utils = __webpack_require__(0);\r\nvar eventable = __webpack_require__(2);\r\nvar DataStore = __webpack_require__(14);\r\n\r\nvar TreeDataStore = function(config){\r\n\tthis._branches = {};\r\n\r\n\tthis.pull = {};\r\n\tthis.$initItem = config.initItem;\r\n\tthis.$parentProperty = config.parentProperty || \"parent\";\r\n\tthis.$rootId = config.rootId || 0;\r\n\r\n\tthis.visibleOrder = powerArray.$create();\r\n\tthis.fullOrder = powerArray.$create();\r\n\tthis._searchVisibleOrder = {};\r\n\tthis._skip_refresh = false;\r\n\tthis._filterRule = null;\r\n\teventable(this);\r\n\r\n\tthis.attachEvent(\"onFilterItem\", function(id, item){\r\n\t\tvar open = true;\r\n\t\tthis.eachParent(function(parent){\r\n\t\t\topen = open && parent.$open;\r\n\t\t}, item);\r\n\t\treturn !!open;\r\n\t});\r\n\r\n\treturn this;\r\n};\r\n\r\nTreeDataStore.prototype = utils.mixin({\r\n\r\n\t\t_buildTree: function(data){\r\n\t\t\tvar item = null;\r\n\t\t\tfor (var i = 0, len = data.length; i < len; i++){\r\n\t\t\t\titem = data[i];\r\n\t\t\t\tthis.setParent(item, this.getParent(item) || this.$rootId);\r\n\t\t\t}\r\n\r\n\t\t\t// calculating $level for each item\r\n\t\t\tfor (var i = 0, len = data.length; i < len; i++){\r\n\t\t\t\titem = data[i];\r\n\t\t\t\tthis._add_branch(item);\r\n\t\t\t\titem.$level = this.calculateItemLevel(item);\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\tparse: function(data){\r\n\t\t\tthis.callEvent(\"onBeforeParse\", [data]);\r\n\t\t\tvar loaded = this._parseInner(data);\r\n\t\t\tthis._buildTree(loaded);\r\n\t\t\tthis.filter();\r\n\t\t\tthis.callEvent(\"onParse\", [loaded]);\r\n\t\t},\r\n\r\n\t\t_addItemInner: function(item, index, order){\r\n\r\n\t\t\tvar parent = this.getParent(item);\r\n\r\n\t\t\tif(!utils.defined(parent)){\r\n\t\t\t\tparent = this.$rootId;\r\n\t\t\t\tthis.setParent(item, parent);\r\n\t\t\t}\r\n\r\n\t\t\tvar parentIndex = this.getIndexById(parent);\r\n\t\t\tvar targetIndex = parentIndex + Math.min(Math.max(index, 0), this.visibleOrder.length);\r\n\r\n\t\t\tDataStore.prototype._addItemInner.call(this, item, targetIndex);\r\n\t\t\tthis.setParent(item, parent);\r\n\r\n\t\t\tthis._add_branch(item, index);\r\n\t\t},\r\n\t\t_changeIdInner: function(oldId, newId){\r\n\r\n\t\t\tvar children = this.getChildren(newId);\r\n\t\t\tDataStore.prototype._changeIdInner.call(this, oldId, newId);\r\n\r\n\t\t\tvar parent = this.getParent(newId);\r\n\r\n\t\t\tthis._replace_branch_child(parent, oldId, newId);\r\n\t\t\tfor(var i = 0; i < children.length; i++){\r\n\t\t\t\tthis.setParent(this.getItem[children[i]], newId);\r\n\t\t\t}\r\n\t\t},\r\n\t\t_removeItemInner: function(id){\r\n\r\n\t\t\tvar items = [];\r\n\t\t\tthis.eachItem(function(child){\r\n\t\t\t\titems.push(child);\r\n\t\t\t}, id);\r\n\r\n\t\t\titems.push(this.getItem(id));\r\n\r\n\t\t\tfor(var i = 0; i < items.length; i++){\r\n\r\n\t\t\t\tthis._move_branch(items[i], this.getParent(items[i]), null);\r\n\t\t\t\tDataStore.prototype._removeItemInner.call(this, items[i].id);\r\n\t\t\t\tthis._move_branch(items[i], this.getParent(items[i].id), null);\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\tmove: function(sid, tindex, parent){\r\n\t\t\t//target id as 4th parameter\r\n\t\t\tvar id = arguments[3];\r\n\t\t\tif (id) {\r\n\t\t\t\tif (id === sid) return;\r\n\r\n\t\t\t\tparent = this.getParent(id);\r\n\t\t\t\ttindex = this.getBranchIndex(id);\r\n\t\t\t}\r\n\t\t\tif(sid == parent){\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tparent = parent || this.$rootId;\r\n\t\t\tvar source = this.getItem(sid);\r\n\t\t\tvar source_pid = this.getParent(source.id);\r\n\t\t\tvar sbranch = this.getChildren(this.getParent(source.id));\r\n\r\n\t\t\tvar tbranch = this.getChildren(parent);\r\n\t\t\tif (tindex == -1)\r\n\t\t\t\ttindex = tbranch.length + 1;\r\n\t\t\tif (source_pid == parent) {\r\n\t\t\t\tvar sindex = this.getBranchIndex(sid);\r\n\t\t\t\tif (sindex == tindex) return;\r\n\t\t\t}\r\n\r\n\t\t\tif(this.callEvent(\"onBeforeItemMove\", [sid, parent, tindex]) === false)\r\n\t\t\t\treturn;\r\n\r\n\t\t\tthis._replace_branch_child(source_pid, sid);\r\n\t\t\ttbranch = this.getChildren(parent);\r\n\r\n\t\t\tvar tid = tbranch[tindex];\r\n\t\t\tif (!tid) //adding as last element\r\n\t\t\t\ttbranch.push(sid);\r\n\t\t\telse\r\n\t\t\t\ttbranch = tbranch.slice(0, tindex).concat([ sid ]).concat(tbranch.slice(tindex));\r\n\r\n\t\t\tthis.setParent(source, parent);\r\n\t\t\tthis._branches[parent] = tbranch;\r\n\r\n\t\t\tvar diff = this.calculateItemLevel(source) - source.$level;\r\n\t\t\tsource.$level += diff;\r\n\t\t\tthis.eachItem(function(item){\r\n\t\t\t\titem.$level += diff;\r\n\t\t\t}, source.id, this);\r\n\r\n\r\n\t\t\tthis._moveInner(this.getIndexById(sid), this.getIndexById(parent) + tindex);\r\n\r\n\t\t\tif(!this.callEvent(\"onAfterItemMove\", [sid, parent, tindex]))\r\n\t\t\t\treturn;\r\n\t\t\tthis.refresh();\r\n\t\t},\r\n\r\n\t\tgetBranchIndex: function(id){\r\n\t\t\tvar branch = this.getChildren(this.getParent(id));\r\n\t\t\tfor (var i = 0; i < branch.length; i++)\r\n\t\t\t\tif (branch[i] == id)\r\n\t\t\t\t\treturn i;\r\n\r\n\t\t\treturn -1;\r\n\t\t},\r\n\t\thasChild: function(id){\r\n\t\t\treturn (utils.defined(this._branches[id]) && this._branches[id].length);\r\n\t\t},\r\n\t\tgetChildren: function(id){\r\n\t\t\treturn utils.defined(this._branches[id]) ? this._branches[id] : powerArray.$create();\r\n\t\t},\r\n\r\n\t\tisChildOf: function(childId, parentId){\r\n\t\t\tif (!this.exists(childId))\r\n\t\t\t\treturn false;\r\n\t\t\tif (parentId === this.$rootId)\r\n\t\t\t\treturn true;\r\n\r\n\t\t\tvar item = this.getItem(childId);\r\n\t\t\tvar pid = this.getParent(childId);\r\n\r\n\t\t\twhile (item && this.exists(pid)) {\r\n\t\t\t\titem = this.getItem(pid);\r\n\r\n\t\t\t\tif (item && item.id == parentId)\r\n\t\t\t\t\treturn true;\r\n\t\t\t\tpid = this.getParent(item);\r\n\t\t\t}\r\n\t\t\treturn false;\r\n\t\t},\r\n\r\n\t\tgetSiblings: function(id){\r\n\t\t\tif(!this.exists(id)){\r\n\t\t\t\treturn powerArray.$create();\r\n\t\t\t}\r\n\t\t\tvar parent = this.getParent(id);\r\n\t\t\treturn this.getChildren(parent);\r\n\r\n\t\t},\r\n\t\tgetNextSibling: function(id){\r\n\t\t\tvar siblings = this.getSiblings(id);\r\n\t\t\tfor(var i= 0, len = siblings.length; i < len; i++){\r\n\t\t\t\tif(siblings[i] == id)\r\n\t\t\t\t\treturn siblings[i+1] || null;\r\n\t\t\t}\r\n\t\t\treturn null;\r\n\t\t},\r\n\t\tgetPrevSibling: function(id){\r\n\t\t\tvar siblings = this.getSiblings(id);\r\n\t\t\tfor(var i= 0, len = siblings.length; i < len; i++){\r\n\t\t\t\tif(siblings[i] == id)\r\n\t\t\t\t\treturn siblings[i-1] || null;\r\n\t\t\t}\r\n\t\t\treturn null;\r\n\t\t},\r\n\t\tgetParent: function(id){\r\n\t\t\tvar item = null;\r\n\t\t\tif(id.id !== undefined){\r\n\t\t\t\titem = id;\r\n\t\t\t}else{\r\n\t\t\t\titem = this.getItem(id);\r\n\t\t\t}\r\n\r\n\t\t\tvar parent = this.$rootId;\r\n\t\t\tif(item){\r\n\t\t\t\tparent = item[this.$parentProperty];\r\n\t\t\t}\r\n\t\t\treturn parent;\r\n\r\n\t\t},\r\n\r\n\t\tclearAll: function(){\r\n\t\t\tthis._branches = {};\r\n\t\t\tDataStore.prototype.clearAll.call(this);\r\n\t\t},\r\n\r\n\t\tcalculateItemLevel: function(item){\r\n\t\t\tvar level = 0;\r\n\t\t\tthis.eachParent(function(){\r\n\t\t\t\tlevel++;\r\n\t\t\t}, item);\r\n\t\t\treturn level;\r\n\t\t},\r\n\t\tsetParent: function(item, new_pid){\r\n\t\t\titem[this.$parentProperty] = new_pid;\r\n\t\t},\r\n\t\teachItem: function(code, parent){\r\n\t\t\tparent = parent || this.$rootId;\r\n\r\n\r\n\t\t\tvar branch = this.getChildren(parent);\r\n\t\t\tif (branch)\r\n\t\t\t\tfor (var i=0; i<branch.length; i++){\r\n\t\t\t\t\tvar item = this.pull[branch[i]];\r\n\t\t\t\t\tcode.call(this, item);\r\n\t\t\t\t\tif (this.hasChild(item.id))\r\n\t\t\t\t\t\tthis.eachItem(code, item.id);\r\n\t\t\t\t}\r\n\t\t},\r\n\t\teachParent: function(code, startItem){\r\n\t\t\tvar item = startItem;\r\n\t\t\twhile (this.getParent(item)) {\r\n\t\t\t\tif (!this.exists(this.getParent(item))) break;\r\n\t\t\t\titem = this.getItem(this.getParent(item));\r\n\t\t\t\tcode.call(this, item);\r\n\t\t\t}\r\n\t\t},\r\n\t\t_add_branch: function(item, index){\r\n\t\t\tvar pid = this.getParent(item);\r\n\t\t\tif (!this.hasChild(pid))\r\n\t\t\t\tthis._branches[pid] = powerArray.$create();\r\n\t\t\tvar branch = this.getChildren(pid);\r\n\t\t\tvar added_already = false;\r\n\t\t\tfor(var i = 0, length = branch.length; i < length; i++){\r\n\t\t\t\tif(branch[i] == item.id){\r\n\t\t\t\t\tadded_already = true;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif(!added_already){\r\n\t\t\t\tif(index*1 == index){\r\n\r\n\t\t\t\t\tbranch.splice(index, 0, item.id);\r\n\t\t\t\t}else{\r\n\t\t\t\t\tbranch.push(item.id);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\t_move_branch: function(item, old_parent, new_parent){\r\n\t\t\tthis.setParent(item, new_parent);\r\n\t\t\t//this._sync_parent(task);\r\n\t\t\tthis._replace_branch_child(old_parent, item.id);\r\n\t\t\tif(this.exists(new_parent) || new_parent == this.$rootId){\r\n\r\n\t\t\t\tthis._add_branch(item);\r\n\t\t\t}else{\r\n\t\t\t\tdelete this._branches[item.id];\r\n\t\t\t}\r\n\t\t\titem.$level =  this.calculateItemLevel(item);\r\n\t\t\tthis.eachItem(function(child){\r\n\t\t\t\tchild.$level = this.calculateItemLevel(child);\r\n\t\t\t}, item.id);\r\n\t\t},\r\n\r\n\t\t_replace_branch_child: function(node, old_id, new_id){\r\n\t\t\tvar branch = this.getChildren(node);\r\n\t\t\tif (branch){\r\n\t\t\t\tvar newbranch = powerArray.$create();\r\n\t\t\t\tfor (var i=0; i<branch.length; i++){\r\n\t\t\t\t\tif (branch[i] != old_id)\r\n\t\t\t\t\t\tnewbranch.push(branch[i]);\r\n\t\t\t\t\telse if (new_id)\r\n\t\t\t\t\t\tnewbranch.push(new_id);\r\n\t\t\t\t}\r\n\t\t\t\tthis._branches[node] = newbranch;\r\n\t\t\t}\r\n\r\n\t\t}\r\n\t},\r\n\tDataStore.prototype\r\n);\r\n\r\nmodule.exports = TreeDataStore;\n\n/***/ }),\n/* 56 */\n/***/ (function(module, exports) {\n\nvar storeRenderCreator = function(name, gantt){\r\n\tvar store = gantt.getDatastore(name);\r\n\r\n\tvar itemRepainter = {\r\n\t\trenderItem: function(id, renderer){\r\n\r\n\t\t\tvar renders = renderer.getLayers();\r\n\r\n\t\t\tvar item = store.getItem(id);\r\n\t\t\tif(item && store.isVisible(id)) {\r\n\t\t\t\tfor (var i = 0; i < renders.length; i++)\r\n\t\t\t\t\trenders[i].render_item(item);\r\n\t\t\t}\r\n\t\t},\r\n\t\trenderItems: function(renderer){\r\n\t\t\tvar renderers = renderer.getLayers();\r\n\t\t\tfor (var i = 0; i < renderers.length; i++) {\r\n\t\t\t\trenderers[i].clear();\r\n\t\t\t}\r\n\r\n\t\t\tvar data = store.getVisibleItems();\r\n\r\n\t\t\tfor (var i = 0; i < renderers.length; i++) {\r\n\t\t\t\trenderers[i].render_items(data);\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\r\n\tstore.attachEvent(\"onStoreUpdated\", function(id, item, action){\r\n\t\tvar renderer = gantt.$services.getService(\"layers\").getDataRender(name);\r\n\r\n\t\tif(renderer){\r\n\t\t\tif(!id || action == \"move\" || action == \"delete\"){\r\n\t\t\t\tstore.callEvent(\"onBeforeRefreshAll\", []);\r\n\t\t\t\titemRepainter.renderItems(renderer);\r\n\t\t\t\tstore.callEvent(\"onAfterRefreshAll\", []);\r\n\t\t\t}else{\r\n\t\t\t\tstore.callEvent(\"onBeforeRefreshItem\", [id]);\r\n\t\t\t\titemRepainter.renderItem(id, renderer);\r\n\t\t\t\tstore.callEvent(\"onAfterRefreshItem\", [id]);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t});\r\n};\r\n\r\nmodule.exports = {\r\n\tbindDataStore: storeRenderCreator\r\n};\n\n/***/ }),\n/* 57 */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar liveUpdateHooks = __webpack_require__(58);\r\n\r\nfunction addDataProcessorHooks(gantt) {\r\n\r\n\tgantt.dataProcessor = __webpack_require__(59);\r\n\r\n\tgantt._dp_init = function(dp) {\r\n\t\tdp.setTransactionMode(\"POST\", true);\r\n\t\tdp.serverProcessor += (dp.serverProcessor.indexOf(\"?\") != -1 ? \"&\" : \"?\") + \"editing=true\";\r\n\t\tdp._serverProcessor = dp.serverProcessor;\r\n\t\tdp.$gantt = this;\r\n\t\tdp.styles = {\r\n\t\t\tupdated:\"gantt_updated\",\r\n\t\t\torder:\"gantt_updated\",\r\n\t\t\tinserted:\"gantt_inserted\",\r\n\t\t\tdeleted:\"gantt_deleted\",\r\n\t\t\tinvalid:\"gantt_invalid\",\r\n\t\t\terror:\"gantt_error\",\r\n\t\t\tclear:\"\"\r\n\t\t};\r\n\r\n\t\tdp._methods=[\"_row_style\",\"setCellTextStyle\",\"_change_id\",\"_delete_task\"];\r\n\r\n\t\tdp.setGanttMode = function(mode){\r\n\t\t\tvar modes = dp.modes || {};\r\n\t\t\tif(dp._ganttMode){\r\n\t\t\t\tmodes[dp._ganttMode] = {\r\n\t\t\t\t\t_in_progress : dp._in_progress,\r\n\t\t\t\t\t_invalid : dp._invalid,\r\n\t\t\t\t\tupdatedRows : dp.updatedRows\r\n\t\t\t\t};\r\n\t\t\t}\r\n\r\n\t\t\tvar newState = modes[mode];\r\n\t\t\tif(!newState){\r\n\t\t\t\tnewState = modes[mode] = {\r\n\t\t\t\t\t_in_progress : {},\r\n\t\t\t\t\t_invalid : {},\r\n\t\t\t\t\tupdatedRows : []\r\n\t\t\t\t};\r\n\t\t\t}\r\n\t\t\tdp._in_progress = newState._in_progress;\r\n\t\t\tdp._invalid = newState._invalid;\r\n\t\t\tdp.updatedRows = newState.updatedRows;\r\n\t\t\tdp.modes = modes;\r\n\t\t\tdp._ganttMode = mode;\r\n\t\t};\r\n\r\n\t\tthis._sendTaskOrder = function(id, item){\r\n\t\t\tif(item.$drop_target){\r\n\t\t\t\tdp.setGanttMode(\"tasks\");\r\n\t\t\t\tthis.getTask(id).target = item.$drop_target;\r\n\t\t\t\tdp.setUpdated(id, true,\"order\");\r\n\t\t\t\tdelete this.getTask(id).$drop_target;\r\n\t\t\t}\r\n\t\t};\r\n\t\tthis.attachEvent(\"onAfterTaskAdd\", function(id, item) {\r\n\t\t\tdp.setGanttMode(\"tasks\");\r\n\t\t\tdp.setUpdated(id,true,\"inserted\");\r\n\t\t});\r\n\t\tthis.attachEvent(\"onAfterTaskUpdate\", function(id, item) {\r\n\t\t\tdp.setGanttMode(\"tasks\");\r\n\t\t\tdp.setUpdated(id,true);\r\n\r\n\t\t\tgantt._sendTaskOrder(id, item);\r\n\t\t});\r\n\r\n\t\tfunction clientSideDelete(id){\r\n\t\t\tvar updated = dp.updatedRows.slice();\r\n\t\t\tvar clientOnly = false;\r\n\r\n\t\t\tfor(var i = 0; i < updated.length && !dp._in_progress[id]; i++){\r\n\t\t\t\tif(updated[i] == id ){\r\n\t\t\t\t\tif(gantt.getUserData(id, \"!nativeeditor_status\") == \"inserted\"){\r\n\t\t\t\t\t\tclientOnly = true;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tdp.setUpdated(id,false);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn clientOnly;\r\n\t\t}\r\n\r\n\t\tthis.attachEvent(\"onAfterTaskDelete\", function(id, item) {\r\n\t\t\tdp.setGanttMode(\"tasks\");\r\n\r\n\t\t\t// not send delete request if item is not inserted into the db - just remove it from the client\r\n\t\t\tvar needDbDelete = !clientSideDelete(id);\r\n\t\t\tif(!needDbDelete)\r\n\t\t\t\treturn;\r\n\r\n\t\t\tdp.setUpdated(id,true,\"deleted\");\r\n\r\n\t\t\tif(dp.updateMode != 'off' && !dp._tSend){\r\n\t\t\t\tdp.sendAllData();\r\n\t\t\t}\r\n\r\n\t\t});\r\n\r\n\t\tthis.attachEvent(\"onAfterLinkUpdate\", function(id, item) {\r\n\t\t\tdp.setGanttMode(\"links\");\r\n\t\t\tdp.setUpdated(id, true);\r\n\t\t});\r\n\t\tthis.attachEvent(\"onAfterLinkAdd\", function(id, item) {\r\n\t\t\tdp.setGanttMode(\"links\");\r\n\t\t\tdp.setUpdated(id, true,\"inserted\");\r\n\t\t});\r\n\t\tthis.attachEvent(\"onAfterLinkDelete\", function(id, item) {\r\n\t\t\tdp.setGanttMode(\"links\");\r\n\r\n\t\t\tvar needDbDelete = !clientSideDelete(id);\r\n\t\t\tif(!needDbDelete)\r\n\t\t\t\treturn;\r\n\r\n\t\t\tdp.setUpdated(id, true,\"deleted\");\r\n\t\t});\r\n\t\tthis.attachEvent(\"onRowDragEnd\", function(id, target) {\r\n\t\t\tgantt._sendTaskOrder(id, gantt.getTask(id));\r\n\t\t});\r\n\r\n\r\n\t\tfunction getTaskLinks(task){\r\n\t\t\tvar links = [];\r\n\r\n\t\t\tif (task.$source) {\r\n\t\t\t\tlinks = links.concat(task.$source);\r\n\t\t\t}\r\n\t\t\tif (task.$target) {\r\n\t\t\t\tlinks = links.concat(task.$target);\r\n\t\t\t}\r\n\r\n\t\t\treturn links;\r\n\t\t}\r\n\r\n\t\tvar tasks = null,\r\n\t\t\tlinks = null;\r\n\t\tthis.attachEvent(\"onTaskIdChange\",function(oldId, newId){\r\n\t\t\tif(!dp._waitMode) return;\r\n\r\n\t\t\tvar children = gantt.getChildren(newId);\r\n\t\t\tif(children.length) {\r\n\t\t\t\ttasks = tasks || {};\r\n\r\n\t\t\t\tfor (var i = 0; i < children.length; i++) {\r\n\t\t\t\t\tvar ch = this.getTask(children[i]);\r\n\t\t\t\t\ttasks[ch.id] = ch;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tvar item = this.getTask(newId),\r\n\t\t\t\titemLinks = getTaskLinks(item);\r\n\r\n\t\t\tif(itemLinks.length) {\r\n\t\t\t\tlinks = links || {};\r\n\r\n\t\t\t\tfor (var i = 0; i < itemLinks.length; i++) {\r\n\t\t\t\t\tvar link = this.getLink(itemLinks[i]);\r\n\t\t\t\t\tlinks[link.id] = link;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\tdp.attachEvent(\"onAfterUpdateFinish\", function(){\r\n\t\t\tif(tasks || links){\r\n\t\t\t\tgantt.batchUpdate(function(){\r\n\t\t\t\t\tfor(var id in tasks){\r\n\t\t\t\t\t\tgantt.updateTask(tasks[id].id);\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tfor(var id in links){\r\n\t\t\t\t\t\tgantt.updateLink(links[id].id);\r\n\t\t\t\t\t}\r\n\t\t\t\t\ttasks = null;\r\n\t\t\t\t\tlinks = null;\r\n\t\t\t\t});\r\n\t\t\t\tif(tasks) {\r\n\t\t\t\t\tgantt._dp.setGanttMode(\"tasks\");\r\n\t\t\t\t}else{\r\n\t\t\t\t\tgantt._dp.setGanttMode(\"links\");\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\tdp.attachEvent(\"onBeforeDataSending\", function() {\r\n\t\t\tvar url = this._serverProcessor;\r\n\t\t\tif(this._tMode == \"REST\"){\r\n\t\t\t\tvar mode = this._ganttMode.substr(0, this._ganttMode.length - 1);// links, tasks -> /link/id, /task/id\r\n\r\n\t\t\t\turl = url.substring(0, url.indexOf(\"?\") > -1 ? url.indexOf(\"?\") : url.length);\r\n\t\t\t\t//editing=true&\r\n\t\t\t\tthis.serverProcessor = url + (url.slice(-1) == \"/\" ? \"\" : \"/\") + mode;\r\n\t\t\t}else{\r\n\t\t\t\tthis.serverProcessor = url + gantt.ajax.urlSeparator(url) + \"gantt_mode=\" + this._ganttMode;\r\n\t\t\t}\r\n\r\n\t\t\treturn true;\r\n\t\t});\r\n\r\n\t\tliveUpdateHooks(gantt, dp);\r\n\r\n\t\tvar afterUpdate = dp.afterUpdate;\r\n\t\tdp.afterUpdate = function(){\r\n\t\t\tvar xml;\r\n\t\t\tif(arguments.length == 3){\r\n\t\t\t\txml = arguments[1];\r\n\t\t\t}else{\r\n\t\t\t\t// old dataprocessor\r\n\t\t\t\txml = arguments[4];\r\n\t\t\t}\r\n\t\t\tvar mode = dp._ganttMode;\r\n\t\t\tvar reqUrl = xml.filePath;\r\n\r\n\t\t\tif(this._tMode != \"REST\"){\r\n\t\t\t\tif (reqUrl.indexOf(\"gantt_mode=links\") != -1) {\r\n\t\t\t\t\tmode = \"links\";\r\n\t\t\t\t}else{\r\n\t\t\t\t\tmode = \"tasks\";\r\n\t\t\t\t}\r\n\t\t\t}else{\r\n\t\t\t\tif(reqUrl.indexOf(\"/link\") > reqUrl.indexOf(\"/task\")){\r\n\t\t\t\t\tmode = \"links\";\r\n\t\t\t\t}else{\r\n\t\t\t\t\tmode = \"tasks\";\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tdp.setGanttMode(mode);\r\n\r\n\t\t\tvar res = afterUpdate.apply(dp, arguments);\r\n\t\t\tdp.setGanttMode(mode);\r\n\t\t\treturn res;\r\n\t\t};\r\n\r\n\t\tdp._getRowData=gantt.bind(function(id, pref) {\r\n\t\t\tvar task;\r\n\t\t\tif (dp._ganttMode == \"tasks\")\r\n\t\t\t\ttask = this.isTaskExists(id) ? this.getTask(id) : { id: id };\r\n\t\t\telse\r\n\t\t\t\ttask = this.isLinkExists(id) ? this.getLink(id) : { id: id };\r\n\r\n\t\t\ttask = gantt.copy(task);\r\n\r\n\t\t\tvar data = {};\r\n\t\t\tfor (var key in task) {\r\n\t\t\t\tif (key.substr(0, 1) == \"$\") continue;\r\n\t\t\t\tvar value = task[key];\r\n\t\t\t\tif (value instanceof Date)\r\n\t\t\t\t\tdata[key] = this.templates.xml_format(value);\r\n\t\t\t\telse if(value === null)\r\n\t\t\t\t\tdata[key] = \"\";\r\n\t\t\t\telse\r\n\t\t\t\t\tdata[key] = value;\r\n\t\t\t}\r\n\r\n\t\t\tvar taskTiming = this._get_task_timing_mode(task);\r\n\t\t\tif(taskTiming.$no_start){\r\n\t\t\t\ttask.start_date = \"\";\r\n\t\t\t\ttask.duration = \"\";\r\n\t\t\t}\r\n\t\t\tif(taskTiming.$no_end){\r\n\t\t\t\ttask.end_date = \"\";\r\n\t\t\t\ttask.duration = \"\";\r\n\t\t\t}\r\n\t\t\tdata[dp.action_param] = this.getUserData(id, dp.action_param);\r\n\t\t\treturn data;\r\n\t\t}, this);\r\n\r\n\t\tthis._change_id = gantt.bind(function(oldid, newid) {\r\n\t\t\tif (dp._ganttMode != \"tasks\")\r\n\t\t\t\tthis.changeLinkId(oldid, newid);\r\n\t\t\telse\r\n\t\t\t\tthis.changeTaskId(oldid, newid);\r\n\t\t}, this);\r\n\r\n\t\tthis._row_style = function(row_id, classname){\r\n\t\t\tif (dp._ganttMode != \"tasks\") return;\r\n\t\t\tif(!gantt.isTaskExists(row_id))\r\n\t\t\t\treturn;\r\n\r\n\t\t\tvar task = gantt.getTask(row_id);\r\n\t\t\ttask.$dataprocessor_class = classname;\r\n\t\t\tgantt.refreshTask(row_id);\r\n\t\t};\r\n\r\n\t\t// fake method for dataprocessor\r\n\t\tthis._delete_task = function(row_id, node){};\r\n\r\n\t\tthis._dp = dp;\r\n\t};\r\n\r\n\r\n\tgantt.getUserData = function(id, name) {\r\n\t\tif (!this.userdata) this.userdata = {};\r\n\t\tif (this.userdata[id] && this.userdata[id][name]) return this.userdata[id][name];\r\n\t\treturn \"\";\r\n\t};\r\n\tgantt.setUserData = function(id, name, value) {\r\n\t\tif (!this.userdata) this.userdata = {};\r\n\t\tif (!this.userdata[id]) this.userdata[id] = {};\r\n\t\tthis.userdata[id][name] = value;\r\n\t};\r\n}\r\n\r\nmodule.exports = addDataProcessorHooks;\r\n\n\n/***/ }),\n/* 58 */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar utils = __webpack_require__ (0);\r\n\r\nfunction updateCallback(upd, id) {\r\n\tvar data = upd.data || this.xml._xmlNodeToJSON(upd.firstChild);\r\n\tif(!gantt.isTaskExists(id))\r\n\t\treturn;\r\n\tvar objData = this.getTask(id);\r\n\tfor(var key in data) {\r\n\t\tvar property = data[key];\r\n\t\tswitch(key) {\r\n\t\t\tcase \"id\":\r\n\t\t\t\tcontinue;\r\n\t\t\tcase \"start_date\":\r\n\t\t\tcase \"end_date\":\r\n\t\t\t\tproperty = this.templates.xml_date(property);\r\n\t\t\t\tbreak;\r\n\t\t\tcase \"duration\":\r\n\t\t\t\tobjData.end_date = this.calculateEndDate({start_date: objData.start_date, duration: property, task:objData});\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\t\tobjData[key] = property;\r\n\t}\r\n\tthis.updateTask(id);\r\n\tthis.refreshData();\r\n}\r\n\r\nfunction insertCallback(upd, id, parent, mode) {\r\n\tvar data = upd.data || this.xml._xmlNodeToJSON(upd.firstChild),\r\n\t\tmethods = {\r\n\t\t\tadd: this.addTask,\r\n\t\t\tisExist: this.isTaskExists\r\n\t\t};\r\n\tif(mode == \"links\") {\r\n\t\tmethods.add = this.addLink;\r\n\t\tmethods.isExist = this.isLinkExists;\r\n\t}\r\n\tif(methods.isExist.call(gantt, id))\r\n\t\treturn;\r\n\tdata.id = id;\r\n\tmethods.add.call(gantt, data);\r\n}\r\n\r\nfunction deleteCallback(upd, id, parent, mode) {\r\n\tvar methods = {\r\n\t\t\"delete\": this.deleteTask,\r\n\t\t\"isExist\": this.isTaskExists\r\n\t};\r\n\tif(mode == \"links\") {\r\n\t\tmethods[\"delete\"] = this.deleteLink;\r\n\t\tmethods.isExist = this.isLinkExists;\r\n\t}\r\n\tif(methods.isExist.call(this, id))\r\n\t\tmethods[\"delete\"].call(this, id);\r\n}\r\n\r\nfunction patchDataProcessor(gantt, dataprocessor){\r\n\tdataprocessor.attachEvent(\"insertCallback\", utils.bind(insertCallback, gantt));\r\n\tdataprocessor.attachEvent(\"updateCallback\",  utils.bind(deleteCallback, gantt));\r\n\tdataprocessor.attachEvent(\"deleteCallback\",  utils.bind(deleteCallback, gantt));\r\n}\r\n\r\nmodule.exports = patchDataProcessor;\n\n/***/ }),\n/* 59 */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar utils = __webpack_require__(0);\r\nvar eventable = __webpack_require__(2);\r\n\r\n/**\r\n\t* \t@desc: constructor, data processor object \r\n\t*\t@param: serverProcessorURL - url used for update\r\n\t*\t@type: public\r\n\t*/\r\nvar dataProcessor = function(serverProcessorURL){\r\n    this.serverProcessor = serverProcessorURL;\r\n    this.action_param=\"!nativeeditor_status\";\r\n    \r\n\tthis.object = null;\r\n\tthis.updatedRows = []; //ids of updated rows\r\n\t\r\n\tthis.autoUpdate = true;\r\n\tthis.updateMode = \"cell\";\r\n\tthis._tMode=\"GET\"; \r\n\tthis._headers = null;\r\n\tthis._payload = null;\r\n\tthis.post_delim = \"_\";\r\n\t\r\n    this._waitMode=0;\r\n    this._in_progress={};//?\r\n    this._invalid={};\r\n    this.mandatoryFields=[];\r\n    this.messages=[];\r\n    \r\n    this.styles={\r\n    \tupdated:\"font-weight:bold;\",\r\n    \tinserted:\"font-weight:bold;\",\r\n    \tdeleted:\"text-decoration : line-through;\",\r\n    \tinvalid:\"background-color:FFE0E0;\",\r\n    \tinvalid_cell:\"border-bottom:2px solid red;\",\r\n    \terror:\"color:red;\",\r\n    \tclear:\"font-weight:normal;text-decoration:none;\"\r\n    };\r\n    \r\n    this.enableUTFencoding(true);\r\n\teventable(this);\r\n\r\n    return this;\r\n};\r\n\r\ndataProcessor.prototype={\r\n\tsetTransactionMode:function(mode,total){\r\n\t\tif (typeof mode == \"object\"){\r\n\t\t\tthis._tMode = mode.mode || this._tMode;\r\n\r\n\t\t\tif(utils.defined(mode.headers)){\r\n\t\t\t\tthis._headers = mode.headers;\r\n\t\t\t}\r\n\r\n\t\t\tif(utils.defined(mode.payload)){\r\n\t\t\t\tthis._payload = mode.payload;\r\n\t\t\t}\r\n\t\t\t\r\n\t\t} else {\r\n     \t    this._tMode=mode;\r\n\t\t\tthis._tSend=total;\r\n\t\t}\r\n\r\n\t\tif (this._tMode == \"REST\"){\r\n\t\t\tthis._tSend = false;\r\n\t\t\tthis._endnm = true;\r\n\t\t}\r\n\r\n\t\tif (this._tMode == \"JSON\"){\r\n\t\t\tthis._tSend = false;\r\n\t\t\tthis._endnm = true;\r\n\t\t\tthis._headers = this._headers || {};\r\n\t\t\tthis._headers[\"Content-type\"] = \"application/json\";\r\n\t\t}\r\n    },\r\n    escape:function(data){\r\n    \tif (this._utf)\r\n    \t\treturn encodeURIComponent(data);\r\n    \telse\r\n        \treturn escape(data);\r\n\t},\r\n    /**\r\n\t* \t@desc: allows to set escaping mode\r\n\t*\t@param: true - utf based escaping, simple - use current page encoding\r\n\t*\t@type: public\r\n\t*/\t\r\n\tenableUTFencoding:function(mode){\r\n        this._utf=!!mode;\r\n    },\r\n    /**\r\n\t* \t@desc: allows to define, which column may trigger update\r\n\t*\t@param: val - array or list of true/false values\r\n\t*\t@type: public\r\n\t*/\r\n\tsetDataColumns:function(val){\r\n\t\tthis._columns=(typeof val == \"string\")?val.split(\",\"):val;\r\n    },\r\n    /**\r\n\t* \t@desc: get state of updating\r\n\t*\t@returns:   true - all in sync with server, false - some items not updated yet.\r\n\t*\t@type: public\r\n\t*/\r\n\tgetSyncState:function(){\r\n\t\treturn !this.updatedRows.length;\r\n\t},\r\n\t/**\r\n\t* \t@desc: enable/disable named field for data syncing, will use column ids for grid\r\n\t*\t@param:   mode - true/false\r\n\t*\t@type: public\r\n\t*/\r\n\tenableDataNames:function(mode){\r\n\t\tthis._endnm= !!mode;\r\n\t},\r\n\t/**\r\n\t* \t@desc: enable/disable mode , when only changed fields and row id send to the server side, instead of all fields in default mode\r\n\t*\t@param:   mode - true/false\r\n\t*\t@type: public\r\n\t*/\r\n\tenablePartialDataSend:function(mode){\r\n\t\tthis._changed= !!mode;\r\n\t},\r\n\t/**\r\n\t* \t@desc: set if rows should be send to server automaticaly\r\n\t*\t@param: mode - \"row\" - based on row selection changed, \"cell\" - based on cell editing finished, \"off\" - manual data sending\r\n\t*\t@type: public\r\n\t*/\r\n\tsetUpdateMode:function(mode,dnd){\r\n\t\tthis.autoUpdate = (mode==\"cell\");\r\n\t\tthis.updateMode = mode;\r\n\t\tthis.dnd=dnd;\r\n\t},\r\n\tignore:function(code,master){\r\n\t\tthis._silent_mode=true;\r\n\t\tcode.call(master||window);\r\n\t\tthis._silent_mode=false;\r\n\t},\r\n\t/**\r\n\t* \t@desc: mark row as updated/normal. check mandatory fields,initiate autoupdate (if turned on)\r\n\t*\t@param: rowId - id of row to set update-status for\r\n\t*\t@param: state - true for \"updated\", false for \"not updated\"\r\n\t*\t@param: mode - update mode name\r\n\t*\t@type: public\r\n\t*/\r\n\tsetUpdated:function(rowId,state,mode){\r\n\t\tif (this._silent_mode) return;\r\n\t\tvar ind=this.findRow(rowId);\r\n\t\t\r\n\t\tmode=mode||\"updated\";\r\n\t\tvar existing = this.obj.getUserData(rowId,this.action_param);\r\n\t\tif (existing && mode == \"updated\") mode=existing;\r\n\t\tif (state){\r\n\t\t\tthis.set_invalid(rowId,false); //clear previous error flag\r\n\t\t\tthis.updatedRows[ind]=rowId;\r\n\t\t\tthis.obj.setUserData(rowId,this.action_param,mode);\r\n\t\t\tif (this._in_progress[rowId]) \r\n\t\t\t\tthis._in_progress[rowId]=\"wait\";\r\n\t\t} else{\r\n\t\t\tif (!this.is_invalid(rowId)){\r\n\t\t\t\tthis.updatedRows.splice(ind,1);\r\n\t\t\t\tthis.obj.setUserData(rowId,this.action_param,\"\");\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t//clear changed flag\r\n\t\tif (!state)\r\n\t\t\tthis._clearUpdateFlag(rowId);\r\n     \t\t\t\r\n\t\tthis.markRow(rowId,state,mode);\r\n\t\tif (state && this.autoUpdate) this.sendData(rowId);\r\n\t},\r\n\t_clearUpdateFlag:function(id){},\r\n\tmarkRow:function(id,state,mode){ \r\n\t\tvar str=\"\";\r\n\t\tvar invalid=this.is_invalid(id);\r\n\t\tif (invalid){\r\n        \tstr=this.styles[invalid];\r\n        \tstate=true;\r\n    \t}\r\n\t\tif (this.callEvent(\"onRowMark\",[id,state,mode,invalid])){\r\n\t\t\t//default logic\r\n\t\t\tstr=this.styles[state?mode:\"clear\"]+str;\r\n\t\t\t\r\n        \tthis.obj[this._methods[0]](id,str);\r\n\r\n\t\t\tif (invalid && invalid.details){\r\n\t\t\t\tstr+=this.styles[invalid+\"_cell\"];\r\n\t\t\t\tfor (var i=0; i < invalid.details.length; i++)\r\n\t\t\t\t\tif (invalid.details[i])\r\n        \t\t\t\tthis.obj[this._methods[1]](id,i,str);\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\tgetState:function(id){\r\n\t\treturn this.obj.getUserData(id,this.action_param);\r\n\t},\r\n\tis_invalid:function(id){\r\n\t\treturn this._invalid[id];\r\n\t},\r\n\tset_invalid:function(id,mode,details){ \r\n\t\tif (details) mode={value:mode, details:details, toString:function(){ return this.value.toString(); }};\r\n\t\tthis._invalid[id]=mode;\r\n\t},\r\n\t/**\r\n\t* \t@desc: check mandatory fields and varify values of cells, initiate update (if specified)\r\n\t*\t@param: rowId - id of row to set update-status for\r\n\t*\t@type: public\r\n\t*/\r\n\tcheckBeforeUpdate:function(rowId){ \r\n\t\treturn true;\r\n\t},\r\n\t/**\r\n\t* \t@desc: send row(s) values to server\r\n\t*\t@param: rowId - id of row which data to send. If not specified, then all \"updated\" rows will be send\r\n\t*\t@type: public\r\n\t*/\r\n\tsendData:function(rowId){\r\n\t\tif (this._waitMode && (this.obj.mytype==\"tree\" || this.obj._h2)) return;\r\n\t\tif (this.obj.editStop) this.obj.editStop();\r\n\t\r\n\t\t\r\n\t\tif(typeof rowId == \"undefined\" || this._tSend) return this.sendAllData();\r\n\t\tif (this._in_progress[rowId]) return false;\r\n\t\t\r\n\t\tthis.messages=[];\r\n\t\tif (!this.checkBeforeUpdate(rowId) && this.callEvent(\"onValidationError\",[rowId,this.messages])) return false;\r\n\t\tthis._beforeSendData(this._getRowData(rowId),rowId);\r\n    },\r\n    _beforeSendData:function(data,rowId){\r\n    \tif (!this.callEvent(\"onBeforeUpdate\",[rowId,this.getState(rowId),data])) return false;\t\r\n\t\tthis._sendData(data,rowId);\r\n    },\r\n    serialize:function(data, id){\r\n    \tif (typeof data == \"string\")\r\n    \t\treturn data;\r\n    \tif (typeof id != \"undefined\")\r\n    \t\treturn this.serialize_one(data,\"\");\r\n    \telse{\r\n    \t\tvar stack = [];\r\n    \t\tvar keys = [];\r\n    \t\tfor (var key in data)\r\n    \t\t\tif (data.hasOwnProperty(key)){\r\n    \t\t\t\tstack.push(this.serialize_one(data[key],key+this.post_delim));\r\n    \t\t\t\tkeys.push(key);\r\n\t\t\t\t}\r\n    \t\tstack.push(\"ids=\"+this.escape(keys.join(\",\")));\r\n    \t\tif (this.$gantt.security_key)\r\n\t\t\t\tstack.push(\"dhx_security=\"+this.$gantt.security_key);\r\n    \t\treturn stack.join(\"&\");\r\n    \t}\r\n    },\r\n    serialize_one:function(data, pref){\r\n    \tif (typeof data == \"string\")\r\n    \t\treturn data;\r\n    \tvar stack = [];\r\n    \tfor (var key in data)\r\n    \t\tif (data.hasOwnProperty(key)){\r\n    \t\t\tif ((key == \"id\" || key == this.action_param) && this._tMode == \"REST\") continue;\r\n    \t\t\tstack.push(this.escape((pref||\"\")+key)+\"=\"+this.escape(data[key]));\r\n    \t\t}\r\n\t\treturn stack.join(\"&\");\r\n    },\r\n\t_applyPayload:function(url){\r\n\t\tvar ajax = this.$gantt.ajax;\r\n\t\tif (this._payload)\r\n\t\t\tfor (var key in this._payload)\r\n\t\t\t\turl = url + ajax.urlSeparator(url) + this.escape(key) + \"=\" + this.escape(this._payload[key]);\r\n\t\treturn url;\r\n\t},\r\n    _sendData:function(a1,rowId){\r\n    \tif (!a1) return; //nothing to send\r\n\t\tif (!this.callEvent(\"onBeforeDataSending\",rowId?[rowId,this.getState(rowId),a1]:[null, null, a1])) return false;\t\t\t\t\r\n\t\t\r\n    \tif (rowId)\r\n\t\t\tthis._in_progress[rowId]=(new Date()).valueOf();\r\n\r\n\t\tvar that = this;\r\n\t\tvar back = function(xml){\r\n\t\t\tvar ids = [];\r\n\t\t\tif (rowId)\r\n\t\t\t\tids.push(rowId);\r\n\t\t\telse if (a1)\r\n\t\t\t\tfor (var key in a1)\r\n\t\t\t\t\tids.push(key);\r\n\r\n\t\t\treturn that.afterUpdate(that,xml,ids);\r\n\t\t};\r\n\t\tvar ajax = this.$gantt.ajax;\r\n\r\n\t\tvar a3 = this.serverProcessor+(this._user?(ajax.urlSeparator(this.serverProcessor)+[\"dhx_user=\"+this._user,\"dhx_version=\"+this.obj.getUserData(0,\"version\")].join(\"&\")):\"\");\r\n\t\tvar a4 = this._applyPayload(a3);\r\n\r\n\t\tif (this._tMode==\"GET\") {\r\n\t\t\tajax.query({\r\n\t\t\t\turl: a4 + ajax.urlSeparator(a4) + this.serialize(a1, rowId),\r\n\t\t\t\tmethod: \"GET\",\r\n\t\t\t\tcallback: back,\r\n\t\t\t\theaders: this._headers\r\n\t\t\t});\r\n\t\t} else if (this._tMode == \"POST\") {\r\n\t\t\tajax.query({\r\n\t\t\t\turl: a4,\r\n\t\t\t\tmethod: \"POST\",\r\n\t\t\t\theaders: this._headers,\r\n\t\t\t\tdata: this.serialize(a1, rowId),\r\n\t\t\t\tcallback: back\r\n\t\t\t});\r\n\t\t} else if (this._tMode == \"JSON\"){\r\n\t\t\tvar action = a1[this.action_param];\r\n\t\t\tvar data = {};\r\n\t\t\tfor (var key in a1) data[key] = a1[key];\r\n\t\t\tdelete data[this.action_param];\r\n\t\t\tdelete data.id;\r\n\t\t\tdelete data.gr_id;\r\n\r\n\t\t\tajax.query({\r\n\t\t\t\turl:a4,\r\n\t\t\t\tmethod:\"POST\",\r\n\t\t\t\theaders:this._headers,\r\n\t\t\t\tcallback:back,\r\n\t\t\t\tdata:JSON.stringify({\r\n\t\t\t\t\tid: rowId,\r\n\t\t\t\t\taction: action,\r\n\t\t\t\t\tdata: data\r\n\t\t\t\t})\r\n\t\t\t});\r\n\t\t}\r\n        else if (this._tMode == \"REST\"){\r\n        \tvar state = this.getState(rowId);\r\n        \tvar url = a3.replace(/(\\&|\\?)editing\\=true/,\"\");\r\n        \tvar data = \"\";\r\n        \tvar method = \"post\";\r\n\r\n        \tif (state == \"inserted\"){\r\n        \t\tdata = this.serialize(a1, rowId);\r\n        \t} else if (state == \"deleted\"){\r\n        \t\tmethod = \"DELETE\";\r\n        \t\turl = url + (url.slice(-1) == \"/\" ? \"\" : \"/\") + rowId;\r\n        \t} else {\r\n        \t\tmethod = \"PUT\";\r\n        \t\tdata = this.serialize(a1, rowId);\r\n        \t\turl = url + (url.slice(-1) == \"/\" ? \"\" : \"/\") + rowId;\r\n        \t}\r\n\r\n\r\n        \turl = this._applyPayload(url);\r\n        \tajax.query({\r\n        \t\turl:url,\r\n        \t\tmethod:method,\r\n        \t\theaders:this._headers,\r\n        \t\tdata:data,\r\n        \t\tcallback:back\r\n        \t});\r\n        }\r\n\r\n\t\tthis._waitMode++;\r\n    },\r\n\tsendAllData:function(){\r\n\t\tif (!this.updatedRows.length) return;\t\t\t\r\n\r\n\t\tthis.messages=[]; var valid=true;\r\n\t\tfor (var i=0; i<this.updatedRows.length; i++)\r\n\t\t\tvalid&=this.checkBeforeUpdate(this.updatedRows[i]);\r\n\t\tif (!valid && !this.callEvent(\"onValidationError\",[\"\",this.messages])) return false;\r\n\t\r\n\t\tif (this._tSend) \r\n\t\t\tthis._sendData(this._getAllData());\r\n\t\telse\r\n\t\t\tfor (var i=0; i<this.updatedRows.length; i++)\r\n\t\t\t\tif (!this._in_progress[this.updatedRows[i]]){\r\n\t\t\t\t\tif (this.is_invalid(this.updatedRows[i])) continue;\r\n\t\t\t\t\tthis._beforeSendData(this._getRowData(this.updatedRows[i]),this.updatedRows[i]);\r\n\t\t\t\t\tif (this._waitMode && (this.obj.mytype==\"tree\" || this.obj._h2)) return; //block send all for tree\r\n\t\t\t\t}\r\n\t},\r\n\r\n\t_getAllData:function(rowId){\r\n\t\tvar out={};\r\n\t\tvar has_one = false;\r\n\t\tfor(var i=0;i<this.updatedRows.length;i++){\r\n\t\t\tvar id=this.updatedRows[i];\r\n\t\t\tif (this._in_progress[id] || this.is_invalid(id)) continue;\r\n\t\t\tvar row = this._getRowData(id);\r\n\t\t\tif (!this.callEvent(\"onBeforeUpdate\",[id,this.getState(id), row])) continue;\r\n\t\t\tout[id]=row;\r\n\t\t\thas_one = true;\r\n\t\t\tthis._in_progress[id]=(new Date()).valueOf();\r\n\t\t}\r\n\t\treturn has_one?out:null;\r\n\t},\r\n\t\r\n\t\r\n\t/**\r\n\t* \t@desc: specify column which value should be varified before sending to server\r\n\t*\t@param: ind - column index (0 based)\r\n\t*\t@param: verifFunction - function (object) which should verify cell value (if not specified, then value will be compared to empty string). Two arguments will be passed into it: value and column name\r\n\t*\t@type: public\r\n\t*/\r\n\tsetVerificator:function(ind,verifFunction){\r\n\t\tthis.mandatoryFields[ind] = verifFunction||(function(value){return (value!==\"\");});\r\n\t},\r\n\t/**\r\n\t* \t@desc: remove column from list of those which should be verified\r\n\t*\t@param: ind - column Index (0 based)\r\n\t*\t@type: public\r\n\t*/\r\n\tclearVerificator:function(ind){\r\n\t\tthis.mandatoryFields[ind] = false;\r\n\t},\r\n\t\r\n\t\r\n\t\r\n\t\r\n\t\r\n\tfindRow:function(pattern){\r\n\t\tvar i=0;\r\n    \tfor(i=0;i<this.updatedRows.length;i++)\r\n\t\t    if(pattern==this.updatedRows[i]) break;\r\n\t    return i;\r\n    },\r\n\r\n   \r\n\t\r\n\r\n\r\n    \r\n\r\n\r\n\r\n\r\n\r\n\t/**\r\n\t* \t@desc: define custom actions\r\n\t*\t@param: name - name of action, same as value of action attribute\r\n\t*\t@param: handler - custom function, which receives a XMl response content for action\r\n\t*\t@type: private\r\n\t*/\r\n\tdefineAction:function(name,handler){\r\n        if (!this._uActions) this._uActions=[];\r\n            this._uActions[name]=handler;\r\n\t},\r\n\r\n\r\n\r\n\r\n\t/**\r\n*     @desc: used in combination with setOnBeforeUpdateHandler to create custom client-server transport system\r\n*     @param: sid - id of item before update\r\n*     @param: tid - id of item after up0ate\r\n*     @param: action - action name\r\n*     @type: public\r\n*     @topic: 0\r\n*/\r\n\tafterUpdateCallback:function(sid, tid, action, btag) {\r\n\t\tvar marker = sid;\r\n\t\tvar correct=(action!=\"error\" && action!=\"invalid\");\r\n\t\tif (!correct) this.set_invalid(sid,action);\r\n\t\tif ((this._uActions)&&(this._uActions[action])&&(!this._uActions[action](btag)))\r\n\t\t\treturn (delete this._in_progress[marker]);\r\n\r\n\t\tif (this._in_progress[marker]!=\"wait\")\r\n\t\t\tthis.setUpdated(sid, false);\r\n\r\n\t\tvar soid = sid;\r\n\r\n\t\tswitch (action) {\r\n\t\t\tcase \"inserted\":\r\n\t\t\tcase \"insert\":\r\n\t\t\t\tif (tid != sid) {\r\n\t\t\t\t\tthis.setUpdated(sid,false);\r\n\t\t\t\t\tthis.obj[this._methods[2]](sid, tid);\r\n\t\t\t\t\tsid = tid;\r\n\t\t\t\t}\r\n\t\t\t\tbreak;\r\n\t\t\tcase \"delete\":\r\n\t\t\tcase \"deleted\":\r\n\t\t\t\tthis.obj.setUserData(sid, this.action_param, \"true_deleted\");\r\n\t\t\t\tthis.obj[this._methods[3]](sid);\r\n\t\t\t\tdelete this._in_progress[marker];\r\n\t\t\t\treturn this.callEvent(\"onAfterUpdate\", [sid, action, tid, btag]);\r\n\t\t}\r\n\r\n\t\tif (this._in_progress[marker]!=\"wait\"){\r\n\t\t\tif (correct) this.obj.setUserData(sid, this.action_param,'');\r\n\t\t\tdelete this._in_progress[marker];\r\n\t\t} else {\r\n\t\t\tdelete this._in_progress[marker];\r\n\t\t\tthis.setUpdated(tid,true,this.obj.getUserData(sid,this.action_param));\r\n\t\t}\r\n\r\n\t\tthis.callEvent(\"onAfterUpdate\", [soid, action, tid, btag]);\r\n\t},\r\n\r\n\t/**\r\n\t* \t@desc: response from server\r\n\t*\t@param: xml - XMLLoader object with response XML\r\n\t*\t@type: private\r\n\t*/\r\n\tafterUpdate:function(that,xml,id){\r\n\t\tvar ajax = this.$gantt.ajax;\r\n\t\t//try to use json first\r\n\t\tif (window.JSON){\r\n\t\t\tvar tag;\r\n\r\n\t\t\ttry{\r\n\t\t\t\ttag = JSON.parse(xml.xmlDoc.responseText);\r\n\t\t\t} catch(e){\r\n\r\n\t\t\t\t// empty response also can be processed by json handler\r\n\t\t\t\tif(!xml.xmlDoc.responseText.length){\r\n\t\t\t\t\ttag = {};\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tif(tag){\r\n\t\t\t\tvar action = tag.action || this.getState(id) || \"updated\";\r\n\t\t\t\tvar sid = tag.sid || id[0];\r\n\t\t\t\tvar tid = tag.tid || id[0];\r\n\t\t\t\tthat.afterUpdateCallback(sid, tid, action, tag);\r\n\t\t\t\tthat.finalizeUpdate();\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t}\r\n\t\t//xml response\r\n\t\tvar top = ajax.xmltop(\"data\", xml.xmlDoc); //fix incorrect content type in IE\r\n\t\tif (!top) return this.cleanUpdate(id);\r\n\t\tvar atag=ajax.xpath(\"//data/action\", top);\r\n\t\tif (!atag.length) return this.cleanUpdate(id);\r\n\r\n\t\tfor (var i=0; i<atag.length; i++){\r\n        \tvar btag=atag[i];\r\n\t\t\tvar action = btag.getAttribute(\"type\");\r\n\t\t\tvar sid = btag.getAttribute(\"sid\");\r\n\t\t\tvar tid = btag.getAttribute(\"tid\");\r\n\t\t\t\r\n\t\t\tthat.afterUpdateCallback(sid,tid,action,btag);\r\n\t\t}\r\n\t\tthat.finalizeUpdate();\r\n\t},\r\n\tcleanUpdate:function(id){\r\n\t\tif (id)\r\n\t\t\tfor (var i = 0; i < id.length; i++)\r\n\t\t\t\tdelete this._in_progress[id[i]];\r\n\t},\r\n\tfinalizeUpdate:function(){\r\n\t\tif (this._waitMode) this._waitMode--;\r\n\t\t\r\n\t\tif ((this.obj.mytype==\"tree\" || this.obj._h2) && this.updatedRows.length) \r\n\t\t\tthis.sendData();\r\n\t\tthis.callEvent(\"onAfterUpdateFinish\",[]);\r\n\t\tif (!this.updatedRows.length)\r\n\t\t\tthis.callEvent(\"onFullSync\",[]);\r\n\t},\r\n\r\n\r\n\r\n\r\n\t\r\n\t/**\r\n\t* \t@desc: initializes data-processor\r\n\t*\t@param: anObj - dhtmlxGrid object to attach this data-processor to\r\n\t*\t@type: public\r\n\t*/\r\n\tinit:function(anObj){\r\n\t\tthis.obj = anObj;\r\n\t\tif (this.obj._dp_init) \r\n\t\t\tthis.obj._dp_init(this);\r\n\t},\r\n\t\r\n\t\r\n\tsetOnAfterUpdate:function(ev){\r\n\t\tthis.attachEvent(\"onAfterUpdate\",ev);\r\n\t},\r\n\tenableDebug:function(mode){\r\n\t},\r\n\tsetOnBeforeUpdateHandler:function(func){  \r\n\t\tthis.attachEvent(\"onBeforeDataSending\",func);\r\n\t},\r\n\r\n\r\n\r\n\t/* starts autoupdate mode\r\n\t\t@param interval\r\n\t\t\ttime interval for sending update requests\r\n\t*/\r\n\tsetAutoUpdate: function(interval, user) {\r\n\t\tinterval = interval || 2000;\r\n\t\t\r\n\t\tthis._user = user || (new Date()).valueOf();\r\n\t\tthis._need_update = false;\r\n\t\t//this._loader = null;\r\n\t\tthis._update_busy = false;\r\n\t\t\r\n\t\tthis.attachEvent(\"onAfterUpdate\",function(sid,action,tid,xml_node){\r\n\t\t\tthis.afterAutoUpdate(sid, action, tid, xml_node);\r\n\t\t});\r\n\t\tthis.attachEvent(\"onFullSync\",function(){\r\n\t\t\tthis.fullSync();\r\n\t\t});\r\n\t\t\r\n\t\tvar self = this;\r\n\t\twindow.setInterval(function(){\r\n\t\t\tself.loadUpdate();\r\n\t\t}, interval);\r\n\t},\r\n\r\n\r\n\t/* process updating request answer\r\n\t\tif status == collision version is depricated\r\n\t\tset flag for autoupdating immidiatly\r\n\t*/\r\n\tafterAutoUpdate: function(sid, action, tid, xml_node) {\r\n\t\tif (action == 'collision') {\r\n\t\t\tthis._need_update = true;\r\n\t\t\treturn false;\r\n\t\t} else {\r\n\t\t\treturn true;\r\n\t\t}\r\n\t},\r\n\r\n\r\n\t/* callback function for onFillSync event\r\n\t\tcall update function if it's need\r\n\t*/\r\n\tfullSync: function() {\r\n\t\tif (this._need_update) {\r\n\t\t\tthis._need_update = false;\r\n\t\t\tthis.loadUpdate();\r\n\t\t}\r\n\t\treturn true;\r\n\t},\r\n\r\n\r\n\t/* sends query to the server and call callback function\r\n\t*/\r\n\tgetUpdates: function(url,callback){\r\n\t\tvar ajax = this.$gantt.ajax;\r\n\t\tif (this._update_busy) \r\n\t\t\treturn false;\r\n\t\telse\r\n\t\t\tthis._update_busy = true;\r\n\t\t\r\n\t\t//this._loader = this._loader || new dtmlXMLLoaderObject(true);\r\n\t\t\r\n\t\t//this._loader.async=true;\r\n\t\t//this._loader.waitCall=callback;\r\n\t\t//this._loader.loadXML(url);\r\n\t\tajax.get(url, callback);\r\n\r\n\t},\r\n\r\n\r\n\t/* returns xml node value\r\n\t\t@param node\r\n\t\t\txml node\r\n\t*/\r\n\t_v: function(node) {\r\n\t\tif (node.firstChild) return node.firstChild.nodeValue;\r\n\t\treturn \"\";\r\n\t},\r\n\r\n\r\n\t/* returns values array of xml nodes array\r\n\t\t@param arr\r\n\t\t\tarray of xml nodes\r\n\t*/\r\n\t_a: function(arr) {\r\n\t\tvar res = [];\r\n\t\tfor (var i=0; i < arr.length; i++) {\r\n\t\t\tres[i]=this._v(arr[i]);\r\n\t\t}\r\n\t\treturn res;\r\n\t},\r\n\r\n\r\n\t/* loads updates and processes them\r\n\t*/\r\n\tloadUpdate: function(){\r\n\t\tvar ajax = this.$gantt.ajax;\r\n\t\tvar self = this;\r\n\t\tvar version = this.obj.getUserData(0,\"version\");\r\n\t\tvar url = this.serverProcessor+ajax.urlSeparator(this.serverProcessor)+[\"dhx_user=\"+this._user,\"dhx_version=\"+version].join(\"&\");\r\n\t\turl = url.replace(\"editing=true&\",\"\");\r\n\t\tthis.getUpdates(url, function(xml){\r\n\t\t\tvar vers = ajax.xpath(\"//userdata\", xml);\r\n\t\t\tself.obj.setUserData(0,\"version\",self._v(vers[0]));\r\n\t\t\t\r\n\t\t\tvar upds = ajax.xpath(\"//update\", xml);\r\n\t\t\tif (upds.length){\r\n\t\t\t\tself._silent_mode = true;\r\n\t\t\t\t\r\n\t\t\t\tfor (var i=0; i<upds.length; i++) {\r\n\t\t\t\t\tvar status = upds[i].getAttribute('status');\r\n\t\t\t\t\tvar id = upds[i].getAttribute('id');\r\n\t\t\t\t\tvar parent = upds[i].getAttribute('parent');\r\n\t\t\t\t\tswitch (status) {\r\n\t\t\t\t\t\tcase 'inserted':\r\n\t\t\t\t\t\t\tself.callEvent(\"insertCallback\",[upds[i], id, parent]);\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\tcase 'updated':\r\n\t\t\t\t\t\t\tself.callEvent(\"updateCallback\",[upds[i], id, parent]);\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\tcase 'deleted':\r\n\t\t\t\t\t\t\tself.callEvent(\"deleteCallback\",[upds[i], id, parent]);\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tself._silent_mode = false;\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tself._update_busy = false;\r\n\t\t\tself = null;\r\n\t\t});\r\n\t}\r\n\r\n};\r\n\r\nmodule.exports = dataProcessor;\n\n/***/ }),\n/* 60 */\n/***/ (function(module, exports, __webpack_require__) {\n\nmodule.exports = function(gantt){\r\n\tvar modules = [\r\n\t\t__webpack_require__(61),\r\n\t\t__webpack_require__(62),\r\n\t\t__webpack_require__(63),\r\n\t\t__webpack_require__(64),\r\n\t\t__webpack_require__(65)\r\n\t];\r\n\r\n\tfor(var i = 0; i < modules.length; i++){\r\n\t\tif(modules[i])\r\n\t\t\tmodules[i](gantt);\r\n\t}\r\n};\n\n/***/ }),\n/* 61 */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar domHelpers = __webpack_require__(1);\r\n\r\nmodule.exports = function(gantt){\r\n\r\n\tvar scrollRange = 50,\r\n\t\tscrollStep = 30,\r\n\t\tscrollDelay = 10,\r\n\t\tscrollSpeed = 50;\r\n\r\n\tvar interval = null,\r\n\t\tisMove = false,\r\n\t\tdelayTimeout = null,\r\n\t\tbox = {},\r\n\t\tstartPos = {\r\n\t\t\tstarted: false\r\n\t\t},\r\n\t\teventPos = {};\r\n\r\n\tfunction isScrollState() {\r\n\t\tvar dragMarker = !!document.querySelector(\".gantt_drag_marker\");\r\n\t\tvar isResize = !!document.querySelector(\".gantt_drag_marker.gantt_grid_resize_area\");\r\n\t\tvar isLink = !!document.querySelector(\".gantt_link_direction\");\r\n\t\tisMove = dragMarker && !isResize && !isLink;\r\n\t\treturn !((!gantt.getState().drag_mode && !dragMarker) || isResize);\r\n\t}\r\n\r\n\tfunction defineDelayTimeout(state) {\r\n\t\tif (delayTimeout) {\r\n\t\t\tclearTimeout(delayTimeout);\r\n\t\t\tdelayTimeout = null;\r\n\t\t}\r\n\t\tif (state) {\r\n\t\t\tvar speed = gantt.config.autoscroll_speed;\r\n\t\t\tif (speed && speed < 10) // limit speed value to 10 \r\n\t\t\t\tspeed = 10;\r\n\r\n\t\t\tdelayTimeout = setTimeout(function() {\r\n\t\t\t\tinterval = setInterval(tick, speed || scrollSpeed);\r\n\t\t\t\tbox = domHelpers.getNodePosition(gantt.$task);\r\n\t\t\t}, gantt.config.autoscroll_delay || scrollDelay);\r\n\t\t}\r\n\t}\r\n\r\n\tfunction defineScrollInterval(state) {\r\n\t\tif (state) {\r\n\t\t\tdefineDelayTimeout(true);\r\n\t\t\tif (!startPos.started) {\r\n\t\t\t\tstartPos.x = eventPos.x;\r\n\t\t\t\tstartPos.y = eventPos.y;\r\n\t\t\t\tstartPos.started = true;\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tif (interval) {\r\n\t\t\t\tclearInterval(interval);\r\n\t\t\t\tinterval = null;\r\n\t\t\t}\r\n\t\t\tdefineDelayTimeout(false);\r\n\t\t\tstartPos.started = false;\r\n\t\t}\r\n\t}\r\n\r\n\tfunction autoscrollInterval(event) {\r\n\r\n\t\tvar isScroll = isScrollState();\r\n\r\n\t\tif ((interval || delayTimeout) && !isScroll) { \r\n\t\t\tdefineScrollInterval(false);\r\n\t\t}\r\n\r\n\t\tif (!gantt.config.autoscroll || !isScroll) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t\teventPos = {\r\n\t\t\tx: event.clientX,\r\n\t\t\ty: event.clientY\r\n\t\t};\r\n\r\n\t\tif (!interval && isScroll) {\r\n\t\t\tdefineScrollInterval(true);\r\n\t\t}\r\n\t}\r\n\r\n\tfunction tick() {\r\n\r\n\t\tif (!isScrollState()) {\r\n\t\t\tdefineScrollInterval(false);\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t\tvar box = domHelpers.getNodePosition(gantt.$task);\r\n\t\tvar posX = eventPos.x - box.x; \r\n\t\tvar posY = eventPos.y - box.y;\r\n\r\n\t\tvar scrollLeft = isMove ? 0 : need_scroll(posX, box.width, startPos.x - box.x);\r\n\t\tvar scrollTop = need_scroll(posY, box.height, startPos.y - box.y);\r\n\r\n\t\tvar scrollState = gantt.getScrollState();\r\n\r\n\t\tvar currentScrollTop = scrollState.y,\r\n\t\t\tscrollOuterHeight = scrollState.inner_height,\r\n\t\t\tscrollInnerHeight = scrollState.height,\r\n\t\t\tcurrentScrollLeft = scrollState.x,\r\n\t\t\tscrollOuterWidth = scrollState.inner_width,\r\n\t\t\tscrollInnerWidth = scrollState.width;\r\n\r\n\t\t// do scrolling only if we have scrollable area to do so\r\n\t\tif (scrollTop && !scrollOuterHeight) {\r\n\t\t\tscrollTop = 0;\r\n\t\t} else if (scrollTop < 0 && !currentScrollTop) {\r\n\t\t\tscrollTop = 0;\r\n\t\t} else if (scrollTop > 0 && currentScrollTop + scrollOuterHeight >= scrollInnerHeight + 2) {\r\n\t\t\tscrollTop = 0;\r\n\t\t}\r\n\r\n\t\tif (scrollLeft && !scrollOuterWidth) {\r\n\t\t\tscrollLeft = 0;\r\n\t\t} else if (scrollLeft < 0 && !currentScrollLeft) {\r\n\t\t\tscrollLeft = 0;\r\n\t\t} else if (scrollLeft > 0 && currentScrollLeft + scrollOuterWidth >= scrollInnerWidth) {\r\n\t\t\tscrollLeft = 0;\r\n\t\t}\r\n\r\n\t\tvar step = gantt.config.autoscroll_step;\r\n\r\n\t\tif (step && step < 2) // limit step value to 2\r\n\t\t\tstep = 2;\r\n\r\n\t\tscrollLeft = scrollLeft * (step || scrollStep);\r\n\t\tscrollTop = scrollTop * (step || scrollStep);\r\n\r\n\t\tif (scrollLeft || scrollTop) {\r\n\t\t\tscroll(scrollLeft, scrollTop);\r\n\t\t} \r\n\r\n\t}\r\n\r\n\tfunction need_scroll(pos, boxSize, startCoord) {\r\n\t\tif ((pos - scrollRange < 0) && (pos < startCoord))\r\n\t\t\treturn -1;\r\n\t\telse if ((pos > boxSize - scrollRange) && (pos > startCoord))\r\n\t\t\treturn 1;\r\n\t\treturn 0;\r\n\t}\r\n\r\n\tfunction scroll(left, top) {\r\n\t\tvar scrollState = gantt.getScrollState();\r\n\r\n\t\tvar scrollLeft = null,\r\n\t\t\tscrollTop = null;\r\n\r\n\t\tif (left) {\r\n\t\t\tscrollLeft = scrollState.x + left;\r\n\t\t\tscrollLeft = Math.min(scrollState.width, scrollLeft);\r\n\t\t\tscrollLeft = Math.max(0, scrollLeft);\r\n\t\t}\r\n\r\n\t\tif (top) {\r\n\t\t\tscrollTop = scrollState.y + top;\r\n\t\t\tscrollTop = Math.min(scrollState.height, scrollTop);\r\n\t\t\tscrollTop = Math.max(0, scrollTop);\r\n\t\t}\r\n\r\n\t\tgantt.scrollTo(scrollLeft, scrollTop);\r\n\t}\r\n\r\n\tgantt.attachEvent(\"onGanttReady\", function() {\r\n\t\tgantt.eventRemove(document.body, \"mousemove\", autoscrollInterval);\r\n\t\tgantt.event(document.body, \"mousemove\", autoscrollInterval);\r\n\t});\r\n\r\n};\n\n/***/ }),\n/* 62 */\n/***/ (function(module, exports) {\n\nfunction createMethod(){\r\n\tvar methods = {};\r\n\tvar isActive = false;\r\n\tfunction disableMethod(methodName, dummyMethod){\r\n\t\tdummyMethod = typeof dummyMethod == \"function\" ? dummyMethod : function(){};\r\n\r\n\t\tif(!methods[methodName]){\r\n\t\t\tmethods[methodName] = this[methodName];\r\n\t\t\tthis[methodName] = dummyMethod;\r\n\t\t}\r\n\t}\r\n\tfunction restoreMethod(methodName){\r\n\t\tif(methods[methodName]){\r\n\t\t\tthis[methodName] = methods[methodName];\r\n\t\t\tmethods[methodName] = null;\r\n\t\t}\r\n\t}\r\n\tfunction disableMethods(methodsHash){\r\n\t\tfor(var i in methodsHash){\r\n\t\t\tdisableMethod.call(this, i, methodsHash[i]);\r\n\t\t}\r\n\t}\r\n\t function restoreMethods(){\r\n\t\tfor(var i in methods){\r\n\t\t\trestoreMethod.call(this, i);\r\n\t\t}\r\n\t}\r\n\r\n\tfunction batchUpdatePayload(callback){\r\n\t\ttry{\r\n\t\t\tcallback();\r\n\t\t}catch(e){\r\n\t\t\twindow.console.error(e);\r\n\t\t}\r\n\t}\r\n\r\n\treturn function batchUpdate(callback, noRedraw) {\r\n\t\tif(isActive){\r\n\t\t\t// batch mode is already active\r\n\t\t\tbatchUpdatePayload(callback);\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tvar call_dp = (this._dp && this._dp.updateMode != \"off\");\r\n\t\tvar dp_mode;\r\n\t\tif (call_dp){\r\n\t\t\tdp_mode = this._dp.updateMode;\r\n\t\t\tthis._dp.setUpdateMode(\"off\");\r\n\t\t}\r\n\r\n\t\t// temporary disable some methods while updating multiple tasks\r\n\t\tvar resetProjects = {};\r\n\t\tvar methods = {\r\n\t\t\t\"render\":true,\r\n\t\t\t\"refreshData\":true,\r\n\t\t\t\"refreshTask\":true,\r\n\t\t\t\"refreshLink\":true,\r\n\t\t\t\"resetProjectDates\":function(task){\r\n\t\t\t\tresetProjects[task.id] = task;\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\tdisableMethods.call(this, methods);\r\n\r\n\t\tisActive = true;\r\n\t\tthis.callEvent(\"onBeforeBatchUpdate\", []);\r\n\r\n\t\tbatchUpdatePayload(callback);\r\n\r\n\t\tthis.callEvent(\"onAfterBatchUpdate\", []);\r\n\r\n\t\trestoreMethods.call(this);\r\n\r\n\t\t// do required updates after changes applied\r\n\t\tfor(var i in resetProjects){\r\n\t\t\tthis.resetProjectDates(resetProjects[i]);\r\n\t\t}\r\n\r\n\t\tisActive = false;\r\n\r\n\t\tif(!noRedraw){\r\n\t\t\tthis.render();\r\n\t\t}\r\n\r\n\t\tif (call_dp) {\r\n\t\t\tthis._dp.setUpdateMode(dp_mode);\r\n\t\t\tthis._dp.setGanttMode(\"tasks\");\r\n\t\t\tthis._dp.sendData();\r\n\t\t\tthis._dp.setGanttMode(\"links\");\r\n\t\t\tthis._dp.sendData();\r\n\t\t}\r\n\t};\r\n}\r\n\r\nmodule.exports = function(gantt){\r\n\tgantt.batchUpdate = createMethod();\r\n};\n\n/***/ }),\n/* 63 */\n/***/ (function(module, exports) {\n\nvar createWbs = (function(gantt){\r\n\treturn {\r\n\t_needRecalc: true,\r\n\treset: function(){\r\n\t\tthis._needRecalc = true;\r\n\t},\r\n\t_isRecalcNeeded: function(){\r\n\t\treturn (!this._isGroupSort() && this._needRecalc);\r\n\t},\r\n\t_isGroupSort: function() {\r\n\t\treturn !!(gantt._groups && gantt._groups.is_active());\r\n\t},\r\n\t_getWBSCode: function(task) {\r\n\t\tif(!task) return \"\";\r\n\r\n\t\tif(this._isRecalcNeeded()){\r\n\t\t\tthis._calcWBS();\r\n\t\t}\r\n\r\n\t\tif(task.$virtual) return \"\";\r\n\t\tif(this._isGroupSort()) return task.$wbs || \"\";\r\n\r\n\t\tif(!task.$wbs) {\r\n\t\t\tthis.reset();\r\n\t\t\tthis._calcWBS();\r\n\t\t}\r\n\t\treturn task.$wbs;\r\n\t},\r\n\t_setWBSCode: function(task, value) {\r\n\t\ttask.$wbs = value;\r\n\t},\r\n\tgetWBSCode: function(task) {\r\n\t\treturn this._getWBSCode(task);\r\n\t},\r\n\t_calcWBS: function() {\r\n\t\tif(!this._isRecalcNeeded()) return;\r\n\r\n\t\tvar _isFirst = true;\r\n\t\tgantt.eachTask(function(ch) {\r\n\t\t\tif(_isFirst) {\r\n\t\t\t\t_isFirst = false;\r\n\t\t\t\tthis._setWBSCode(ch, \"1\");\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tvar _prevSibling = gantt.getPrevSibling(ch.id);\r\n\t\t\tif (_prevSibling !== null) {\r\n\t\t\t\tvar _wbs = gantt.getTask(_prevSibling).$wbs;\r\n\t\t\t\tif(_wbs) {\r\n\t\t\t\t\t_wbs = _wbs.split(\".\");\r\n\t\t\t\t\t_wbs[_wbs.length-1]++;\r\n\t\t\t\t\tthis._setWBSCode(ch, _wbs.join(\".\"));\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tvar _parent = gantt.getParent(ch.id);\r\n\t\t\t\tthis._setWBSCode(ch, gantt.getTask(_parent).$wbs + \".1\");\r\n\t\t\t}\r\n\t\t}, gantt.config.root_id, this);\r\n\r\n\t\tthis._needRecalc = false;\r\n\t}\r\n};\r\n});\r\n\r\nmodule.exports = function(gantt){\r\n\tvar wbs = createWbs(gantt);\r\n\tgantt.getWBSCode = function getWBSCode(task) {\r\n\t\treturn wbs.getWBSCode(task);\r\n\t};\r\n\r\n\tgantt.attachEvent(\"onAfterTaskMove\", function() {\r\n\t\twbs.reset();\r\n\t\treturn true;\r\n\t});\r\n\r\n\tgantt.attachEvent(\"onBeforeParse\", function() {\r\n\t\twbs.reset();\r\n\t\treturn true;\r\n\t});\r\n\r\n\tgantt.attachEvent(\"onAfterTaskDelete\", function() {\r\n\t\twbs.reset();\r\n\t\treturn true;\r\n\t});\r\n\r\n\tgantt.attachEvent(\"onAfterTaskAdd\", function() {\r\n\t\twbs.reset();\r\n\t\treturn true;\r\n\t});\r\n};\r\n\n\n/***/ }),\n/* 64 */\n/***/ (function(module, exports) {\n\nif (window.jQuery){\r\n\r\n\t(function( $ ){\r\n\r\n\t\tvar methods = [];\r\n\t\t$.fn.dhx_gantt = function(config){\r\n\t\t\tconfig = config || {};\r\n\t\t\tif (typeof(config) === 'string') {\r\n\t\t\t\tif (methods[config] ) {\r\n\t\t\t\t\treturn methods[config].apply(this, []);\r\n\t\t\t\t}else {\r\n\t\t\t\t\t$.error('Method ' +  config + ' does not exist on jQuery.dhx_gantt');\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tvar views = [];\r\n\t\t\t\tthis.each(function() {\r\n\t\t\t\t\tif (this && this.getAttribute){\r\n\t\t\t\t\t\tif (!this.gantt && !(window.gantt.$root == this)){\r\n\r\n\t\t\t\t\t\t\tvar newgantt = (window.gantt.$container && window.Gantt) ? window.Gantt.getGanttInstance():window.gantt;\r\n\t\t\t\t\t\t\tfor (var key in config)\r\n\t\t\t\t\t\t\t\tif (key!=\"data\")\r\n\t\t\t\t\t\t\t\t\tnewgantt.config[key] = config[key];\r\n\r\n\t\t\t\t\t\t\tnewgantt.init(this);\r\n\t\t\t\t\t\t\tif (config.data)\r\n\t\t\t\t\t\t\t\tnewgantt.parse(config.data);\r\n\r\n\t\t\t\t\t\t\tviews.push(newgantt);\r\n\t\t\t\t\t\t} else\r\n\t\t\t\t\t\t\tviews.push(typeof this.gantt == \"object\" ? this.gantt : window.gantt);\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\r\n\r\n\t\t\t\tif (views.length === 1) return views[0];\r\n\t\t\t\treturn views;\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t})(jQuery);\r\n\r\n}\r\n\r\n\r\nmodule.exports = null;\n\n/***/ }),\n/* 65 */\n/***/ (function(module, exports) {\n\nif (window.dhtmlx){\r\n\r\n\tif (!dhtmlx.attaches)\r\n\t\tdhtmlx.attaches = {};\r\n\r\n\tdhtmlx.attaches.attachGantt=function(start, end, gantt){\r\n\t\tvar obj = document.createElement(\"DIV\");\r\n\r\n\t\tgantt = gantt || window.gantt;\r\n\r\n\t\tobj.id = \"gantt_\"+ gantt.uid();\r\n\t\tobj.style.width = \"100%\";\r\n\t\tobj.style.height = \"100%\";\r\n\t\tobj.cmp = \"grid\";\r\n\r\n\t\tdocument.body.appendChild(obj);\r\n\t\tthis.attachObject(obj.id);\r\n\t\tthis.dataType = \"gantt\";\r\n\t\tthis.dataObj = gantt;\r\n\r\n\t\tvar that = this.vs[this.av];\r\n\t\tthat.grid = gantt;\r\n\r\n\t\tgantt.init(obj.id, start, end);\r\n\t\tobj.firstChild.style.border = \"none\";\r\n\r\n\t\tthat.gridId = obj.id;\r\n\t\tthat.gridObj = obj;\r\n\r\n\t\tvar method_name=\"_viewRestore\";\r\n\t\treturn this.vs[this[method_name]()].grid;\r\n\t};\r\n\r\n}\r\nif (typeof(window.dhtmlXCellObject) != \"undefined\") {\r\n\r\n\tdhtmlXCellObject.prototype.attachGantt=function(start, end, gantt){\r\n\t\tgantt = gantt || window.gantt;\r\n\r\n\t\tvar obj = document.createElement(\"DIV\");\r\n\t\tobj.id = \"gantt_\"+gantt.uid();\r\n\t\tobj.style.width = \"100%\";\r\n\t\tobj.style.height = \"100%\";\r\n\t\tobj.cmp = \"grid\";\r\n\r\n\t\tdocument.body.appendChild(obj);\r\n\t\tthis.attachObject(obj.id);\r\n\r\n\t\tthis.dataType = \"gantt\";\r\n\t\tthis.dataObj = gantt;\r\n\r\n\t\tgantt.init(obj.id, start, end);\r\n\t\tobj.firstChild.style.border = \"none\";\r\n\t\tvar method_name=\"_viewRestore\";\r\n\t\tobj = null;\r\n\t\tthis.callEvent(\"_onContentAttach\",[]);\r\n\r\n\t\treturn this.dataObj;\r\n\t};\r\n}\r\n\r\nmodule.exports = null;\n\n/***/ }),\n/* 66 */\n/***/ (function(module, exports) {\n\nmodule.exports = function(gantt) {\r\n};\n\n/***/ }),\n/* 67 */\n/***/ (function(module, exports) {\n\nmodule.exports = function(gantt) {\r\n\tgantt.getGridColumn = function (name) {\r\n\t\tvar columns = gantt.config.columns;\r\n\r\n\t\tfor (var i = 0; i < columns.length; i++) {\r\n\t\t\tif (columns[i].name == name)\r\n\t\t\t\treturn columns[i];\r\n\t\t}\r\n\r\n\t\treturn null;\r\n\t};\r\n};\n\n/***/ }),\n/* 68 */\n/***/ (function(module, exports) {\n\nmodule.exports = function(gantt){\r\n\r\n\tvar htmlTags = new RegExp(\"<(?:.|\\n)*?>\", \"gm\");\r\n\tvar extraSpaces = new RegExp(\" +\", \"gm\");\r\n\r\n\tfunction stripHTMLLite(htmlText){\r\n\t\treturn (htmlText + \"\")\r\n\t\t\t.replace(htmlTags, \" \").\r\n\t\t\treplace(extraSpaces, \" \");\r\n\t}\r\n\r\n\tvar singleQuotes = new RegExp(\"'\", \"gm\");\r\n\tfunction escapeQuotes(text){\r\n\t\treturn (text + \"\").replace(singleQuotes, \"&#39;\");\r\n\t}\r\n\r\n\tgantt._waiAria = {\r\n\t\tgetAttributeString: function(attr){\r\n\t\t\tvar attributes = [\" \"];\r\n\t\t\tfor(var i in attr){\r\n\t\t\t\tvar text = escapeQuotes(stripHTMLLite(attr[i]));\r\n\t\t\t\tattributes.push(i + \"='\" + text + \"'\");\r\n\t\t\t}\r\n\t\t\tattributes.push(\" \");\r\n\t\t\treturn attributes.join(\" \");\r\n\r\n\t\t},\r\n\r\n\t\tgetTimelineCellAttr:function(dateString){\r\n\r\n\t\t\treturn gantt._waiAria.getAttributeString({\"aria-label\": dateString});\r\n\t\t},\r\n\r\n\r\n\t\t_taskCommonAttr: function(task, div){\r\n\r\n\t\t\tif(!(task.start_date && task.end_date))\r\n\t\t\t\treturn;\r\n\r\n\t\t\tdiv.setAttribute(\"aria-label\", stripHTMLLite(gantt.templates.tooltip_text(task.start_date, task.end_date, task)));\r\n\r\n\t\t\tif(gantt.isReadonly(task)){\r\n\t\t\t\tdiv.setAttribute(\"aria-readonly\", true);\r\n\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif(task.$dataprocessor_class){\r\n\t\t\t\tdiv.setAttribute(\"aria-busy\", true);\r\n\t\t\t}\r\n\r\n\r\n\t\t\tdiv.setAttribute(\"aria-selected\",\r\n\t\t\t\t(gantt.getState().selected_task == task.id || (gantt.isSelectedTask && gantt.isSelectedTask(task.id))) ? \"true\" : \"false\");\r\n\t\t},\r\n\r\n\t\tsetTaskBarAttr: function(task, div){\r\n\t\t\tthis._taskCommonAttr(task, div);\r\n\r\n\t\t\tif(!gantt.isReadonly(task) && gantt.config.drag_move){\r\n\t\t\t\tif(task.id != gantt.getState().drag_id){\r\n\t\t\t\t\tdiv.setAttribute(\"aria-grabbed\", false);\r\n\t\t\t\t}else{\r\n\t\t\t\t\tdiv.setAttribute(\"aria-grabbed\", true);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\ttaskRowAttr: function(task, div){\r\n\r\n\t\t\tthis._taskCommonAttr(task, div);\r\n\r\n\t\t\tif(!gantt.isReadonly(task) && gantt.config.order_branch){\r\n\t\t\t\tdiv.setAttribute(\"aria-grabbed\", false);\r\n\t\t\t}\r\n\r\n\t\t\tdiv.setAttribute(\"role\", \"row\");\r\n\r\n\t\t\tdiv.setAttribute(\"aria-level\", task.$level);\r\n\r\n\t\t\tif(gantt.hasChild(task.id)){\r\n\t\t\t\tdiv.setAttribute(\"aria-expanded\", task.$open ? \"true\" : \"false\");\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\tlinkAttr: function(link, div){\r\n\r\n\t\t\tvar linkTypes = gantt.config.links;\r\n\r\n\t\t\tvar toStart = link.type == linkTypes.finish_to_start || link.type == linkTypes.start_to_start;\r\n\t\t\tvar fromStart = link.type == linkTypes.start_to_start || link.type == linkTypes.start_to_finish;\r\n\r\n\t\t\tvar content = gantt.locale.labels.link + \" \" +  gantt.templates.drag_link(link.source, fromStart, link.target, toStart);\r\n\r\n\t\t\tdiv.setAttribute(\"aria-label\", stripHTMLLite(content));\r\n\t\t\tif(gantt.isReadonly(link)){\r\n\t\t\t\tdiv.setAttribute(\"aria-readonly\", true);\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\tgridSeparatorAttr: function(div){\r\n\t\t\tdiv.setAttribute(\"role\", \"separator\");\r\n\t\t},\r\n\r\n\t\tlightboxHiddenAttr: function(div){\r\n\t\t\tdiv.setAttribute(\"aria-hidden\", \"true\");\r\n\t\t},\r\n\r\n\t\tlightboxVisibleAttr: function(div){\r\n\t\t\tdiv.setAttribute(\"aria-hidden\", \"false\");\r\n\t\t},\r\n\r\n\t\tlightboxAttr: function(div){\r\n\t\t\tdiv.setAttribute(\"role\", \"dialog\");\r\n\t\t\tdiv.setAttribute(\"aria-hidden\", \"true\");\r\n\t\t\tdiv.firstChild.setAttribute(\"role\", \"heading\");\r\n\t\t},\r\n\r\n\t\tlightboxButtonAttrString:function(buttonName){\r\n\t\t\treturn this.getAttributeString({\"role\":\"button\", \"aria-label\":gantt.locale.labels[buttonName], \"tabindex\":\"0\"});\r\n\t\t},\r\n\r\n\t\tlightboxHeader: function(div, headerText){\r\n\t\t\tdiv.setAttribute(\"aria-label\", headerText);\r\n\t\t},\r\n\r\n\t\tlightboxSelectAttrString: function(time_option){\r\n\t\t\tvar label = \"\";\r\n\r\n\t\t\tswitch (time_option) {\r\n\t\t\t\tcase \"%Y\":\r\n\t\t\t\t\tlabel = gantt.locale.labels.years;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase \"%m\":\r\n\t\t\t\t\tlabel = gantt.locale.labels.months;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase \"%d\":\r\n\t\t\t\t\tlabel = gantt.locale.labels.days;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase \"%H:%i\":\r\n\t\t\t\t\tlabel = gantt.locale.labels.hours + gantt.locale.labels.minutes;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tdefault:\r\n\t\t\t\t\tbreak;\r\n\t\t\t}\r\n\r\n\t\t\treturn gantt._waiAria.getAttributeString({\"aria-label\": label});\r\n\t\t},\r\n\r\n\t\tlightboxDurationInputAttrString: function(section){\r\n\t\t\treturn this.getAttributeString({\"aria-label\": gantt.locale.labels.column_duration, \"aria-valuemin\": \"0\"});\r\n\t\t},\r\n\r\n\t\tgridAttrString: function(){\r\n\t\t\treturn [\" role='treegrid'\", gantt.config.multiselect ? \"aria-multiselectable='true'\" : \"aria-multiselectable='false'\", \" \"].join(\" \");\r\n\t\t},\r\n\r\n\r\n\t\tgridScaleRowAttrString: function(){\r\n\t\t\treturn \"role='row'\";\r\n\t\t},\r\n\r\n\t\tgridScaleCellAttrString: function(column, label){\r\n\t\t\tvar attrs = \"\";\r\n\t\t\tif(column.name == \"add\"){\r\n\t\t\t\tattrs = this.getAttributeString({\"role\":\"button\", \"aria-label\": gantt.locale.labels.new_task});\r\n\t\t\t}else{\r\n\r\n\t\t\t\tvar attributes = {\r\n\t\t\t\t\t\"role\":\"columnheader\",\r\n\t\t\t\t\t\"aria-label\": label\r\n\t\t\t\t};\r\n\r\n\t\t\t\tif(gantt._sort && gantt._sort.name == column.name){\r\n\t\t\t\t\tif(gantt._sort.direction == \"asc\"){\r\n\t\t\t\t\t\tattributes[\"aria-sort\"] = \"ascending\";\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\tattributes[\"aria-sort\"] = \"descending\";\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tattrs = this.getAttributeString(attributes);\r\n\t\t\t}\r\n\t\t\treturn attrs;\r\n\t\t},\r\n\r\n\t\tgridDataAttrString: function(){\r\n\t\t\treturn \"role='rowgroup'\";\r\n\t\t},\r\n\r\n\t\tgridCellAttrString: function(column, textValue){\r\n\t\t\treturn this.getAttributeString({\"role\":\"gridcell\", \"aria-label\": textValue});\r\n\t\t},\r\n\r\n\t\tgridAddButtonAttrString: function(column){\r\n\t\t\treturn this.getAttributeString({\"role\":\"button\", \"aria-label\": gantt.locale.labels.new_task});\r\n\t\t},\r\n\r\n\t\tmessageButtonAttrString: function(buttonLabel){\r\n\t\t\treturn \"tabindex='0' role='button' aria-label='\"+buttonLabel+\"'\";\r\n\t\t},\r\n\r\n\t\tmessageInfoAttr: function(div){\r\n\t\t\tdiv.setAttribute(\"role\", \"alert\");\r\n\t\t\t//div.setAttribute(\"tabindex\", \"-1\");\r\n\t\t},\r\n\r\n\t\tmessageModalAttr: function(div, uid){\r\n\t\t\tdiv.setAttribute(\"role\", \"dialog\");\r\n\t\t\tif(uid){\r\n\t\t\t\tdiv.setAttribute(\"aria-labelledby\", uid);\r\n\t\t\t}\r\n\r\n\t\t//\tdiv.setAttribute(\"tabindex\", \"-1\");\r\n\t\t},\r\n\r\n\t\tquickInfoAttr: function(div){\r\n\t\t\tdiv.setAttribute(\"role\", \"dialog\");\r\n\t\t},\r\n\r\n\t\tquickInfoHeaderAttrString: function(){\r\n\t\t\treturn \" role='heading' \";\r\n\t\t},\r\n\r\n\t\tquickInfoHeader: function(div, header){\r\n\t\t\tdiv.setAttribute(\"aria-label\", header);\r\n\t\t},\r\n\r\n\t\tquickInfoButtonAttrString: function(label){\r\n\t\t\treturn gantt._waiAria.getAttributeString({\"role\":\"button\", \"aria-label\":label, \"tabindex\":\"0\"});\r\n\t\t},\r\n\r\n\t\ttooltipAttr: function(div){\r\n\t\t\tdiv.setAttribute(\"role\", \"tooltip\");\r\n\t\t},\r\n\r\n\t\ttooltipVisibleAttr: function(div){\r\n\t\t\tdiv.setAttribute(\"aria-hidden\", \"false\");\r\n\t\t},\r\n\r\n\t\ttooltipHiddenAttr: function(div){\r\n\t\t\tdiv.setAttribute(\"aria-hidden\", \"true\");\r\n\t\t}\r\n\t};\r\n\r\n\tfunction isDisabled(){\r\n\t\treturn !gantt.config.wai_aria_attributes;\r\n\t}\r\n\r\n\tfor(var i in gantt._waiAria){\r\n\t\tgantt._waiAria[i] = (function(payload){\r\n\t\t\treturn function(){\r\n\t\t\t\tif(isDisabled()){\r\n\t\t\t\t\treturn \"\";\r\n\t\t\t\t}\r\n\t\t\t\treturn payload.apply(this, arguments);\r\n\t\t\t};\r\n\t\t})(gantt._waiAria[i]);\r\n\t}\r\n\r\n\r\n};\n\n/***/ }),\n/* 69 */\n/***/ (function(module, exports) {\n\nmodule.exports = function(gantt) {\r\n\tgantt._is_chart_visible = function () {\r\n\t\treturn !!this.config.show_chart;\r\n\t};\r\n\r\n\r\n\r\n\tgantt._get_links_data = function () {\r\n\t\treturn this.$data.linksStore.getVisibleItems();\r\n\t};\r\n\r\n\r\n\r\n\r\n\tgantt.isReadonly = function (item) {\r\n\t\tif (item && item[this.config.editable_property]) {\r\n\t\t\treturn false;\r\n\t\t} else {\r\n\t\t\treturn (item && item[this.config.readonly_property]) || this.config.readonly;\r\n\t\t}\r\n\t};\r\n\r\n\tgantt._get_line = function (step) {\r\n\t\tvar steps = {\r\n\t\t\t\"second\": 1,\r\n\t\t\t\"minute\": 60,\r\n\t\t\t\"hour\": 60 * 60,\r\n\t\t\t\"day\": 60 * 60 * 24,\r\n\t\t\t\"week\": 60 * 60 * 24 * 7,\r\n\t\t\t\"month\": 60 * 60 * 24 * 30,\r\n\t\t\t\"quarter\": 60 * 60 * 24 * 30 * 3,\r\n\t\t\t\"year\": 60 * 60 * 24 * 365\r\n\t\t};\r\n\t\treturn steps[step] || steps.hour;\r\n\t};\r\n\r\n};\n\n/***/ }),\n/* 70 */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar utils = __webpack_require__(0);\r\n\r\nmodule.exports = function(gantt) {\r\n\r\n\tgantt.load = function (url, type, callback) {\r\n\t\tthis._load_url = url;\r\n\t\tthis.assert(arguments.length, \"Invalid load arguments\");\r\n\r\n\t\tvar tp = 'json', cl = null;\r\n\t\tif (arguments.length >= 3) {\r\n\t\t\ttp = type;\r\n\t\t\tcl = callback;\r\n\t\t} else {\r\n\t\t\tif (typeof arguments[1] == \"string\")\r\n\t\t\t\ttp = arguments[1];\r\n\t\t\telse if (typeof arguments[1] == \"function\")\r\n\t\t\t\tcl = arguments[1];\r\n\t\t}\r\n\r\n\t\tthis._load_type = tp;\r\n\r\n\t\tthis.callEvent(\"onLoadStart\", [url, tp]);\r\n\r\n\t\tthis.ajax.get(url, gantt.bind(function (l) {\r\n\t\t\tthis.on_load(l, tp);\r\n\t\t\tthis.callEvent(\"onLoadEnd\", [url, tp]);\r\n\t\t\tif (typeof cl == \"function\")\r\n\t\t\t\tcl.call(this);\r\n\t\t}, this));\r\n\t};\r\n\tgantt.parse = function (data, type) {\r\n\t\tthis.on_load({xmlDoc: {responseText: data}}, type);\r\n\t};\r\n\r\n\tgantt.serialize = function (type) {\r\n\t\ttype = type || \"json\";\r\n\t\treturn this[type].serialize();\r\n\t};\r\n\r\n\t/*\r\n\ttasks and relations\r\n\t{\r\n\tdata:[\r\n\t\t{\r\n\t\t\t\"id\":\"string\",\r\n\t\t\t\"text\":\"...\",\r\n\t\t\t\"start_date\":\"Date or string\",\r\n\t\t\t\"end_date\":\"Date or string\",\r\n\t\t\t\"duration\":\"number\",\r\n\t\t\t\"progress\":\"0..1\",\r\n\t\t\t\"parent_id\":\"string\",\r\n\t\t\t\"order\":\"number\"\r\n\t\t},...],\r\n\tlinks:[\r\n\t\t{\r\n\t\t\tid:\"string\",\r\n\t\t\tsource:\"string\",\r\n\t\t\ttarget:\"string\",\r\n\t\t\ttype:\"string\"\r\n\t\t},...],\r\n\tcollections:{\r\n\t\t\tcollectionName:[\r\n\t\t\t\t{key:, label:, optional:...},...\r\n\t\t\t],...\r\n\t\t}\r\n\t}\r\n\r\n\t* */\r\n\r\n\tgantt.on_load = function (resp, type) {\r\n\t\tthis.callEvent(\"onBeforeParse\", []);\r\n\t\tif (!type)\r\n\t\t\ttype = \"json\";\r\n\t\tthis.assert(this[type], \"Invalid data type:'\" + type + \"'\");\r\n\r\n\t\tvar raw = resp.xmlDoc.responseText;\r\n\r\n\t\tvar data = this[type].parse(raw, resp);\r\n\t\tthis._process_loading(data);\r\n\t};\r\n\r\n\tgantt._process_loading = function (data) {\r\n\t\tif(data.collections)\r\n\t\t\tthis._load_collections(data.collections);\r\n\r\n\t\tthis.$data.tasksStore.parse(data.data);\r\n\t\tvar links = data.links || (data.collections ? data.collections.links : []);\r\n\t\tthis.$data.linksStore.parse(links);\r\n\r\n\t\t//this._sync_links();\r\n\t\tthis.callEvent(\"onParse\", []);\r\n\t\tthis.render();\r\n\t\tif(this.config.initial_scroll){\r\n\t\t\tvar firstTask = this.getTaskByIndex(0);\r\n\t\t\tvar id = firstTask ? firstTask.id : this.config.root_id;\r\n\t\t\tif(id)\r\n\t\t\t\tthis.showTask(id);\r\n\t\t}\r\n\t};\r\n\r\n\r\n\tgantt._load_collections = function (collections) {\r\n\t\tvar collections_loaded = false;\r\n\t\tfor (var key in collections) {\r\n\t\t\tif (collections.hasOwnProperty(key)) {\r\n\t\t\t\tcollections_loaded = true;\r\n\t\t\t\tvar collection = collections[key];\r\n\t\t\t\tvar arr = this.serverList[key];\r\n\t\t\t\tif (!arr) continue;\r\n\t\t\t\tarr.splice(0, arr.length); //clear old options\r\n\t\t\t\tfor (var j = 0; j < collection.length; j++) {\r\n\t\t\t\t\tvar option = collection[j];\r\n\t\t\t\t\tvar obj = this.copy(option);\r\n\t\t\t\t\tobj.key = obj.value;// resulting option object\r\n\r\n\t\t\t\t\tfor (var option_key in option) {\r\n\t\t\t\t\t\tif (option.hasOwnProperty(option_key)) {\r\n\t\t\t\t\t\t\tif (option_key == \"value\" || option_key == \"label\")\r\n\t\t\t\t\t\t\t\tcontinue;\r\n\t\t\t\t\t\t\tobj[option_key] = option[option_key]; // obj['value'] = option['value']\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tarr.push(obj);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (collections_loaded)\r\n\t\t\tthis.callEvent(\"onOptionsLoad\", []);\r\n\t};\r\n\r\n\tgantt.attachEvent(\"onBeforeTaskDisplay\", function (id, task) {\r\n\t\treturn !task.$ignore;\r\n\t});\r\n\r\n\tgantt.json = {\r\n\t\tparse: function (data) {\r\n\t\t\tgantt.assert(data, \"Invalid data\");\r\n\r\n\t\t\tif (typeof data == \"string\") {\r\n\t\t\t\tif (window.JSON)\r\n\t\t\t\t\tdata = JSON.parse(data);\r\n\t\t\t\telse {\r\n\t\t\t\t\tgantt.assert(false, \"JSON is not supported\");\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tif (data.dhx_security)\r\n\t\t\t\tgantt.security_key = data.dhx_security;\r\n\t\t\treturn data;\r\n\t\t},\r\n\t\tserializeTask: function (task) {\r\n\t\t\treturn this._copyObject(task);\r\n\t\t},\r\n\t\tserializeLink: function (link) {\r\n\t\t\treturn this._copyLink(link);\r\n\t\t},\r\n\t\t_copyLink: function (obj) {\r\n\t\t\tvar copy = {};\r\n\t\t\tfor (var key in obj)\r\n\t\t\t\tcopy[key] = obj[key];\r\n\t\t\treturn copy;\r\n\t\t},\r\n\t\t_copyObject: function (obj) {\r\n\t\t\tvar copy = {};\r\n\t\t\tfor (var key in obj) {\r\n\t\t\t\tif (key.charAt(0) == \"$\")\r\n\t\t\t\t\tcontinue;\r\n\t\t\t\tcopy[key] = obj[key];\r\n\r\n\t\t\t\tif (copy[key] instanceof Date) {\r\n\t\t\t\t\tcopy[key] = gantt.templates.xml_format(copy[key]);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn copy;\r\n\t\t},\r\n\t\tserialize: function () {\r\n\t\t\tvar tasks = [];\r\n\t\t\tvar links = [];\r\n\r\n\t\t\tgantt.eachTask(function (obj) {\r\n\t\t\t\tgantt.resetProjectDates(obj);\r\n\t\t\t\ttasks.push(this.serializeTask(obj));\r\n\t\t\t}, gantt.config.root_id, this);\r\n\r\n\t\t\tvar rawLinks = gantt.getLinks();\r\n\t\t\tfor (var i = 0; i < rawLinks.length; i++) {\r\n\t\t\t\tlinks.push(this.serializeLink(rawLinks[i]));\r\n\t\t\t}\r\n\r\n\t\t\treturn {\r\n\t\t\t\tdata: tasks,\r\n\t\t\t\tlinks: links\r\n\t\t\t};\r\n\t\t}\r\n\t};\r\n\r\n\t/*\r\n\t<data>\r\n\t\t<task id:\"some\" parent_id=\"0\" progress=\"0.5\">\r\n\t\t\t<text>My task 1</text>\r\n\t\t\t<start_date>16.08.2013</start_date>\r\n\t\t\t<end_date>22.08.2013</end_date>\r\n\t\t</task>\r\n\t\t<coll_options>\r\n\t\t\t<links>\r\n\t\t\t\t<link source='a1' target='b2' type='c3' />\r\n\t\t\t</links>\r\n\t\t</coll_options>\r\n\t</data>\r\n\t*/\r\n\r\n\tgantt.xml = {\r\n\t\t_xmlNodeToJSON: function (node, attrs_only) {\r\n\t\t\tvar t = {};\r\n\t\t\tfor (var i = 0; i < node.attributes.length; i++)\r\n\t\t\t\tt[node.attributes[i].name] = node.attributes[i].value;\r\n\r\n\t\t\tif (!attrs_only) {\r\n\t\t\t\tfor (var i = 0; i < node.childNodes.length; i++) {\r\n\t\t\t\t\tvar child = node.childNodes[i];\r\n\t\t\t\t\tif (child.nodeType == 1)\r\n\t\t\t\t\t\tt[child.tagName] = child.firstChild ? child.firstChild.nodeValue : \"\";\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (!t.text) t.text = node.firstChild ? node.firstChild.nodeValue : \"\";\r\n\t\t\t}\r\n\r\n\t\t\treturn t;\r\n\t\t},\r\n\t\t_getCollections: function (loader) {\r\n\t\t\tvar collection = {};\r\n\t\t\tvar opts = gantt.ajax.xpath(\"//coll_options\", loader);\r\n\t\t\tfor (var i = 0; i < opts.length; i++) {\r\n\t\t\t\tvar bind = opts[i].getAttribute(\"for\");\r\n\t\t\t\tvar arr = collection[bind] = [];\r\n\t\t\t\tvar itms = gantt.ajax.xpath(\".//item\", opts[i]);\r\n\t\t\t\tfor (var j = 0; j < itms.length; j++) {\r\n\t\t\t\t\tvar itm = itms[j];\r\n\t\t\t\t\tvar attrs = itm.attributes;\r\n\t\t\t\t\tvar obj = {key: itms[j].getAttribute(\"value\"), label: itms[j].getAttribute(\"label\")};\r\n\t\t\t\t\tfor (var k = 0; k < attrs.length; k++) {\r\n\t\t\t\t\t\tvar attr = attrs[k];\r\n\t\t\t\t\t\tif (attr.nodeName == \"value\" || attr.nodeName == \"label\")\r\n\t\t\t\t\t\t\tcontinue;\r\n\t\t\t\t\t\tobj[attr.nodeName] = attr.nodeValue;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tarr.push(obj);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn collection;\r\n\t\t},\r\n\t\t_getXML: function (text, loader, toptag) {\r\n\t\t\ttoptag = toptag || \"data\";\r\n\t\t\tif (!loader.getXMLTopNode) {\r\n\t\t\t\tloader = gantt.ajax.parse(loader);\r\n\t\t\t}\r\n\r\n\t\t\tvar xml = gantt.ajax.xmltop(toptag, loader.xmlDoc);\r\n\t\t\tif (xml.tagName != toptag) throw \"Invalid XML data\";\r\n\r\n\t\t\tvar skey = xml.getAttribute(\"dhx_security\");\r\n\t\t\tif (skey)\r\n\t\t\t\tgantt.security_key = skey;\r\n\r\n\t\t\treturn xml;\r\n\t\t},\r\n\t\tparse: function (text, loader) {\r\n\t\t\tloader = this._getXML(text, loader);\r\n\t\t\tvar data = {};\r\n\r\n\t\t\tvar evs = data.data = [];\r\n\t\t\tvar xml = gantt.ajax.xpath(\"//task\", loader);\r\n\r\n\t\t\tfor (var i = 0; i < xml.length; i++)\r\n\t\t\t\tevs[i] = this._xmlNodeToJSON(xml[i]);\r\n\r\n\t\t\tdata.collections = this._getCollections(loader);\r\n\t\t\treturn data;\r\n\t\t},\r\n\t\t_copyLink: function (obj) {\r\n\t\t\treturn \"<item id='\" + obj.id + \"' source='\" + obj.source + \"' target='\" + obj.target + \"' type='\" + obj.type + \"' />\";\r\n\t\t},\r\n\t\t_copyObject: function (obj) {\r\n\t\t\treturn \"<task id='\" + obj.id + \"' parent='\" + (obj.parent || \"\") + \"' start_date='\" + obj.start_date + \"' duration='\" + obj.duration + \"' open='\" + (!!obj.open) + \"' progress='\" + obj.progress + \"' end_date='\" + obj.end_date + \"'><![CDATA[\" + obj.text + \"]]></task>\";\r\n\t\t},\r\n\t\tserialize: function () {\r\n\t\t\tvar tasks = [];\r\n\t\t\tvar links = [];\r\n\r\n\t\t\tvar json = gantt.json.serialize();\r\n\t\t\tfor (var i = 0, len = json.data.length; i < len; i++) {\r\n\t\t\t\ttasks.push(this._copyObject(json.data[i]));\r\n\t\t\t}\r\n\t\t\tfor (var i = 0, len = json.links.length; i < len; i++) {\r\n\t\t\t\tlinks.push(this._copyLink(json.links[i]));\r\n\t\t\t}\r\n\t\t\treturn \"<data>\" + tasks.join(\"\") + \"<coll_options for='links'>\" + links.join(\"\") + \"</coll_options></data>\";\r\n\t\t}\r\n\t};\r\n\r\n\r\n\tgantt.oldxml = {\r\n\t\tparse: function (text, loader) {\r\n\t\t\tloader = gantt.xml._getXML(text, loader, \"projects\");\r\n\t\t\tvar data = {collections: {links: []}};\r\n\r\n\t\t\tvar evs = data.data = [];\r\n\t\t\tvar xml = gantt.ajax.xpath(\"//task\", loader);\r\n\r\n\t\t\tfor (var i = 0; i < xml.length; i++) {\r\n\t\t\t\tevs[i] = gantt.xml._xmlNodeToJSON(xml[i]);\r\n\t\t\t\tvar parent = xml[i].parentNode;\r\n\r\n\t\t\t\tif (parent.tagName == \"project\")\r\n\t\t\t\t\tevs[i].parent = \"project-\" + parent.getAttribute(\"id\");\r\n\t\t\t\telse\r\n\t\t\t\t\tevs[i].parent = parent.parentNode.getAttribute(\"id\");\r\n\t\t\t}\r\n\r\n\t\t\txml = gantt.ajax.xpath(\"//project\", loader);\r\n\t\t\tfor (var i = 0; i < xml.length; i++) {\r\n\t\t\t\tvar ev = gantt.xml._xmlNodeToJSON(xml[i], true);\r\n\t\t\t\tev.id = \"project-\" + ev.id;\r\n\t\t\t\tevs.push(ev);\r\n\t\t\t}\r\n\r\n\t\t\tfor (var i = 0; i < evs.length; i++) {\r\n\t\t\t\tvar ev = evs[i];\r\n\t\t\t\tev.start_date = ev.startdate || ev.est;\r\n\t\t\t\tev.end_date = ev.enddate;\r\n\t\t\t\tev.text = ev.name;\r\n\t\t\t\tev.duration = ev.duration / 8;\r\n\t\t\t\tev.open = 1;\r\n\t\t\t\tif (!ev.duration && !ev.end_date) ev.duration = 1;\r\n\t\t\t\tif (ev.predecessortasks)\r\n\t\t\t\t\tdata.collections.links.push({\r\n\t\t\t\t\t\ttarget: ev.id,\r\n\t\t\t\t\t\tsource: ev.predecessortasks,\r\n\t\t\t\t\t\ttype: gantt.config.links.finish_to_start\r\n\t\t\t\t\t});\r\n\t\t\t}\r\n\r\n\t\t\treturn data;\r\n\t\t},\r\n\t\tserialize: function () {\r\n\t\t\tgantt.message(\"Serialization to 'old XML' is not implemented\");\r\n\t\t}\r\n\t};\r\n\r\n\tgantt.serverList = function (name, array) {\r\n\t\tif (array) {\r\n\t\t\tthis.serverList[name] = array.slice(0);\r\n\t\t} else if (!this.serverList[name]) {\r\n\t\t\tthis.serverList[name] = [];\r\n\t\t}\r\n\t\treturn this.serverList[name];\r\n\t};\r\n\r\n};\n\n/***/ }),\n/* 71 */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar CalendarManager = __webpack_require__(72),\r\n\tTimeCalculator = __webpack_require__(75),\r\n\tworktimeFacadeFactory = __webpack_require__(77),\r\n\tutils = __webpack_require__(0);\r\n\r\nmodule.exports = function (gantt) {\r\n\tvar manager = new CalendarManager(gantt),\r\n\ttimeCalculator = new TimeCalculator(manager);\r\n\tvar facade = worktimeFacadeFactory.create(manager, timeCalculator);\r\n\tutils.mixin(gantt, facade);\r\n};\r\n\n\n/***/ }),\n/* 72 */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar utils = __webpack_require__(0);\r\nvar createArgumentsHelper = __webpack_require__(17);\r\nvar CalendarWorktimeStrategy = __webpack_require__(73);\r\n\r\nfunction CalendarManager (gantt){\r\n\tthis.$gantt = gantt;\r\n\tthis._calendars = {};\r\n}\r\n\r\nCalendarManager.prototype = {\r\n\t_calendars: {},\r\n\t_getDayHoursForMultiple: function (calendars, date) {\r\n\t\tvar units = [],\r\n\t\t\ttick = true,\r\n\t\t\tcurrPos = 0,\r\n\t\t\tis_work_hour = false,\r\n\t\t\tstart = this.$gantt.date.day_start(new Date(date));\r\n\t\tfor (var hour = 0; hour < 24; hour++) {\r\n\t\t\tis_work_hour = calendars.reduce(function (acc, calendar) {\r\n\t\t\t\treturn acc && calendar._is_work_hour(start);\r\n\t\t\t}, true);\r\n\t\t\tif (is_work_hour) {\r\n\t\t\t\tif (tick) {\r\n\t\t\t\t\tunits[currPos] = hour;\r\n\t\t\t\t\tunits[currPos + 1] = (hour + 1);\r\n\t\t\t\t\tcurrPos += 2;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tunits[currPos - 1] += 1;\r\n\t\t\t\t}\r\n\t\t\t\ttick = false;\r\n\t\t\t} else if (!tick) {\r\n\t\t\t\ttick = true;\r\n\t\t\t}\r\n\t\t\tstart = this.$gantt.date.add(start, 1, \"hour\");\r\n\t\t}\r\n\t\tif (!units.length)\r\n\t\t\tunits = false;\r\n\t\treturn units;\r\n\t},\r\n\tmergeCalendars: function () {\r\n\t\tvar newCalendar = this.createCalendar(),\r\n\t\t\tday,\r\n\t\t\tunits = [];\r\n\t\tvar calendars = Array.prototype.slice.call(arguments, 0);\r\n\t\tnewCalendar.worktime.hours = [0, 24];\r\n\t\tnewCalendar.worktime.dates = {};\r\n\t\tvar start = this.$gantt.date.day_start(new Date(259200000)); // 1970 day=0\r\n\t\tfor (day = 0; day < 7; day++) {\r\n\t\t\tunits = this._getDayHoursForMultiple(calendars, start);\r\n\t\t\tnewCalendar.worktime.dates[day] = units;\r\n\t\t\tstart = this.$gantt.date.add(start, 1, \"day\");\r\n\t\t}\r\n\t\tfor (var i = 0; i < calendars.length; i++) {\r\n\t\t\tfor (var value in calendars[i].worktime.dates) if (+value > 10000) {\r\n\t\t\t\tunits = this._getDayHoursForMultiple(calendars, new Date(+value));\r\n\t\t\t\tnewCalendar.worktime.dates[value] = units;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn newCalendar;\r\n\t},\r\n\r\n\t_convertWorktimeSettings: function (settings) {\r\n\t\tvar days = settings.days;\r\n\t\tif (days) {\r\n\t\t\tsettings.dates = settings.dates || {};\r\n\t\t\tfor (var i = 0; i < days.length; i++) {\r\n\t\t\t\tsettings.dates[i] = days[i];\r\n\t\t\t\tif (!(days[i] instanceof Array)) {\r\n\t\t\t\t\tsettings.dates[i] = !!days[i];\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tdelete settings.days;\r\n\t\t}\r\n\t\treturn settings;\r\n\t},\r\n\r\n\tcreateCalendar: function (parentCalendar) {\r\n\t\tvar settings;\r\n\r\n\t\tif (!parentCalendar) {\r\n\t\t\tparentCalendar = {};\r\n\t\t}\r\n\r\n\t\tif (parentCalendar.worktime) {\r\n\t\t\tsettings = utils.copy(parentCalendar.worktime);\r\n\t\t} else {\r\n\t\t\tsettings = utils.copy(parentCalendar);\r\n\t\t}\r\n\r\n\t\tvar defaults = utils.copy(this.defaults.fulltime.worktime);\r\n\t\tutils.mixin(settings, defaults);\r\n\r\n\t\tvar id = utils.uid();\r\n\t\tvar calendar = {\r\n\t\t\tid: id + \"\",\r\n\t\t\tworktime: this._convertWorktimeSettings(settings)\r\n\t\t};\r\n\r\n\t\tvar apiCore = new CalendarWorktimeStrategy(this.$gantt, createArgumentsHelper(this.$gantt));\r\n\t\tutils.mixin(apiCore, calendar);\r\n\r\n\t\t// validate/check if empty calendar\r\n\t\tif (!apiCore._tryChangeCalendarSettings(function () {\r\n\t\t\t})) {\r\n\t\t\treturn null;\r\n\t\t} else {\r\n\t\t\treturn apiCore;\r\n\t\t}\r\n\t},\r\n\r\n\tgetCalendar: function (id) {\r\n\t\tid = id || \"global\";\r\n\t\tthis.createDefaultCalendars();\r\n\t\treturn this._calendars[id];\r\n\t},\r\n\r\n\tgetCalendars: function () {\r\n\t\tvar res = [];\r\n\t\tfor (var i in this._calendars) {\r\n\t\t\tres.push(this.getCalendar(i));\r\n\t\t}\r\n\t\treturn res;\r\n\t},\r\n\r\n\tgetTaskCalendar: function (task) {\r\n\t\tvar config = this.$gantt.$services.config();\r\n\t\tif (!task) {\r\n\t\t\treturn this.getCalendar();\r\n\t\t} else if (task[config.calendar_property]) {\r\n\t\t\treturn this.getCalendar(task[config.calendar_property]);\r\n\t\t} else if (config.resource_calendars) {\r\n\r\n\t\t\tfor (var field in config.resource_calendars) {\r\n\t\t\t\tvar resource = config.resource_calendars[field];\r\n\t\t\t\tif (task[field]) {\r\n\t\t\t\t\tvar calendarId = resource[task[field]];\r\n\t\t\t\t\tif (calendarId) {\r\n\t\t\t\t\t\treturn this.getCalendar(calendarId);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn this.getCalendar();\r\n\t},\r\n\r\n\taddCalendar: function (calendar) { // puts new calendar to Global Storage - gantt.calendarManager._calendars {}\r\n\t\tif (!(calendar instanceof CalendarWorktimeStrategy)) {\r\n\t\t\tvar id = calendar.id;\r\n\t\t\tcalendar = this.createCalendar(calendar);\r\n\t\t\tcalendar.id = id;\r\n\t\t}\r\n\t\tvar config = this.$gantt.$services.config();\r\n\r\n\t\tcalendar.id = calendar.id || utils.uid();\r\n\t\tthis._calendars[calendar.id] = calendar;\r\n\t\tif (!config.worktimes)\r\n\t\t\tconfig.worktimes = {};\r\n\t\tconfig.worktimes[calendar.id] = calendar.worktime;\r\n\t\treturn calendar.id;\r\n\t},\r\n\r\n\tdeleteCalendar: function (calendar) {\r\n\t\tvar config = this.$gantt.$services.config();\r\n\t\tif (!calendar) return false;\r\n\t\tif (this._calendars[calendar]) {\r\n\t\t\tdelete this._calendars[calendar];\r\n\t\t\tif (config.worktimes && config.worktimes[calendar])\r\n\t\t\t\tdelete config.worktimes[calendar];\r\n\t\t\treturn true;\r\n\t\t} else {\r\n\t\t\treturn false;\r\n\t\t}\t},\r\n\r\n\trestoreConfigCalendars: function (configs) {\r\n\t\tfor (var i in configs) {\r\n\t\t\tif (this._calendars[i])\r\n\t\t\t\tcontinue;\r\n\r\n\t\t\tvar settings = configs[i];\r\n\t\t\tvar calendar = this.createCalendar(settings);\r\n\t\t\tcalendar.id = i;\r\n\t\t\tthis.addCalendar(calendar);\r\n\t\t}\r\n\t},\r\n\r\n\tdefaults: {\r\n\t\tglobal: {\r\n\t\t\tid: \"global\",\r\n\t\t\tworktime: {\r\n\t\t\t\thours: [8, 17],\r\n\t\t\t\tdays: [0, 1, 1, 1, 1, 1, 0]\r\n\t\t\t}\r\n\t\t},\r\n\t\tfulltime: {\r\n\t\t\tid: \"fulltime\",\r\n\t\t\tworktime: {\r\n\t\t\t\thours: [0, 24],\r\n\t\t\t\tdays: [1, 1, 1, 1, 1, 1, 1]\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\r\n\tcreateDefaultCalendars: function () {\r\n\t\tvar config = this.$gantt.$services.config();\r\n\t\tthis.restoreConfigCalendars(this.defaults);\r\n\t\tthis.restoreConfigCalendars(config.worktimes);\r\n\t}\r\n};\r\n\r\nmodule.exports = CalendarManager;\n\n/***/ }),\n/* 73 */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar Cache = __webpack_require__(74),\r\n\tutils = __webpack_require__(0);\r\n\r\nfunction CalendarWorkTimeStrategy(gantt, argumentsHelper){\r\n\tthis.argumentsHelper = argumentsHelper;\r\n\tthis.$gantt = gantt;\r\n\tthis._workingUnitsCache = new Cache();\r\n}\r\n\r\nCalendarWorkTimeStrategy.prototype = {\r\n\tunits: [\r\n\t\t\"year\",\r\n\t\t\"month\",\r\n\t\t\"week\",\r\n\t\t\"day\",\r\n\t\t\"hour\",\r\n\t\t\"minute\"\r\n\t],\r\n\t// cache previously calculated worktime\r\n\t_getUnitOrder: function (unit) {\r\n\t\tfor (var i = 0, len = this.units.length; i < len; i++) {\r\n\t\t\tif (this.units[i] == unit)\r\n\t\t\t\treturn i;\r\n\t\t}\r\n\t},\r\n\t_timestamp: function (settings) {\r\n\r\n\t\tvar timestamp = null;\r\n\t\tif ((settings.day || settings.day === 0)) {\r\n\t\t\ttimestamp = settings.day;\r\n\t\t} else if (settings.date) {\r\n\t\t\t// store worktime datestamp in utc so it could be recognized in different timezones (e.g. opened locally and sent to the export service in different timezone)\r\n\t\t\ttimestamp = Date.UTC(settings.date.getFullYear(), settings.date.getMonth(), settings.date.getDate());\r\n\t\t}\r\n\t\treturn timestamp;\r\n\t},\r\n\t_checkIfWorkingUnit: function (date, unit, order) {\r\n\t\tif (order === undefined) {\r\n\t\t\torder = this._getUnitOrder(unit);\r\n\t\t}\r\n\r\n\t\t// disable worktime check for custom time units\r\n\t\tif (order === undefined) {\r\n\t\t\treturn true;\r\n\t\t}\r\n\t\tif (order) {\r\n\t\t\t//check if bigger time unit is a work time (hour < day < month...)\r\n\t\t\t//i.e. don't check particular hour if the whole day is marked as not working\r\n\t\t\tif (!this._isWorkTime(date, this.units[order - 1], order - 1))\r\n\t\t\t\treturn false;\r\n\t\t}\r\n\t\tif (!this[\"_is_work_\" + unit])\r\n\t\t\treturn true;\r\n\t\treturn this[\"_is_work_\" + unit](date);\r\n\t},\r\n\t//checkings for particular time units\r\n\t//methods for month-year-week can be defined, otherwise always return 'true'\r\n\t_is_work_day: function (date) {\r\n\t\tvar val = this._getWorkHours(date);\r\n\r\n\t\tif (val instanceof Array) {\r\n\t\t\treturn val.length > 0;\r\n\t\t}\r\n\t\treturn false;\r\n\t},\r\n\t_is_work_hour: function (date) {\r\n\t\tvar hours = this._getWorkHours(date); // [7,12] or []\r\n\t\tvar hour = date.getHours();\r\n\t\tfor (var i = 0; i < hours.length; i += 2) {\r\n\t\t\tif (hours[i + 1] === undefined) {\r\n\t\t\t\treturn hours[i] == hour;\r\n\t\t\t} else {\r\n\t\t\t\tif (hour >= hours[i] && hour < hours[i + 1])\r\n\t\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn false;\r\n\t},\r\n\t_internDatesPull: {},\r\n\t_nextDate: function (start, unit, step) {\r\n\t\tvar dateHelper = this.$gantt.date;\r\n\t\treturn dateHelper.add(start, step, unit);\r\n\r\n\t\t/*var start_value = +start,\r\n\t\t\tkey = unit + \"_\" + step;\r\n\t\tvar interned = this._internDatesPull[key];\r\n\t\tif(!interned){\r\n\t\t\tinterned = this._internDatesPull[key] = {};\r\n\t\t}\r\n\t\tvar calculated;\r\n\t\tif(!interned[start_value]){\r\n\t\t\tinterned[start_value] = calculated = dateHelper.add(start, step, unit);\r\n\t\t\t//interned[start_value] = dateHelper.add(start, step, unit);\r\n\t\t}\r\n\t\treturn calculated || interned[start_value];*/\r\n\t},\r\n\t_getWorkUnitsBetweenGeneric: function (from, to, unit, step) {\r\n\t\tvar dateHelper = this.$gantt.date;\r\n\t\tvar start = new Date(from),\r\n\t\t\tend = new Date(to);\r\n\t\tstep = step || 1;\r\n\t\tvar units = 0;\r\n\r\n\r\n\t\tvar next = null;\r\n\t\tvar stepStart,\r\n\t\t\tstepEnd;\r\n\r\n\t\t// calculating decimal durations, i.e. 2016-09-20 00:05:00 - 2016-09-20 01:00:00 ~ 0.95 instead of 1\r\n\t\t// and also  2016-09-20 00:00:00 - 2016-09-20 00:05:00 ~ 0.05 instead of 1\r\n\t\t// durations must be rounded later\r\n\t\tvar checkFirst = false;\r\n\t\tstepStart = dateHelper[unit + \"_start\"](new Date(start));\r\n\t\tif (stepStart.valueOf() != start.valueOf()) {\r\n\t\t\tcheckFirst = true;\r\n\t\t}\r\n\t\tvar checkLast = false;\r\n\t\tstepEnd = dateHelper[unit + \"_start\"](new Date(to));\r\n\t\tif (stepEnd.valueOf() != to.valueOf()) {\r\n\t\t\tcheckLast = true;\r\n\t\t}\r\n\r\n\t\tvar isLastStep = false;\r\n\t\twhile (start.valueOf() < end.valueOf()) {\r\n\t\t\tnext = this._nextDate(start, unit, step);\r\n\t\t\tisLastStep = (next.valueOf() > end.valueOf());\r\n\r\n\t\t\tif (this._isWorkTime(start, unit)) {\r\n\t\t\t\tif (checkFirst || (checkLast && isLastStep)) {\r\n\t\t\t\t\tstepStart = dateHelper[unit + \"_start\"](new Date(start));\r\n\t\t\t\t\tstepEnd = dateHelper.add(stepStart, step, unit);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (checkFirst) {\r\n\t\t\t\t\tcheckFirst = false;\r\n\t\t\t\t\tnext = this._nextDate(stepStart, unit, step);\r\n\t\t\t\t\tunits += ((stepEnd.valueOf() - start.valueOf()) / (stepEnd.valueOf() - stepStart.valueOf()));\r\n\t\t\t\t} else if (checkLast && isLastStep) {\r\n\t\t\t\t\tcheckLast = false;\r\n\t\t\t\t\tunits += ((end.valueOf() - start.valueOf()) / (stepEnd.valueOf() - stepStart.valueOf()));\r\n\r\n\t\t\t\t} else {\r\n\t\t\t\t\tunits++;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tstart = next;\r\n\t\t}\r\n\t\treturn units;\r\n\t},\r\n\t_getHoursPerDay: function (date) {\r\n\t\tvar hours = this._getWorkHours(date);\r\n\t\tvar res = 0;\r\n\t\tfor (var i = 0; i < hours.length; i += 2) {\r\n\t\t\tres += ((hours[i + 1] - hours[i]) || 0);\r\n\t\t}\r\n\t\treturn res;\r\n\t},\r\n\t_getWorkHoursForRange: function (from, to) {\r\n\t\tvar hours = 0;\r\n\t\tvar start = new Date(from),\r\n\t\t\tend = new Date(to);\r\n\r\n\t\twhile (start.valueOf() < end.valueOf()) {\r\n\t\t\tif (this._isWorkTime(start, \"day\"))\r\n\t\t\t\thours += this._getHoursPerDay(start);\r\n\t\t\tstart = this._nextDate(start, \"day\", 1);\r\n\t\t}\r\n\t\treturn hours;\r\n\t},\r\n\t_getWorkUnitsBetweenHours: function (from, to, unit, step) {\r\n\t\tvar start = new Date(from),\r\n\t\t\tend = new Date(to);\r\n\t\tstep = step || 1;\r\n\r\n\t\tvar firstDayStart = new Date(start);\r\n\t\tvar firstDayEnd = this.$gantt.date.add(this.$gantt.date.day_start(new Date(start)), 1, \"day\");\r\n\r\n\t\tif (end.valueOf() <= firstDayEnd.valueOf()) {\r\n\t\t\treturn this._getWorkUnitsBetweenGeneric(from, to, unit, step);\r\n\t\t} else {\r\n\r\n\t\t\tvar lastDayStart = this.$gantt.date.day_start(new Date(end));\r\n\t\t\tvar lastDayEnd = end;\r\n\r\n\t\t\tvar startPart = this._getWorkUnitsBetweenGeneric(firstDayStart, firstDayEnd, unit, step);\r\n\t\t\tvar endPart = this._getWorkUnitsBetweenGeneric(lastDayStart, lastDayEnd, unit, step);\r\n\r\n\t\t\tvar hourRange = this._getWorkHoursForRange(firstDayEnd, lastDayStart);\r\n\t\t\thourRange = ((hourRange / step) + startPart + endPart);\r\n\r\n\t\t\treturn hourRange;\r\n\t\t}\r\n\t},\r\n\r\n\t_getCalendar: function () {\r\n\t\treturn this.worktime;\r\n\t},\r\n\t_setCalendar: function (settings) {\r\n\t\tthis.worktime = settings;\r\n\t},\r\n\r\n\t_tryChangeCalendarSettings: function (payload) {\r\n\t\tvar backup = JSON.stringify(this._getCalendar());\r\n\t\tpayload();\r\n\t\tif (this._isEmptyCalendar(this._getCalendar())) {\r\n\t\t\tthis.$gantt.assert(false, \"Invalid calendar settings, no worktime available\");\r\n\t\t\tthis._setCalendar(JSON.parse(backup));\r\n\t\t\tthis._workingUnitsCache.clear();\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\treturn true;\r\n\r\n\t},\r\n\r\n\t_isEmptyCalendar: function (settings) {\r\n\t\tvar result = false,\r\n\t\t\tdatesArray = [],\r\n\t\t\tisFullWeekSet = true;\r\n\t\tfor (var i in settings.dates) {\r\n\t\t\tresult |= !!settings.dates[i];\r\n\t\t\tdatesArray.push(i);\r\n\t\t}\r\n\r\n\t\tvar checkFullArray = [];\r\n\t\tfor (var i = 0; i < datesArray.length; i++) {\r\n\t\t\tif (datesArray[i] < 10) {\r\n\t\t\t\tcheckFullArray.push(datesArray[i]);\r\n\t\t\t}\r\n\t\t}\r\n\t\tcheckFullArray.sort();\r\n\r\n\t\tfor (var i = 0; i < 7; i++) {\r\n\t\t\tif (checkFullArray[i] != i)\r\n\t\t\t\tisFullWeekSet = false;\r\n\t\t}\r\n\t\tif (isFullWeekSet)\r\n\t\t\treturn !result;\r\n\t\treturn !(result || !!settings.hours); // can still return false if separated dates are set to true\r\n\t},\r\n\r\n\tgetWorkHours: function () {\r\n\t\tvar config = this.argumentsHelper.getWorkHoursArguments.apply(this.argumentsHelper, arguments);\r\n\t\treturn this._getWorkHours(config.date);\r\n\t},\r\n\t_getWorkHours: function (date) {\r\n\t\tvar t = this._timestamp({date: date});\r\n\t\tvar hours = true;\r\n\t\tvar calendar = this._getCalendar();\r\n\t\tif (calendar.dates[t] !== undefined) {\r\n\t\t\thours = calendar.dates[t];//custom day\r\n\t\t} else if (calendar.dates[date.getDay()] !== undefined) {\r\n\t\t\thours = calendar.dates[date.getDay()];//week day\r\n\t\t}\r\n\t\tif (hours === true) {\r\n\t\t\treturn calendar.hours;\r\n\t\t} else if (hours) {\r\n\t\t\treturn hours;\r\n\t\t}\r\n\t\treturn [];\r\n\t},\r\n\r\n\tsetWorkTime: function (settings) {\r\n\t\treturn this._tryChangeCalendarSettings(utils.bind(function () {\r\n\t\t\tvar hours = settings.hours !== undefined ? settings.hours : true;\r\n\t\t\tvar timestamp = this._timestamp(settings);\r\n\t\t\tif (timestamp !== null) {\r\n\t\t\t\tthis._getCalendar().dates[timestamp] = hours;\r\n\t\t\t} else {\r\n\t\t\t\tthis._getCalendar().hours = hours;\r\n\t\t\t}\r\n\t\t\tthis._workingUnitsCache.clear();\r\n\t\t}, this));\r\n\t},\r\n\r\n\tunsetWorkTime: function (settings) {\r\n\t\treturn this._tryChangeCalendarSettings(utils.bind(function () {\r\n\t\t\tif (!settings) {\r\n\t\t\t\tthis.reset_calendar();\r\n\t\t\t} else {\r\n\r\n\t\t\t\tvar timestamp = this._timestamp(settings);\r\n\r\n\t\t\t\tif (timestamp !== null) {\r\n\t\t\t\t\tdelete this._getCalendar().dates[timestamp];\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t// Clear work units cache\r\n\t\t\tthis._workingUnitsCache.clear();\r\n\t\t}, this));\r\n\t},\r\n\r\n\t_isWorkTime: function (date, unit, order) {\r\n\t\t//Check if this item has in the cache\r\n\t\tvar is_work_unit = this._workingUnitsCache.get(unit, date);\r\n\r\n\t\tif (is_work_unit == -1) {\r\n\t\t\t// calculate if not cached\r\n\t\t\tis_work_unit = this._checkIfWorkingUnit(date, unit, order);\r\n\t\t\tthis._workingUnitsCache.put(unit, date, is_work_unit);\r\n\t\t}\r\n\r\n\t\treturn is_work_unit;\r\n\t},\r\n\r\n\tisWorkTime: function () {\r\n\t\tvar config =  this.argumentsHelper.isWorkTimeArguments.apply( this.argumentsHelper, arguments);\r\n\t\treturn this._isWorkTime(config.date, config.unit);\r\n\t},\r\n\r\n\tcalculateDuration: function () {\r\n\t\tvar config =  this.argumentsHelper.getDurationArguments.apply( this.argumentsHelper, arguments);\r\n\r\n\t\tif (!config.unit) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t\tvar res = 0;\r\n\t\tif (config.unit == \"hour\") {\r\n\t\t\tres = this._getWorkUnitsBetweenHours(config.start_date, config.end_date, config.unit, config.step);\r\n\t\t} else {\r\n\t\t\tres = this._getWorkUnitsBetweenGeneric(config.start_date, config.end_date, config.unit, config.step);\r\n\t\t}\r\n\r\n\t\t// getDuration.. returns decimal durations\r\n\t\treturn Math.round(res);\r\n\t},\r\n\thasDuration: function () {\r\n\t\tvar config =  this.argumentsHelper.getDurationArguments.apply( this.argumentsHelper, arguments);\r\n\r\n\t\tvar from = config.start_date,\r\n\t\t\tto = config.end_date,\r\n\t\t\tunit = config.unit,\r\n\t\t\tstep = config.step;\r\n\r\n\t\tif (!unit) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\tvar start = new Date(from),\r\n\t\t\tend = new Date(to);\r\n\t\tstep = step || 1;\r\n\r\n\t\twhile (start.valueOf() < end.valueOf()) {\r\n\t\t\tif (this._isWorkTime(start, unit))\r\n\t\t\t\treturn true;\r\n\t\t\tstart = this._nextDate(start, unit, step);\r\n\t\t}\r\n\t\treturn false;\r\n\t},\r\n\r\n\tcalculateEndDate: function () {\r\n\t\tvar config =  this.argumentsHelper.calculateEndDateArguments.apply( this.argumentsHelper, arguments);\r\n\r\n\t\tvar from = config.start_date,\r\n\t\t\tduration = config.duration,\r\n\t\t\tunit = config.unit,\r\n\t\t\tstep = config.step;\r\n\r\n\t\tvar mult = (config.duration >= 0) ? 1 : -1;\r\n\t\treturn this._calculateEndDate(from, duration, unit, step * mult);\r\n\t},\r\n\t_calculateEndDate: function (from, duration, unit, step) {\r\n\t\tif (!unit)\r\n\t\t\treturn false;\r\n\r\n\t\tvar start = new Date(from),\r\n\t\t\tadded = 0;\r\n\t\tstep = step || 1;\r\n\t\tduration = Math.abs(duration * 1);\r\n\r\n\t\twhile (added < duration) {\r\n\t\t\tvar next = this._nextDate(start, unit, step);\r\n\t\t\t//if(this.isWorkTime(step > 0 ? start : next, unit))\r\n\t\t\tif (this._isWorkTime(step > 0 ? new Date(next.valueOf() - 1) : new Date(next.valueOf() + 1), unit))\r\n\t\t\t\tadded++;\r\n\t\t\tstart = next;\r\n\t\t}\r\n\t\treturn start;\r\n\t},\r\n\r\n\tgetClosestWorkTime: function () {\r\n\t\tvar config =  this.argumentsHelper.getClosestWorkTimeArguments.apply( this.argumentsHelper, arguments);\r\n\t\treturn this._getClosestWorkTime(config);\r\n\t},\r\n\r\n\t_getClosestWorkTime: function (settings) {\r\n\t\tif (this._isWorkTime(settings.date, settings.unit))\r\n\t\t\treturn settings.date;\r\n\r\n\t\tvar unit = settings.unit;\r\n\r\n\t\tvar curr = this.$gantt.date[unit + '_start'](settings.date);\r\n\r\n\t\tvar future_target = new Date(curr),\r\n\t\t\tprev_target = new Date(curr),\r\n\t\t\ttick = true,\r\n\t\t\tmaximum_loop = 3000,//be extra sure we won't fall into infinite loop, 3k seems big enough\r\n\t\t\tcount = 0,\r\n\t\t\tboth_directins = (settings.dir == 'any' || !settings.dir);\r\n\r\n\t\tvar inc = 1;\r\n\t\tif (settings.dir == 'past')\r\n\t\t\tinc = -1;\r\n\r\n\t\t//will seek closest working hour in future or in past, one step in one direction per iteration\r\n\t\twhile (!this._isWorkTime(curr, unit)) {\r\n\r\n\t\t\tif (both_directins) {\r\n\t\t\t\tcurr = tick ? future_target : prev_target;\r\n\t\t\t\tinc = inc * (-1);\r\n\t\t\t}\r\n\t\t\tvar tzOffset = curr.getTimezoneOffset();\r\n\t\t\tcurr = this.$gantt.date.add(curr, inc, unit);\r\n\r\n\t\t\tcurr = gantt._correct_dst_change(curr, tzOffset, inc, unit);\r\n\t\t\tif (this.$gantt.date[unit + '_start'])\r\n\t\t\t\tcurr = this.$gantt.date[unit + '_start'](curr);\r\n\r\n\t\t\tif (both_directins) {\r\n\t\t\t\tif (tick) {\r\n\t\t\t\t\tfuture_target = curr;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tprev_target = curr;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\ttick = !tick;\r\n\t\t\tcount++;\r\n\t\t\tif (count > maximum_loop) {\r\n\t\t\t\tthis.$gantt.assert(false, \"Invalid working time check\");\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif (curr == prev_target || settings.dir == 'past') {\r\n\t\t\tcurr = this.$gantt.date.add(curr, 1, unit);\r\n\t\t}\r\n\r\n\t\treturn curr;\r\n\t}\r\n};\r\n\r\nmodule.exports = CalendarWorkTimeStrategy;\n\n/***/ }),\n/* 74 */\n/***/ (function(module, exports) {\n\nfunction WorkUnitsCache() {\r\n\tthis._cache = {};\r\n}\r\n\r\nWorkUnitsCache.prototype = {\r\n\t// cache previously calculated worktime\r\n\tget: function (unit, date) {\r\n\t\tvar result = -1;// default value (if not existed in the cache)\r\n\r\n\t\tvar cache = this._cache;\r\n\t\tif (cache && cache[unit]) {\r\n\t\t\tvar units = cache[unit];\r\n\t\t\tvar time = date.getTime();\r\n\t\t\tif (units[time] !== undefined)\r\n\t\t\t\tresult = units[time];\r\n\t\t}\r\n\t\treturn result;\r\n\t},\r\n\r\n\tput: function (unit, date, value) {\r\n\t\tif (!unit || !date) return false;\r\n\r\n\t\tvar cache = this._cache;\r\n\r\n\t\tvar time = date.getTime();\r\n\r\n\t\tvalue = !!value;\r\n\r\n\t\tif (!cache) return false;\r\n\t\tif (!cache[unit]) cache[unit] = {};\r\n\t\tcache[unit][time] = value;\r\n\t\treturn true;\r\n\t},\r\n\r\n\tclear: function () {\r\n\t\tthis._cache = {};\r\n\t}\r\n};\r\n\r\nmodule.exports = WorkUnitsCache;\n\n/***/ }),\n/* 75 */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar createArgumentsHelper = __webpack_require__(17),\r\n\tNoWorkTimeCalendar = __webpack_require__(76);\r\n\r\nfunction TimeCalculator(calendarManager){\r\n\r\n\tthis.$gantt = calendarManager.$gantt;\r\n\tthis.argumentsHelper = createArgumentsHelper(this.$gantt);\r\n\tthis.calendarManager = calendarManager;\r\n\tthis.$disabledCalendar = new NoWorkTimeCalendar(this.$gantt, this.argumentsHelper);\r\n}\r\n\r\nTimeCalculator.prototype = {\r\n\t_getCalendar: function (config) {\r\n\t\tvar calendar;\r\n\t\tif (!this.$gantt.$services.config().work_time) {\r\n\t\t\tcalendar = this.$disabledCalendar;\r\n\t\t} else {\r\n\t\t\tvar manager = this.calendarManager;\r\n\t\t\tif (config.task) {\r\n\t\t\t\tcalendar = manager.getTaskCalendar(config.task);\r\n\t\t\t} else if (config.id) {\r\n\t\t\t\tcalendar = manager.getTaskCalendar(config);\r\n\t\t\t} else if (config.calendar) {\r\n\t\t\t\tcalendar = config.calendar;\r\n\t\t\t}\r\n\t\t\tif (!calendar) {\r\n\t\t\t\tcalendar = manager.getTaskCalendar();\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn calendar;\r\n\t},\r\n\r\n\tgetWorkHours: function (config) {\r\n\t\tconfig = this.argumentsHelper.getWorkHoursArguments.apply(this.argumentsHelper, arguments);\r\n\r\n\t\tvar calendar = this._getCalendar(config);\r\n\r\n\t\treturn calendar.getWorkHours(config.date);\r\n\t},\r\n\r\n\tsetWorkTime: function (config, calendar) {\r\n\t\tconfig = this.argumentsHelper.setWorkTimeArguments.apply(this.argumentsHelper, arguments);\r\n\r\n\t\tif (!calendar)\r\n\t\t\tcalendar = this.calendarManager.getCalendar(); // Global\r\n\t\treturn calendar.setWorkTime(config);\r\n\t},\r\n\r\n\tunsetWorkTime: function (config, calendar) {\r\n\t\tconfig = this.argumentsHelper.unsetWorkTimeArguments.apply(this.argumentsHelper, arguments);\r\n\r\n\t\tif (!calendar)\r\n\t\t\tcalendar = this.calendarManager.getCalendar(); // Global\r\n\t\treturn calendar.unsetWorkTime(config);\r\n\t},\r\n\tisWorkTime: function (date, unit, task, calendar) {\r\n\t\tvar config = this.argumentsHelper.isWorkTimeArguments.apply(this.argumentsHelper, arguments);\r\n\r\n\t\tcalendar = this._getCalendar(config);\r\n\t\treturn calendar.isWorkTime(config);\r\n\t},\r\n\tgetClosestWorkTime: function (config) {\r\n\t\tconfig = this.argumentsHelper.getClosestWorkTimeArguments.apply(this.argumentsHelper, arguments);\r\n\r\n\t\tvar calendar = this._getCalendar(config);\r\n\r\n\t\treturn calendar.getClosestWorkTime(config);\r\n\t},\r\n\r\n\tcalculateDuration: function () { // start_date_date, end_date, task\r\n\t\tvar config = this.argumentsHelper.getDurationArguments.apply(this.argumentsHelper, arguments);\r\n\r\n\r\n\t\tvar calendar = this._getCalendar(config);\r\n\t\treturn calendar.calculateDuration(config);\r\n\t},\r\n\thasDuration: function () {\r\n\t\tvar config = this.argumentsHelper.hasDurationArguments.apply(this.argumentsHelper, arguments);\r\n\r\n\t\tvar calendar = this._getCalendar(config);\r\n\r\n\t\treturn calendar.hasDuration(config);\r\n\t},\r\n\tcalculateEndDate: function (config) { // start_date, duration, unit, task\r\n\t\tvar config = this.argumentsHelper.calculateEndDateArguments.apply(this.argumentsHelper, arguments);\r\n\r\n\t\tvar calendar = this._getCalendar(config);\r\n\t\treturn calendar.calculateEndDate(config);\r\n\t}\r\n};\r\n\r\nmodule.exports = TimeCalculator;\r\n\r\n\n\n/***/ }),\n/* 76 */\n/***/ (function(module, exports) {\n\nfunction CalendarDisabledTimeStrategy(gantt, argumentsHelper){\r\n\tthis.argumentsHelper = argumentsHelper;\r\n\tthis.$gantt = gantt;\r\n}\r\n\r\nCalendarDisabledTimeStrategy.prototype = {\r\n\tgetWorkHours: function () {\r\n\t\treturn [0, 24];\r\n\t},\r\n\tsetWorkTime: function () {\r\n\t\treturn true;\r\n\t},\r\n\tunsetWorkTime: function () {\r\n\t\treturn true;\r\n\t},\r\n\tisWorkTime: function () {\r\n\t\treturn true;\r\n\t},\r\n\tgetClosestWorkTime: function (config) {\r\n\t\tvar config = this.argumentsHelper.getClosestWorkTimeArguments.apply(this.argumentsHelper, arguments);\r\n\t\treturn config.date;\r\n\t},\r\n\r\n\tcalculateDuration: function () {\r\n\t\tvar config = this.argumentsHelper.getDurationArguments.apply(this.argumentsHelper, arguments);\r\n\t\tvar from = config.start_date,\r\n\t\t\tto = config.end_date,\r\n\t\t\tunit = config.unit,\r\n\t\t\tstep = config.step;\r\n\r\n\t\treturn this._calculateDuration(from, to, unit, step);\r\n\t},\r\n\t_calculateDuration: function (start, end, unit, step) {\r\n\t\tvar dateHelper = this.$gantt.date;\r\n\t\tvar fixedUnits = {\r\n\t\t\t\"week\": 1000 * 60 * 60 * 24 * 7,\r\n\t\t\t\"day\": 1000 * 60 * 60 * 24,\r\n\t\t\t\"hour\": 1000 * 60 * 60,\r\n\t\t\t\"minute\": 1000 * 60\r\n\t\t};\r\n\r\n\t\tvar res = 0;\r\n\t\tif (fixedUnits[unit]) {\r\n\t\t\tres = Math.round((end - start) / (step * fixedUnits[unit]));\r\n\t\t} else {\r\n\t\t\tvar from = new Date(start),\r\n\t\t\t\tto = new Date(end);\r\n\t\t\twhile (from.valueOf() < to.valueOf()) {\r\n\t\t\t\tres += 1;\r\n\t\t\t\tfrom = dateHelper.add(from, step, unit);\r\n\t\t\t}\r\n\r\n\t\t\tif (from.valueOf() != end.valueOf()) {\r\n\t\t\t\tres += (to - from) / (dateHelper.add(from, step, unit) - from);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn Math.round(res);\r\n\t},\r\n\r\n\thasDuration: function () {\r\n\t\tvar config = this.argumentsHelper.getDurationArguments.apply(this.argumentsHelper, arguments);\r\n\t\tvar from = config.start_date,\r\n\t\t\tto = config.end_date,\r\n\t\t\tunit = config.unit,\r\n\t\t\tstep = config.step;\r\n\r\n\t\tif (!unit) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\tfrom = new Date(from);\r\n\t\tto = new Date(to);\r\n\r\n\t\treturn (from.valueOf() < to.valueOf());\r\n\t},\r\n\r\n\tcalculateEndDate: function () {\r\n\t\tvar config = this.argumentsHelper.calculateEndDateArguments.apply(this.argumentsHelper, arguments);\r\n\r\n\t\tvar start = config.start_date,\r\n\t\t\tduration = config.duration,\r\n\t\t\tunit = config.unit,\r\n\t\t\tstep = config.step;\r\n\r\n\t\treturn this.$gantt.date.add(start, step * duration, unit);\r\n\t}\r\n};\r\n\r\nmodule.exports = CalendarDisabledTimeStrategy;\n\n/***/ }),\n/* 77 */\n/***/ (function(module, exports, __webpack_require__) {\n\n// TODO: rework public api for date methods\r\nvar utils = __webpack_require__(0);\r\n\r\nvar createWorktimeFacade = function(calendarManager, timeCalculator){\r\n\treturn {\r\n\t\tgetWorkHours: function (date) {\r\n\t\t\treturn timeCalculator.getWorkHours(date);\r\n\t\t},\r\n\r\n\t\tsetWorkTime: function (config) {\r\n\t\t\treturn timeCalculator.setWorkTime(config);\r\n\t\t},\r\n\r\n\t\tunsetWorkTime: function (config) {\r\n\t\t\ttimeCalculator.unsetWorkTime(config);\r\n\t\t},\r\n\r\n\t\tisWorkTime: function (date, unit, task) {\r\n\t\t\treturn timeCalculator.isWorkTime(date, unit, task);\r\n\t\t},\r\n\r\n\t\tgetClosestWorkTime: function (config) {\r\n\t\t\treturn timeCalculator.getClosestWorkTime(config);\r\n\t\t},\r\n\r\n\t\tcalculateDuration: function (start_date, end_date, task) {\r\n\t\t\treturn timeCalculator.calculateDuration(start_date, end_date, task);\r\n\t\t},\r\n\t\t_hasDuration: function (start_date, end_date, task) {\r\n\t\t\treturn timeCalculator.hasDuration(start_date, end_date, task);\r\n\t\t},\r\n\r\n\t\tcalculateEndDate: function (start, duration, unit, task) {\r\n\t\t\treturn timeCalculator.calculateEndDate(start, duration, unit, task);\r\n\t\t},\r\n\r\n\t\tcreateCalendar: utils.bind(calendarManager.createCalendar, calendarManager),\r\n\t\taddCalendar: utils.bind(calendarManager.addCalendar, calendarManager),\r\n\t\tgetCalendar: utils.bind(calendarManager.getCalendar, calendarManager),\r\n\t\tgetCalendars: utils.bind(calendarManager.getCalendars, calendarManager),\r\n\t\tgetTaskCalendar: utils.bind(calendarManager.getTaskCalendar, calendarManager),\r\n\t\tdeleteCalendar: utils.bind(calendarManager.deleteCalendar, calendarManager)\r\n\t};\r\n};\r\n\r\n\r\nmodule.exports = { create: createWorktimeFacade };\r\n\n\n/***/ }),\n/* 78 */\n/***/ (function(module, exports) {\n\nmodule.exports = function(gantt) {\r\n\r\n\tgantt.isUnscheduledTask = function (task) {\r\n\t\treturn (!!task.unscheduled || !task.start_date);\r\n\t};\r\n\r\n\tgantt._isAllowedUnscheduledTask = function (task) {\r\n\t\treturn !!(task.unscheduled && gantt.config.show_unscheduled);\r\n\t};\r\n\r\n\tgantt.isTaskVisible = function (id) {\r\n\t\tif (!this.isTaskExists(id))\r\n\t\t\treturn false;\r\n\r\n\t\tvar task = this.getTask(id);\r\n\t\tif (!((+task.start_date < +this._max_date && +task.end_date > +this._min_date) || gantt._isAllowedUnscheduledTask(task)))\r\n\t\t\treturn false;\r\n\r\n\t\treturn !!(gantt.getGlobalTaskIndex(id) >= 0);\r\n\t};\r\n\r\n\tgantt._defaultTaskDate = function (item, parent_id) {\r\n\t\tvar parent = (parent_id && parent_id != this.config.root_id) ? this.getTask(parent_id) : false,\r\n\t\t\tstartDate = '';\r\n\t\tif (parent) {\r\n\t\t\tstartDate = parent.start_date;\r\n\t\t} else {\r\n\t\t\tvar first = this.getTaskByIndex(0);\r\n\t\t\tstartDate = first ? (first.start_date ? first.start_date : (first.end_date ? this.calculateEndDate({\r\n\t\t\t\tstart_date: first.end_date,\r\n\t\t\t\tduration: -this.config.duration_step\r\n\t\t\t}) : '')) : this.config.start_date || this.getState().min_date;\r\n\t\t}\r\n\t\tgantt.assert(startDate, \"Invalid dates\");\r\n\t\treturn new Date(startDate);\r\n\t};\r\n\r\n\tgantt._set_default_task_timing = function (task) {\r\n\t\ttask.start_date = task.start_date || gantt._defaultTaskDate(task, this.getParent(task));\r\n\t\ttask.duration = task.duration || this.config.duration_step;\r\n\t\ttask.end_date = task.end_date || this.calculateEndDate(task);\r\n\t};\r\n\r\n\tgantt.createTask = function (item, parent, index) {\r\n\t\titem = item || {};\r\n\t\tif (!gantt.defined(item.id))\r\n\t\t\titem.id = gantt.uid();\r\n\r\n\t\tif (!item.start_date) {\r\n\t\t\titem.start_date = gantt._defaultTaskDate(item, parent);\r\n\t\t}\r\n\t\tif (item.text === undefined) {\r\n\t\t\titem.text = gantt.locale.labels.new_task;\r\n\t\t}\r\n\t\tif (item.duration === undefined) {\r\n\t\t\titem.duration = 1;\r\n\t\t}\r\n\r\n\t\tif (parent) {\r\n\t\t\tthis.setParent(item, parent);\r\n\t\t\tvar parentObj = this.getTask(parent);\r\n\t\t\tparentObj.$open = true;\r\n\t\t}\r\n\r\n\t\tif (!this.callEvent(\"onTaskCreated\", [item])) {\r\n\t\t\treturn null;\r\n\t\t}\r\n\t\tif (this.config.details_on_create) {\r\n\t\t\titem.$new = true;\r\n\t\t\tthis.silent(function(){\r\n\t\t\t\tgantt.$data.tasksStore.addItem(item, index);\r\n\t\t\t});\r\n\t\t\tthis.selectTask(item.id);\r\n\t\t\tthis.refreshData();\r\n\t\t\tthis.showLightbox(item.id);\r\n\t\t} else {\r\n\t\t\tif (this.addTask(item, parent, index)) {\r\n\t\t\t\tthis.showTask(item.id);\r\n\t\t\t\tthis.selectTask(item.id);\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn item.id;\r\n\t};\r\n\r\n//TODO: do something with overcomplicated dataprocessor logic\r\n\tgantt._getChildLinks = function (id) {\r\n\t\tvar item = this.getTask(id);\r\n\t\tif (!item) {\r\n\t\t\treturn [];\r\n\t\t}\r\n\r\n\t\tvar links = item.$source.concat(item.$target);\r\n\r\n\t\tvar branches = this.getChildren(item.id);\r\n\t\tfor (var i = 0; i < branches.length; i++) {\r\n\t\t\tlinks = links.concat(this._getChildLinks(branches[i]));\r\n\t\t}\r\n\r\n\t\tvar res = {};\r\n\t\tfor (var i = 0; i < links.length; i++) {\r\n\t\t\tres[links[i]] = true;\r\n\t\t}\r\n\t\tlinks = [];\r\n\t\tfor (var i in res) {\r\n\t\t\tif (this.isLinkExists(i))\r\n\t\t\t\tlinks.push(i);\r\n\t\t}\r\n\r\n\t\treturn links;\r\n\t};\r\n\tgantt._getTaskTree = function (id) {\r\n\t\tvar item = this.getTask(id);\r\n\t\tif (!item) {\r\n\t\t\treturn [];\r\n\t\t}\r\n\r\n\t\tvar items = [];\r\n\t\tvar branches = this.getChildren(item.id);\r\n\t\tfor (var i = 0; i < branches.length; i++) {\r\n\t\t\titems.push(branches[i]);\r\n\t\t\titems = items.concat(this._getTaskTree(branches[i]));\r\n\t\t}\r\n\t\treturn items;\r\n\t};\r\n\tgantt._deleteRelatedLinks = function (links, silent) {\r\n\t\tvar use_dp = (this._dp && !silent) && this.config.cascade_delete;\r\n\t\tvar prev_mode = '';\r\n\t\tvar send_changes = use_dp ? this._dp.updateMode != 'off' : false;\r\n\t\tif (use_dp) {\r\n\t\t\tprev_mode = this._dp.updateMode;\r\n\t\t\tthis._dp.setUpdateMode(\"off\");\r\n\t\t}\r\n\t\tfor (var i = 0; i < links.length; i++) {\r\n\t\t\tif (use_dp) {\r\n\t\t\t\tthis._dp.setGanttMode(\"links\");\r\n\t\t\t\tthis._dp.setUpdated(links[i], true, \"deleted\");\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tthis.$data.linksStore.silent(function(){\r\n\t\t\tfor(var i =0; i < links.length; i++) {\r\n\t\t\t\tthis.$data.linksStore.removeItem(links[i]);\r\n\t\t\t}\r\n\t\t}, this);\r\n\r\n\t\tif (use_dp) {\r\n\t\t\tthis._dp.setUpdateMode(prev_mode);\r\n\t\t\tif (send_changes)\r\n\t\t\t\tthis._dp.sendAllData();\r\n\t\t}\r\n\t};\r\n\tgantt._deleteRelatedTasks = function (id, silent) {\r\n\t\tvar use_dp = (this._dp && !silent) && this.config.cascade_delete;\r\n\t\tvar prev_mode = '';\r\n\r\n\t\tif (use_dp) {\r\n\t\t\tprev_mode = this._dp.updateMode;\r\n\t\t\tthis._dp.setGanttMode(\"tasks\");\r\n\t\t\tthis._dp.setUpdateMode(\"off\");\r\n\t\t}\r\n\t\tvar tree = this._getTaskTree(id);\r\n\t\tfor (var i = 0; i < tree.length; i++) {\r\n\t\t\t// add deleted subrow into dataprocessor update list manually\r\n\t\t\t// because silent mode is on\r\n\t\t\tvar t_id = tree[i];\r\n\r\n\t\t\tthis.$data.tasksStore.silent(function(){\r\n\t\t\t\tthis.$data.tasksStore.removeItem(t_id);\r\n\t\t\t});\r\n\r\n\t\t\tif (use_dp) {\r\n\t\t\t\tthis._dp.setUpdated(t_id, true, \"deleted\");\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (use_dp) {\r\n\r\n\t\t\tthis._dp.setUpdateMode(prev_mode);\r\n\t\t}\r\n\t};\r\n\r\n\r\n\r\n\tgantt._update_flags = function (oldid, newid) {\r\n\t\t//  TODO: need a proper way to update all possible flags\r\n\t\tif (oldid === undefined) {\r\n\t\t\tthis._lightbox_id = this._selected_task = null;\r\n\t\t\tif (this._tasks_dnd && this._tasks_dnd.drag) {\r\n\t\t\t\tthis._tasks_dnd.drag.id = null;\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tif (this._lightbox_id == oldid)\r\n\t\t\t\tthis._lightbox_id = newid;\r\n\t\t\tif (this._selected_task == oldid) {\r\n\t\t\t\tthis._selected_task = newid;\r\n\t\t\t}\r\n\t\t\tif (this._tasks_dnd && this._tasks_dnd.drag && this._tasks_dnd.drag.id == oldid) {\r\n\t\t\t\tthis._tasks_dnd.drag.id = newid;\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\r\n\r\n\tgantt._get_duration_unit = function () {\r\n\t\treturn (gantt._get_line(this.config.duration_unit) * 1000) || this.config.duration_unit;\r\n\t};\r\n\r\n\tgantt.getTaskType = function (type) {\r\n\t\treturn \"task\";\r\n\t};\r\n\tgantt._get_type_name = function (type_value) {\r\n\t\tfor (var i in this.config.types) {\r\n\t\t\tif (this.config.types[i] == type_value) {\r\n\t\t\t\treturn i;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn \"task\";\r\n\t};\r\n\r\n\tgantt._get_task_timing_mode = function (task, force) {\r\n\t\tvar task_type = this.getTaskType(task.type);\r\n\r\n\t\tvar state = {\r\n\t\t\ttype: task_type,\r\n\t\t\t$no_start: false,\r\n\t\t\t$no_end: false\r\n\t\t};\r\n\r\n\t\tif (!force && task_type == task.$rendered_type) {\r\n\t\t\tstate.$no_start = task.$no_start;\r\n\t\t\tstate.$no_end = task.$no_end;\r\n\t\t\treturn state;\r\n\t\t}\r\n\r\n\t\tif (task_type == this.config.types.project) {\r\n\t\t\t//project duration is always defined by children duration\r\n\t\t\tstate.$no_end = state.$no_start = true;\r\n\t\t} else if (task_type != this.config.types.milestone) {\r\n\t\t\t//tasks can have fixed duration, children duration(as projects), or one date fixed, and other defined by nested items\r\n\t\t\tstate.$no_end = !(task.end_date || task.duration);\r\n\t\t\tstate.$no_start = !task.start_date;\r\n\r\n\t\t\tif (this._isAllowedUnscheduledTask(task)) {\r\n\t\t\t\tstate.$no_end = state.$no_start = false;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn state;\r\n\t};\r\n\r\n\tgantt._init_task_timing = function (task) {\r\n\t\tvar task_mode = gantt._get_task_timing_mode(task, true);\r\n\r\n\t\tvar dirty = task.$rendered_type != task_mode.type;\r\n\r\n\t\tvar task_type = task_mode.type;\r\n\r\n\t\tif (dirty) {\r\n\t\t\ttask.$no_start = task_mode.$no_start;\r\n\t\t\ttask.$no_end = task_mode.$no_end;\r\n\t\t\ttask.$rendered_type = task_mode.type;\r\n\t\t}\r\n\r\n\t\tif (dirty && task_type != this.config.types.milestone) {\r\n\t\t\tif (task_type == this.config.types.project) {\r\n\t\t\t\t//project duration is always defined by children duration\r\n\t\t\t\tthis._set_default_task_timing(task);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif (task_type == this.config.types.milestone) {\r\n\t\t\ttask.end_date = task.start_date;\r\n\t\t}\r\n\t\tif (task.start_date && task.end_date) {\r\n\t\t\ttask.duration = this.calculateDuration(task);\r\n\t\t}\r\n\t\ttask.duration = task.duration || 0;\r\n\t};\r\n\r\n\tgantt.isSummaryTask = function (task) {\r\n\t\tvar mode = gantt._get_task_timing_mode(task);\r\n\r\n\t\treturn !!(mode.$no_end || mode.$no_start);\r\n\t};\r\n\r\n// downward calculation of project duration\r\n\tgantt.resetProjectDates = function (task) {\r\n\t\tvar taskMode = this._get_task_timing_mode(task);\r\n\t\tif (taskMode.$no_end || taskMode.$no_start) {\r\n\t\t\tvar dates = this.getSubtaskDates(task.id);\r\n\t\t\tthis._assign_project_dates(task, dates.start_date, dates.end_date);\r\n\t\t}\r\n\t};\r\n\r\n\tgantt.getSubtaskDates = function (task_id) {\r\n\t\tvar min = null,\r\n\t\t\tmax = null,\r\n\t\t\troot = task_id !== undefined ? task_id : gantt.config.root_id;\r\n\r\n\t\tthis.eachTask(function (child) {\r\n\t\t\tif (this.getTaskType(child.type) == gantt.config.types.project || this.isUnscheduledTask(child))\r\n\t\t\t\treturn;\r\n\r\n\t\t\tif ((child.start_date && !child.$no_start) && (!min || min > child.start_date.valueOf()))\r\n\t\t\t\tmin = child.start_date.valueOf();\r\n\t\t\tif ((child.end_date && !child.$no_end) && (!max || max < child.end_date.valueOf()))\r\n\t\t\t\tmax = child.end_date.valueOf();\r\n\t\t}, root);\r\n\r\n\t\treturn {\r\n\t\t\tstart_date: min ? new Date(min) : null,\r\n\t\t\tend_date: max ? new Date(max) : null\r\n\t\t};\r\n\t};\r\n\r\n\tgantt._assign_project_dates = function (task, from, to) {\r\n\t\tvar taskTiming = this._get_task_timing_mode(task);\r\n\t\tif (taskTiming.$no_start) {\r\n\t\t\tif (from && from != Infinity) {\r\n\t\t\t\ttask.start_date = new Date(from);\r\n\t\t\t} else {\r\n\t\t\t\ttask.start_date = this._defaultTaskDate(task, this.getParent(task));\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif (taskTiming.$no_end) {\r\n\t\t\tif (to && to != -Infinity) {\r\n\t\t\t\ttask.end_date = new Date(to);\r\n\t\t\t} else {\r\n\t\t\t\ttask.end_date = this.calculateEndDate({\r\n\t\t\t\t\tstart_date: task.start_date,\r\n\t\t\t\t\tduration: this.config.duration_step,\r\n\t\t\t\t\ttask: task\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (taskTiming.$no_start || taskTiming.$no_end) {\r\n\t\t\tthis._init_task_timing(task);\r\n\t\t}\r\n\t};\r\n\r\n// upward calculation of project duration\r\n\tgantt._update_parents = function (taskId, silent) {\r\n\t\tif (!taskId) return;\r\n\r\n\t\tvar task = this.getTask(taskId);\r\n\t\tvar pid = this.getParent(task);\r\n\r\n\t\tvar taskTiming = this._get_task_timing_mode(task);\r\n\r\n\t\tvar has_changed = true;\r\n\r\n\t\tif (taskTiming.$no_start || taskTiming.$no_end) {\r\n\t\t\tvar oldStart = task.start_date.valueOf(),\r\n\t\t\t\toldEnd = task.end_date.valueOf();\r\n\r\n\t\t\tgantt.resetProjectDates(task);\r\n\r\n\t\t\t// not refresh parent projects if dates hasn't changed\r\n\t\t\tif (oldStart == task.start_date.valueOf() && oldEnd == task.end_date.valueOf()) {\r\n\t\t\t\thas_changed = false;\r\n\t\t\t}\r\n\r\n\t\t\tif (has_changed && !silent) {\r\n\t\t\t\tthis.refreshTask(task.id, true);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\r\n\t\tif (has_changed && pid && this.isTaskExists(pid)) {\r\n\t\t\tthis._update_parents(pid, silent);\r\n\t\t}\r\n\t};\r\n\r\n\tgantt.roundDate = function (config) {\r\n\t\tif (config instanceof Date) {\r\n\t\t\tconfig = {\r\n\t\t\t\tdate: config,\r\n\t\t\t\tunit: gantt.getScale().unit,\r\n\t\t\t\tstep: gantt.getScale().step\r\n\t\t\t};\r\n\t\t}\r\n\t\tvar date = config.date,\r\n\t\t\tsteps = config.step,\r\n\t\t\tunit = config.unit;\r\n\r\n\t\tvar upper, lower, colIndex;\r\n\t\tif (unit == gantt.getScale().unit && steps == gantt.getScale().step &&\r\n\t\t\t+date >= +gantt._min_date && +date <= +gantt._max_date) {\r\n\t\t\t//find date in time scale config\r\n\t\t\tcolIndex = Math.floor(gantt.columnIndexByDate(date));\r\n\r\n\t\t\tif (!gantt.getScale().trace_x[colIndex]) {\r\n\t\t\t\tcolIndex -= 1;// end of time scale\r\n\t\t\t}\r\n\t\t\tlower = new Date(gantt.getScale().trace_x[colIndex]);\r\n\r\n\t\t\tupper = new Date(lower);\r\n\t\t\tif (gantt.getScale().trace_x[colIndex + 1]) {\r\n\t\t\t\tupper = new Date(gantt.getScale().trace_x[colIndex + 1]);\r\n\t\t\t} else {\r\n\t\t\t\tupper = gantt.date.add(lower, steps, unit);\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tcolIndex = Math.floor(gantt.columnIndexByDate(date));\r\n\r\n\t\t\tupper = gantt.date[unit + \"_start\"](new Date(this._min_date));\r\n\t\t\tif (gantt.getScale().trace_x[colIndex]) {\r\n\t\t\t\tupper = gantt.date[unit + \"_start\"](gantt.getScale().trace_x[colIndex]);// end of time scale\r\n\t\t\t}\r\n\r\n\t\t\twhile (+upper < +date) {\r\n\t\t\t\tupper = gantt.date[unit + \"_start\"](gantt.date.add(upper, steps, unit));\r\n\r\n\t\t\t\tvar tzOffset = upper.getTimezoneOffset();\r\n\r\n\t\t\t\tupper = gantt._correct_dst_change(upper, tzOffset, upper, unit);\r\n\t\t\t\tif (gantt.date[unit + '_start'])\r\n\t\t\t\t\tupper = gantt.date[unit + '_start'](upper);\r\n\t\t\t}\r\n\r\n\t\t\tlower = gantt.date.add(upper, -1 * steps, unit);\r\n\r\n\t\t}\r\n\t\tif (config.dir && config.dir == 'future')\r\n\t\t\treturn upper;\r\n\t\tif (config.dir && config.dir == 'past')\r\n\t\t\treturn lower;\r\n\r\n\t\tif (Math.abs(date - lower) < Math.abs(upper - date)) {\r\n\t\t\treturn lower;\r\n\t\t} else {\r\n\t\t\treturn upper;\r\n\t\t}\r\n\r\n\t};\r\n\r\n\tgantt.correctTaskWorkTime = function (task) {\r\n\t\tif (gantt.config.work_time && gantt.config.correct_work_time) {\r\n\t\t\tif (!this.isWorkTime(task.start_date, task)) {\r\n\t\t\t\ttask.start_date = this.getClosestWorkTime({date: task.start_date, dir: 'future', task: task});\r\n\t\t\t\ttask.end_date = this.calculateEndDate(task);\r\n\t\t\t} else if (!this.isWorkTime(new Date(+task.end_date - 1), task)) {\r\n\t\t\t\ttask.end_date = this.calculateEndDate(task);\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\r\n\tgantt.attachEvent(\"onBeforeTaskUpdate\", function (id, task) {\r\n\t\tgantt._init_task_timing(task);\r\n\t\treturn true;\r\n\t});\r\n\tgantt.attachEvent(\"onBeforeTaskAdd\", function (id, task) {\r\n\t\tgantt._init_task_timing(task);\r\n\t\treturn true;\r\n\t});\r\n\r\n\tgantt.sort = function(field, desc, parent, silent) {\r\n\t\tvar render = !silent;//4th argument to cancel redraw after sorting\r\n\r\n\t\tif (!this.isTaskExists(parent)) {\r\n\t\t\tparent = this.config.root_id;\r\n\t\t}\r\n\r\n\t\tif (!field) field = \"order\";\r\n\t\tvar criteria = (typeof(field) == \"string\") ? (function(a, b) {\r\n\t\t\tif(a[field] == b[field]){\r\n\t\t\t\treturn 0;\r\n\t\t\t}\r\n\r\n\t\t\tvar result = a[field] > b[field];\r\n\t\t\treturn result ? 1 : -1;\r\n\t\t}) : field;\r\n\r\n\t\tif (desc) {\r\n\t\t\tvar original_criteria = criteria;\r\n\t\t\tcriteria = function (a, b) {\r\n\t\t\t\treturn original_criteria(b, a);\r\n\t\t\t};\r\n\t\t}\r\n\r\n\t\tvar els = this.getChildren(parent);\r\n\t\tif (els){\r\n\t\t\tvar temp = [];\r\n\t\t\tfor (var i = els.length - 1; i >= 0; i--)\r\n\t\t\t\ttemp[i] = this.getTask(els[i]);\r\n\r\n\t\t\ttemp.sort(criteria);\r\n\r\n\t\t\tfor (var i = 0; i < temp.length; i++) {\r\n\t\t\t\tels[i] = temp[i].id;\r\n\t\t\t\tthis.sort(field, desc, els[i], true);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif (render) {\r\n\t\t\tthis.render();\r\n\t\t}\r\n\t};\r\n\r\n\tgantt._isTask = function (task) {\r\n\t\tvar taskTiming = this._get_task_timing_mode(task);\r\n\t\treturn (!task.type || task.type != gantt.config.types.project) && !(taskTiming.$no_start || taskTiming.$no_end);\r\n\t};\r\n\r\n\tgantt._isProject = function (task) {\r\n\t\treturn !this._isTask(task);\r\n\t};\r\n\r\n};\n\n/***/ }),\n/* 79 */\n/***/ (function(module, exports, __webpack_require__) {\n\nmodule.exports = function(gantt) {\r\n\tvar domHelpers = __webpack_require__(1);\r\n\r\n\tgantt._lightbox_methods = {};\r\n\tgantt._lightbox_template = \"<div class='gantt_cal_ltitle'><span class='gantt_mark'>&nbsp;</span><span class='gantt_time'></span><span class='gantt_title'></span></div><div class='gantt_cal_larea'></div>\";\r\n\r\n\tgantt.showLightbox = function (id) {\r\n\t\tif (!id || gantt.isReadonly(this.getTask(id))) return;\r\n\t\tif (!this.callEvent(\"onBeforeLightbox\", [id])) return;\r\n\r\n\t\tvar task = this.getTask(id);\r\n\r\n\t\tvar box = this.getLightbox(this.getTaskType(task.type));\r\n\t\tthis._center_lightbox(box);\r\n\t\tthis.showCover();\r\n\t\tthis._fill_lightbox(id, box);\r\n\r\n\t\tthis._waiAria.lightboxVisibleAttr(box);\r\n\r\n\t\tthis.callEvent(\"onLightbox\", [id]);\r\n\t};\r\n\tgantt._get_timepicker_step = function () {\r\n\t\tif (this.config.round_dnd_dates) {\r\n\t\t\tvar scale = gantt.getScale(),\r\n\t\t\t\tstep = (this._get_line(scale.unit) * scale.step) / 60;//timepicker step is measured in minutes\r\n\t\t\tif (step >= 60 * 24 || !this._is_chart_visible()) {\r\n\t\t\t\tstep = this.config.time_step;\r\n\t\t\t}\r\n\t\t\treturn step;\r\n\t\t}\r\n\t\treturn this.config.time_step;\r\n\t};\r\n\tgantt.getLabel = function (property, key) {\r\n\t\tvar sections = this._get_typed_lightbox_config();\r\n\t\tfor (var i = 0; i < sections.length; i++) {\r\n\t\t\tif (sections[i].map_to == property) {\r\n\t\t\t\tvar options = sections[i].options;\r\n\t\t\t\tfor (var j = 0; j < options.length; j++) {\r\n\t\t\t\t\tif (options[j].key == key) {\r\n\t\t\t\t\t\treturn options[j].label;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn \"\";\r\n\t};\r\n\r\n\tgantt.updateCollection = function (list_name, collection) {\r\n\t\tcollection = collection.slice(0);\r\n\t\tvar list = gantt.serverList(list_name);\r\n\t\tif (!list) return false;\r\n\t\tlist.splice(0, list.length);\r\n\t\tlist.push.apply(list, collection || []);\r\n\t\tgantt.resetLightbox();\r\n\t};\r\n\tgantt.getLightboxType = function () {\r\n\t\treturn this.getTaskType(this._lightbox_type);\r\n\t};\r\n\tgantt.getLightbox = function (type) {\r\n\t\tif (type === undefined)\r\n\t\t\ttype = this.getLightboxType();\r\n\r\n\t\tif (!this._lightbox || this.getLightboxType() != this.getTaskType(type)) {\r\n\t\t\tthis._lightbox_type = this.getTaskType(type);\r\n\t\t\tvar d = document.createElement(\"DIV\");\r\n\t\t\td.className = \"gantt_cal_light\";\r\n\r\n\t\t\tvar full_width = this._is_lightbox_timepicker();\r\n\t\t\tif (gantt.config.wide_form || full_width)\r\n\t\t\t\td.className += \" gantt_cal_light_wide\";\r\n\r\n\t\t\tif (full_width) {\r\n\t\t\t\tgantt.config.wide_form = true;\r\n\t\t\t\td.className += \" gantt_cal_light_full\";\r\n\t\t\t}\r\n\r\n\r\n\t\t\td.style.visibility = \"hidden\";\r\n\r\n\t\t\tvar html = this._lightbox_template;\r\n\r\n\t\t\tvar ariaAttr;\r\n\t\t\tvar buttons = this.config.buttons_left;\r\n\t\t\tfor (var i = 0; i < buttons.length; i++) {\r\n\t\t\t\t// needed to migrate from 'dhx_something' to 'gantt_something' naming in a lightbox\r\n\t\t\t\tvar button = this.config._migrate_buttons[buttons[i]] ? this.config._migrate_buttons[buttons[i]] : buttons[i];\r\n\r\n\t\t\t\tariaAttr = this._waiAria.lightboxButtonAttrString(button);\r\n\t\t\t\thtml += \"<div \" + ariaAttr + \" class='gantt_btn_set gantt_left_btn_set \" + button + \"_set'><div dhx_button='1' class='\" + button + \"'></div><div>\" + this.locale.labels[button] + \"</div></div>\";\r\n\r\n\t\t\t}\r\n\t\t\tbuttons = this.config.buttons_right;\r\n\t\t\tfor (var i = 0; i < buttons.length; i++) {\r\n\t\t\t\tvar button = this.config._migrate_buttons[buttons[i]] ? this.config._migrate_buttons[buttons[i]] : buttons[i];\r\n\t\t\t\tariaAttr = this._waiAria.lightboxButtonAttrString(button);\r\n\r\n\t\t\t\thtml += \"<div \" + ariaAttr + \" class='gantt_btn_set gantt_right_btn_set \" + button + \"_set' style='float:right;'><div dhx_button='1' class='\" + button + \"'></div><div>\" + this.locale.labels[button] + \"</div></div>\";\r\n\r\n\t\t\t}\r\n\t\t\thtml += \"</div>\";\r\n\t\t\td.innerHTML = html;\r\n\r\n\t\t\tgantt._waiAria.lightboxAttr(d);\r\n\r\n\t\t\tif (gantt.config.drag_lightbox) {\r\n\t\t\t\td.firstChild.onmousedown = gantt._ready_to_dnd;\r\n\t\t\t\td.firstChild.onselectstart = function () {\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t};\r\n\t\t\t\td.firstChild.style.cursor = \"pointer\";\r\n\t\t\t\tgantt._init_dnd_events();\r\n\r\n\t\t\t}\r\n\r\n\t\t\tdocument.body.insertBefore(d, document.body.firstChild);\r\n\t\t\tthis._lightbox = d;\r\n\r\n\t\t\tvar sns = this._get_typed_lightbox_config(type);\r\n\t\t\thtml = this._render_sections(sns);\r\n\r\n\t\t\tvar ds = d.getElementsByTagName(\"div\");\r\n\t\t\tfor (var i = 0; i < ds.length; i++) {\r\n\t\t\t\tvar t_ds = ds[i];\r\n\t\t\t\tif (t_ds.className == \"gantt_cal_larea\") {\r\n\t\t\t\t\tt_ds.innerHTML = html;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t// bind labels to lightbox inputs\r\n\t\t\tfor (var i = 0; i < sns.length; i++) {\r\n\t\t\t\tvar section = sns[i];\r\n\t\t\t\tif (!section.id || !document.getElementById(section.id))\r\n\t\t\t\t\tcontinue;\r\n\r\n\t\t\t\tvar labelBlock = document.getElementById(section.id);\r\n\t\t\t\tvar label = labelBlock.querySelector(\"label\");\r\n\t\t\t\tvar inputBlock = labelBlock.nextSibling;\r\n\t\t\t\tif (!inputBlock)\r\n\t\t\t\t\tcontinue;\r\n\r\n\t\t\t\tvar input = inputBlock.querySelector(\"input, select, textarea\");\r\n\t\t\t\tif (input) {\r\n\t\t\t\t\tsection.inputId = input.id || \"input_\" + gantt.uid();\r\n\t\t\t\t\tif (!input.id)\r\n\t\t\t\t\t\tinput.id = section.inputId;\r\n\r\n\t\t\t\t\tlabel.setAttribute(\"for\", section.inputId);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t//sizes\r\n\t\t\tthis.resizeLightbox();\r\n\r\n\t\t\tthis._init_lightbox_events(this);\r\n\t\t\td.style.display = \"none\";\r\n\t\t\td.style.visibility = \"visible\";\r\n\t\t}\r\n\t\treturn this._lightbox;\r\n\t};\r\n\r\n\tgantt._render_sections = function (sns) {\r\n\t\tvar html = \"\";\r\n\t\tfor (var i = 0; i < sns.length; i++) {\r\n\t\t\tvar block = this.form_blocks[sns[i].type];\r\n\t\t\tif (!block) continue; //ignore incorrect blocks\r\n\t\t\tsns[i].id = \"area_\" + this.uid();\r\n\r\n\t\t\tvar display = sns[i].hidden ? \" style='display:none'\" : \"\";\r\n\t\t\tvar button = \"\";\r\n\t\t\tif (sns[i].button) {\r\n\t\t\t\tbutton = \"<div class='gantt_custom_button' index='\" + i + \"'><div class='gantt_custom_button_\" + sns[i].button + \"'></div><div class='gantt_custom_button_label'>\" + this.locale.labels[\"button_\" + sns[i].button] + \"</div></div>\";\r\n\t\t\t}\r\n\t\t\tif (this.config.wide_form) {\r\n\t\t\t\thtml += \"<div class='gantt_wrap_section' \" + display + \">\";\r\n\t\t\t}\r\n\t\t\thtml += \"<div id='\" + sns[i].id + \"' class='gantt_cal_lsection'><label>\" + button + this.locale.labels[\"section_\" + sns[i].name] + \"</label></div>\" + block.render.call(this, sns[i]);\r\n\t\t\thtml += \"</div>\";\r\n\t\t}\r\n\t\treturn html;\r\n\t};\r\n\r\n\r\n\tgantt.resizeLightbox = function () {\r\n\t\tvar d = this._lightbox;\r\n\t\tif (!d) return;\r\n\r\n\t\tvar con = d.childNodes[1];\r\n\t\tcon.style.height = \"0px\";\r\n\t\tcon.style.height = con.scrollHeight + \"px\";\r\n\t\td.style.height = con.scrollHeight + this.config.lightbox_additional_height + \"px\";\r\n\t\tcon.style.height = con.scrollHeight + \"px\"; //it is incredible , how ugly IE can be\r\n\r\n\r\n\t};\r\n\r\n\tgantt._center_lightbox = function (box) {\r\n\t\tif (box) {\r\n\t\t\tbox.style.display = \"block\";\r\n\r\n\t\t\tvar scroll_top = window.pageYOffset || document.body.scrollTop || document.documentElement.scrollTop;\r\n\t\t\tvar scroll_left = window.pageXOffset || document.body.scrollLeft || document.documentElement.scrollLeft;\r\n\r\n\t\t\tvar view_height = window.innerHeight || document.documentElement.clientHeight;\r\n\r\n\t\t\tif (scroll_top) // if vertical scroll on window\r\n\t\t\t\tbox.style.top = Math.round(scroll_top + Math.max((view_height - box.offsetHeight) / 2, 0)) + \"px\";\r\n\t\t\telse // vertical scroll on body\r\n\t\t\t\tbox.style.top = Math.round(Math.max(((view_height - box.offsetHeight) / 2), 0) + 9) + \"px\"; // +9 for compatibility with auto tests\r\n\r\n\t\t\t// not quite accurate but used for compatibility reasons\r\n\t\t\tif (document.documentElement.scrollWidth > document.body.offsetWidth) // if horizontal scroll on the window\r\n\t\t\t\tbox.style.left = Math.round(scroll_left + (document.body.offsetWidth - box.offsetWidth) / 2) + \"px\";\r\n\t\t\telse // horizontal scroll on the body\r\n\t\t\t\tbox.style.left = Math.round((document.body.offsetWidth - box.offsetWidth) / 2) + \"px\";\r\n\t\t}\r\n\t};\r\n\tgantt.showCover = function () {\r\n\t\tif (this._cover) return;\r\n\r\n\t\tthis._cover = document.createElement(\"DIV\");\r\n\t\tthis._cover.className = \"gantt_cal_cover\";\r\n\t\tvar _document_height = ((document.height !== undefined) ? document.height : document.body.offsetHeight);\r\n\t\tvar _scroll_height = ((document.documentElement) ? document.documentElement.scrollHeight : 0);\r\n\t\tthis._cover.style.height = Math.max(_document_height, _scroll_height) + 'px';\r\n\t\tdocument.body.appendChild(this._cover);\r\n\t};\r\n\r\n\r\n\tgantt._init_lightbox_events = function () {\r\n\t\tgantt.lightbox_events = {};\r\n\r\n\r\n\t\tgantt.lightbox_events[\"gantt_save_btn\"] = function (e) {\r\n\t\t\tgantt._save_lightbox();\r\n\t\t};\r\n\r\n\r\n\t\tgantt.lightbox_events[\"gantt_delete_btn\"] = function (e) {\r\n\t\t\tif (!gantt.callEvent(\"onLightboxDelete\", [gantt._lightbox_id]))\r\n\t\t\t\treturn;\r\n\r\n\t\t\tif (gantt.isTaskExists(gantt._lightbox_id)) {\r\n\t\t\t\tgantt.$click.buttons[\"delete\"](gantt._lightbox_id);\r\n\t\t\t} else {\r\n\t\t\t\tgantt.hideLightbox();\r\n\t\t\t}\r\n\r\n\t\t};\r\n\r\n\r\n\t\tgantt.lightbox_events[\"gantt_cancel_btn\"] = function (e) {\r\n\t\t\tgantt._cancel_lightbox();\r\n\t\t};\r\n\r\n\r\n\t\tgantt.lightbox_events[\"default\"] = function (e, src) {\r\n\t\t\tif (src.getAttribute(\"dhx_button\")) {\r\n\t\t\t\tgantt.callEvent(\"onLightboxButton\", [src.className, src, e]);\r\n\t\t\t} else {\r\n\t\t\t\tvar index, block, sec;\r\n\r\n\t\t\t\tvar className = domHelpers.getClassName(src);\r\n\t\t\t\tif (className.indexOf(\"gantt_custom_button\") != -1) {\r\n\t\t\t\t\tif (className.indexOf(\"gantt_custom_button_\") != -1) {\r\n\t\t\t\t\t\tindex = src.parentNode.getAttribute(\"index\");\r\n\t\t\t\t\t\tsec = src;\r\n\t\t\t\t\t\twhile (sec && domHelpers.getClassName(sec).indexOf(\"gantt_cal_lsection\") == -1) {\r\n\t\t\t\t\t\t\tsec = sec.parentNode;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tindex = src.getAttribute(\"index\");\r\n\t\t\t\t\t\tsec = src.parentNode;\r\n\t\t\t\t\t\tsrc = src.firstChild;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tvar sections = gantt._get_typed_lightbox_config();\r\n\r\n\t\t\t\tif (index) {\r\n\t\t\t\t\tindex = index * 1;\r\n\t\t\t\t\tblock = gantt.form_blocks[sections[index * 1].type];\r\n\t\t\t\t\tblock.button_click(index, src, sec, sec.nextSibling);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t};\r\n\t\tthis.event(gantt.getLightbox(), \"click\", function (e) {\r\n\t\t\te = e || window.event;\r\n\t\t\tvar src = e.target ? e.target : e.srcElement;\r\n\r\n\t\t\tvar className = domHelpers.getClassName(src);\r\n\t\t\tif (!className) {\r\n\t\t\t\tsrc = src.previousSibling;\r\n\t\t\t\tclassName = domHelpers.getClassName(src);\r\n\t\t\t}\r\n\t\t\tif (src && className && className.indexOf(\"gantt_btn_set\") === 0) {\r\n\t\t\t\tsrc = src.firstChild;\r\n\t\t\t\tclassName = domHelpers.getClassName(src);\r\n\t\t\t}\r\n\t\t\tif (src && className) {\r\n\t\t\t\tvar func = gantt.defined(gantt.lightbox_events[src.className]) ? gantt.lightbox_events[src.className] : gantt.lightbox_events[\"default\"];\r\n\t\t\t\treturn func(e, src);\r\n\t\t\t}\r\n\t\t\treturn false;\r\n\t\t});\r\n\r\n\t\tgantt.getLightbox().onkeydown = function (e) {\r\n\t\t\tvar event = e || window.event;\r\n\t\t\tvar target = e.target || e.srcElement;\r\n\t\t\tvar buttonTarget = !!(domHelpers.getClassName(target).indexOf(\"gantt_btn_set\") > -1);\r\n\r\n\t\t\tswitch ((e || event).keyCode) {\r\n\t\t\t\tcase 32: {//space\r\n\t\t\t\t\tif ((e || event).shiftKey) return;\r\n\t\t\t\t\tif (buttonTarget && target.click) {\r\n\t\t\t\t\t\ttarget.click();\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t\tcase gantt.keys.edit_save:\r\n\t\t\t\t\tif ((e || event).shiftKey) return;\r\n\t\t\t\t\tif (buttonTarget && target.click) {\r\n\t\t\t\t\t\ttarget.click();\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tgantt._save_lightbox();\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase gantt.keys.edit_cancel:\r\n\t\t\t\t\tgantt._cancel_lightbox();\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tdefault:\r\n\t\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t};\r\n\t};\r\n\r\n\tgantt._cancel_lightbox = function () {\r\n\t\tvar task = this.getLightboxValues();\r\n\t\tthis.callEvent(\"onLightboxCancel\", [this._lightbox_id, task.$new]);\r\n\t\tif (gantt.isTaskExists(task.id) && task.$new) {\r\n\t\t\tthis.silent(function(){\r\n\t\t\t\tgantt.$data.tasksStore.removeItem(task.id);\r\n\t\t\t\tgantt._update_flags(task.id, null);\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\tthis.refreshData();\r\n\t\tthis.hideLightbox();\r\n\t};\r\n\r\n\tgantt._save_lightbox = function () {\r\n\t\tvar task = this.getLightboxValues();\r\n\t\tif (!this.callEvent(\"onLightboxSave\", [this._lightbox_id, task, !!task.$new]))\r\n\t\t\treturn;\r\n\r\n\t\tif (task.$new) {\r\n\t\t\tdelete task.$new;\r\n\t\t\tthis.addTask(task);\r\n\t\t}else if(this.isTaskExists(task.id)){\r\n\t\t\tthis.mixin(this.getTask(task.id), task, true);\r\n\t\t\tthis.refreshTask(task.id);\r\n\t\t\tthis.updateTask(task.id);\r\n\t\t}\r\n\t\tthis.refreshData();\r\n\r\n\t\t// TODO: do we need any blockable events here to prevent closing lightbox?\r\n\t\tthis.hideLightbox();\r\n\t};\r\n\r\n\tgantt._resolve_default_mapping = function (section) {\r\n\t\tvar mapping = section.map_to;\r\n\t\tvar time_controls = {\"time\": true, \"time_optional\": true, \"duration\": true, \"duration_optional\": true};\r\n\t\tif (time_controls[section.type]) {\r\n\t\t\tif (section.map_to == 'auto') {\r\n\t\t\t\tmapping = {start_date: \"start_date\", end_date: \"end_date\", duration: \"duration\"};\r\n\t\t\t} else if (typeof(section.map_to) === \"string\") {\r\n\t\t\t\tmapping = {start_date: section.map_to};\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn mapping;\r\n\t};\r\n\r\n\tgantt.getLightboxValues = function () {\r\n\t\tvar task = {};\r\n\r\n\t\tif (gantt.isTaskExists(this._lightbox_id)) {\r\n\t\t\ttask = this.mixin({}, this.getTask(this._lightbox_id));\r\n\t\t}\r\n\r\n\t\tvar sns = this._get_typed_lightbox_config();\r\n\t\tfor (var i = 0; i < sns.length; i++) {\r\n\t\t\tvar node = document.getElementById(sns[i].id);\r\n\t\t\tnode = (node ? node.nextSibling : node);\r\n\t\t\tvar block = this.form_blocks[sns[i].type];\r\n\t\t\tif (!block) continue;\r\n\t\t\tvar res = block.get_value.call(this, node, task, sns[i]);\r\n\t\t\tvar map_to = gantt._resolve_default_mapping(sns[i]);\r\n\t\t\tif (typeof map_to == \"string\" && map_to != \"auto\") {\r\n\t\t\t\ttask[map_to] = res;\r\n\t\t\t} else if (typeof map_to == \"object\") {\r\n\t\t\t\tfor (var property in map_to) {\r\n\t\t\t\t\tif (map_to[property])\r\n\t\t\t\t\t\ttask[map_to[property]] = res[property];\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn task;\r\n\t};\r\n\r\n\r\n\tgantt.hideLightbox = function () {\r\n\t\tvar box = this.getLightbox();\r\n\t\tif (box) box.style.display = \"none\";\r\n\r\n\t\tthis._waiAria.lightboxHiddenAttr(box);\r\n\t\tthis._lightbox_id = null;\r\n\r\n\t\tthis.hideCover();\r\n\t\tthis.callEvent(\"onAfterLightbox\", []);\r\n\t};\r\n\tgantt.hideCover = function () {\r\n\t\tif (this._cover)\r\n\t\t\tthis._cover.parentNode.removeChild(this._cover);\r\n\t\tthis._cover = null;\r\n\t};\r\n\r\n\tgantt.resetLightbox = function () {\r\n\t\tif (gantt._lightbox && !gantt._custom_lightbox)\r\n\t\t\tgantt._lightbox.parentNode.removeChild(gantt._lightbox);\r\n\t\tgantt._lightbox = null;\r\n\t};\r\n\tgantt._set_lightbox_values = function (data, box) {\r\n\t\tvar task = data;\r\n\t\tvar s = box.getElementsByTagName(\"span\");\r\n\t\tvar lightboxHeader = [];\r\n\t\tif (gantt.templates.lightbox_header) {\r\n\t\t\tlightboxHeader.push(\"\");\r\n\t\t\tlightboxHeader.push(gantt.templates.lightbox_header(task.start_date, task.end_date, task));\r\n\t\t\ts[1].innerHTML = \"\";\r\n\t\t\ts[2].innerHTML = gantt.templates.lightbox_header(task.start_date, task.end_date, task);\r\n\t\t} else {\r\n\t\t\tlightboxHeader.push(this.templates.task_time(task.start_date, task.end_date, task));\r\n\t\t\tlightboxHeader.push((this.templates.task_text(task.start_date, task.end_date, task) || \"\").substr(0, 70)); //IE6 fix\r\n\t\t\ts[1].innerHTML = this.templates.task_time(task.start_date, task.end_date, task);\r\n\t\t\ts[2].innerHTML = (this.templates.task_text(task.start_date, task.end_date, task) || \"\").substr(0, 70); //IE6 fix\r\n\t\t}\r\n\t\ts[1].innerHTML = lightboxHeader[0];\r\n\t\ts[2].innerHTML = lightboxHeader[1];\r\n\r\n\t\tgantt._waiAria.lightboxHeader(box, lightboxHeader.join(\" \"));\r\n\r\n\t\tvar sns = this._get_typed_lightbox_config(this.getLightboxType());\r\n\t\tfor (var i = 0; i < sns.length; i++) {\r\n\t\t\tvar section = sns[i];\r\n\r\n\t\t\tif (!this.form_blocks[section.type]) {\r\n\t\t\t\tcontinue;//skip incorrect sections, same check is done during rendering\r\n\t\t\t}\r\n\r\n\r\n\t\t\tvar node = document.getElementById(section.id).nextSibling;\r\n\t\t\tvar block = this.form_blocks[section.type];\r\n\t\t\tvar map_to = gantt._resolve_default_mapping(sns[i]);\r\n\t\t\tvar value = this.defined(task[map_to]) ? task[map_to] : section.default_value;\r\n\t\t\tblock.set_value.call(gantt, node, value, task, section);\r\n\r\n\t\t\tif (section.focus)\r\n\t\t\t\tblock.focus.call(gantt, node);\r\n\t\t}\r\n\t\tif (data.id)\r\n\t\t\tgantt._lightbox_id = data.id;\r\n\t};\r\n\tgantt._fill_lightbox = function (id, box) {\r\n\t\tvar task = this.getTask(id);\r\n\t\tthis._set_lightbox_values(task, box);\r\n\t};\r\n\r\n\r\n\tgantt.getLightboxSection = function (name) {\r\n\t\tvar config = this._get_typed_lightbox_config();\r\n\t\tvar i = 0;\r\n\t\tfor (i; i < config.length; i++)\r\n\t\t\tif (config[i].name == name)\r\n\t\t\t\tbreak;\r\n\t\tvar section = config[i];\r\n\t\tif (!section)\r\n\t\t\treturn null;\r\n\r\n\t\tif (!this._lightbox)\r\n\t\t\tthis.getLightbox();\r\n\t\tvar header = document.getElementById(section.id);\r\n\t\tvar node = header.nextSibling;\r\n\r\n\t\tvar result = {\r\n\t\t\tsection: section,\r\n\t\t\theader: header,\r\n\t\t\tnode: node,\r\n\t\t\tgetValue: function (ev) {\r\n\t\t\t\treturn gantt.form_blocks[section.type].get_value.call(gantt, node, (ev || {}), section);\r\n\t\t\t},\r\n\t\t\tsetValue: function (value, ev) {\r\n\t\t\t\treturn gantt.form_blocks[section.type].set_value.call(gantt, node, value, (ev || {}), section);\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\tvar handler = this._lightbox_methods[\"get_\" + section.type + \"_control\"];\r\n\t\treturn handler ? handler(result) : result;\r\n\t};\r\n\r\n\tgantt._lightbox_methods.get_template_control = function (result) {\r\n\t\tresult.control = result.node;\r\n\t\treturn result;\r\n\t};\r\n\tgantt._lightbox_methods.get_select_control = function (result) {\r\n\t\tresult.control = result.node.getElementsByTagName('select')[0];\r\n\t\treturn result;\r\n\t};\r\n\tgantt._lightbox_methods.get_textarea_control = function (result) {\r\n\t\tresult.control = result.node.getElementsByTagName('textarea')[0];\r\n\t\treturn result;\r\n\t};\r\n\tgantt._lightbox_methods.get_time_control = function (result) {\r\n\t\tresult.control = result.node.getElementsByTagName('select'); // array\r\n\t\treturn result;\r\n\t};\r\n\r\n\r\n\tgantt._init_dnd_events = function () {\r\n\t\tthis.event(document.body, \"mousemove\", gantt._move_while_dnd);\r\n\t\tthis.event(document.body, \"mouseup\", gantt._finish_dnd);\r\n\t\tgantt._init_dnd_events = function () {\r\n\t\t};\r\n\t};\r\n\tgantt._move_while_dnd = function (e) {\r\n\t\tif (gantt._dnd_start_lb) {\r\n\t\t\tif (!document.gantt_unselectable) {\r\n\t\t\t\tdocument.body.className += \" gantt_unselectable\";\r\n\t\t\t\tdocument.gantt_unselectable = true;\r\n\t\t\t}\r\n\t\t\tvar lb = gantt.getLightbox();\r\n\t\t\tvar now = (e && e.target) ? [e.pageX, e.pageY] : [event.clientX, event.clientY];\r\n\t\t\tlb.style.top = gantt._lb_start[1] + now[1] - gantt._dnd_start_lb[1] + \"px\";\r\n\t\t\tlb.style.left = gantt._lb_start[0] + now[0] - gantt._dnd_start_lb[0] + \"px\";\r\n\t\t}\r\n\t};\r\n\tgantt._ready_to_dnd = function (e) {\r\n\t\tvar lb = gantt.getLightbox();\r\n\t\tgantt._lb_start = [parseInt(lb.style.left, 10), parseInt(lb.style.top, 10)];\r\n\t\tgantt._dnd_start_lb = (e && e.target) ? [e.pageX, e.pageY] : [event.clientX, event.clientY];\r\n\t};\r\n\tgantt._finish_dnd = function () {\r\n\t\tif (gantt._lb_start) {\r\n\t\t\tgantt._lb_start = gantt._dnd_start_lb = false;\r\n\t\t\tdocument.body.className = document.body.className.replace(\" gantt_unselectable\", \"\");\r\n\t\t\tdocument.gantt_unselectable = false;\r\n\t\t}\r\n\t};\r\n\r\n\r\n\tgantt._focus = function (node, select) {\r\n\t\tif (node && node.focus) {\r\n\t\t\tif (gantt.config.touch) {\r\n\t\t\t\t//do not focus editor, to prevent auto-zoom\r\n\t\t\t} else {\r\n\t\t\t\ttry {\r\n\t\t\t\t\tif (select && node.select) node.select();\r\n\t\t\t\t\tnode.focus();\r\n\t\t\t\t} catch (e) {\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\r\n\r\n\tgantt.form_blocks = {\r\n\t\tgetTimePicker: function (sns, hidden) {\r\n\t\t\tvar time_format = sns.time_format;\r\n\t\t\tif (!time_format) {\r\n\t\t\t\t// default order\r\n\t\t\t\tvar time_format = [\"%d\", \"%m\", \"%Y\"];\r\n\t\t\t\tif (gantt._get_line(gantt.getScale().unit) < gantt._get_line(\"day\")) {\r\n\t\t\t\t\ttime_format.push(\"%H:%i\");\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t// map: default order => real one\r\n\t\t\tsns._time_format_order = {size: 0};\r\n\r\n\r\n\t\t\tvar cfg = this.config;\r\n\t\t\tvar dt = this.date.date_part(new Date(gantt._min_date.valueOf()));\r\n\t\t\tvar last = 24 * 60, first = 0;\r\n\t\t\tif (gantt.config.limit_time_select) {\r\n\t\t\t\tlast = 60 * cfg.last_hour + 1;\r\n\t\t\t\tfirst = 60 * cfg.first_hour;\r\n\t\t\t\tdt.setHours(cfg.first_hour);\r\n\t\t\t}\r\n\t\t\tvar html = \"\";\r\n\r\n\t\t\tfor (var p = 0; p < time_format.length; p++) {\r\n\t\t\t\tvar time_option = time_format[p];\r\n\r\n\t\t\t\t// adding spaces between selects\r\n\t\t\t\tif (p > 0) {\r\n\t\t\t\t\thtml += \" \";\r\n\t\t\t\t}\r\n\r\n\t\t\t\tvar options = '';\r\n\t\t\t\tswitch (time_option) {\r\n\t\t\t\t\tcase \"%Y\":\r\n\t\t\t\t\t\tsns._time_format_order[2] = p;\r\n\t\t\t\t\t\tsns._time_format_order.size++;\r\n\t\t\t\t\t\t//year\r\n\r\n\t\t\t\t\t\tvar range, offset, start_year, end_year;\r\n\r\n\t\t\t\t\t\tif (sns.year_range) {\r\n\t\t\t\t\t\t\tif (!isNaN(sns.year_range)) {\r\n\t\t\t\t\t\t\t\trange = sns.year_range;\r\n\t\t\t\t\t\t\t} else if (sns.year_range.push) {\r\n\t\t\t\t\t\t\t\t// if\r\n\t\t\t\t\t\t\t\tstart_year = sns.year_range[0];\r\n\t\t\t\t\t\t\t\tend_year = sns.year_range[1];\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\trange = range || 10;\r\n\t\t\t\t\t\toffset = offset || Math.floor(range / 2);\r\n\t\t\t\t\t\tstart_year = start_year || dt.getFullYear() - offset;\r\n\t\t\t\t\t\tend_year = end_year || start_year + range;\r\n\r\n\r\n\t\t\t\t\t\tfor (var i = start_year; i < end_year; i++)\r\n\t\t\t\t\t\t\toptions += \"<option value='\" + (i) + \"'>\" + (i) + \"</option>\";\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase \"%m\":\r\n\t\t\t\t\t\tsns._time_format_order[1] = p;\r\n\t\t\t\t\t\tsns._time_format_order.size++;\r\n\t\t\t\t\t\t//month\r\n\t\t\t\t\t\tfor (var i = 0; i < 12; i++)\r\n\t\t\t\t\t\t\toptions += \"<option value='\" + i + \"'>\" + this.locale.date.month_full[i] + \"</option>\";\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase \"%d\":\r\n\t\t\t\t\t\tsns._time_format_order[0] = p;\r\n\t\t\t\t\t\tsns._time_format_order.size++;\r\n\t\t\t\t\t\t//days\r\n\t\t\t\t\t\tfor (var i = 1; i < 32; i++)\r\n\t\t\t\t\t\t\toptions += \"<option value='\" + i + \"'>\" + i + \"</option>\";\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase \"%H:%i\":\r\n\t\t\t\t\t\t//  var last = 24*60, first = 0;\r\n\t\t\t\t\t\tsns._time_format_order[3] = p;\r\n\t\t\t\t\t\tsns._time_format_order.size++;\r\n\t\t\t\t\t\t//hours\r\n\t\t\t\t\t\tvar i = first;\r\n\t\t\t\t\t\tvar tdate = dt.getDate();\r\n\t\t\t\t\t\tsns._time_values = [];\r\n\r\n\t\t\t\t\t\twhile (i < last) {\r\n\t\t\t\t\t\t\tvar time = this.templates.time_picker(dt);\r\n\t\t\t\t\t\t\toptions += \"<option value='\" + i + \"'>\" + time + \"</option>\";\r\n\t\t\t\t\t\t\tsns._time_values.push(i);\r\n\t\t\t\t\t\t\tdt.setTime(dt.valueOf() + this._get_timepicker_step() * 60 * 1000);\r\n\t\t\t\t\t\t\tvar diff = (dt.getDate() != tdate) ? 1 : 0; // moved or not to the next day\r\n\t\t\t\t\t\t\ti = diff * 24 * 60 + dt.getHours() * 60 + dt.getMinutes();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tdefault:\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (options) {\r\n\r\n\t\t\t\t\tvar ariaAttrs = gantt._waiAria.lightboxSelectAttrString(time_option);\r\n\r\n\t\t\t\t\tvar readonly = sns.readonly ? \"disabled='disabled'\" : \"\";\r\n\t\t\t\t\tvar display = hidden ? \" style='display:none' \" : \"\";\r\n\t\t\t\t\thtml += \"<select \" + readonly + display + ariaAttrs + \">\" + options + \"</select>\";\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn html;\r\n\t\t},\r\n\t\t_fill_lightbox_select: function (s, i, d, map, cfg) {\r\n\t\t\ts[i + map[0]].value = d.getDate();\r\n\t\t\ts[i + map[1]].value = d.getMonth();\r\n\t\t\ts[i + map[2]].value = d.getFullYear();\r\n\t\t\tif (gantt.defined(map[3])) {\r\n\t\t\t\tvar v = d.getHours() * 60 + d.getMinutes();\r\n\t\t\t\tv = Math.round(v / gantt._get_timepicker_step()) * gantt._get_timepicker_step();\r\n\t\t\t\tvar input = s[i + map[3]];\r\n\t\t\t\tinput.value = v;\r\n\t\t\t\t//in case option not shown\r\n\t\t\t\tinput.setAttribute('data-value', v);\r\n\t\t\t}\r\n\t\t},\r\n\t\ttemplate: {\r\n\t\t\trender: function (sns) {\r\n\t\t\t\tvar height = (sns.height || \"30\") + \"px\";\r\n\t\t\t\treturn \"<div class='gantt_cal_ltext gantt_cal_template' style='height:\" + height + \";'></div>\";\r\n\t\t\t},\r\n\t\t\tset_value: function (node, value, ev, config) {\r\n\t\t\t\tnode.innerHTML = value || \"\";\r\n\t\t\t},\r\n\t\t\tget_value: function (node, ev, config) {\r\n\t\t\t\treturn node.innerHTML || \"\";\r\n\t\t\t},\r\n\t\t\tfocus: function (node) {\r\n\t\t\t}\r\n\t\t},\r\n\t\ttextarea: {\r\n\t\t\trender: function (sns) {\r\n\t\t\t\tvar height = (sns.height || \"130\") + \"px\";\r\n\t\t\t\treturn \"<div class='gantt_cal_ltext' style='height:\" + height + \";'><textarea></textarea></div>\";\r\n\t\t\t},\r\n\t\t\tset_value: function (node, value, ev) {\r\n\t\t\t\tthis.form_blocks.textarea._get_input(node).value = value || \"\";\r\n\t\t\t},\r\n\t\t\tget_value: function (node, ev) {\r\n\t\t\t\treturn this.form_blocks.textarea._get_input(node).value;\r\n\t\t\t},\r\n\t\t\tfocus: function (node) {\r\n\t\t\t\tvar a = this.form_blocks.textarea._get_input(node);\r\n\t\t\t\tgantt._focus(a, true);\r\n\t\t\t},\r\n\t\t\t_get_input: function (node) {\r\n\t\t\t\treturn node.querySelector(\"textarea\");\r\n\t\t\t}\r\n\t\t},\r\n\t\tselect: {\r\n\t\t\trender: function (sns) {\r\n\t\t\t\tvar height = (sns.height || \"23\") + \"px\";\r\n\t\t\t\tvar html = \"<div class='gantt_cal_ltext' style='height:\" + height + \";'><select style='width:100%;'>\";\r\n\t\t\t\tfor (var i = 0; i < sns.options.length; i++)\r\n\t\t\t\t\thtml += \"<option value='\" + sns.options[i].key + \"'>\" + sns.options[i].label + \"</option>\";\r\n\t\t\t\thtml += \"</select></div>\";\r\n\t\t\t\treturn html;\r\n\t\t\t},\r\n\t\t\tset_value: function (node, value, ev, sns) {\r\n\t\t\t\tvar select = node.firstChild;\r\n\t\t\t\tif (!select._dhx_onchange && sns.onchange) {\r\n\t\t\t\t\tselect.onchange = sns.onchange;\r\n\t\t\t\t\tselect._dhx_onchange = true;\r\n\t\t\t\t}\r\n\t\t\t\tif (typeof value == \"undefined\")\r\n\t\t\t\t\tvalue = (select.options[0] || {}).value;\r\n\t\t\t\tselect.value = value || \"\";\r\n\t\t\t},\r\n\t\t\tget_value: function (node, ev) {\r\n\t\t\t\treturn node.firstChild.value;\r\n\t\t\t},\r\n\t\t\tfocus: function (node) {\r\n\t\t\t\tvar a = node.firstChild;\r\n\t\t\t\tgantt._focus(a, true);\r\n\t\t\t}\r\n\t\t},\r\n\t\ttime: {\r\n\t\t\trender: function (sns) {\r\n\t\t\t\tvar time = this.form_blocks.getTimePicker.call(this, sns);\r\n\t\t\t\tvar parts = [\"<div style='height:\" + (sns.height || 30) + \"px;padding-top:0px;font-size:inherit;text-align:center;' class='gantt_section_time'>\"];\r\n\t\t\t\tparts.push(time);\r\n\r\n\t\t\t\tif (sns.single_date) {\r\n\t\t\t\t\ttime = this.form_blocks.getTimePicker.call(this, sns, true);\r\n\t\t\t\t\tparts.push(\"<span></span>\");\r\n\t\t\t\t} else {\r\n\t\t\t\t\tparts.push(\"<span style='font-weight:normal; font-size:10pt;'> &nbsp;&ndash;&nbsp; </span>\");\r\n\t\t\t\t}\r\n\r\n\t\t\t\tparts.push(time);\r\n\t\t\t\tparts.push(\"</div>\");\r\n\t\t\t\treturn parts.join('');\r\n\t\t\t},\r\n\t\t\tset_value: function (node, value, ev, config) {\r\n\t\t\t\tvar cfg = config;\r\n\t\t\t\tvar s = node.getElementsByTagName(\"select\");\r\n\r\n\t\t\t\tvar map = config._time_format_order;\r\n\t\t\t\tvar map_size = config._time_format_size;\r\n\r\n\t\t\t\tif (cfg.auto_end_date) {\r\n\t\t\t\t\tvar _update_lightbox_select = function () {\r\n\t\t\t\t\t\tstart_date = new Date(s[map[2]].value, s[map[1]].value, s[map[0]].value, 0, 0);\r\n\t\t\t\t\t\tend_date = gantt.calculateEndDate({start_date: start_date, duration: 1, task: ev});\r\n\t\t\t\t\t\tthis.form_blocks._fill_lightbox_select(s, map.size, end_date, map, cfg);\r\n\t\t\t\t\t};\r\n\t\t\t\t\tfor (var i = 0; i < 4; i++) {\r\n\t\t\t\t\t\ts[i].onchange = _update_lightbox_select;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tvar mapping = gantt._resolve_default_mapping(config);\r\n\r\n\t\t\t\tif (typeof(mapping) === \"string\") mapping = {start_date: mapping};\r\n\r\n\t\t\t\tvar start_date = ev[mapping.start_date] || new Date();\r\n\t\t\t\tvar end_date = ev[mapping.end_date] || gantt.calculateEndDate({\r\n\t\t\t\t\tstart_date: start_date,\r\n\t\t\t\t\tduration: 1,\r\n\t\t\t\t\ttask: ev\r\n\t\t\t\t});\r\n\r\n\t\t\t\tthis.form_blocks._fill_lightbox_select(s, 0, start_date, map, cfg);\r\n\t\t\t\tthis.form_blocks._fill_lightbox_select(s, map.size, end_date, map, cfg);\r\n\t\t\t},\r\n\r\n\t\t\tget_value: function (node, ev, config) {\r\n\t\t\t\tvar s = node.getElementsByTagName(\"select\");\r\n\t\t\t\tvar map = config._time_format_order;\r\n\r\n\t\t\t\tvar hours = 0, minutes = 0;\r\n\t\t\t\tif (gantt.defined(map[3])) {\r\n\t\t\t\t\tvar time = parseInt(s[map[3]].value, 10);\r\n\t\t\t\t\thours = Math.floor(time / 60);\r\n\t\t\t\t\tminutes = time % 60;\r\n\t\t\t\t}\r\n\t\t\t\tvar start_date = new Date(s[map[2]].value, s[map[1]].value, s[map[0]].value, hours, minutes);\r\n\r\n\t\t\t\thours = minutes = 0;\r\n\t\t\t\tif (gantt.defined(map[3])) {\r\n\t\t\t\t\tvar time = parseInt(s[map.size + map[3]].value, 10);\r\n\t\t\t\t\thours = Math.floor(time / 60);\r\n\t\t\t\t\tminutes = time % 60;\r\n\t\t\t\t}\r\n\t\t\t\tvar end_date = new Date(s[map[2] + map.size].value, s[map[1] + map.size].value, s[map[0] + map.size].value, hours, minutes);\r\n\r\n\t\t\t\tif (end_date <= start_date)\r\n\t\t\t\t\tend_date = gantt.date.add(start_date, gantt._get_timepicker_step(), \"minute\");\r\n\r\n\t\t\t\tvar mapped_fields = gantt._resolve_default_mapping(config);\r\n\r\n\t\t\t\tvar res = {\r\n\t\t\t\t\tstart_date: new Date(start_date),\r\n\t\t\t\t\tend_date: new Date(end_date)\r\n\t\t\t\t};\r\n\t\t\t\tif (typeof mapped_fields == \"string\") {\r\n\t\t\t\t\treturn res.start_date;\r\n\t\t\t\t} else {\r\n\t\t\t\t\treturn res;\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tfocus: function (node) {\r\n\t\t\t\tgantt._focus(node.getElementsByTagName(\"select\")[0]);\r\n\t\t\t}\r\n\t\t},\r\n\t\tduration: {\r\n\t\t\trender: function (sns) {\r\n\t\t\t\tvar time = this.form_blocks.getTimePicker.call(this, sns);\r\n\t\t\t\ttime = \"<div class='gantt_time_selects'>\" + time + \"</div>\";\r\n\t\t\t\tvar label = this.locale.labels[this.config.duration_unit + \"s\"];\r\n\r\n\t\t\t\tvar singleDate = sns.single_date ? ' style=\"display:none\"' : \"\";\r\n\t\t\t\tvar readonly = sns.readonly ? \" disabled='disabled'\" : \"\";\r\n\r\n\t\t\t\tvar ariaAttr = this._waiAria.lightboxDurationInputAttrString(sns);\r\n\r\n\t\t\t\tvar duration = \"<div class='gantt_duration' \" + singleDate + \">\" +\r\n\t\t\t\t\t\"<input type='button' class='gantt_duration_dec' value=''\" + readonly + \">\" +\r\n\t\t\t\t\t\"<input type='text' value='5' class='gantt_duration_value'\" + readonly + \" \" + ariaAttr + \">\" +\r\n\t\t\t\t\t\"<input type='button' class='gantt_duration_inc' value='+'\" + readonly + \"> \" + label + \" <span></span>\" +\r\n\t\t\t\t\t\"</div>\";\r\n\t\t\t\tvar html = \"<div style='height:\" + (sns.height || 30) + \"px;padding-top:0px;font-size:inherit;' class='gantt_section_time'>\" + time + \" \" + duration + \"</div>\";\r\n\t\t\t\treturn html;\r\n\t\t\t},\r\n\t\t\tset_value: function (node, value, ev, config) {\r\n\t\t\t\tvar cfg = config;\r\n\t\t\t\tvar s = node.getElementsByTagName(\"select\");\r\n\t\t\t\tvar inps = node.getElementsByTagName(\"input\");\r\n\r\n\t\t\t\tvar duration = inps[1];\r\n\t\t\t\tvar btns = [inps[0], inps[2]];\r\n\t\t\t\tvar endspan = node.getElementsByTagName(\"span\")[0];\r\n\r\n\t\t\t\tvar map = config._time_format_order;\r\n\r\n\t\t\t\tfunction _calc_date() {\r\n\t\t\t\t\tvar start_date = gantt.form_blocks.duration._get_start_date.call(gantt, node, config);\r\n\t\t\t\t\tvar duration = gantt.form_blocks.duration._get_duration.call(gantt, node, config);\r\n\t\t\t\t\tvar end_date = gantt.calculateEndDate({start_date: start_date, duration: duration, task: ev});\r\n\r\n\t\t\t\t\tendspan.innerHTML = gantt.templates.task_date(end_date);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tfunction _change_duration(step) {\r\n\t\t\t\t\tvar value = duration.value;\r\n\t\t\t\t\tvalue = parseInt(value, 10);\r\n\t\t\t\t\tif (window.isNaN(value))\r\n\t\t\t\t\t\tvalue = 0;\r\n\t\t\t\t\tvalue += step;\r\n\t\t\t\t\tif (value < 1) value = 1;\r\n\t\t\t\t\tduration.value = value;\r\n\t\t\t\t\t_calc_date();\r\n\t\t\t\t}\r\n\r\n\t\t\t\tbtns[0].onclick = gantt.bind(function () {\r\n\t\t\t\t\t_change_duration(-1 * this.config.duration_step);\r\n\t\t\t\t}, this);\r\n\t\t\t\tbtns[1].onclick = gantt.bind(function () {\r\n\t\t\t\t\t_change_duration(1 * this.config.duration_step);\r\n\t\t\t\t}, this);\r\n\t\t\t\ts[0].onchange = _calc_date;\r\n\t\t\t\ts[1].onchange = _calc_date;\r\n\t\t\t\ts[2].onchange = _calc_date;\r\n\t\t\t\tif (s[3]) s[3].onchange = _calc_date;\r\n\t\t\t\tduration.onkeydown = gantt.bind(function (e) {\r\n\t\t\t\t\te = e || window.event;\r\n\t\t\t\t\t// up\r\n\t\t\t\t\tvar code = (e.charCode || e.keyCode || e.which);\r\n\r\n\t\t\t\t\tif (code == 40) {\r\n\t\t\t\t\t\t_change_duration(-1 * this.config.duration_step);\r\n\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t}\r\n\t\t\t\t\t// down\r\n\t\t\t\t\tif (code == 38) {\r\n\t\t\t\t\t\t_change_duration(1 * this.config.duration_step);\r\n\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t}\r\n\t\t\t\t\twindow.setTimeout(function (e) {\r\n\t\t\t\t\t\t_calc_date();\r\n\t\t\t\t\t}, 1);\r\n\t\t\t\t}, this);\r\n\r\n\t\t\t\tduration.onchange = gantt.bind(function (e) {\r\n\t\t\t\t\t_calc_date();\r\n\t\t\t\t}, this);\r\n\r\n\t\t\t\tvar mapping = gantt._resolve_default_mapping(config);\r\n\t\t\t\tif (typeof(mapping) === \"string\") mapping = {start_date: mapping};\r\n\r\n\t\t\t\tvar start_date = ev[mapping.start_date] || new Date();\r\n\t\t\t\tvar end_date = ev[mapping.end_date] || gantt.calculateEndDate({\r\n\t\t\t\t\tstart_date: start_date,\r\n\t\t\t\t\tduration: 1,\r\n\t\t\t\t\ttask: ev\r\n\t\t\t\t});\r\n\t\t\t\tvar duration_val = Math.round(ev[mapping.duration]) || gantt.calculateDuration({\r\n\t\t\t\t\tstart_date: start_date,\r\n\t\t\t\t\tend_date: end_date,\r\n\t\t\t\t\ttask: ev\r\n\t\t\t\t});\r\n\r\n\t\t\t\tgantt.form_blocks._fill_lightbox_select(s, 0, start_date, map, cfg);\r\n\t\t\t\tduration.value = duration_val;\r\n\t\t\t\t_calc_date();\r\n\t\t\t},\r\n\r\n\t\t\t_get_start_date: function (node, config) {\r\n\t\t\t\tvar s = node.getElementsByTagName(\"select\");\r\n\t\t\t\tvar map = config._time_format_order;\r\n\t\t\t\tvar hours = 0;\r\n\t\t\t\tvar minutes = 0;\r\n\t\t\t\tif (gantt.defined(map[3])) {\r\n\t\t\t\t\tvar input = s[map[3]];\r\n\t\t\t\t\tvar time = parseInt(input.value, 10);\r\n\t\t\t\t\tif (isNaN(time) && input.hasAttribute(\"data-value\")) {\r\n\t\t\t\t\t\ttime = parseInt(input.getAttribute(\"data-value\"), 10);\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\thours = Math.floor(time / 60);\r\n\t\t\t\t\tminutes = time % 60;\r\n\t\t\t\t}\r\n\t\t\t\treturn new Date(s[map[2]].value, s[map[1]].value, s[map[0]].value, hours, minutes);\r\n\t\t\t},\r\n\t\t\t_get_duration: function (node, config) {\r\n\t\t\t\tvar duration = node.getElementsByTagName(\"input\")[1];\r\n\t\t\t\tduration = parseInt(duration.value, 10);\r\n\t\t\t\tif (!duration || window.isNaN(duration)) duration = 1;\r\n\t\t\t\tif (duration < 0) duration *= -1;\r\n\t\t\t\treturn duration;\r\n\t\t\t},\r\n\r\n\t\t\tget_value: function (node, ev, config) {\r\n\t\t\t\tvar start_date = gantt.form_blocks.duration._get_start_date(node, config);\r\n\t\t\t\tvar duration = gantt.form_blocks.duration._get_duration(node, config);\r\n\r\n\t\t\t\tvar end_date = gantt.calculateEndDate({start_date: start_date, duration: duration, task: ev});\r\n\t\t\t\tvar mapped_fields = gantt._resolve_default_mapping(config);\r\n\t\t\t\tvar res = {\r\n\t\t\t\t\tstart_date: new Date(start_date),\r\n\t\t\t\t\tend_date: new Date(end_date),\r\n\t\t\t\t\tduration: duration\r\n\t\t\t\t};\r\n\t\t\t\tif (typeof mapped_fields == \"string\") {\r\n\t\t\t\t\treturn res.start_date;\r\n\t\t\t\t} else {\r\n\t\t\t\t\treturn res;\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tfocus: function (node) {\r\n\t\t\t\tgantt._focus(node.getElementsByTagName(\"select\")[0]);\r\n\t\t\t}\r\n\t\t},\r\n\t\tparent: {\r\n\t\t\t_filter: function (options, config, item_id) {\r\n\t\t\t\tvar filter = config.filter || function () {\r\n\t\t\t\t\treturn true;\r\n\t\t\t\t};\r\n\r\n\t\t\t\toptions = options.slice(0);\r\n\r\n\t\t\t\tfor (var i = 0; i < options.length; i++) {\r\n\t\t\t\t\tvar task = options[i];\r\n\t\t\t\t\tif (task.id == item_id || gantt.isChildOf(task.id, item_id) || filter(task.id, task) === false) {\r\n\t\t\t\t\t\toptions.splice(i, 1);\r\n\t\t\t\t\t\ti--;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\treturn options;\r\n\t\t\t},\r\n\r\n\t\t\t_display: function (config, item_id) {\r\n\t\t\t\tvar tasks = [],\r\n\t\t\t\t\toptions = [];\r\n\t\t\t\tif (item_id) {\r\n\t\t\t\t\ttasks = gantt.getTaskByTime();\r\n\t\t\t\t\tif (config.allow_root) {\r\n\t\t\t\t\t\ttasks.unshift({id: gantt.config.root_id, text: config.root_label || \"\"});\r\n\t\t\t\t\t}\r\n\t\t\t\t\ttasks = this._filter(tasks, config, item_id);\r\n\t\t\t\t\tif (config.sort) {\r\n\t\t\t\t\t\ttasks.sort(config.sort);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tvar text = config.template || gantt.templates.task_text;\r\n\t\t\t\tfor (var i = 0; i < tasks.length; i++) {\r\n\t\t\t\t\tvar label = text.apply(gantt, [tasks[i].start_date, tasks[i].end_date, tasks[i]]);\r\n\t\t\t\t\tif (label === undefined) {\r\n\t\t\t\t\t\tlabel = \"\";\r\n\t\t\t\t\t}\r\n\t\t\t\t\toptions.push({\r\n\t\t\t\t\t\tkey: tasks[i].id,\r\n\t\t\t\t\t\tlabel: label\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t\tconfig.options = options;\r\n\t\t\t\tconfig.map_to = config.map_to || \"parent\";\r\n\t\t\t\treturn gantt.form_blocks.select.render.apply(this, arguments);\r\n\t\t\t},\r\n\t\t\trender: function (sns) {\r\n\t\t\t\treturn gantt.form_blocks.parent._display(sns, false);\r\n\t\t\t},\r\n\t\t\tset_value: function (node, value, ev, config) {\r\n\t\t\t\tvar tmpDom = document.createElement(\"div\");\r\n\t\t\t\ttmpDom.innerHTML = gantt.form_blocks.parent._display(config, ev.id);\r\n\t\t\t\tvar newOptions = tmpDom.removeChild(tmpDom.firstChild);\r\n\t\t\t\tnode.onselect = null;\r\n\t\t\t\tnode.parentNode.replaceChild(newOptions, node);\r\n\r\n\t\t\t\treturn gantt.form_blocks.select.set_value.apply(gantt, [newOptions, value, ev, config]);\r\n\t\t\t},\r\n\t\t\tget_value: function () {\r\n\t\t\t\treturn gantt.form_blocks.select.get_value.apply(gantt, arguments);\r\n\t\t\t},\r\n\t\t\tfocus: function () {\r\n\t\t\t\treturn gantt.form_blocks.select.focus.apply(gantt, arguments);\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\r\n\tgantt._is_lightbox_timepicker = function () {\r\n\t\tvar s = this._get_typed_lightbox_config();\r\n\t\tfor (var i = 0; i < s.length; i++)\r\n\t\t\tif (s[i].name == \"time\" && s[i].type == \"time\")\r\n\t\t\t\treturn true;\r\n\t\treturn false;\r\n\t};\r\n\r\n\tgantt._dhtmlx_confirm = function (message, title, callback, ok) {\r\n\t\tif (!message)\r\n\t\t\treturn callback();\r\n\t\tvar opts = {text: message};\r\n\t\tif (title)\r\n\t\t\topts.title = title;\r\n\t\tif (ok) {\r\n\t\t\topts.ok = ok;\r\n\t\t}\r\n\t\tif (callback) {\r\n\t\t\topts.callback = function (result) {\r\n\t\t\t\tif (result)\r\n\t\t\t\t\tcallback();\r\n\t\t\t};\r\n\t\t}\r\n\t\tgantt.confirm(opts);\r\n\t};\r\n\r\n\tgantt._get_typed_lightbox_config = function (type) {\r\n\t\tif (type === undefined) {\r\n\t\t\ttype = this.getLightboxType();\r\n\t\t}\r\n\r\n\t\tvar field = this._get_type_name(type);\r\n\r\n\t\tif (gantt.config.lightbox[field + \"_sections\"]) {\r\n\t\t\treturn gantt.config.lightbox[field + \"_sections\"];\r\n\t\t} else {\r\n\t\t\treturn gantt.config.lightbox.sections;\r\n\t\t}\r\n\t};\r\n\r\n\tgantt._silent_redraw_lightbox = function (type) {\r\n\t\tvar oldType = this.getLightboxType();\r\n\r\n\t\tif (this.getState().lightbox) {\r\n\t\t\tvar taskId = this.getState().lightbox;\r\n\t\t\tvar formData = this.getLightboxValues(),\r\n\t\t\t\ttask = this.copy(this.getTask(taskId));\r\n\r\n\t\t\tthis.resetLightbox();\r\n\r\n\t\t\tvar updTask = this.mixin(task, formData, true);\r\n\t\t\tvar box = this.getLightbox(type ? type : undefined);\r\n\t\t\tthis._center_lightbox(this.getLightbox());\r\n\t\t\tthis._set_lightbox_values(updTask, box);\r\n\t\t} else {\r\n\t\t\tthis.resetLightbox();\r\n\t\t\tthis.getLightbox(type ? type : undefined);\r\n\t\t}\r\n\t\tthis.callEvent(\"onLightboxChange\", [oldType, this.getLightboxType()]);\r\n\t};\r\n\r\n};\n\n/***/ }),\n/* 80 */\n/***/ (function(module, exports) {\n\nmodule.exports = function(gantt) {\r\n\r\n\tgantt._extend_to_optional = function (lightbox_block) {\r\n\r\n\t\tvar duration = lightbox_block;\r\n\t\tvar optional_time = {\r\n\t\t\trender: duration.render,\r\n\t\t\tfocus: duration.focus,\r\n\t\t\tset_value: function (node, value, task, section) {\r\n\t\t\t\tvar mapping = gantt._resolve_default_mapping(section);\r\n\t\t\t\tif (!task[mapping.start_date] || (mapping.start_date == \"start_date\" && this._isAllowedUnscheduledTask(task))) {\r\n\t\t\t\t\toptional_time.disable(node, section);\r\n\t\t\t\t\tvar val = {};\r\n\r\n\t\t\t\t\tfor (var i in mapping) {\r\n\t\t\t\t\t\t//take default values from the time control from task start/end dates\r\n\t\t\t\t\t\tval[mapping[i]] = task[i];\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\treturn duration.set_value.call(gantt, node, value, val, section);//set default value\r\n\t\t\t\t} else {\r\n\t\t\t\t\toptional_time.enable(node, section);\r\n\t\t\t\t\treturn duration.set_value.call(gantt, node, value, task, section);\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tget_value: function (node, task, section) {\r\n\t\t\t\tif (section.disabled) {\r\n\t\t\t\t\treturn {start_date: null};\r\n\t\t\t\t} else {\r\n\t\t\t\t\treturn duration.get_value.call(gantt, node, task, section);\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tupdate_block: function (node, section) {\r\n\t\t\t\tgantt.callEvent(\"onSectionToggle\", [gantt._lightbox_id, section]);\r\n\t\t\t\tnode.style.display = section.disabled ? \"none\" : \"block\";\r\n\r\n\t\t\t\tif (section.button) {\r\n\t\t\t\t\tvar button = node.previousSibling.querySelector(\".gantt_custom_button_label\"),\r\n\t\t\t\t\t\tlabels = gantt.locale.labels;\r\n\r\n\t\t\t\t\tvar button_text = section.disabled ? labels[section.name + \"_enable_button\"] : labels[section.name + \"_disable_button\"];\r\n\r\n\t\t\t\t\tbutton.innerHTML = button_text;\r\n\t\t\t\t}\r\n\t\t\t\tgantt.resizeLightbox();\r\n\t\t\t},\r\n\t\t\tdisable: function (node, section) {\r\n\t\t\t\tsection.disabled = true;\r\n\t\t\t\toptional_time.update_block(node, section);\r\n\r\n\t\t\t},\r\n\t\t\tenable: function (node, section) {\r\n\t\t\t\tsection.disabled = false;\r\n\t\t\t\toptional_time.update_block(node, section);\r\n\t\t\t},\r\n\t\t\tbutton_click: function (index, el, section, container) {\r\n\t\t\t\tif (gantt.callEvent(\"onSectionButton\", [gantt._lightbox_id, section]) === false) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tvar config = gantt._get_typed_lightbox_config()[index];\r\n\t\t\t\tif (config.disabled) {\r\n\t\t\t\t\toptional_time.enable(container, config);\r\n\t\t\t\t} else {\r\n\t\t\t\t\toptional_time.disable(container, config);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t};\r\n\t\treturn optional_time;\r\n\t};\r\n\r\n\tgantt.form_blocks.duration_optional = gantt._extend_to_optional(gantt.form_blocks.duration);\r\n\tgantt.form_blocks.time_optional = gantt._extend_to_optional(gantt.form_blocks.time);\r\n\r\n};\n\n/***/ }),\n/* 81 */\n/***/ (function(module, exports) {\n\nmodule.exports = function(gantt) {\r\n\r\n\r\n};\n\n/***/ }),\n/* 82 */\n/***/ (function(module, exports) {\n\n/*\r\n reuse results of functions that can be recalculated during rendering\r\n greatly increases the rendering speed when critical path enabled\r\n Sample - 94_dev/critical_path.html\r\n\r\n */\r\nmodule.exports = function(gantt){\r\n\r\ngantt._cached_functions = {\r\n\tcache: {},\r\n\tmode: false,\r\n\tcritical_path_mode: false,\r\n\twrap_methods : function(methods, object){\r\n\t\tif(object._prefetch_originals){\r\n\t\t\tfor(var i in object._prefetch_originals){\r\n\t\t\t\tobject[i] = object._prefetch_originals[i];\r\n\t\t\t}\r\n\t\t}\r\n\t\tobject._prefetch_originals = {};\r\n\t\tfor(var i = 0; i < methods.length; i++)\r\n\t\t\tthis.prefetch(methods[i], object);\r\n\r\n\t},\r\n\tprefetch : function(methodname, host){\r\n\t\tvar original = host[methodname];\r\n\t\tif(original){\r\n\t\t\tvar optimizer = this;\r\n\r\n\t\t\thost._prefetch_originals[methodname] = original;\r\n\t\t\thost[methodname] = function get_prefetched_value(){\r\n\r\n\t\t\t\tvar argumentsArray = new Array(arguments.length);\r\n\t\t\t\tfor (var i = 0, l = arguments.length; i < l; i++) {\r\n\t\t\t\t\targumentsArray[i] = arguments[i];\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif(optimizer.active){\r\n\t\t\t\t\tvar args = optimizer.get_arguments_hash(Array.prototype.slice.call(argumentsArray));\r\n\t\t\t\t\tif(!optimizer.cache[methodname]){\r\n\t\t\t\t\t\toptimizer.cache[methodname] = {};\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tvar cached_values = optimizer.cache[methodname];\r\n\r\n\t\t\t\t\tif(optimizer.has_cached_value(cached_values, args)){\r\n\t\t\t\t\t\treturn optimizer.get_cached_value(cached_values, args);\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\tvar value = original.apply(this, argumentsArray);\r\n\t\t\t\t\t\toptimizer.cache_value(cached_values, args, value);\r\n\t\t\t\t\t\treturn value;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\treturn original.apply(this, argumentsArray);\r\n\t\t\t};\r\n\t\t}\r\n\t\treturn original;\r\n\t},\r\n\tcache_value: function(cache, arguments_hash, value){\r\n\t\tif(this.is_date(value))\r\n\t\t\tvalue = new Date(value);\r\n\t\tcache[arguments_hash] = value;\r\n\t},\r\n\thas_cached_value: function(cache, arguments_hash){\r\n\t\treturn cache.hasOwnProperty(arguments_hash);\r\n\t},\r\n\tget_cached_value: function(cache, arguments_hash){\r\n\t\tvar data = cache[arguments_hash];\r\n\r\n\t\t//for cached dates - return copy\r\n\t\tif(this.is_date(data)){\r\n\t\t\tdata = new Date(data);\r\n\t\t}\r\n\t\treturn data;\r\n\t},\r\n\tis_date: function(value){\r\n\t\treturn (value && value.getUTCDate);\r\n\t},\r\n\tget_arguments_hash:function(args){\r\n\t\tvar values = [];\r\n\t\tfor(var i = 0; i < args.length; i++){\r\n\t\t\tvalues.push(this.stringify_argument(args[i]));\r\n\t\t}\r\n\t\treturn \"(\" + values.join(\";\") + \")\";\r\n\t},\r\n\tstringify_argument: function(value){\r\n\t\t//expecting task or link, or any other data entries, dates and primitive values\r\n\t\tvar ret = \"\";\r\n\t\tif(value.id){\r\n\t\t\tret = value.id;\r\n\t\t}else if(this.is_date(value)){\r\n\t\t\tret = value.valueOf();\r\n\t\t}else{\r\n\t\t\tret = value;\r\n\t\t}\r\n\t\treturn ret + \"\";\r\n\t},\r\n\tactivate: function(){\r\n\t\tthis.clear();\r\n\t\tthis.active = true;\r\n\t},\r\n\tdeactivate: function(){\r\n\t\tthis.clear();\r\n\t\tthis.active = false;\r\n\t},\r\n\tclear: function(){\r\n\t\tthis.cache = {};\r\n\t},\r\n\r\n\tsetup: function(gantt){\r\n\t\tvar override_gantt = [];\r\n\r\n\t\tvar gantt_methods  = [\r\n\t\t\t'_isCriticalTask',\r\n\t\t\t'isCriticalLink',\r\n\t\t\t'_isProjectEnd',\r\n\t\t\t'_getProjectEnd',\r\n\t\t\t'_getSlack'\r\n\t\t];\r\n\r\n\r\n\r\n\t\tif(this.mode == 'auto'){\r\n\t\t\tif(gantt.config.highlight_critical_path){\r\n\t\t\t\toverride_gantt = gantt_methods;\r\n\t\t\t}\r\n\t\t}else if(this.mode === true){\r\n\t\t\toverride_gantt = gantt_methods;\r\n\t\t}\r\n\r\n\t\tthis.wrap_methods(override_gantt, gantt);\r\n\r\n\t},\r\n\tupdate_if_changed: function(gantt){\r\n\t\tvar changed = (this.critical_path_mode != gantt.config.highlight_critical_path ||\r\n\t\t\t\t\t\tthis.mode !== gantt.config.optimize_render);\r\n\t\tif(changed){\r\n\t\t\tthis.critical_path_mode = gantt.config.highlight_critical_path;\r\n\t\t\tthis.mode = gantt.config.optimize_render;\r\n\t\t\tthis.setup(gantt);\r\n\t\t}\r\n\t}\r\n};\r\n\r\nfunction activate(){\r\n\tgantt._cached_functions.update_if_changed(gantt);\r\n\tif(!gantt._cached_functions.active){\r\n\t\tgantt._cached_functions.activate();\r\n\t}\r\n\treturn true;\r\n}\r\ngantt.attachEvent(\"onBeforeGanttRender\", activate);\r\ngantt.attachEvent(\"onBeforeDataRender\", activate);\r\ngantt.attachEvent(\"onBeforeSmartRender\",  function(){\r\n\tactivate();\r\n});\r\ngantt.attachEvent(\"onBeforeParse\", activate);\r\ngantt.attachEvent(\"onDataRender\", function(){\r\n\tgantt._cached_functions.deactivate();\r\n});\r\nvar deactivTimeout = null;\r\ngantt.attachEvent(\"onSmartRender\", function(){\r\n\tif(deactivTimeout)\r\n\t\tclearTimeout(deactivTimeout);\r\n\tdeactivTimeout = setTimeout(function(){\r\n\t\tgantt._cached_functions.deactivate();\r\n\t}, 1000);\r\n});\r\n\r\ngantt.attachEvent(\"onBeforeGanttReady\", function(){\r\n\tgantt._cached_functions.update_if_changed(gantt);\r\n\treturn true;\r\n});\r\n\r\n};\n\n/***/ }),\n/* 83 */\n/***/ (function(module, exports) {\n\nfunction _configure(col, data, force) {\r\n\tfor (var key in data)\r\n\t\tif (typeof col[key] == \"undefined\" || force)\r\n\t\t\tcol[key] = data[key];\r\n}\r\n\r\nfunction _get_skin(force, gantt) {\r\n\tvar skin = gantt.skin;\r\n\tif (!skin || force) {\r\n\t\tvar links = document.getElementsByTagName(\"link\");\r\n\t\tfor (var i = 0; i < links.length; i++) {\r\n\t\t\tvar res = links[i].href.match(\"dhtmlxgantt_([a-z\\_]+).css\");\r\n\t\t\tif (res) {\r\n\t\t\t\tif (gantt.skins[res[1]] || !skin) {\r\n\t\t\t\t\tskin = res[1];\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tgantt.skin = skin || \"terrace\";\r\n\tvar skinset = gantt.skins[gantt.skin] || gantt.skins[\"terrace\"];\r\n\r\n\t//apply skin related settings\r\n\t_configure(gantt.config, skinset.config, force);\r\n\r\n\tvar config = gantt.getGridColumns();\r\n\tif (config[1] && typeof config[1].width == \"undefined\")\r\n\t\tconfig[1].width = skinset._second_column_width;\r\n\tif (config[2] && typeof config[2].width == \"undefined\")\r\n\t\tconfig[2].width = skinset._third_column_width;\r\n\r\n\tif (skinset.config.task_height)\r\n\t\tgantt.config.task_height = skinset.config.task_height || \"full\"; \r\n\r\n\tif (skinset._lightbox_template)\r\n\t\tgantt._lightbox_template = skinset._lightbox_template;\r\n\r\n\tif (skinset._redefine_lightbox_buttons) {\r\n\t\tgantt.config.buttons_right = skinset._redefine_lightbox_buttons[\"buttons_right\"];\r\n\t\tgantt.config.buttons_left = skinset._redefine_lightbox_buttons[\"buttons_left\"];\r\n\t}\r\n\r\n\r\n\tgantt.resetLightbox();\r\n}\r\n\r\nmodule.exports = function(gantt) {\r\n\tif(!gantt.resetSkin){\r\n\t\tgantt.resetSkin = function () {\r\n\t\t\tthis.skin = \"\";\r\n\t\t\t_get_skin(true, this);\r\n\t\t};\r\n\t\tgantt.skins = {};\r\n\r\n\t\tgantt.attachEvent(\"onGanttLayoutReady\", function(){\r\n\t\t\t_get_skin(false, this);\r\n\t\t});\r\n\t}\r\n};\n\n/***/ }),\n/* 84 */\n/***/ (function(module, exports) {\n\nmodule.exports = function(gantt) {\r\ngantt.skins.skyblue = {\r\n\tconfig:{\r\n\t\tgrid_width:350,\r\n\t\trow_height: 27,\r\n\t\tscale_height: 27,\r\n\t\tlink_line_width:1,\r\n\t\tlink_arrow_size:8,\r\n\t\tlightbox_additional_height:75\r\n\t},\r\n\t_second_column_width:95,\r\n\t_third_column_width:80\r\n};\r\n\r\n};\n\n/***/ }),\n/* 85 */\n/***/ (function(module, exports) {\n\nmodule.exports = function(gantt) {\r\ngantt.skins.meadow = {\r\n\tconfig:{\r\n\t\tgrid_width:350,\r\n\t\trow_height: 27,\r\n\t\tscale_height: 30,\r\n\t\tlink_line_width:2,\r\n\t\tlink_arrow_size:6,\r\n\t\tlightbox_additional_height:72\r\n\t},\r\n\t_second_column_width:95,\r\n\t_third_column_width:80\r\n};\r\n\r\n};\n\n/***/ }),\n/* 86 */\n/***/ (function(module, exports) {\n\nmodule.exports = function(gantt) {\r\ngantt.skins.terrace = {\r\n\tconfig:{\r\n\t\tgrid_width:360,\r\n\t\trow_height: 35,\r\n\t\tscale_height: 35,\r\n\t\tlink_line_width:2,\r\n\t\tlink_arrow_size:6,\r\n\t\tlightbox_additional_height:75\r\n\t},\r\n\t_second_column_width:90,\r\n\t_third_column_width:70\t\t\r\n};\r\n\r\n};\n\n/***/ }),\n/* 87 */\n/***/ (function(module, exports) {\n\n\r\n\r\nmodule.exports = function(gantt) {\r\n\tgantt.skins.broadway = {\r\n\t\tconfig: {\r\n\t\t\tgrid_width: 360,\r\n\t\t\trow_height: 35,\r\n\t\t\tscale_height: 35,\r\n\t\t\tlink_line_width: 1,\r\n\t\t\tlink_arrow_size: 7,\r\n\t\t\tlightbox_additional_height: 86\r\n\t\t},\r\n\t\t_second_column_width: 90,\r\n\t\t_third_column_width: 80,\r\n\r\n\t\t_lightbox_template: \"<div class='gantt_cal_ltitle'><span class='gantt_mark'>&nbsp;</span><span class='gantt_time'></span><span class='gantt_title'></span><div class='gantt_cancel_btn'></div></div><div class='gantt_cal_larea'></div>\",\r\n\t\t_config_buttons_left: {},\r\n\t\t_config_buttons_right: {\r\n\t\t\t\"gantt_delete_btn\": \"icon_delete\",\r\n\t\t\t\"gantt_save_btn\": \"icon_save\"\r\n\t\t}\r\n\t};\r\n};\n\n/***/ }),\n/* 88 */\n/***/ (function(module, exports) {\n\nmodule.exports = function(gantt) {\r\n\tgantt.skins.material = {\r\n\t\tconfig: {\r\n\t\t\tgrid_width: 411,\r\n\t\t\trow_height: 34,\r\n\t\t\ttask_height_offset: 6,\r\n\t\t\tscale_height: 36,\r\n\t\t\tlink_line_width: 2,\r\n\t\t\tlink_arrow_size: 6,\r\n\t\t\tlightbox_additional_height: 80\r\n\t\t},\r\n\t\t_second_column_width: 110,\r\n\t\t_third_column_width: 75,\r\n\t\t_redefine_lightbox_buttons: {\r\n\t\t\t\"buttons_left\": [\"dhx_delete_btn\"],\r\n\t\t\t\"buttons_right\": [\"dhx_save_btn\", \"dhx_cancel_btn\"]\r\n\t\t}\r\n\t};\r\n\r\n\tgantt.attachEvent(\"onAfterTaskDrag\", function (id) {\r\n\t\tvar t = gantt.getTaskNode(id);\r\n\t\tif (t) {\r\n\t\t\tt.className += \" gantt_drag_animation\";\r\n\t\t\tsetTimeout(function () {\r\n\t\t\t\tvar indx = t.className.indexOf(\" gantt_drag_animation\");\r\n\t\t\t\tif (indx > -1) {\r\n\t\t\t\t\tt.className = t.className.slice(0, indx);\r\n\t\t\t\t}\r\n\t\t\t}, 200);\r\n\t\t}\r\n\t});\r\n\r\n};\n\n/***/ }),\n/* 89 */\n/***/ (function(module, exports) {\n\nmodule.exports = function(gantt) {\r\ngantt.skins[\"contrast_black\"] = {\r\n\tconfig:{\r\n\t\tgrid_width:360,\r\n\t\trow_height: 35,\r\n\t\tscale_height: 35,\r\n\t\tlink_line_width:2,\r\n\t\tlink_arrow_size:6,\r\n\t\tlightbox_additional_height:75\r\n\t},\r\n\t_second_column_width:100,\r\n\t_third_column_width:80\r\n};\r\n\r\n};\n\n/***/ }),\n/* 90 */\n/***/ (function(module, exports) {\n\nmodule.exports = function(gantt) {\r\ngantt.skins[\"contrast_white\"] = {\r\n\tconfig:{\r\n\t\tgrid_width:360,\r\n\t\trow_height: 35,\r\n\t\tscale_height: 35,\r\n\t\tlink_line_width:2,\r\n\t\tlink_arrow_size:6,\r\n\t\tlightbox_additional_height:75\r\n\t},\r\n\t_second_column_width:100,\r\n\t_third_column_width:80\r\n};\r\n\r\n};\n\n/***/ }),\n/* 91 */\n/***/ (function(module, exports) {\n\n/*\r\nTODO: bug, touch event dissapears after gantt.init is called second time\r\n\r\n */\r\n\r\nmodule.exports = function(gantt) {\r\n\r\n\tgantt.config.touch_drag = 500; //nearly immediate dnd\r\n\tgantt.config.touch = true;\r\n\tgantt.config.touch_feedback = true;\r\n\tgantt.config.touch_feedback_duration = 1;\r\n\tgantt._prevent_touch_scroll = false;\r\n\r\n\r\n\tgantt._touch_feedback = function () {\r\n\t\tif (gantt.config.touch_feedback) {\r\n\t\t\tif (navigator.vibrate)\r\n\t\t\t\tnavigator.vibrate(gantt.config.touch_feedback_duration);\r\n\t\t}\r\n\t};\r\n\r\n\tgantt.attachEvent(\"onGanttReady\", gantt.bind(function(){\r\n\t\tif (this.config.touch != \"force\")\r\n\t\t\tthis.config.touch = this.config.touch &&\r\n\t\t\t\t((navigator.userAgent.indexOf(\"Mobile\") != -1) ||\r\n\t\t\t\t\t(navigator.userAgent.indexOf(\"iPad\") != -1) ||\r\n\t\t\t\t\t(navigator.userAgent.indexOf(\"Android\") != -1) ||\r\n\t\t\t\t\t(navigator.userAgent.indexOf(\"Touch\") != -1));\r\n\r\n\t\tif (this.config.touch) {\r\n\r\n\t\t\tvar touchEventsSupported = true;\r\n\t\t\ttry {\r\n\t\t\t\tdocument.createEvent(\"TouchEvent\");\r\n\t\t\t} catch (e) {\r\n\t\t\t\ttouchEventsSupported = false;\r\n\t\t\t}\r\n\r\n\t\t\tif (touchEventsSupported) {\r\n\t\t\t\tthis._touch_events([\"touchmove\", \"touchstart\", \"touchend\"], function (ev) {\r\n\t\t\t\t\tif (ev.touches && ev.touches.length > 1) return null;\r\n\t\t\t\t\tif (ev.touches[0])\r\n\t\t\t\t\t\treturn {\r\n\t\t\t\t\t\t\ttarget: ev.target,\r\n\t\t\t\t\t\t\tpageX: ev.touches[0].pageX,\r\n\t\t\t\t\t\t\tpageY: ev.touches[0].pageY,\r\n\t\t\t\t\t\t\tclientX: ev.touches[0].clientX,\r\n\t\t\t\t\t\t\tclientY: ev.touches[0].clientY\r\n\t\t\t\t\t\t};\r\n\t\t\t\t\telse\r\n\t\t\t\t\t\treturn ev;\r\n\t\t\t\t}, function () {\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t});\r\n\t\t\t} else if (window.navigator.pointerEnabled) {\r\n\t\t\t\tthis._touch_events([\"pointermove\", \"pointerdown\", \"pointerup\"], function (ev) {\r\n\t\t\t\t\tif (ev.pointerType == \"mouse\") return null;\r\n\t\t\t\t\treturn ev;\r\n\t\t\t\t}, function (ev) {\r\n\t\t\t\t\treturn (!ev || (ev.pointerType == \"mouse\" ));\r\n\t\t\t\t});\r\n\t\t\t} else if (window.navigator.msPointerEnabled) {\r\n\t\t\t\tthis._touch_events([\"MSPointerMove\", \"MSPointerDown\", \"MSPointerUp\"], function (ev) {\r\n\t\t\t\t\tif (ev.pointerType == ev.MSPOINTER_TYPE_MOUSE) return null;\r\n\t\t\t\t\treturn ev;\r\n\t\t\t\t}, function (ev) {\r\n\t\t\t\t\treturn (!ev || ev.pointerType == ev.MSPOINTER_TYPE_MOUSE);\r\n\t\t\t\t});\r\n\t\t\t}\r\n\r\n\t\t}\r\n\t}, gantt));\r\n\r\n\r\n\tfunction getTaskDND(){\r\n\t\tvar _tasks_dnd;\r\n\t\tif(gantt.$ui.getView(\"timeline\")){\r\n\t\t\t_tasks_dnd = gantt.$ui.getView(\"timeline\")._tasks_dnd;\r\n\t\t}\r\n\t\treturn _tasks_dnd;\r\n\t}\r\n\r\n\tvar touchHandlers = [];\r\n\r\n//we can't use native scrolling, as we need to sync momentum between different parts\r\n//so we will block native scroll and use the custom one\r\n//in future we can add custom momentum\r\n\tgantt._touch_events = function (names, accessor, ignore) {\r\n\t\t//webkit on android need to be handled separately\r\n\t\tvar dblclicktime = 0;\r\n\t\tvar action_mode = false;\r\n\t\tvar scroll_mode = false;\r\n\t\tvar dblclick_timer = 0;\r\n\t\tvar action_start = null;\r\n\t\tvar scroll_state;\r\n\t\tvar long_tap_timer = null;\r\n\t\tvar current_target = null;\r\n\r\n\r\n\r\n\t\tfor(var i = 0; i < touchHandlers.length; i++){\r\n\t\t\tgantt.eventRemove(touchHandlers[i][0], touchHandlers[i][1], touchHandlers[i][2]);\r\n\t\t}\r\n\t\ttouchHandlers = [];\r\n\r\n\t\t//touch move\r\n\t\ttouchHandlers.push([gantt.$container, names[0], function (e) {\r\n\t\t\tvar _tasks_dnd = getTaskDND();\r\n\r\n\t\t\t\tif (ignore(e)) return;\r\n\r\n\t\t\t\t//ignore common and scrolling moves\r\n\t\t\t\tif (!action_mode) return;\r\n\r\n\t\t\t\tif (long_tap_timer) clearTimeout(long_tap_timer);\r\n\r\n\t\t\t\tvar source = accessor(e);\r\n\t\t\t\tif (_tasks_dnd && (_tasks_dnd.drag.id || _tasks_dnd.drag.start_drag)) {\r\n\t\t\t\t\t_tasks_dnd.on_mouse_move(source);\r\n\t\t\t\t\tif (e.preventDefault)\r\n\t\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\te.cancelBubble = true;\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\t\t\t\tif (!gantt._prevent_touch_scroll) {\r\n\t\t\t\t\tif (source && action_start) {\r\n\t\t\t\t\t\tvar dx = action_start.pageX - source.pageX;\r\n\t\t\t\t\t\tvar dy = action_start.pageY - source.pageY;\r\n\t\t\t\t\t\tif (!scroll_mode && (Math.abs(dx) > 5 || Math.abs(dy) > 5)) {\r\n\t\t\t\t\t\t\tgantt._touch_scroll_active = scroll_mode = true;\r\n\t\t\t\t\t\t\tdblclicktime = 0;\r\n\t\t\t\t\t\t\tscroll_state = gantt.getScrollState();\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tif (scroll_mode) {\r\n\t\t\t\t\t\t\tgantt.scrollTo(scroll_state.x + dx, scroll_state.y + dy);\r\n\t\t\t\t\t\t\tvar new_scroll_state = gantt.getScrollState();\r\n\r\n\t\t\t\t\t\t\tif ((scroll_state.x != new_scroll_state.x && dy > 2 * dx) ||\r\n\t\t\t\t\t\t\t\t(scroll_state.y != new_scroll_state.y && dx > 2 * dy )) {\r\n\t\t\t\t\t\t\t\treturn block_action(e);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn block_action(e);\r\n\t\t\t\t}\r\n\t\t\t\treturn true;\r\n\t\t\t}]);\r\n\r\n\r\n\t\t//block touch context menu in IE10\r\n\t\ttouchHandlers.push([this.$container, \"contextmenu\", function (e) {\r\n\t\t\tif (action_mode)\r\n\t\t\t\treturn block_action(e);\r\n\t\t}]);\r\n\r\n\t\t//touch start\r\n\t\ttouchHandlers.push([this.$container, names[1], function (e) {\r\n\t\t\tif (ignore(e)) return;\r\n\t\t\tif (e.touches && e.touches.length > 1) {\r\n\t\t\t\taction_mode = false;\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\taction_start = accessor(e);\r\n\t\t\tif (!gantt._locate_css(action_start, \"gantt_hor_scroll\") && !gantt._locate_css(action_start, \"gantt_ver_scroll\")) {\r\n\t\t\t\taction_mode = true;\r\n\t\t\t}\r\n\t\t\tvar _tasks_dnd = getTaskDND();\r\n\r\n\t\t\t//long tap\r\n\t\t\tlong_tap_timer = setTimeout(function () {\r\n\t\t\t\tvar taskId = gantt.locate(action_start);\r\n\t\t\t\tif (_tasks_dnd && (taskId && !gantt._locate_css(action_start, \"gantt_link_control\") && !gantt._locate_css(action_start, \"gantt_grid_data\"))) {\r\n\t\t\t\t\t_tasks_dnd.on_mouse_down(action_start);\r\n\r\n\t\t\t\t\tif (_tasks_dnd.drag && _tasks_dnd.drag.start_drag) {\r\n\t\t\t\t\t\tcloneTaskRendered(taskId);\r\n\t\t\t\t\t\t_tasks_dnd._start_dnd(action_start);\r\n\t\t\t\t\t\tgantt._touch_drag = true;\r\n\r\n\t\t\t\t\t\tgantt.refreshTask(taskId);\r\n\r\n\t\t\t\t\t\tgantt._touch_feedback();\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tlong_tap_timer = null;\r\n\t\t\t}, gantt.config.touch_drag);\r\n\t\t}]);\r\n\r\n\t\t//touch end\r\n\t\ttouchHandlers.push([this.$container, names[2], function (e) {\r\n\t\t\tif (ignore(e)) return;\r\n\t\t\tif (long_tap_timer) clearTimeout(long_tap_timer);\r\n\t\t\tgantt._touch_drag = false;\r\n\t\t\taction_mode = false;\r\n\t\t\tvar source = accessor(e);\r\n\r\n\t\t\tvar _tasks_dnd = getTaskDND();\r\n\r\n\t\t\tif(_tasks_dnd)\r\n\t\t\t\t_tasks_dnd.on_mouse_up(source);\r\n\r\n\t\t\tif (current_target) {\r\n\t\t\t\tgantt.refreshTask(gantt.locate(current_target));\r\n\t\t\t\tif (current_target.parentNode) {\r\n\t\t\t\t\tcurrent_target.parentNode.removeChild(current_target);\r\n\t\t\t\t\tgantt._touch_feedback();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tgantt._touch_scroll_active = action_mode = scroll_mode = false;\r\n\t\t\tcurrent_target = null;\r\n\r\n\t\t\t//dbl-tap handling\r\n\t\t\tif (action_start && dblclicktime) {\r\n\t\t\t\tvar now = new Date();\r\n\t\t\t\tif ((now - dblclicktime) < 500) {\r\n\t\t\t\t\tgantt._on_dblclick(action_start);\r\n\t\t\t\t\tblock_action(e);\r\n\t\t\t\t} else\r\n\t\t\t\t\tdblclicktime = now;\r\n\t\t\t} else {\r\n\t\t\t\tdblclicktime = new Date();\r\n\t\t\t}\r\n\t\t}]);\r\n\r\n\t\tfor(var i = 0; i < touchHandlers.length; i++){\r\n\t\t\tgantt.event(touchHandlers[i][0], touchHandlers[i][1], touchHandlers[i][2]);\r\n\t\t}\r\n\r\n\t\t//common helper, prevents event\r\n\t\tfunction block_action(e) {\r\n\t\t\tif (e && e.preventDefault)\r\n\t\t\t\te.preventDefault();\r\n\t\t\t(e || event).cancelBubble = true;\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t\tfunction cloneTaskRendered(taskId) {\r\n\t\t\tvar renders = gantt._getTaskLayers();\r\n\t\t\tvar task = gantt.getTask(taskId);\r\n\t\t\tif (task && gantt.isTaskVisible(taskId)) {\r\n\t\t\t\tfor (var i = 0; i < renders.length; i++) {\r\n\t\t\t\t\ttask = renders[i].rendered[taskId];\r\n\t\t\t\t\tif (task && task.getAttribute(\"task_id\") && task.getAttribute(\"task_id\") == taskId) {\r\n\t\t\t\t\t\tvar copy = task.cloneNode(true);\r\n\t\t\t\t\t\tcurrent_target = task;\r\n\t\t\t\t\t\trenders[i].rendered[taskId] = copy;\r\n\t\t\t\t\t\ttask.style.display = \"none\";\r\n\t\t\t\t\t\tcopy.className += \" gantt_drag_move \";\r\n\t\t\t\t\t\ttask.parentNode.appendChild(copy);\r\n\t\t\t\t\t\t//return copy;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\r\n};\n\n/***/ }),\n/* 92 */\n/***/ (function(module, exports) {\n\nmodule.exports = function(gantt) {\r\n\tgantt.locale = {\r\n\t\tdate: {\r\n\t\t\tmonth_full: [\"January\", \"February\", \"March\", \"April\", \"May\", \"June\", \"July\", \"August\", \"September\", \"October\", \"November\", \"December\"],\r\n\t\t\tmonth_short: [\"Jan\", \"Feb\", \"Mar\", \"Apr\", \"May\", \"Jun\", \"Jul\", \"Aug\", \"Sep\", \"Oct\", \"Nov\", \"Dec\"],\r\n\t\t\tday_full: [\"Sunday\", \"Monday\", \"Tuesday\", \"Wednesday\", \"Thursday\", \"Friday\", \"Saturday\"],\r\n\t\t\tday_short: [\"Sun\", \"Mon\", \"Tue\", \"Wed\", \"Thu\", \"Fri\", \"Sat\"]\r\n\t\t},\r\n\t\tlabels: {\r\n\t\t\tnew_task: \"New task\",\r\n\t\t\ticon_save: \"Save\",\r\n\t\t\ticon_cancel: \"Cancel\",\r\n\t\t\ticon_details: \"Details\",\r\n\t\t\ticon_edit: \"Edit\",\r\n\t\t\ticon_delete: \"Delete\",\r\n\t\t\tconfirm_closing: \"\",//Your changes will be lost, are you sure?\r\n\t\t\tconfirm_deleting: \"Task will be deleted permanently, are you sure?\",\r\n\t\t\tsection_description: \"Description\",\r\n\t\t\tsection_time: \"Time period\",\r\n\t\t\tsection_type: \"Type\",\r\n\r\n\t\t\t/* grid columns */\r\n\t\t\tcolumn_wbs: \"WBS\",\r\n\t\t\tcolumn_text: \"Task name\",\r\n\t\t\tcolumn_start_date: \"Start time\",\r\n\t\t\tcolumn_duration: \"Duration\",\r\n\t\t\tcolumn_add: \"\",\r\n\r\n\t\t\t/* link confirmation */\r\n\t\t\tlink: \"Link\",\r\n\t\t\tconfirm_link_deleting: \"will be deleted\",\r\n\t\t\tlink_start: \" (start)\",\r\n\t\t\tlink_end: \" (end)\",\r\n\r\n\t\t\tminutes: \"Minutes\",\r\n\t\t\thours: \"Hours\",\r\n\t\t\tdays: \"Days\",\r\n\t\t\tweeks: \"Week\",\r\n\t\t\tmonths: \"Months\",\r\n\t\t\tyears: \"Years\",\r\n\r\n\t\t\t/* message popup */\r\n\t\t\tmessage_ok: \"OK\",\r\n\t\t\tmessage_cancel: \"Cancel\"\r\n\r\n\t\t}\r\n\t};\r\n};\r\n\r\n\n\n/***/ }),\n/* 93 */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar domHelpers = __webpack_require__(1);\r\n\r\nmodule.exports = function(gantt){\r\n\tvar calculateScaleRange = __webpack_require__(16);\r\n\r\n\tgantt.assert = __webpack_require__(94)(gantt);\r\n\r\n//initial initialization\r\n\tgantt.init = function(node, from, to){\r\n\t\tif(from && to){\r\n\t\t\tthis.config.start_date = this._min_date = new Date(from);\r\n\t\t\tthis.config.end_date = this._max_date = new Date(to);\r\n\t\t}\r\n\t\tthis.date.init();\r\n\r\n\t\tif (!this.config.scroll_size)\r\n\t\t\tthis.config.scroll_size = domHelpers.getScrollSize() || 1;\r\n\r\n\t\tvar resizeDelay;\r\n\t\tgantt.event(window, \"resize\", function(){\r\n\t\t\tclearTimeout(resizeDelay);\r\n\t\t\tresizeDelay = setTimeout(function(){\r\n\t\t\t\tgantt.render();\r\n\t\t\t}, 300);\r\n\t\t});\r\n\r\n\t\t//can be called only once\r\n\t\tthis.init = function(node){\r\n\t\t\tif (this.$container && this.$container.parentNode){\r\n\t\t\t\tthis.$container.parentNode.removeChild(this.$container);\r\n\t\t\t\tthis.$container = null;\r\n\t\t\t}\r\n\r\n\t\t\tif(this.$layout){\r\n\t\t\t\tthis.$layout.clear();\r\n\t\t\t}\r\n\t\t\tthis._reinit(node);\r\n\t\t};\r\n\r\n\t\tthis._reinit(node);\r\n\t};\r\n\r\n\tgantt._reinit = function(node){\r\n\t\tthis.callEvent(\"onBeforeGanttReady\", []);\r\n\t\t//this._init_tasks_range();\r\n\t\tthis.resetLightbox();\r\n\t\tthis._update_flags();\r\n\r\n\r\n\t\tvar config = this.$services.getService(\"templateLoader\");\r\n\t\tconfig.initTemplates(this);\r\n\r\n\t\tthis._clearTaskLayers();\r\n\t\tthis._clearLinkLayers();\r\n\r\n\t\t//this.clear\r\n\t\tif(this.$layout){\r\n\t\t\tthis.$layout.destructor();\r\n\t\t\tthis.$ui.reset();\r\n\t\t}\r\n\r\n\t\tthis.$root = domHelpers.toNode(node);\r\n\t\tnode.gantt = this;\r\n\t\tcalculateScaleRange(this);\r\n\t\tthis.config.layout.id = \"main\";\r\n\t\tthis.$layout = this.$ui.createView(\"layout\", node, this.config.layout);\r\n\r\n\t\tthis.$layout.attachEvent(\"onResize\", function(){\r\n\t\t\tgantt.refreshData();\r\n\t\t});\r\n\r\n\t\tthis.callEvent(\"onGanttLayoutReady\", []);\r\n\t\tthis.$layout.render();\r\n\r\n\t\tgantt.$container = this.$layout.$container.firstChild;\r\n\t\tthis.callEvent(\"onTemplatesReady\",[]);\r\n\t\tthis.$mouseEvents.reset(this.$root);\r\n\t\tthis.callEvent(\"onGanttReady\", []);\r\n\r\n\t\tthis.render();\r\n\t};\r\n\r\n\tgantt.$click={\r\n\t\tbuttons:{\r\n\t\t\t\"edit\":function(id){\r\n\t\t\t\tgantt.showLightbox(id);\r\n\t\t\t},\r\n\t\t\t\"delete\":function(id){\r\n\t\t\t\tvar question = gantt.locale.labels.confirm_deleting;\r\n\t\t\t\tvar title = gantt.locale.labels.confirm_deleting_title;\r\n\r\n\t\t\t\tgantt._dhtmlx_confirm(question, title, function(){\r\n\t\t\t\t\tif(!gantt.isTaskExists(id)){\r\n\t\t\t\t\t\tgantt.hideLightbox();\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tvar task = gantt.getTask(id);\r\n\t\t\t\t\tif(task.$new){\r\n\t\t\t\t\t\tgantt.silent(function(){\r\n\t\t\t\t\t\t\tgantt.deleteTask(id, true);\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\tgantt.refreshData();\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\tgantt.deleteTask(id);\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tgantt.hideLightbox();\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\r\n\tgantt.getScrollState = function(){\r\n\t\tvar state = this._scroll_state();\r\n\t\treturn { x:state.x_pos, y:state.y_pos, inner_width:state.x, inner_height:state.y, width: state.x_inner, height: state.y_inner };\r\n\t};\r\n\r\n\tgantt.scrollTo = function(left, top){\r\n\t\tvar vertical = this._getVerticalScrollbar();\r\n\t\tvar horizontal = this._getHorizontalScrollbar();\r\n\r\n\t\tvar oldV = vertical.getScrollState(),\r\n\t\t\toldH = horizontal.getScrollState();\r\n\r\n\t\tif (left*1 == left){\r\n\t\t\thorizontal.scroll(left);\r\n\t\t}\r\n\t\tif(top*1 == top){\r\n\t\t\tvertical.scroll(top);\r\n\t\t}\r\n\r\n\t\tvar newV = vertical.getScrollState(),\r\n\t\t\tnewH = horizontal.getScrollState();\r\n\r\n\t\tthis.callEvent(\"onGanttScroll\", [oldH.position, oldV.position, newH.position, newV.position]);\r\n\t};\r\n\r\n\tgantt.showDate = function(date){\r\n\t\tvar date_x = this.posFromDate(date);\r\n\t\tvar scroll_to = Math.max(date_x - this.config.task_scroll_offset, 0);\r\n\t\tthis.scrollTo(scroll_to);\r\n\t};\r\n\tgantt.showTask = function(id) {\r\n\t\tvar pos = this.getTaskPosition(this.getTask(id));\r\n\r\n\t\tvar left = Math.max(pos.left - this.config.task_scroll_offset, 0);\r\n\r\n\t\tvar dataHeight = this._scroll_state().y;\r\n\t\tvar top;\r\n\t\tif(!dataHeight){\r\n\t\t\ttop = pos.top;\r\n\t\t}else{\r\n\t\t\ttop = pos.top - (dataHeight - this.config.row_height)/2;\r\n\t\t}\r\n\r\n\t\tthis.scrollTo(left, top);\r\n\t};\r\n\r\n//renders self\r\n\tgantt.render = function(){\r\n\t\tthis.callEvent(\"onBeforeGanttRender\", []);\r\n\r\n\t\tvar pos = this.getScrollState();\r\n\r\n\t\tvar visible_date = null;\r\n\t\tif(pos && pos.x){\r\n\t\t\tvisible_date = gantt.dateFromPos(pos.x + this.config.task_scroll_offset);\r\n\t\t}\r\n\t\tcalculateScaleRange(this);\r\n\r\n\t\tthis.$layout.$config.autosize = this.config.autosize;\r\n\t\tthis.$layout.resize();\r\n\r\n\t\tif(this.config.preserve_scroll && pos){\r\n\r\n\t\t\tif(pos.x){\r\n\t\t\t\tvar new_pos = gantt.getScrollState();\r\n\t\t\t\tvar new_date = gantt.dateFromPos(new_pos.x);\r\n\t\t\t\tif(!(+visible_date == +new_date && new_pos.y == pos.y)){\r\n\t\t\t\t\tif(visible_date){\r\n\t\t\t\t\t\tthis.showDate(visible_date);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif(pos.y)\r\n\t\t\t\t\t\tgantt.scrollTo(undefined, pos.y);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tthis.callEvent(\"onGanttRender\", []);\r\n\t};\r\n\r\n\tgantt._scroll_state = function(){\r\n\t\tvar result = {\r\n\t\t\tx: false,\r\n\t\t\ty: false,\r\n\t\t\tx_pos: 0,\r\n\t\t\ty_pos: 0,\r\n\t\t\tscroll_size: this.config.scroll_size + 1,//1px for inner content\r\n\t\t\tx_inner: 0,\r\n\t\t\ty_inner: 0\r\n\t\t};\r\n\r\n\t\tvar scrollVer = gantt._getVerticalScrollbar(),\r\n\t\t\tscrollHor = gantt._getHorizontalScrollbar();\r\n\t\tif(scrollHor){\r\n\t\t\tvar horState = scrollHor.getScrollState();\r\n\t\t\tif(horState.visible){\r\n\t\t\t\tresult.x = horState.size;\r\n\t\t\t\tresult.x_inner = horState.scrollSize;\r\n\t\t\t}\r\n\t\t\tresult.x_pos = horState.position || 0;\r\n\t\t}\r\n\r\n\t\tif(scrollVer){\r\n\t\t\tvar verState = scrollVer.getScrollState();\r\n\t\t\tif(verState.visible){\r\n\t\t\t\tresult.y = verState.size;\r\n\r\n\t\t\t\tresult.y_inner = verState.scrollSize;\r\n\t\t\t}\r\n\t\t\tresult.y_pos = verState.position || 0;\r\n\t\t}\r\n\r\n\t\treturn result;\r\n\t};\r\n\r\n\tgantt.locate = function(e) {\r\n\t\tvar trg = domHelpers.getTargetNode(e);\r\n\r\n\t\t//ignore empty cells\r\n\t\tvar className = domHelpers.getClassName(trg);\r\n\t\tif ((className || \"\").indexOf(\"gantt_task_cell\") >= 0) return null;\r\n\r\n\t\tvar targetAttribute = arguments[1] || this.config.task_attribute;\r\n\r\n\t\tvar node = domHelpers.locateAttribute(trg, targetAttribute);\r\n\t\tif(node){\r\n\t\t\treturn node.getAttribute(targetAttribute);\r\n\t\t}else{\r\n\t\t\treturn null;\r\n\t\t}\r\n\t};\r\n\r\n\tgantt._locate_css = function(e, classname, strict){\r\n\t\treturn domHelpers.locateClassName(e, classname, strict);\r\n\t};\r\n\r\n\tgantt._locateHTML = function(e, attribute) {\r\n\t\treturn domHelpers.locateAttribute(e, attribute || this.config.task_attribute);\r\n\t};\r\n\r\n\tgantt.getTaskRowNode = function(id) {\r\n\t\tvar els = this.$grid_data.childNodes;\r\n\t\tvar attribute = this.config.task_attribute;\r\n\t\tfor (var i = 0; i < els.length; i++) {\r\n\t\t\tif (els[i].getAttribute) {\r\n\t\t\t\tvar value = els[i].getAttribute(attribute);\r\n\t\t\t\tif (value == id) return els[i];\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn null;\r\n\t};\r\n\r\n\tgantt.selectTask = function(id){\r\n\t\tif(!this.config.select_task)\r\n\t\t\treturn false;\r\n\t\tif (id){\r\n\r\n\t\t\tif(this._selected_task == id)\r\n\t\t\t\treturn this._selected_task;\r\n\r\n\t\t\tif(!this.callEvent(\"onBeforeTaskSelected\", [id])){\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\r\n\t\t\tthis.unselectTask();\r\n\t\t\tthis._selected_task = id;\r\n\r\n\t\t\tthis.refreshTask(id);\r\n\t\t\tthis.callEvent(\"onTaskSelected\", [id]);\r\n\t\t}\r\n\t\treturn this._selected_task;\r\n\t};\r\n\tgantt.unselectTask = function(id){\r\n\t\tvar id = id || this._selected_task;\r\n\t\tif(!id)\r\n\t\t\treturn;\r\n\t\tthis._selected_task = null;\r\n\t\tthis.refreshTask(id);\r\n\t\tthis.callEvent(\"onTaskUnselected\", [id]);\r\n\t};\r\n\tgantt.getSelectedId = function() {\r\n\t\treturn this.defined(this._selected_task) ? this._selected_task : null;\r\n\t};\r\n\r\n\tgantt.changeLightboxType = function(type){\r\n\t\tif(this.getLightboxType() == type)\r\n\t\t\treturn true;\r\n\t\tgantt._silent_redraw_lightbox(type);\r\n\t};\r\n\r\n\r\n\tgantt._get_link_type = function (from_start, to_start) {\r\n\t\tvar type = null;\r\n\t\tif (from_start && to_start) {\r\n\t\t\ttype = gantt.config.links.start_to_start;\r\n\t\t} else if (!from_start && to_start) {\r\n\t\t\ttype = gantt.config.links.finish_to_start;\r\n\t\t} else if (!from_start && !to_start) {\r\n\t\t\ttype = gantt.config.links.finish_to_finish;\r\n\t\t} else if (from_start && !to_start) {\r\n\t\t\ttype = gantt.config.links.start_to_finish;\r\n\t\t}\r\n\t\treturn type;\r\n\t};\r\n\r\n\tgantt.isLinkAllowed = function (from, to, from_start, to_start) {\r\n\t\tvar link = null;\r\n\t\tif (typeof(from) == \"object\") {\r\n\t\t\tlink = from;\r\n\t\t} else {\r\n\t\t\tlink = {source: from, target: to, type: this._get_link_type(from_start, to_start)};\r\n\t\t}\r\n\r\n\t\tif (!link) return false;\r\n\t\tif (!(link.source && link.target && link.type)) return false;\r\n\t\tif (link.source == link.target) return false;\r\n\r\n\t\tvar res = true;\r\n\t\t//any custom rules\r\n\t\tif (this.checkEvent(\"onLinkValidation\"))\r\n\t\t\tres = this.callEvent(\"onLinkValidation\", [link]);\r\n\r\n\t\treturn res;\r\n\t};\r\n\r\n\r\n\tgantt._correct_dst_change = function(date, prevOffset, step, unit){\r\n\t\tvar time_unit = gantt._get_line(unit) * step;\r\n\t\tif(time_unit > 60*60 && time_unit < 60*60*24){\r\n\t\t\t//correct dst change only if current unit is more than one hour and less than day (days have own checking), e.g. 12h\r\n\t\t\tvar offsetChanged = date.getTimezoneOffset() - prevOffset;\r\n\t\t\tif(offsetChanged){\r\n\t\t\t\tdate = gantt.date.add(date, offsetChanged, \"minute\");\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn date;\r\n\t};\r\n\r\n};\n\n/***/ }),\n/* 94 */\n/***/ (function(module, exports) {\n\n/*\r\n \tasserts will be removed in final code, so you can place them anythere\r\n\twithout caring about performance impacts\r\n*/\r\n\r\nmodule.exports = function(gantt){\r\n\treturn function assert(check, message){\r\n\t\t//jshint -W087\r\n\t\tif (!check){\r\n\t\t\tif(gantt.config.show_errors && gantt.callEvent(\"onError\",[message]) !== false) {\r\n\t\t\t\tgantt.message({type: \"error\", text: message, expire: -1});\r\n\t\t\t\tdebugger;\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n};\n\n/***/ }),\n/* 95 */\n/***/ (function(module, exports) {\n\nmodule.exports = function(gantt){\r\n\r\n\tfunction deprecated(badCode, goodCode) {\r\n\r\n\t\tvar formatting = gantt.env.isIE ? \"\" : \"%c\";\r\n\r\n\r\n\t\tvar message = [\r\n\t\t\tformatting, \"\\\"\", badCode, \"\\\"\",  formatting,\r\n\t\t\t\" has been deprecated in dhtmlxGantt v4.0 and will stop working in v5.0. Use \",\r\n\t\t\tformatting, \"\\\"\", goodCode, \"\\\"\",  formatting,\r\n\t\t\t\" instead. \\nSee more details at http://docs.dhtmlx.com/gantt/migrating.html \"\r\n\t\t].join(\"\");\r\n\r\n\t\tvar log = window.console.warn || window.console.log;\r\n\r\n\t\tvar args = [message];\r\n\t\tif(!gantt.env.isIE){\r\n\t\t\targs = args.concat([\"font-weight:bold\", \"font-weight:normal\", \"font-weight:bold\", \"font-weight:normal\"]);\r\n\t\t}\r\n\r\n\t\tlog.apply(window.console, args);\r\n\t}\r\n\r\n\tfunction wrapDeprecated(method) {\r\n\t\treturn function () {\r\n\t\t\tdeprecated(\"dhtmlx.\" + method, \"gantt.\" + method);\r\n\t\t\treturn gantt[method].apply(gantt, arguments);\r\n\t\t};\r\n\t}\r\n\r\n\t/* dhtmlx */\r\n\r\n\r\n\tif (!window.dhtmlx)\r\n\t\twindow.dhtmlx = {};\r\n\r\n\tvar dhtmlxMethods = [\r\n\t\t\"message\",\r\n\t\t\"alert\",\r\n\t\t\"confirm\",\r\n\t\t\"modalbox\",\r\n\t\t\"uid\",\r\n\t\t\"copy\",\r\n\t\t\"mixin\",\r\n\t\t\"defined\",\r\n\t\t\"bind\",\r\n\t\t\"assert\"\r\n\t];\r\n\r\n\tfor(var i = 0; i < dhtmlxMethods.length; i++){\r\n\t\t// wrap dhtmlx methods with 'deprecated' warnings\r\n\t\t// do not wrap if methods are defined by dhtmlxSuite\r\n\t\tif(!window.dhtmlx[dhtmlxMethods[i]]){\r\n\t\t\tdhtmlx[dhtmlxMethods[i]] = wrapDeprecated(dhtmlxMethods[i]);\r\n\t\t}\r\n\t}\r\n\t/* global functions */\r\n\r\n\r\n\tif (!window.dataProcessor) {\r\n\t\twindow.dataProcessor = function (url) {\r\n\t\t\tdeprecated(\"new dataProcessor(url)\", \"new gantt.dataProcessor(url)\");\r\n\t\t\treturn new gantt.dataProcessor(url);\r\n\t\t};\r\n\t}\r\n\r\n};\n\n/***/ })\n/******/ ]);\n\n\n// WEBPACK FOOTER //\n// dhtmlxgantt.js"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 18);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap f31ce8445f9193f902ac","function copy(object) {\r\n\tvar i, t, result; // iterator, types array, result\r\n\r\n\tif (object && typeof object == \"object\") {\r\n\t\tresult = {};\r\n\t\tt = [Array,Date,Number,String,Boolean];\r\n\t\tfor (i=0; i<t.length; i++) {\r\n\t\t\tif (object instanceof t[i])\r\n\t\t\t\tresult = i ? new t[i](object) : new t[i](); // first one is array\r\n\t\t}\r\n\r\n\t\tfor (i in object) {\r\n\t\t\tif (Object.prototype.hasOwnProperty.apply(object, [i]))\r\n\t\t\t\tresult[i] = copy(object[i]);\r\n\t\t}\r\n\t}\r\n\treturn result || object;\r\n}\r\n\r\nfunction mixin (target, source, force){\r\n\tfor (var f in source)\r\n\t\tif ((!target[f] || force)) target[f]=source[f];\r\n\treturn target;\r\n}\r\n\r\nfunction defined(obj) {\r\n\treturn typeof(obj) != \"undefined\";\r\n}\r\n\r\nvar seed;\r\nfunction uid() {\r\n\tif (!seed)\r\n\t\tseed = (new Date()).valueOf();\r\n\r\n\tseed++;\r\n\treturn seed;\r\n}\r\n\r\n//creates function with specified \"this\" pointer\r\nfunction bind(functor, object){\r\n\tif(functor.bind)\r\n\t\treturn functor.bind(object);\r\n\telse\r\n\t\treturn function(){ return functor.apply(object,arguments); };\r\n}\r\n\r\nfunction event(el, event, handler){\r\n\tif (el.addEventListener)\r\n\t\tel.addEventListener(event, handler, false);\r\n\r\n\telse if (el.attachEvent)\r\n\t\tel.attachEvent(\"on\"+event, handler);\r\n}\r\n\r\nfunction eventRemove(el, event, handler){\r\n\tif (el.removeEventListener)\r\n\t\tel.removeEventListener(event, handler, false);\r\n\r\n\telse if (el.detachEvent)\r\n\t\tel.detachEvent(\"on\"+event, handler);\r\n}\r\n\r\n\r\nmodule.exports = {\r\n\tcopy: copy,\r\n\tdefined: defined,\r\n\tmixin: mixin,\r\n\tuid: uid,\r\n\tbind: bind,\r\n\tevent: event,\r\n\teventRemove: eventRemove\r\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// c:/www-recent/gantt/sources/utils/utils.js\n// module id = 0\n// module chunks = 0","//returns position of html element on the page\r\nfunction elementPosition(elem) {\r\n\tvar top=0, left=0, right=0, bottom=0;\r\n\tif (elem.getBoundingClientRect) { //HTML5 method\r\n\t\tvar box = elem.getBoundingClientRect();\r\n\t\tvar body = document.body;\r\n\t\tvar docElem = document.documentElement;\r\n\t\tvar scrollTop = window.pageYOffset || docElem.scrollTop || body.scrollTop;\r\n\t\tvar scrollLeft = window.pageXOffset || docElem.scrollLeft || body.scrollLeft;\r\n\t\tvar clientTop = docElem.clientTop || body.clientTop || 0;\r\n\t\tvar clientLeft = docElem.clientLeft || body.clientLeft || 0;\r\n\t\ttop  = box.top +  scrollTop - clientTop;\r\n\t\tleft = box.left + scrollLeft - clientLeft;\r\n\r\n\t\tright = document.body.offsetWidth - box.right;\r\n\t\tbottom = document.body.offsetHeight - box.bottom;\r\n\t} else { //fallback to naive approach\r\n\t\twhile(elem) {\r\n\t\t\ttop = top + parseInt(elem.offsetTop,10);\r\n\t\t\tleft = left + parseInt(elem.offsetLeft,10);\r\n\t\t\telem = elem.offsetParent;\r\n\t\t}\r\n\r\n\t\tright = document.body.offsetWidth - elem.offsetWidth - left;\r\n\t\tbottom = document.body.offsetHeight - elem.offsetHeight - top;\r\n\t}\r\n\treturn { y: Math.round(top), x: Math.round(left), width:elem.offsetWidth, height:elem.offsetHeight, right: Math.round(right), bottom: Math.round(bottom) };\r\n}\r\n\r\nfunction isVisible(node){\r\n\tvar display = false,\r\n\t\tvisibility = false;\r\n\tif(window.getComputedStyle){\r\n\t\tvar style = window.getComputedStyle(node, null);\r\n\t\tdisplay = style[\"display\"];\r\n\t\tvisibility = style[\"visibility\"];\r\n\t}else if(node.currentStyle){\r\n\t\tdisplay = node.currentStyle[\"display\"];\r\n\t\tvisibility = node.currentStyle[\"visibility\"];\r\n\t}\r\n\treturn (display != \"none\" && visibility != \"hidden\");\r\n}\r\n\r\nfunction hasNonNegativeTabIndex(node){\r\n\treturn !isNaN(node.getAttribute(\"tabindex\")) && (node.getAttribute(\"tabindex\")*1 >= 0);\r\n}\r\n\r\nfunction hasHref(node){\r\n\tvar canHaveHref = {\"a\": true, \"area\": true};\r\n\tif(canHaveHref[node.nodeName.loLowerCase()]){\r\n\t\treturn !!node.getAttribute(\"href\");\r\n\t}\r\n\treturn true;\r\n}\r\n\r\nfunction isEnabled(node){\r\n\tvar canDisable = {\"input\":true, \"select\":true, \"textarea\":true, \"button\":true, \"object\":true};\r\n\tif(canDisable[node.nodeName.toLowerCase()]){\r\n\t\treturn !node.hasAttribute(\"disabled\");\r\n\t}\r\n\r\n\treturn true;\r\n}\r\n\r\nfunction getFocusableNodes(root){\r\n\tvar nodes = root.querySelectorAll([\r\n\t\t\"a[href]\",\r\n\t\t\"area[href]\",\r\n\t\t\"input\",\r\n\t\t\"select\",\r\n\t\t\"textarea\",\r\n\t\t\"button\",\r\n\t\t\"iframe\",\r\n\t\t\"object\",\r\n\t\t\"embed\",\r\n\t\t\"[tabindex]\",\r\n\t\t\"[contenteditable]\"\r\n\t].join(\", \"));\r\n\r\n\tvar nodesArray = Array.prototype.slice.call(nodes, 0);\r\n\tfor(var i = 0; i < nodesArray.length; i++){\r\n\t\tvar node = nodesArray[i];\r\n\t\tvar isValid = (hasNonNegativeTabIndex(node)  || isEnabled(node) || hasHref(node)) && isVisible(node);\r\n\t\tif(!isValid){\r\n\t\t\tnodesArray.splice(i, 1);\r\n\t\t\ti--;\r\n\t\t}\r\n\t}\r\n\treturn nodesArray;\r\n}\r\n\r\nfunction getScrollSize(){\r\n\tvar div = document.createElement(\"div\");\r\n\tdiv.style.cssText=\"visibility:hidden;position:absolute;left:-1000px;width:100px;padding:0px;margin:0px;height:110px;min-height:100px;overflow-y:scroll;\";\r\n\r\n\tdocument.body.appendChild(div);\r\n\tvar width = div.offsetWidth-div.clientWidth;\r\n\tdocument.body.removeChild(div);\r\n\r\n\treturn width;\r\n}\r\n\r\nfunction getClassName(node){\r\n\tif(!node) return \"\";\r\n\r\n\tvar className = node.className || \"\";\r\n\tif(className.baseVal)//'className' exist but not a string - IE svg element in DOM\r\n\t\tclassName = className.baseVal;\r\n\r\n\tif(!className.indexOf)\r\n\t\tclassName = '';\r\n\r\n\treturn _trimString(className);\r\n}\r\n\r\nfunction addClassName(node, className){\r\n\tif (className && node.className.indexOf(className) === -1) {\r\n\t\tnode.className += \" \" + className;\r\n\t}\r\n}\r\n\r\nfunction removeClassName(node, name) {\r\n\tname = name.split(\" \");\r\n\tfor (var i = 0; i < name.length; i++) {\r\n\t\tvar regEx = new RegExp('\\\\s?\\\\b' + name[i] + '\\\\b(?![-_\\.])', \"\");\r\n\t\tnode.className = node.className.replace(regEx, \"\");\r\n\t}\r\n}\r\n\r\nfunction toNode(node) {\r\n\tif (typeof node === \"string\") {\r\n\t\treturn (document.getElementById(node) || document.querySelector(node) || document.body);\r\n\t}\r\n\treturn node || document.body;\r\n}\r\n\r\nvar _slave = document.createElement(\"div\");\r\nfunction insert(node, newone) {\r\n\t_slave.innerHTML = newone;\r\n\tvar child = _slave.firstChild;\r\n\tnode.appendChild(child);\r\n\treturn child;\r\n}\r\n\r\nfunction remove(node) {\r\n\tif (node && node.parentNode) {\r\n\t\tnode.parentNode.removeChild(node);\r\n\t}\r\n}\r\n\r\nfunction getChildren(node, css) {\r\n\tvar ch = node.childNodes;\r\n\tvar len = ch.length;\r\n\tvar out = [];\r\n\tfor (var i = 0; i < len; i++) {\r\n\t\tvar obj = ch[i];\r\n\t\tif (obj.className && obj.className.indexOf(css) !== -1) {\r\n\t\t\tout.push(obj);\r\n\t\t}\r\n\t}\r\n\treturn out;\r\n}\r\n\r\nfunction getTargetNode(e){\r\n\tvar trg;\r\n\tif (e.tagName)\r\n\t\ttrg = e;\r\n\telse {\r\n\t\te=e||window.event;\r\n\t\ttrg=e.target||e.srcElement;\r\n\t}\r\n\treturn trg;\r\n}\r\n\r\nfunction locateAttribute(e, attribute) {\r\n\tif(!attribute) return;\r\n\r\n\tvar trg = getTargetNode(e);\r\n\r\n\twhile (trg){\r\n\t\tif (trg.getAttribute){\t//text nodes has not getAttribute\r\n\t\t\tvar test = trg.getAttribute(attribute);\r\n\t\t\tif (test) return trg;\r\n\t\t}\r\n\t\ttrg=trg.parentNode;\r\n\t}\r\n\treturn null;\r\n}\r\n\r\nfunction _trimString(str){\r\n\tvar func = String.prototype.trim || function(){ return this.replace(/^\\s+|\\s+$/g, \"\"); };\r\n\treturn func.apply(str);\r\n}\r\n\r\nfunction locateClassName(e, classname, strict){\r\n\tif(strict === undefined)\r\n\t\tstrict = true;\r\n\r\n\tvar trg = getTargetNode(e);\r\n\tvar css = '';\r\n\tvar test = false;\r\n\twhile (trg){\r\n\t\tcss = getClassName(trg);\r\n\r\n\t\tif(css){\r\n\t\t\tvar ind = css.indexOf(classname);\r\n\t\t\tif (ind >= 0){\r\n\t\t\t\tif (!strict)\r\n\t\t\t\t\treturn trg;\r\n\r\n\t\t\t\t//check that we have exact match\r\n\t\t\t\tvar left = (ind === 0) || (!_trimString(css.charAt(ind - 1)));\r\n\t\t\t\tvar right = ((ind + classname.length >= css.length)) || (!_trimString(css.charAt(ind + classname.length)));\r\n\r\n\t\t\t\tif (left && right)\r\n\t\t\t\t\treturn trg;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\ttrg=trg.parentNode;\r\n\t}\r\n\treturn null;\r\n}\r\n\r\n/*\r\nevent position relatively to DOM element\r\n */\r\nfunction getRelativeEventPosition(ev, node){\r\n\tif (ev.pageX || ev.pageY)\r\n\t\tvar pos = {x: ev.pageX, y: ev.pageY};\r\n\r\n\tvar d = gantt.env.isIE ? document.documentElement : document.body;\r\n\tvar pos = {\r\n\t\tx: ev.clientX + d.scrollLeft - d.clientLeft,\r\n\t\ty: ev.clientY + d.scrollTop - d.clientTop\r\n\t};\r\n\r\n\tvar box = elementPosition(node);\r\n\tpos.x = pos.x - box.x + node.scrollLeft;\r\n\tpos.y = pos.y - box.y + node.scrollTop;\r\n\treturn pos;\r\n}\r\n\r\n\r\nfunction isChildOf(child, parent){\r\n\twhile(child && child != parent) {\r\n\t\tchild = child.parentNode;\r\n\t}\r\n\treturn child == parent;\r\n}\r\n\r\nmodule.exports = {\r\n\tgetNodePosition: elementPosition,\r\n\tgetFocusableNodes: getFocusableNodes,\r\n\tgetScrollSize: getScrollSize,\r\n\tgetClassName: getClassName,\r\n\taddClassName: addClassName,\r\n\tremoveClassName: removeClassName,\r\n\tinsertNode: insert,\r\n\tremoveNode: remove,\r\n\tgetChildNodes: getChildren,\r\n\ttoNode: toNode,\r\n\tlocateClassName:locateClassName,\r\n\tlocateAttribute: locateAttribute,\r\n\tgetTargetNode: getTargetNode,\r\n\tgetRelativeEventPosition: getRelativeEventPosition,\r\n\tisChildOf: isChildOf,\r\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// c:/www-recent/gantt/sources/utils/dom_helpers.js\n// module id = 1\n// module chunks = 0","var EventHost = function(){\r\n\tthis._connected = [];\r\n\tthis._silent_mode = false;\r\n};\r\nEventHost.prototype = {\r\n\t_silentStart: function() {\r\n\t\tthis._silent_mode = true;\r\n\t},\r\n\t_silentEnd: function() {\r\n\t\tthis._silent_mode = false;\r\n\t},\r\n\t_eventCatcher: function(obj){\r\n\t\tvar dhx_catch = [];\r\n\t\tvar z = function(){\r\n\t\t\tvar res = true;\r\n\t\t\tfor (var i = 0; i < dhx_catch.length; i++){\r\n\t\t\t\tif (dhx_catch[i]){\r\n\t\t\t\t\tvar zr = dhx_catch[i].apply(obj, arguments);\r\n\t\t\t\t\tres=res&&zr;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn res;\r\n\t\t};\r\n\t\tz.addEvent=function(ev){\r\n\t\t\tif (typeof (ev) == \"function\")\r\n\t\t\t\treturn dhx_catch.push(ev)-1;\r\n\t\t\treturn false;\r\n\t\t};\r\n\t\tz.removeEvent=function(id){\r\n\t\t\tdhx_catch[id]=null;\r\n\t\t};\r\n\t\treturn z;\r\n\t}\r\n};\r\n\r\nfunction makeEventable(obj){\r\n\r\n\tvar eventHost = new EventHost();\r\n\tobj.attachEvent=function(name, catcher, callObj){\r\n\t\tname='ev_'+name.toLowerCase();\r\n\t\tif (!eventHost[name])\r\n\t\t\teventHost[name]=new eventHost._eventCatcher(callObj||this);\r\n\r\n\t\treturn(name+':'+eventHost[name].addEvent(catcher)); //return ID (event name & event ID)\r\n\t};\r\n\tobj.attachAll = function(callback, callObj){\r\n\t\tthis.attachEvent('listen_all', callback, callObj);\r\n\t};\r\n\r\n\tobj.callEvent=function(name, arg0, callObj){\r\n\t\tif (eventHost._silent_mode) return true;\r\n\r\n\t\tvar handlerName = 'ev_'+name.toLowerCase();\r\n\r\n\t\tif (eventHost['ev_listen_all']){\r\n\t\t\teventHost['ev_listen_all'].apply(callObj || this, [name].concat(arg0));\r\n\t\t}\r\n\r\n\t\tif (eventHost[handlerName])\r\n\t\t\treturn eventHost[handlerName].apply(callObj || this, arg0);\r\n\t\treturn true;\r\n\t};\r\n\tobj.checkEvent=function(name){\r\n\t\treturn (!!eventHost['ev_'+name.toLowerCase()]);\r\n\t};\r\n\tobj.detachEvent=function(id){\r\n\t\tif (id){\r\n\t\t\tvar list = id.split(':');           //get EventName and ID\r\n\t\t\teventHost[list[0]].removeEvent(list[1]); //remove event\r\n\t\t}\r\n\t};\r\n\tobj.detachAllEvents = function(){\r\n\t\tfor (var name in eventHost){\r\n\t\t\tif (name.indexOf(\"ev_\") === 0)\r\n\t\t\t\tdelete eventHost[name];\r\n\t\t}\r\n\t};\r\n\r\n}\r\n\r\nmodule.exports = makeEventable;\n\n\n//////////////////\n// WEBPACK FOOTER\n// c:/www-recent/gantt/sources/utils/eventable.js\n// module id = 2\n// module chunks = 0","var utils = require(\"../../../utils/utils\"),\r\n\teventable = require(\"../../../utils/eventable\"),\r\n\tdomHelpers = require(\"../../../utils/dom_helpers\");\r\n\r\nvar Cell = (function () {\r\n\t\"use strict\";\r\n\r\n\tfunction Cell(parent, config, factory, gantt) {\r\n\t\tif (parent) {\r\n\t\t\tthis.$container = domHelpers.toNode(parent);\r\n\t\t\tthis.$parent = parent;\r\n\t\t}\r\n\t\t// save config\r\n\t\tthis.$config = utils.mixin(config, {\r\n\t\t\theaderHeight: 33\r\n\t\t});\r\n\t\tthis.$gantt = gantt;\r\n\t\t// set id\r\n\t\tthis.$id = config.id || \"c\" + utils.uid();\r\n\r\n\t\tthis.$name = \"cell\";\r\n\t\tthis.$factory = factory;\r\n\r\n\t\teventable(this);\r\n\r\n\t}\r\n\r\n\tCell.prototype.destructor = function () {\r\n\t\tthis.$parent = this.$container = this.$view = null;\r\n\r\n\t\tthis.callEvent(\"onDestroy\", []);\r\n\t\tthis.detachAllEvents();\r\n\t};\r\n\tCell.prototype.cell = function (id) {\r\n\t\treturn null;\r\n\t};\r\n\r\n\tCell.prototype.scrollTo = function(left, top){\r\n\r\n\t\tif (left*1 == left){\r\n\t\t\tthis.$view.scrollLeft = left;\r\n\t\t}\r\n\t\tif(top*1 == top){\r\n\t\t\tthis.$view.scrollTop = left;\r\n\t\t}\r\n\t};\r\n\r\n\tCell.prototype.clear = function(){\r\n\t\tthis.getNode().innerHTML = \"\";\r\n\t\tthis.getNode().className = \"gantt_layout_content\";\r\n\t\tthis.getNode().style.padding = \"0\";\r\n\t};\r\n\r\n\tCell.prototype.resize = function (final) {\r\n\t\tif (this.$parent) {\r\n\t\t\treturn this.$parent.resize(final);\r\n\t\t}\r\n\r\n\t\tif(final === false){\r\n\t\t\tthis.$preResize = true;\r\n\t\t}\r\n\r\n\t\tvar topCont = this.$container;\r\n\t\tvar x = topCont.offsetWidth;\r\n\t\tvar y = topCont.offsetHeight;\r\n\t\tvar topSize = this.getSize();\r\n\t\tif (topCont === document.body) {\r\n\t\t\tx = document.body.offsetWidth;\r\n\t\t\ty = document.body.offsetHeight;\r\n\t\t}\r\n\t\tif (x < topSize.minWidth) {\r\n\t\t\tx = topSize.minWidth;\r\n\t\t}\r\n\t\tif (x > topSize.maxWidth) {\r\n\t\t\tx = topSize.maxWidth;\r\n\t\t}\r\n\t\tif (y < topSize.minHeight) {\r\n\t\t\ty = topSize.minHeight;\r\n\t\t}\r\n\t\tif (y > topSize.maxHeight) {\r\n\t\t\ty = topSize.maxHeight;\r\n\t\t}\r\n\t\tthis.setSize(x, y);\r\n\r\n\t\tvar self = this;\r\n\r\n\t\tif(!this.$preResize){\r\n\t\t//\tself.callEvent(\"onResize\", [x, y]);\r\n\t\t}\r\n\t\tthis.$preResize = false;\r\n\t};\r\n\r\n\tCell.prototype.hide = function () {\r\n\t\tthis._hide(true);\r\n\t\tthis.resize();\r\n\t};\r\n\tCell.prototype.show = function (force) {\r\n\t\tthis._hide(false);\r\n\t\tif (force && this.$parent) {\r\n\t\t\tthis.$parent.show();\r\n\t\t}\r\n\t\tthis.resize();\r\n\t};\r\n\tCell.prototype._hide = function (mode) {\r\n\t\tif (mode === true && this.$view.parentNode) {\r\n\t\t\tthis.$view.parentNode.removeChild(this.$view);\r\n\t\t}\r\n\t\telse if (mode === false && !this.$view.parentNode) {\r\n\t\t\tvar index = this.$parent.cellIndex(this.$id);\r\n\t\t\tthis.$parent.moveView(this, index);\r\n\t\t}\r\n\t\tthis.$config.hidden = mode;\r\n\t};\r\n\tCell.prototype.$toHTML = function (content, css) {\r\n\t\tif (content === void 0) { content = \"\"; }\r\n\t\tcss = [(css || \"\"), (this.$config.css || \"\")].join(\" \");\r\n\t\tvar obj = this.$config;\r\n\t\tvar header = \"\";\r\n\t\tif (obj.raw) {\r\n\t\t\tcontent = typeof obj.raw === \"string\" ? obj.raw : \"\";\r\n\t\t}\r\n\t\telse {\r\n\t\t\tif (!content) {\r\n\t\t\t\tcontent = \"<div class='gantt_layout_content' \"+(css ? \" class='\"+css+\"' \" : \"\")+\" >\" + (obj.html || \"\") + \"</div>\";\r\n\t\t\t}\r\n\t\t\tif (obj.header) {\r\n\t\t\t\tvar collapseIcon = obj.canCollapse ? \"<div class='gantt_layout_header_arrow'></div>\" : \"\";\r\n\t\t\t\theader = \"<div class='gantt_layout_header'>\" + collapseIcon + \"<div class='gantt_layout_header_content'>\" + obj.header + \"</div></div>\";\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn \"<div class='gantt_layout_cell \" + css + \"' data-cell-id='\" + this.$id + \"'>\" + header + content + \"</div>\";\r\n\t};\r\n\tCell.prototype.$fill = function (node, parent) {\r\n\t\tthis.$view = node;\r\n\t\tthis.$parent = parent;\r\n\t\tthis.init();\r\n\t};\r\n\tCell.prototype.getNode = function () {\r\n\t\treturn (this.$view.querySelector(\"gantt_layout_cell\") || this.$view);\r\n\t};\r\n\tCell.prototype.init = function () {\r\n\t\t// [NOT-GOOD] code is executed for each component, while it still has only one handler, it is no good\r\n\r\n\t\tvar self = this;\r\n\t\tvar mouse = gantt.$services.getService(\"mouseEvents\");\r\n\t\tmouse.delegate(\"click\", \"gantt_header_arrow\", function(e){\r\n\t\t\tvar cellId = domHelpers.locateAttribute(e, \"data-cell-id\");\r\n\t\t\tif(cellId == self.$id){\r\n\t\t\t\tself.toggle();\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\tthis.callEvent(\"onReady\", []);\r\n\t};\r\n\tCell.prototype.toggle = function () {\r\n\t\tthis.$config.collapsed = !this.$config.collapsed;\r\n\t\tthis.resize();\r\n\t};\r\n\tCell.prototype.getSize = function () {\r\n\t\tvar size = {\r\n\t\t\theight: this.$config.height || 0,\r\n\t\t\twidth: this.$config.width || 0,\r\n\t\t\tgravity: this.$config.gravity || 1,\r\n\t\t\tminHeight: this.$config.minHeight || 0,\r\n\t\t\tminWidth: this.$config.minWidth || 0,\r\n\t\t\tmaxHeight: this.$config.maxHeight || 100000,\r\n\t\t\tmaxWidth: this.$config.maxWidth || 100000\r\n\t\t};\r\n\t\tif (this.$config.collapsed) {\r\n\t\t\tvar mode = this.$config.mode === \"x\";\r\n\t\t\tsize[mode ? \"width\" : \"height\"] = size[mode ? \"maxWidth\" : \"maxHeight\"] = this.$config.headerHeight;\r\n\t\t}\r\n\t\treturn size;\r\n\t};\r\n\r\n\tCell.prototype.getContentSize = function(){\r\n\r\n\t\tvar width = this.$lastSize.contentX;\r\n\t\tif(width !== width*1){\r\n\t\t\twidth = this.$lastSize.width;\r\n\t\t}\r\n\r\n\t\tvar height = this.$lastSize.contentY;\r\n\t\tif(height !== height*1){\r\n\t\t\theight = this.$lastSize.height;\r\n\t\t}\r\n\r\n\t\treturn {\r\n\t\t\twidth: width,\r\n\t\t\theight: height\r\n\t\t};\r\n\t};\r\n\r\n\tCell.prototype._getBorderSizes = function(){\r\n\t\tvar borders = {\r\n\t\t\ttop: 0,\r\n\t\t\tright: 0,\r\n\t\t\tbottom: 0,\r\n\t\t\tleft: 0,\r\n\t\t\thorizontal: 0,\r\n\t\t\tvertical: 0\r\n\t\t};\r\n\t\tif(this._currentBorders){\r\n\t\t\tif(this._currentBorders[this._borders.left]){\r\n\t\t\t\tborders.left = 1;\r\n\t\t\t\tborders.horizontal++;\r\n\t\t\t}\r\n\r\n\t\t\tif(this._currentBorders[this._borders.right]){\r\n\t\t\t\tborders.right = 1;\r\n\t\t\t\tborders.horizontal++;\r\n\t\t\t}\r\n\r\n\t\t\tif(this._currentBorders[this._borders.top]){\r\n\t\t\t\tborders.top = 1;\r\n\t\t\t\tborders.vertical++;\r\n\t\t\t}\r\n\r\n\t\t\tif(this._currentBorders[this._borders.bottom]){\r\n\t\t\t\tborders.bottom = 1;\r\n\t\t\t\tborders.vertical++;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn borders;\r\n\r\n\t};\r\n\r\n\tCell.prototype.setSize = function (x, y) {\r\n\t\tthis.$view.style.width = x + \"px\";\r\n\t\tthis.$view.style.height = y + \"px\";\r\n\r\n\t\tvar borders = this._getBorderSizes();\r\n\t\tvar contentY = y - borders.vertical;\r\n\t\tvar contentX = x - borders.horizontal;\r\n\r\n\t\tthis.$lastSize = { x: x, y: y, contentX: contentX, contentY: contentY };\r\n\t\tif (this.$config.header) {\r\n\t\t\tthis._sizeHeader();\r\n\t\t}else{\r\n\t\t\tthis._sizeContent();\r\n\t\t}\r\n\t};\r\n\r\n\tCell.prototype._borders = {\r\n\t\t\"left\":\"gantt_layout_cell_border_left\",\r\n\t\t\"right\":\"gantt_layout_cell_border_right\",\r\n\t\t\"top\":\"gantt_layout_cell_border_top\",\r\n\t\t\"bottom\":\"gantt_layout_cell_border_bottom\"\r\n\t};\r\n\r\n\tCell.prototype._setBorders = function(css, view){\r\n\t\tif(!view) {\r\n\t\t\tview = this;\r\n\t\t}\r\n\t\tvar node = view.$view;\r\n\r\n\t\tfor( var i in this._borders){\r\n\t\t\tdomHelpers.removeClassName(node, this._borders[i]);\r\n\t\t}\r\n\r\n\t\tif(typeof css == \"string\"){\r\n\t\t\tcss = [css];\r\n\t\t}\r\n\r\n\t\tvar cssHash = {};\r\n\r\n\t\tfor(var i = 0; i < css.length; i++){\r\n\t\t\tdomHelpers.addClassName(node, css[i]);\r\n\t\t\tcssHash[css[i]] = true;\r\n\t\t}\r\n\r\n\t\tview._currentBorders = cssHash;\r\n\t};\r\n\r\n\r\n\tCell.prototype._sizeContent = function(){\r\n\t\tvar content = this.$view.childNodes[0];\r\n\t\tif(content.className == \"gantt_layout_content\"){\r\n\t\t\tcontent.style.height = this.$lastSize.contentY + \"px\";\r\n\t\t}\r\n\t};\r\n\r\n\tCell.prototype._sizeHeader = function () {\r\n\t\tvar size = this.$lastSize;\r\n\t\tsize.contentY -= this.$config.headerHeight;\r\n\t\tvar header = this.$view.childNodes[0];\r\n\t\tvar content = this.$view.childNodes[1];\r\n\t\tvar xLayout = this.$config.mode === \"x\";\r\n\t\tif (this.$config.collapsed) {\r\n\t\t\tcontent.style.display = \"none\";\r\n\t\t\tif (xLayout) {\r\n\t\t\t\theader.className = \"gantt_layout_header collapsed_x\";\r\n\t\t\t\theader.style.width = size.y + \"px\";\r\n\t\t\t\tvar d = Math.floor(size.y / 2 - size.x / 2);\r\n\t\t\t\theader.style.transform = \"rotate(90deg) translate(\" + d + \"px, \" + d + \"px)\";\r\n\t\t\t\tcontent.style.display = \"none\";\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\theader.className = \"gantt_layout_header collapsed_y\";\r\n\t\t\t}\r\n\t\t}\r\n\t\telse {\r\n\t\t\tif (xLayout) {\r\n\t\t\t\theader.className = \"gantt_layout_header\";\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\theader.className = \"gantt_layout_header vertical\";\r\n\t\t\t}\r\n\t\t\theader.style.width = 'auto';\r\n\t\t\theader.style.transform = '';\r\n\t\t\tcontent.style.display = \"\";\r\n\t\t\tcontent.style.height = size.contentY + \"px\";\r\n\t\t}\r\n\t\theader.style.height = this.$config.headerHeight + \"px\";\r\n\t};\r\n\treturn Cell;\r\n}());\r\n\r\nmodule.exports = Cell;\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// c:/www-recent/gantt/sources/core/ui/layout/cell.js\n// module id = 3\n// module chunks = 0","module.exports = function (d, b) {\r\n\tfor (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\r\n\tfunction __() { this.constructor = d; }\r\n\td.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// c:/www-recent/gantt/sources/utils/extends.js\n// module id = 4\n// module chunks = 0","var env = {\r\n\tisIE: (navigator.userAgent.indexOf(\"MSIE\") >= 0 || navigator.userAgent.indexOf(\"Trident\") >= 0),\r\n\tisIE6: (!window.XMLHttpRequest && navigator.userAgent.indexOf(\"MSIE\") >= 0),\r\n\tisIE7: (navigator.userAgent.indexOf(\"MSIE 7.0\") >= 0 && navigator.userAgent.indexOf(\"Trident\") < 0),\r\n\tisIE8: (navigator.userAgent.indexOf(\"MSIE 8.0\") >= 0 && navigator.userAgent.indexOf(\"Trident\") >= 0),\r\n\tisOpera: (navigator.userAgent.indexOf(\"Opera\") >= 0),\r\n\tisChrome: (navigator.userAgent.indexOf(\"Chrome\") >= 0),\r\n\tisKHTML: (navigator.userAgent.indexOf(\"Safari\") >= 0 || navigator.userAgent.indexOf(\"Konqueror\") >= 0),\r\n\tisFF: (navigator.userAgent.indexOf(\"Firefox\") >= 0),\r\n\tisIPad: (navigator.userAgent.search(/iPad/gi) >= 0),\r\n\tisEdge: (navigator.userAgent.indexOf(\"Edge\")!=-1)\r\n};\r\n\r\nmodule.exports = env;\n\n\n//////////////////\n// WEBPACK FOOTER\n// c:/www-recent/gantt/sources/utils/env.js\n// module id = 5\n// module chunks = 0","var __extends = require(\"../../../utils/extends\"),\r\n\tdomHelpers = require(\"../../../utils/dom_helpers\"),\r\n\tutils = require(\"../../../utils/utils\"),\r\n\tCell = require(\"./cell\");\r\n\r\nvar Layout = (function (_super) {\r\n\t\"use strict\";\r\n\r\n\t__extends(Layout, _super);\r\n\tfunction Layout(parent, config, factory) {\r\n\t\tvar _this = _super.apply(this, arguments) || this;\r\n\r\n\t\tif(parent)\r\n\t\t\t_this.$root = true;\r\n\r\n\t\t_this._parseConfig(config);\r\n\t\treturn _this;\r\n\t}\r\n\r\n\tLayout.prototype.destructor = function () {\r\n\t\tif (this.$container && this.$view) {\r\n\t\t\tdomHelpers.removeNode(this.$view);\r\n\t\t}\r\n\r\n\t\tfor (var i = 0; i < this.$cells.length; i++) {\r\n\t\t\tvar child = this.$cells[i];\r\n\t\t\tchild.destructor();\r\n\t\t}\r\n\t\tthis.$cells = [];\r\n\r\n\t\t_super.prototype.destructor.call(this);\r\n\t};\r\n\r\n\tLayout.prototype.resize = function(startStage){\r\n\t\tvar mainCall = false;\r\n\t\tif(this.$root){\r\n\t\t\t//console.log(\"root resize\");\r\n\t\t}\r\n\r\n\t\tif(this.$root && !this._resizeInProgress){\r\n\t\t\tthis.callEvent(\"onBeforeResize\", []);\r\n\t\t\tmainCall = true;\r\n\t\t\tthis._resizeInProgress = true;\r\n\t\t}\r\n\r\n\t\t_super.prototype.resize.call(this, true);\r\n\t\tif(mainCall && (startStage || startStage === undefined)){\r\n\t\t\tif(this.$config.autosize){\r\n\t\t\t\tthis.autosize(this.$config.autosize);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t_super.prototype.resize.call(this, false);\r\n\r\n\t\tif(mainCall && (!startStage || startStage === undefined)){\r\n\t\t\tthis._resizeInProgress = false;\r\n\t\t}\r\n\t\tif(this.$root){\r\n\t\t\tthis.callEvent(\"onResize\", []);\r\n\t\t\t//console.log(\"root resize end\");\r\n\t\t}\r\n\t};\r\n\r\n\tLayout.prototype.cell = function (id) {\r\n\t\tfor (var i = 0; i < this.$cells.length; i++) {\r\n\t\t\tvar child = this.$cells[i];\r\n\t\t\tif (child.$id === id) {\r\n\t\t\t\treturn child;\r\n\t\t\t}\r\n\t\t\tvar sub = child.cell(id);\r\n\t\t\tif (sub) {\r\n\t\t\t\treturn sub;\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\tLayout.prototype.cellIndex = function (id) {\r\n\t\tfor (var i = 0; i < this.$cells.length; i++) {\r\n\t\t\tif (this.$cells[i].$id === id) {\r\n\t\t\t\treturn i;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn -1;\r\n\t};\r\n\tLayout.prototype.moveView = function (view, ind) {\r\n\t\tif (this.$cells[ind] !== view) {\r\n\t\t\treturn window.alert(\"Not implemented\");\r\n\t\t}\r\n\t\telse {\r\n\t\t\tind += this.$config.header ? 1 : 0;\r\n\t\t\tvar node = this.$view;\r\n\t\t\tif (ind >= node.childNodes.length) {\r\n\t\t\t\tnode.appendChild(view.$view);\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tnode.insertBefore(view.$view, node.childNodes[ind]);\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\tLayout.prototype._parseConfig = function (config) {\r\n\t\tthis.$cells = [];\r\n\t\tthis._xLayout = !config.rows;\r\n\t\tvar cells = config.rows || config.cols || config.views;\r\n\t\tfor (var i = 0; i < cells.length; i++) {\r\n\t\t\tvar cell = cells[i];\r\n\t\t\tcell.mode = this._xLayout ? \"x\" : \"y\";\r\n\t\t\tvar $content = this.$factory.initUI(cell);\r\n\t\t\tif(!$content){\r\n\t\t\t\tcells.splice(i, 1);\r\n\t\t\t\ti--;\r\n\t\t\t}else{\r\n\t\t\t\tthis.$cells.push($content);\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\tLayout.prototype.getCells = function () {\r\n\t\treturn this.$cells;\r\n\t};\r\n\tLayout.prototype.render = function () {\r\n\t\tvar view = domHelpers.insertNode(this.$container, this.$toHTML());\r\n\t\tthis.$fill(view, null);\r\n\t\tthis.callEvent(\"onReady\", []);\r\n\t\tthis.resize();\r\n\r\n\t\t// do simple repaint after the first call\r\n\t\tthis.render = this.resize;\r\n\t};\r\n\tLayout.prototype.$fill = function (node, parent) {\r\n\t\tthis.$view = node;\r\n\t\tthis.$parent = parent;\r\n\t\tvar cells = domHelpers.getChildNodes(node, \"gantt_layout_cell\");\r\n\t\tfor (var i = cells.length - 1; i >= 0; i--) {\r\n\t\t\tvar sub = this.$cells[i];\r\n\t\t\tsub.$fill(cells[i], this);\r\n\t\t\t// initially hidden cell\r\n\t\t\tif (sub.$config.hidden) {\r\n\t\t\t\tsub.$view.parentNode.removeChild(sub.$view);\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\tLayout.prototype.$toHTML = function () {\r\n\t\tvar mode = this._xLayout ? \"x\" : \"y\";\r\n\t\tvar html = [];\r\n\t\tfor (var i = 0; i < this.$cells.length; i++) {\r\n\t\t\thtml.push(this.$cells[i].$toHTML());\r\n\t\t}\r\n\t\treturn _super.prototype.$toHTML.call(this, html.join(\"\"), (this.$root ? \"gantt_layout_root \" : \"\") + \"gantt_layout gantt_layout_\" + mode);\r\n\t};\r\n\r\n\tLayout.prototype.getContentSize = function(){\r\n\t\tvar contentWidth = 0,\r\n\t\t\tcontentHeight = 0;\r\n\r\n\t\tvar cellSize, cell, borders;\r\n\t\tfor (var i = 0; i < this.$cells.length; i++) {\r\n\t\t\tcell = this.$cells[i];\r\n\t\t\tif(cell.$config.hidden)\r\n\t\t\t\tcontinue;\r\n\r\n\t\t\tcellSize = cell.getContentSize();\r\n\t\t\tborders = cell._getBorderSizes();\r\n\r\n\t\t\tif(this._xLayout){\r\n\t\t\t\tcontentWidth += (cellSize.width + borders.horizontal);\r\n\t\t\t\tcontentHeight = Math.max(contentHeight, (cellSize.height + borders.vertical));\r\n\t\t\t}else{\r\n\t\t\t\tcontentWidth = Math.max(contentWidth, cellSize.width + borders.horizontal);\r\n\t\t\t\tcontentHeight += cellSize.height + borders.vertical;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tborders = this._getBorderSizes();\r\n\t\tcontentWidth += borders.horizontal;\r\n\t\tcontentHeight += borders.vertical;\r\n\r\n\t\tif(this.$root){\r\n\t\t\tcontentWidth += 1;\r\n\t\t\tcontentHeight += 1;\r\n\t\t}\r\n\r\n\t\treturn {\r\n\t\t\twidth: contentWidth,\r\n\t\t\theight: contentHeight\r\n\t\t};\r\n\t};\r\n\r\n\tLayout.prototype._cleanElSize = function(value){\r\n\t\treturn ((value || \"\").toString().replace(\"px\", \"\") * 1 || 0);\r\n\t};\r\n\tLayout.prototype._getBoxStyles = function(div){\r\n\t\tvar computed = null;\r\n\t\tif(window.getComputedStyle){\r\n\t\t\tcomputed = window.getComputedStyle(div, null);\r\n\t\t}else{\r\n\t\t\t//IE with elem.currentStyle does not calculate sizes from %, so will use the default approach\r\n\t\t\tcomputed = {\r\n\t\t\t\t\"width\":div.clientWidth,\r\n\t\t\t\t\"height\":div.clientHeight\r\n\t\t\t};\r\n\t\t}\r\n\t\tvar properties = [\r\n\t\t\t\"width\",\r\n\t\t\t\"height\",\r\n\r\n\t\t\t\"paddingTop\",\r\n\t\t\t\"paddingBottom\",\r\n\t\t\t\"paddingLeft\",\r\n\t\t\t\"paddingRight\",\r\n\r\n\t\t\t\"borderLeftWidth\",\r\n\t\t\t\"borderRightWidth\",\r\n\t\t\t\"borderTopWidth\",\r\n\t\t\t\"borderBottomWidth\"\r\n\t\t];\r\n\t\tvar styles = {\r\n\t\t\tboxSizing:(computed.boxSizing == \"border-box\")\r\n\t\t};\r\n\r\n\t\tif(computed.MozBoxSizing){\r\n\t\t\tstyles.boxSizing = (computed.MozBoxSizing == \"border-box\");\r\n\t\t}\r\n\t\tfor(var i =0; i < properties.length; i++){\r\n\t\t\tstyles[properties[i]] = computed[properties[i]] ? this._cleanElSize(computed[properties[i]]) : 0;\r\n\t\t}\r\n\r\n\r\n\t\tvar box = {\r\n\t\t\thorPaddings : (styles.paddingLeft + styles.paddingRight + styles.borderLeftWidth + styles.borderRightWidth),\r\n\t\t\tvertPaddings : (styles.paddingTop + styles.paddingBottom + styles.borderTopWidth + styles.borderBottomWidth),\r\n\t\t\tborderBox: styles.boxSizing,\r\n\t\t\tinnerWidth : styles.width,\r\n\t\t\tinnerHeight : styles.height,\r\n\t\t\touterWidth : styles.width,\r\n\t\t\touterHeight : styles.height\r\n\t\t};\r\n\r\n\r\n\t\tif(box.borderBox){\r\n\t\t\tbox.innerWidth -= box.horPaddings;\r\n\t\t\tbox.innerHeight -= box.vertPaddings;\r\n\t\t}else{\r\n\t\t\tbox.outerWidth += box.horPaddings;\r\n\t\t\tbox.outerHeight += box.vertPaddings;\r\n\t\t}\r\n\r\n\t\treturn box;\r\n\t};\r\n\r\n\tLayout.prototype.autosize = function(mode) {\r\n\t\tvar res = {x:false, y:false};\r\n\t\tif(mode === \"xy\"){\r\n\t\t\tres.x = res.y = true;\r\n\t\t}else if(mode === \"y\" || mode === true){\r\n\t\t\tres.y = true;\r\n\t\t}else if(mode === \"x\"){\r\n\t\t\tres.x = true;\r\n\t\t}\r\n\t\tvar boxSizes = this._getBoxStyles(this.$container);\r\n\t\tvar contentSizes = this.getContentSize();\r\n\r\n\t\tvar node = this.$container;\r\n\t\tif(res.x){\r\n\t\t\tif(boxSizes.borderBox){\r\n\t\t\t\tcontentSizes.width += boxSizes.horPaddings;\r\n\t\t\t}\r\n\t\t\tnode.style.width = contentSizes.width + \"px\";\r\n\t\t}\r\n\t\tif(res.y){\r\n\t\t\tif(boxSizes.borderBox){\r\n\t\t\t\tcontentSizes.height += boxSizes.vertPaddings;\r\n\t\t\t}\r\n\t\t\tnode.style.height = contentSizes.height + \"px\";\r\n\t\t}\r\n\t};\r\n\r\n\tLayout.prototype.getSize = function () {\r\n\t\tthis._sizes = [];\r\n\t\tvar width = 0;\r\n\t\tvar minWidth = 0;\r\n\t\tvar maxWidth = 100000;\r\n\t\tvar height = 0;\r\n\t\tvar maxHeight = 100000;\r\n\t\tvar minHeight = 0;\r\n\r\n\t\tfor (var i = 0; i < this.$cells.length; i++) {\r\n\r\n\t\t\tvar size = this._sizes[i] = this.$cells[i].getSize();\r\n\t\t\tif (this.$cells[i].$config.hidden) {\r\n\t\t\t\tcontinue;\r\n\t\t\t}\r\n\t\t\tif (this._xLayout) {\r\n\t\t\t\tif (!size.width && size.minWidth) {\r\n\t\t\t\t\twidth += size.minWidth;\r\n\t\t\t\t}\r\n\t\t\t\telse {\r\n\t\t\t\t\twidth += size.width;\r\n\t\t\t\t}\r\n\t\t\t\tmaxWidth += size.maxWidth;\r\n\t\t\t\tminWidth += size.minWidth;\r\n\t\t\t\theight = Math.max(height, size.height);\r\n\t\t\t\tmaxHeight = Math.min(maxHeight, size.maxHeight); // min of maxHeight\r\n\t\t\t\tminHeight = Math.max(minHeight, size.minHeight); // max of minHeight\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tif (!size.height && size.minHeight) {\r\n\t\t\t\t\theight += size.minHeight;\r\n\t\t\t\t}\r\n\t\t\t\telse {\r\n\t\t\t\t\theight += size.height;\r\n\t\t\t\t}\r\n\t\t\t\tmaxHeight += size.maxHeight;\r\n\t\t\t\tminHeight += size.minHeight;\r\n\t\t\t\twidth = Math.max(width, size.width);\r\n\t\t\t\tmaxWidth = Math.min(maxWidth, size.maxWidth); // min of maxWidth\r\n\t\t\t\tminWidth = Math.max(minWidth, size.minWidth); // max of minWidth\r\n\t\t\t}\r\n\t\t}\r\n\t\tvar self = _super.prototype.getSize.call(this);\r\n\t\t// maxWidth\r\n\t\tif (self.maxWidth >= 100000) {\r\n\t\t\tself.maxWidth = maxWidth;\r\n\t\t}\r\n\t\t// maxHeight\r\n\t\tif (self.maxHeight >= 100000) {\r\n\t\t\tself.maxHeight = maxHeight;\r\n\t\t}\r\n\t\t// minWidth\r\n\t\tself.minWidth = self.minWidth !== self.minWidth ? 0 : self.minWidth;// || self.width || Math.max(minWidth, width);\r\n\t\t// minHeight\r\n\t\tself.minHeight = self.minHeight !== self.minHeight ? 0 : self.minHeight;//self.minHeight || self.height || Math.max(minHeight, height);\r\n\t\t// sizes with paddings and margins\r\n\t\tif (this._xLayout) {\r\n\t\t\tself.minWidth += this.$config.margin * (this.$cells.length) || 0;\r\n\t\t\tself.minWidth += this.$config.padding * 2 || 0;\r\n\t\t\tself.minHeight += (this.$config.padding * 2) || 0;\r\n\t\t}\r\n\t\telse {\r\n\t\t\tself.minHeight += this.$config.margin * (this.$cells.length) || 0;\r\n\t\t\tself.minHeight += (this.$config.padding * 2) || 0;\r\n\t\t}\r\n\t\t\r\n\t\treturn self;\r\n\t};\r\n\t// calc total gravity and free space\r\n\tLayout.prototype._calcFreeSpace = function (s, cell, xLayout) {\r\n\t\tvar min = xLayout ? cell.minWidth : cell.minHeight;\r\n\t\tvar max = xLayout ? cell.maxWidth : cell.maxWidth;\r\n\t\tvar side = s;\r\n\t\tif (!side) {\r\n\t\t\tside = Math.floor(this._free / this._gravity * cell.gravity);\r\n\t\t\tif (side > max) {\r\n\t\t\t\tside = max;\r\n\t\t\t\tthis._free -= side;\r\n\t\t\t\tthis._gravity -= cell.gravity;\r\n\t\t\t}\r\n\t\t\tif (side < min) {\r\n\t\t\t\tside = min;\r\n\t\t\t\tthis._free -= side;\r\n\t\t\t\tthis._gravity -= cell.gravity;\r\n\t\t\t}\r\n\t\t}\r\n\t\telse {\r\n\t\t\tif (side > max) {\r\n\t\t\t\tside = max;\r\n\t\t\t}\r\n\t\t\tif (side < min) {\r\n\t\t\t\tside = min;\r\n\t\t\t}\r\n\t\t\tthis._free -= side;\r\n\t\t}\r\n\t\treturn side;\r\n\t};\r\n\tLayout.prototype._calcSize = function (s, size, xLayout) {\r\n\t\tvar side = s;\r\n\t\tvar min = xLayout ? size.minWidth : size.minHeight;\r\n\t\tvar max = xLayout ? size.maxWidth : size.maxHeight;\r\n\t\tif (!side) {\r\n\t\t\tside = Math.floor(this._free / this._gravity * size.gravity);\r\n\t\t}\r\n\t\tif (side > max) {\r\n\t\t\tside = max;\r\n\t\t}\r\n\t\tif (side < min) {\r\n\t\t\tside = min;\r\n\t\t}\r\n\t\treturn side;\r\n\t};\r\n\r\n\tLayout.prototype._configureBorders = function(){\r\n\t\tif(this.$root){\r\n\t\t\tthis._setBorders([\r\n\t\t\t\tthis._borders.left,\r\n\t\t\t\tthis._borders.top,\r\n\t\t\t\tthis._borders.right,\r\n\t\t\t\tthis._borders.bottom\r\n\t\t\t],\r\n\t\t\tthis);\r\n\t\t}\r\n\r\n\t\tvar borderClass = this._xLayout ? this._borders.right : this._borders.bottom;\r\n\r\n\t\tvar cells = this.$cells;\r\n\r\n\t\tvar lastVisibleIndex = cells.length - 1;\r\n\t\tfor(var i = lastVisibleIndex; i >= 0; i--){\r\n\t\t\tif (!cells[i].$config.hidden) {\r\n\t\t\t\tlastVisibleIndex = i;\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tfor (var i = 0; i < cells.length; i++) {\r\n\t\t\tif (cells[i].$config.hidden) {\r\n\t\t\t\tcontinue;\r\n\t\t\t}\r\n\r\n\t\t\tvar lastCell = i >= lastVisibleIndex;\r\n\t\t\tthis._setBorders(lastCell ? [] : [borderClass], cells[i]);\r\n\t\t}\r\n\t};\r\n\r\n\tLayout.prototype._updateCellVisibility = function(){\r\n\t\tvar oldVisibleCells = this._visibleCells || {};\r\n\t\tvar firstCall = !this._visibleCells;\r\n\t\tvar visibleCells = {};\r\n\t\tvar cell;\r\n\t\tfor (var i = 0; i < this._sizes.length; i++) {\r\n\t\t\tcell = this.$cells[i];\r\n\r\n\t\t\tif (!firstCall && cell.$config.hidden && oldVisibleCells[cell.$id]) {\r\n\t\t\t\tcell._hide(true);\r\n\t\t\t}else if(!cell.$config.hidden && !oldVisibleCells[cell.$id]){\r\n\t\t\t\tcell._hide(false);\r\n\t\t\t}\r\n\r\n\t\t\tif(!cell.$config.hidden){\r\n\t\t\t\tvisibleCells[cell.$id] = true;\r\n\t\t\t}\r\n\t\t}\r\n\t\tthis._visibleCells = visibleCells;\r\n\t};\r\n\r\n\tLayout.prototype.setSize = function (x, y) {\r\n\t\tthis._configureBorders();\r\n\t\t_super.prototype.setSize.call(this, x, y);\r\n\t\ty = this.$lastSize.contentY;\r\n\t\tx = this.$lastSize.contentX;\r\n\r\n\t\tif(this.$root){\r\n\t\t\ty -= 1;\r\n\t\t\tx -= 1;\r\n\t\t}\r\n\t\tvar padding = (this.$config.padding || 0);\r\n\t\tthis.$view.style.padding = padding + \"px\";\r\n\t\tthis._gravity = 0;\r\n\t\tthis._free = this._xLayout ? x : y;\r\n\t\tthis._free -= padding * 2;\r\n\t\t// calc all gravity\r\n\r\n\t\tvar cell,\r\n\t\t\tsize;\r\n\r\n\t\tthis._updateCellVisibility();\r\n\r\n\t\tfor (var i = 0; i < this._sizes.length; i++) {\r\n\t\t\tcell = this.$cells[i];\r\n\r\n\t\t\tif (cell.$config.hidden) {\r\n\t\t\t\tcontinue;\r\n\t\t\t}\r\n\t\t\tvar margin = (this.$config.margin || 0);\r\n\t\t\tif(cell.$name == \"resizer\" && !margin){\r\n\t\t\t\tmargin = -1;\r\n\t\t\t}\r\n\r\n\t\t\t// set margins to child cell\r\n\t\t\tvar cellView = cell.$view;\r\n\r\n\t\t\tvar marginSide = this._xLayout ? \"marginRight\" : \"marginBottom\";\r\n\t\t\tif (i !== this.$cells.length - 1) {\r\n\t\t\t\tcellView.style[marginSide] = margin + \"px\";\r\n\t\t\t\tthis._free -= margin; // calc free space without margin\r\n\t\t\t}\r\n\t\t\tsize = this._sizes[i];\r\n\t\t\tif (this._xLayout) {\r\n\t\t\t\tif (!size.width) {\r\n\t\t\t\t\tthis._gravity += size.gravity;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tif (!size.height) {\r\n\t\t\t\t\tthis._gravity += size.gravity;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\tfor (var i = 0; i < this._sizes.length; i++) {\r\n\t\t\tcell = this.$cells[i];\r\n\r\n\t\t\tif (cell.$config.hidden) {\r\n\t\t\t\tcontinue;\r\n\t\t\t}\r\n\t\t\tsize = this._sizes[i];\r\n\t\t\tvar width = size.width;\r\n\t\t\tvar height = size.height;\r\n\t\t\tif (this._xLayout) {\r\n\t\t\t\tthis._calcFreeSpace(width, size, true);\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tthis._calcFreeSpace(height, size, false);\r\n\t\t\t}\r\n\t\t}\r\n\t\tfor (var i = 0; i < this.$cells.length; i++) {\r\n\t\t\tcell = this.$cells[i];\r\n\r\n\t\t\tif (cell.$config.hidden) {\r\n\t\t\t\tcontinue;\r\n\t\t\t}\r\n\t\t\tsize = this._sizes[i];\r\n\t\t\tvar dx = void 0;\r\n\t\t\tvar dy = void 0;\r\n\t\t\tif (this._xLayout) {\r\n\t\t\t\tdx = this._calcSize(size.width, size, true);\r\n\t\t\t\tdy = y - padding * 2; // layout height without paddings\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tdx = x - padding * 2; // layout width without paddings\r\n\t\t\t\tdy = this._calcSize(size.height, size, false);\r\n\t\t\t}\r\n\r\n\t\t\tcell.setSize(dx, dy);\r\n\t\t}\r\n\r\n\t\tif(this.$root && !this._updatingScrollbars){\r\n\t\t\tthis._updatingScrollbars = true;\r\n\t\t\teachCell(function(cell){\r\n\t\t\t\tif(cell.$content && cell.$content.$name == \"scroller\"){\r\n\t\t\t\t\tcell.$content.toggleVisibility();\r\n\t\t\t\t}\r\n\t\t\t}, this);\r\n\t\t\tthis._updatingScrollbars = false;\r\n\t\t}\r\n\r\n\t};\r\n\r\n\tfunction eachCell(code, root){\r\n\t\tif(root.$cells){\r\n\t\t\tfor(var i = 0; i < root.$cells.length; i++){\r\n\t\t\t\tcode(root.$cells[i]);\r\n\t\t\t\teachCell(code, root.$cells[i]);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\r\n\treturn Layout;\r\n}(Cell));\r\n\r\nmodule.exports = Layout;\n\n\n//////////////////\n// WEBPACK FOOTER\n// c:/www-recent/gantt/sources/core/ui/layout/layout.js\n// module id = 6\n// module chunks = 0","function checkTimeout(host, updPerSecond){\r\n\tif(!updPerSecond)\r\n\t\treturn true;\r\n\tvar timeout = 1000/updPerSecond;\r\n\tif(timeout < 1) return true;\r\n\r\n\tif(host._on_timeout)\r\n\t\treturn false;\r\n\r\n\tsetTimeout(function(){\r\n\t\tdelete host._on_timeout;\r\n\t}, timeout);\r\n\r\n\thost._on_timeout = true;\r\n\treturn true;\r\n}\r\n\r\nmodule.exports = checkTimeout;\n\n\n//////////////////\n// WEBPACK FOOTER\n// c:/www-recent/gantt/sources/utils/timeout.js\n// module id = 7\n// module chunks = 0","var utils = require(\"../../utils/utils\");\r\n\r\nvar uiFactory = function createFactory(gantt){\r\n\tvar views = {\r\n\t\t\"layout\": require(\"./layout/layout\"),\r\n\t\t\"multiview\": require(\"./layout/view_layout\"),\r\n\t\t\"viewcell\": require(\"./layout/view_cell\"),\r\n\t\t\"resizer\": require(\"./layout/resizer_cell\"),\r\n\t\t\"cell\": require(\"./layout/cell\")\r\n\t};\r\n\r\n\tfunction ui(cell) {\r\n\t\tvar content;\r\n\r\n\t\tif (cell.view){\r\n\t\t\tcontent = createView.call(this, \"viewcell\", null, cell);\r\n\t\t}else if (cell.resizer) {\r\n\t\t\tcontent = createView.call(this, \"resizer\", null, cell);\r\n\t\t}\r\n\t\telse if (cell.rows || cell.cols) {\r\n\t\t\tcontent = createView.call(this, \"layout\", null, cell);\r\n\t\t}\r\n\t\telse if (cell.views) {\r\n\t\t\tcontent = createView.call(this, \"multiview\", null, cell);\r\n\t\t}\r\n\t\telse {\r\n\t\t\tcontent = createView.call(this, \"cell\", null, cell);\r\n\t\t}\r\n\t\treturn content;\r\n\t}\r\n\t\r\n\tvar createdViews = {};\r\n\r\n\tfunction createView(name, parent, config) {\r\n\t\tvar creator = views[name];\r\n\r\n\t\tif(!creator || !creator.create)\r\n\t\t\treturn false;\r\n\r\n\t\tvar config = utils.copy(config);\r\n\t\tif(config.id && !config.css){\r\n\t\t\tconfig.css = config.id+\"_cell\";\r\n\t\t}\r\n\r\n\t\tvar view = new creator.create(parent, config, this, gantt);\r\n\r\n\t\tif(creator.configure){\r\n\t\t\tcreator.configure(view);\r\n\t\t}\r\n\r\n\t\tif(!view.$id){\r\n\t\t\tview.$id = config.id || gantt.uid();\r\n\t\t}\r\n\r\n\t\tif(!view.$parent && typeof parent == \"object\"){\r\n\t\t\tview.$parent = parent;\r\n\t\t}\r\n\t\tif(!view.$config){\r\n\t\t\tview.$config = config;\r\n\t\t}\r\n\r\n\t\tif(createdViews[view.$id]){\r\n\t\t\tview.$id = gantt.uid();\r\n\t\t}\r\n\r\n\t\tcreatedViews[view.$id] = view;\r\n\r\n\t\treturn view;\r\n\t}\r\n\r\n\tfunction reset(){\r\n\t\tcreatedViews = {};\r\n\t}\r\n\r\n\tfunction register(name, viewConstructor, configure){\r\n\t\tviews[name] = {create: viewConstructor, configure: configure};\r\n\t}\r\n\r\n\tfunction getView(id){\r\n\t\treturn createdViews[id];\r\n\t}\r\n\r\n\tvar factory = {\r\n\t\tinitUI:ui,\r\n\t\treset: reset,\r\n\t\tregisterView: register,\r\n\t\tcreateView: createView,\r\n\t\tgetView: getView\r\n\t};\r\n\r\n\treturn factory;\r\n};\r\n\r\nmodule.exports = {\r\n\tcreateFactory: uiFactory\r\n};\r\n\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// c:/www-recent/gantt/sources/core/ui/ui_factory.js\n// module id = 8\n// module chunks = 0","var __extends = require(\"../../../utils/extends\"),\r\n\tLayout = require(\"./layout\"),\r\n\tCell = require(\"./cell\");\r\n\r\nvar ViewLayout = (function (_super) {\r\n\t\"use strict\";\r\n\r\n\t__extends(ViewLayout, _super);\r\n\tfunction ViewLayout(parent, config, factory) {\r\n\t\tvar _this = _super.apply(this, arguments) || this;\r\n\t\tfor (var i = 0; i < _this.$cells.length; i++) {\r\n\t\t\t_this.$cells[i].$config.hidden = (i !== 0);\r\n\t\t}\r\n\t\t_this.$cell = _this.$cells[0];\r\n\t\treturn _this;\r\n\t}\r\n\tViewLayout.prototype.cell = function (id) {\r\n\t\tvar cell = _super.prototype.cell.call(this, id);\r\n\t\tif (!cell.$view) {\r\n\t\t\tthis.$fill(null, this);\r\n\t\t}\r\n\t\treturn cell;\r\n\t};\r\n\tViewLayout.prototype.moveView = function (view) {\r\n\t\tvar body = this.$view;\r\n\t\tif (this.$cell) {\r\n\t\t\tthis.$cell.$config.hidden = true;\r\n\t\t\tbody.removeChild(this.$cell.$view);\r\n\t\t}\r\n\t\tthis.$cell = view;\r\n\t\tbody.appendChild(view.$view);\r\n\t};\r\n\tViewLayout.prototype.setSize = function (x, y) {\r\n\t\tCell.prototype.setSize.call(this, x, y);\r\n\t\tvar size = this.$lastSize;\r\n\t\tthis.$cell.setSize(size.contentX, size.contentY);\r\n\t};\r\n\tViewLayout.prototype.getSize = function () {\r\n\t\tvar sizes = _super.prototype.getSize.call(this);\r\n\t\tif (this.$cell) {\r\n\t\t\tvar cellSize = this.$cell.getSize();\r\n\t\t\tif (this.$config.byMaxSize) {\r\n\t\t\t\tfor (var i = 0; i < this.$cells.length; i++) {\r\n\t\t\t\t\tvar otherCell = this.$cells[i].getSize();\r\n\t\t\t\t\tfor (var cell in cellSize) {\r\n\t\t\t\t\t\tcellSize[cell] = Math.max(cellSize[cell], otherCell[cell]);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tfor (var size in sizes) {\r\n\t\t\t\tsizes[size] = sizes[size] || cellSize[size];\r\n\t\t\t}\r\n\t\t\tsizes.gravity = Math.max(sizes.gravity, cellSize.gravity);\r\n\t\t}\r\n\t\treturn sizes;\r\n\t};\r\n\treturn ViewLayout;\r\n}(Layout));\r\n\r\nmodule.exports = ViewLayout;\n\n\n//////////////////\n// WEBPACK FOOTER\n// c:/www-recent/gantt/sources/core/ui/layout/view_layout.js\n// module id = 9\n// module chunks = 0","var __extends = require(\"../../../utils/extends\"),\r\n\tutils = require(\"../../../utils/utils\"),\r\n\tfactory = require(\"../ui_factory\"),\r\n\tCell = require(\"./cell\");\r\n\r\nvar ViewCell = (function (_super) {\r\n\t\"use strict\";\r\n\r\n\t__extends(ViewCell, _super);\r\n\tfunction ViewCell(parent, config, factory) {\r\n\r\n\t\tvar _this = _super.apply(this, arguments) || this;\r\n\r\n\t\tif(config.view){\r\n\t\t\tif(config.id){\r\n\t\t\t\t// pass id to the nested view\r\n\t\t\t\tthis.$id = utils.uid();\r\n\t\t\t}\r\n\t\t\tthis.$content = this.$factory.createView(config.view, this, config);\r\n\t\t\tif(!this.$content)\r\n\t\t\t\treturn false;\r\n\t\t}\r\n\r\n\t\treturn _this;\r\n\t}\r\n\r\n\tViewCell.prototype.destructor = function(){\r\n\t\tthis.clear();\r\n\t\t_super.prototype.destructor.call(this);\r\n\t};\r\n\r\n\tViewCell.prototype.clear = function(){\r\n\r\n\t\tthis.$initialized = false;\r\n\r\n\t\t// call destructor\r\n\t\tif (this.$content){\r\n\t\t\tvar method = this.$content.unload || this.$content.destructor;\r\n\t\t\tif (method){\r\n\t\t\t\tmethod.call(this.$content);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t_super.prototype.clear.call(this);\r\n\r\n\t};\r\n\r\n\tViewCell.prototype.scrollTo = function(left, top){\r\n\r\n\t\tif(this.$content && this.$content.scrollTo){\r\n\t\t\tthis.$content.scrollTo(left, top);\r\n\t\t}else{\r\n\t\t\t_super.prototype.scrollTo.call(this, left, top);\r\n\t\t}\r\n\t};\r\n\r\n\tViewCell.prototype._setContentSize = function(x, y){\r\n\t\tvar borders = this._getBorderSizes();\r\n\t\tvar outerX = x + borders.horizontal;\r\n\t\tvar outerY = y + borders.vertical;\r\n\t\tthis.$config.width = outerX;\r\n\t\tthis.$config.height = outerY;\r\n\t};\r\n\r\n\tViewCell.prototype.setSize = function(x, y){\r\n\t\t_super.prototype.setSize.call(this, x, y);\r\n\r\n\t\tif(!this.$preResize && this.$content) {\r\n\t\t\tif (!this.$initialized) {\r\n\t\t\t\tthis.$initialized = true;\r\n\t\t\t\tvar header = this.$view.childNodes[0];\r\n\t\t\t\tvar content = this.$view.childNodes[1];\r\n\t\t\t\tif(!content) content = header;\r\n\r\n\t\t\t\t/*if(this.$content.$config){\r\n\t\t\t\t\tthis.$content.$config.width = this.$lastSize.contentX;\r\n\t\t\t\t\tthis.$content.$config.height = this.$lastSize.contentY;\r\n\t\t\t\t}*/\r\n\t\t\t\tthis.$content.init(content);\r\n\t\t\t} else {\r\n\t\t\t\tthis.$content.setSize(this.$lastSize.contentX, this.$lastSize.contentY);\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\r\n\tViewCell.prototype.getContentSize = function(){\r\n\t\tvar size = _super.prototype.getContentSize.call(this);\r\n\r\n\t\tif(this.$content && this.$initialized){\r\n\t\t\tvar childSize = this.$content.getSize();\r\n\t\t\tsize.width = childSize.contentX === undefined ? childSize.width : childSize.contentX;\r\n\t\t\tsize.height = childSize.contentY === undefined ? childSize.height : childSize.contentY;\r\n\t\t}\r\n\r\n\t\tvar borders = this._getBorderSizes();\r\n\t\tsize.width += borders.horizontal;\r\n\t\tsize.height += borders.vertical;\r\n\r\n\t\treturn size;\r\n\t};\r\n\r\n\treturn ViewCell;\r\n}(Cell));\r\n\r\nmodule.exports = ViewCell;\n\n\n//////////////////\n// WEBPACK FOOTER\n// c:/www-recent/gantt/sources/core/ui/layout/view_cell.js\n// module id = 10\n// module chunks = 0","module.exports = null;\n\n\n//////////////////\n// WEBPACK FOOTER\n// c:/www-recent/gantt/sources/core/ui/layout/resizer_cell.gpl.js\n// module id = 11\n// module chunks = 0","var utils = require(\"../../../utils/utils\");\r\n\r\nfunction ScaleHelper(gantt){\r\n\tvar dateHelper = gantt.date;\r\n\tvar services = gantt.$services;\r\n\r\n\treturn {\r\n\t\tgetSum: function (sizes, from, to) {\r\n\t\t\tif (to === undefined)\r\n\t\t\t\tto = sizes.length - 1;\r\n\t\t\tif (from === undefined)\r\n\t\t\t\tfrom = 0;\r\n\r\n\t\t\tvar summ = 0;\r\n\t\t\tfor (var i = from; i <= to; i++)\r\n\t\t\t\tsumm += sizes[i];\r\n\r\n\t\t\treturn summ;\r\n\t\t},\r\n\t\tsetSumWidth: function (sum_width, scale, from, to) {\r\n\t\t\tvar parts = scale.width;\r\n\r\n\t\t\tif (to === undefined)\r\n\t\t\t\tto = parts.length - 1;\r\n\t\t\tif (from === undefined)\r\n\t\t\t\tfrom = 0;\r\n\t\t\tvar length = to - from + 1;\r\n\r\n\t\t\tif (from > parts.length - 1 || length <= 0 || to > parts.length - 1)\r\n\t\t\t\treturn;\r\n\r\n\t\t\tvar oldWidth = this.getSum(parts, from, to);\r\n\r\n\t\t\tvar diff = sum_width - oldWidth;\r\n\r\n\t\t\tthis.adjustSize(diff, parts, from, to);\r\n\t\t\tthis.adjustSize(-diff, parts, to + 1);\r\n\r\n\t\t\tscale.full_width = this.getSum(parts);\r\n\t\t},\r\n\t\tsplitSize: function (width, count) {\r\n\t\t\tvar arr = [];\r\n\t\t\tfor (var i = 0; i < count; i++) arr[i] = 0;\r\n\r\n\t\t\tthis.adjustSize(width, arr);\r\n\t\t\treturn arr;\r\n\r\n\t\t},\r\n\t\tadjustSize: function (width, parts, from, to) {\r\n\t\t\tif (!from)\r\n\t\t\t\tfrom = 0;\r\n\t\t\tif (to === undefined)\r\n\t\t\t\tto = parts.length - 1;\r\n\r\n\t\t\tvar length = to - from + 1;\r\n\r\n\t\t\tvar full = this.getSum(parts, from, to);\r\n\r\n\t\t\tvar shared = 0;\r\n\r\n\t\t\tfor (var i = from; i <= to; i++) {\r\n\t\t\t\tvar share = Math.floor(width * (full ? (parts[i] / full) : (1 / length)));\r\n\r\n\t\t\t\tfull -= parts[i];\r\n\t\t\t\twidth -= share;\r\n\t\t\t\tlength--;\r\n\r\n\t\t\t\tparts[i] += share;\r\n\t\t\t\tshared += share;\r\n\t\t\t}\r\n\t\t\tparts[parts.length - 1] += width;\r\n\t\t\t//parts[parts.length - 1] += width - shared;\r\n\t\t},\r\n\t\tsortScales: function (scales) {\r\n\t\t\tfunction cellSize(unit, step) {\r\n\t\t\t\tvar d = new Date(1970, 0, 1);\r\n\t\t\t\treturn dateHelper.add(d, step, unit) - d;\r\n\t\t\t}\r\n\r\n\t\t\tscales.sort(function (a, b) {\r\n\t\t\t\tif (cellSize(a.unit, a.step) < cellSize(b.unit, b.step)) {\r\n\t\t\t\t\treturn 1;\r\n\t\t\t\t} else if (cellSize(a.unit, a.step) > cellSize(b.unit, b.step)) {\r\n\t\t\t\t\treturn -1;\r\n\t\t\t\t} else {\r\n\t\t\t\t\treturn 0;\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\tfor (var i = 0; i < scales.length; i++) {\r\n\t\t\t\tscales[i].index = i;\r\n\t\t\t}\r\n\t\t},\r\n\t\tprimaryScale: function () {\r\n\r\n\t\t\tvar config = services.getService(\"templateLoader\");\r\n\t\t\tconfig.initTemplate(\"date_scale\", undefined, undefined, services.config(), services.templates());\r\n\r\n\t\t\treturn {\r\n\t\t\t\tunit: services.config().scale_unit,\r\n\t\t\t\tstep: services.config().step,\r\n\t\t\t\ttemplate: services.templates().date_scale,\r\n\t\t\t\tdate: services.config().date_scale,\r\n\t\t\t\tcss: services.templates().scale_cell_class\r\n\t\t\t};\r\n\t\t},\r\n\r\n\t\tprepareConfigs: function (scales, min_coll_width, container_width, scale_height, minDate, maxDate) {\r\n\t\t\tvar heights = this.splitSize(scale_height, scales.length);\r\n\t\t\tvar full_width = container_width;\r\n\r\n\t\t\tvar configs = [];\r\n\t\t\tfor (var i = scales.length - 1; i >= 0; i--) {\r\n\t\t\t\tvar main_scale = (i == scales.length - 1);\r\n\t\t\t\tvar cfg = this.initScaleConfig(scales[i], minDate, maxDate);\r\n\t\t\t\tif (main_scale) {\r\n\t\t\t\t\tthis.processIgnores(cfg);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tthis.initColSizes(cfg, min_coll_width, full_width, heights[i]);\r\n\t\t\t\tthis.limitVisibleRange(cfg);\r\n\r\n\t\t\t\tif (main_scale) {\r\n\t\t\t\t\tfull_width = cfg.full_width;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tconfigs.unshift(cfg);\r\n\t\t\t}\r\n\r\n\r\n\t\t\tfor (var i = 0; i < configs.length - 1; i++) {\r\n\t\t\t\tthis.alineScaleColumns(configs[configs.length - 1], configs[i]);\r\n\t\t\t}\r\n\t\t\tfor (var i = 0; i < configs.length; i++) {\r\n\t\t\t\tthis.setPosSettings(configs[i]);\r\n\t\t\t}\r\n\t\t\treturn configs;\r\n\r\n\t\t},\r\n\t\tsetPosSettings: function (config) {\r\n\t\t\tfor (var i = 0, len = config.trace_x.length; i < len; i++) {\r\n\t\t\t\tconfig.left.push((config.width[i - 1] || 0) + (config.left[i - 1] || 0));\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\t_ignore_time_config: function (date, scale) {\r\n\r\n\t\t\tif (services.config().skip_off_time) {\r\n\t\t\t\tvar skip = true;\r\n\t\t\t\tvar probe = date;\r\n\r\n\t\t\t\t// check dates in case custom scale unit, e.g. {unit: \"month\", step: 3}\r\n\t\t\t\tfor (var i = 0; i < scale.step; i++) {\r\n\t\t\t\t\tif (i) {\r\n\t\t\t\t\t\tprobe = dateHelper.add(date, i, scale.unit);\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tskip = skip && !this.isWorkTime(probe, scale.unit);\r\n\t\t\t\t}\r\n\r\n\t\t\t\treturn skip;\r\n\t\t\t}\r\n\t\t\treturn false;\r\n\t\t},\r\n\t\t//defined in an extension\r\n\t\tprocessIgnores: function (config) {\r\n\t\t\tconfig.ignore_x = {};\r\n\t\t\tconfig.display_count = config.count;\r\n\t\t},\r\n\t\tinitColSizes: function (config, min_col_width, full_width, line_height) {\r\n\t\t\tvar cont_width = full_width;\r\n\r\n\t\t\tconfig.height = line_height;\r\n\r\n\t\t\tvar column_count = config.display_count === undefined ? config.count : config.display_count;\r\n\r\n\t\t\tif (!column_count)\r\n\t\t\t\tcolumn_count = 1;\r\n\r\n\t\t\tconfig.col_width = Math.floor(cont_width / column_count);\r\n\r\n\t\t\tif (min_col_width) {\r\n\t\t\t\tif (config.col_width < min_col_width) {\r\n\t\t\t\t\tconfig.col_width = min_col_width;\r\n\t\t\t\t\tcont_width = config.col_width * column_count;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tconfig.width = [];\r\n\t\t\tvar ignores = config.ignore_x || {};\r\n\t\t\tfor (var i = 0; i < config.trace_x.length; i++) {\r\n\t\t\t\tif (ignores[config.trace_x[i].valueOf()] || (config.display_count == config.count)) {\r\n\t\t\t\t\tconfig.width[i] = 0;\r\n\t\t\t\t} else {\r\n\t\t\t\t\t// width of month columns should be proportional month duration\r\n\t\t\t\t\tvar width = 1;\r\n\t\t\t\t\tif (config.unit == \"month\") {\r\n\t\t\t\t\t\tvar days = Math.round((dateHelper.add(config.trace_x[i], config.step, config.unit) - config.trace_x[i]) / (1000 * 60 * 60 * 24));\r\n\t\t\t\t\t\twidth = days;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tconfig.width[i] = width;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tthis.adjustSize(cont_width - this.getSum(config.width)/* 1 width per column from the code above */, config.width);\r\n\t\t\tconfig.full_width = this.getSum(config.width);\r\n\t\t},\r\n\t\tinitScaleConfig: function (config, min_date, max_date) {\r\n\t\t\tvar cfg = utils.mixin({\r\n\t\t\t\tcount: 0,\r\n\t\t\t\tcol_width: 0,\r\n\t\t\t\tfull_width: 0,\r\n\t\t\t\theight: 0,\r\n\t\t\t\twidth: [],\r\n\t\t\t\tleft: [],\r\n\t\t\t\ttrace_x: [],\r\n\t\t\t\ttrace_indexes: {},\r\n\t\t\t\tmin_date: new Date(min_date),\r\n\t\t\t\tmax_date: new Date(max_date)\r\n\t\t\t}, config);\r\n\r\n\t\t\tthis.eachColumn(config.unit, config.step, min_date, max_date, function (date) {\r\n\t\t\t\tcfg.count++;\r\n\t\t\t\tcfg.trace_x.push(new Date(date));\r\n\t\t\t\tcfg.trace_indexes[date.valueOf()] = cfg.trace_x.length - 1;\r\n\t\t\t});\r\n\r\n\t\t\treturn cfg;\r\n\t\t},\r\n\t\titerateScales: function (lower_scale, upper_scale, from, to, callback) {\r\n\t\t\tvar upper_dates = upper_scale.trace_x;\r\n\t\t\tvar lower_dates = lower_scale.trace_x;\r\n\r\n\t\t\tvar prev = from || 0;\r\n\t\t\tvar end = to || (lower_dates.length - 1);\r\n\t\t\tvar prevUpper = 0;\r\n\r\n\r\n\t\t\tfor (var up = 1; up < upper_dates.length; up++) {\r\n\t\t\t\tvar target_index = (lower_scale.trace_indexes[+upper_dates[up]]);\r\n\t\t\t\tif (target_index !== undefined && target_index <= end) {\r\n\t\t\t\t\tif (callback) {\r\n\t\t\t\t\t\tcallback.apply(this, [prevUpper, up, prev, target_index]);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tprev = target_index;\r\n\t\t\t\t\tprevUpper = up;\r\n\t\t\t\t\tcontinue;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\talineScaleColumns: function (lower_scale, upper_scale, from, to) {\r\n\t\t\tthis.iterateScales(lower_scale, upper_scale, from, to, function (upper_start, upper_end, lower_start, lower_end) {\r\n\t\t\t\tvar targetWidth = this.getSum(lower_scale.width, lower_start, lower_end - 1);\r\n\t\t\t\tvar actualWidth = this.getSum(upper_scale.width, upper_start, upper_end - 1);\r\n\t\t\t\tif (actualWidth != targetWidth) {\r\n\t\t\t\t\tthis.setSumWidth(targetWidth, upper_scale, upper_start, upper_end - 1);\r\n\t\t\t\t}\r\n\r\n\t\t\t});\r\n\t\t},\r\n\r\n\t\teachColumn: function (unit, step, min_date, max_date, callback) {\r\n\t\t\tvar start = new Date(min_date),\r\n\t\t\t\tend = new Date(max_date);\r\n\t\t\tif (dateHelper[unit + \"_start\"]) {\r\n\t\t\t\tstart = dateHelper[unit + \"_start\"](start);\r\n\t\t\t}\r\n\r\n\t\t\tvar curr = new Date(start);\r\n\t\t\tif (+curr >= +end) {\r\n\t\t\t\tend = dateHelper.add(curr, step, unit);\r\n\t\t\t}\r\n\t\t\twhile (+curr < +end) {\r\n\t\t\t\tcallback.call(this, new Date(curr));\r\n\t\t\t\tvar tzOffset = curr.getTimezoneOffset();\r\n\t\t\t\tcurr = dateHelper.add(curr, step, unit);\r\n\t\t\t\tcurr = gantt._correct_dst_change(curr, tzOffset, step, unit);\r\n\t\t\t\tif (dateHelper[unit + '_start'])\r\n\t\t\t\t\tcurr = dateHelper[unit + \"_start\"](curr);\r\n\t\t\t}\r\n\t\t},\r\n\t\tlimitVisibleRange: function (cfg) {\r\n\t\t\tvar dates = cfg.trace_x;\r\n\r\n\t\t\tvar left = 0, right = cfg.width.length - 1;\r\n\t\t\tvar diff = 0;\r\n\t\t\tif (+dates[0] < +cfg.min_date && left != right) {\r\n\t\t\t\tvar width = Math.floor(cfg.width[0] * ((dates[1] - cfg.min_date) / (dates[1] - dates[0])));\r\n\t\t\t\tdiff += cfg.width[0] - width;\r\n\t\t\t\tcfg.width[0] = width;\r\n\r\n\t\t\t\tdates[0] = new Date(cfg.min_date);\r\n\t\t\t}\r\n\r\n\t\t\tvar last = dates.length - 1;\r\n\t\t\tvar lastDate = dates[last];\r\n\t\t\tvar outDate = dateHelper.add(lastDate, cfg.step, cfg.unit);\r\n\t\t\tif (+outDate > +cfg.max_date && last > 0) {\r\n\t\t\t\tvar width = cfg.width[last] - Math.floor(cfg.width[last] * ((outDate - cfg.max_date) / (outDate - lastDate)));\r\n\t\t\t\tdiff += cfg.width[last] - width;\r\n\t\t\t\tcfg.width[last] = width;\r\n\t\t\t}\r\n\r\n\t\t\tif (diff) {\r\n\t\t\t\tvar full = this.getSum(cfg.width);\r\n\t\t\t\tvar shared = 0;\r\n\t\t\t\tfor (var i = 0; i < cfg.width.length; i++) {\r\n\t\t\t\t\tvar share = Math.floor(diff * (cfg.width[i] / full));\r\n\t\t\t\t\tcfg.width[i] += share;\r\n\t\t\t\t\tshared += share;\r\n\t\t\t\t}\r\n\t\t\t\tthis.adjustSize(diff - shared, cfg.width);\r\n\t\t\t}\r\n\r\n\t\t}\r\n\t};\r\n}\r\n\r\nmodule.exports = ScaleHelper;\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// c:/www-recent/gantt/sources/core/ui/timeline/scales.js\n// module id = 12\n// module chunks = 0","var utils = require(\"../../utils/utils\");\r\n\r\nvar configurable = function(){\r\n\treturn {\r\n\t\t$getConfig: function(){\r\n\t\t\tvar own = this.$config.config;\r\n\t\t\tvar global = this.$gantt.config;\r\n\t\t\tif(own){\r\n\t\t\t\treturn utils.mixin(own, global);\r\n\t\t\t}else{\r\n\t\t\t\treturn global;\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n};\r\n\r\nmodule.exports = function(obj){\r\n\tutils.mixin(obj, configurable());\r\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// c:/www-recent/gantt/sources/core/ui/configurable.js\n// module id = 13\n// module chunks = 0","var powerArray = require(\"./power_array\");\r\nvar utils = require(\"../../utils/utils\");\r\nvar eventable = require(\"../../utils/eventable\");\r\n\r\nvar DataStore = function(config){\r\n\tthis.pull = {};\r\n\tthis.$initItem = config.initItem;\r\n\tthis.visibleOrder = powerArray.$create();\r\n\tthis.fullOrder = powerArray.$create();\r\n\tthis._skip_refresh = false;\r\n\tthis._filterRule = null;\r\n\tthis._searchVisibleOrder = {};\r\n\teventable(this);\r\n\treturn this;\r\n};\r\nDataStore.prototype = {\r\n\r\n\t_parseInner: function(data){\r\n\t\tvar item = null,\r\n\t\t\tloaded = [];\r\n\t\tfor(var i = 0, len = data.length; i< len; i++){\r\n\t\t\titem = data[i];\r\n\t\t\tif(this.$initItem){\r\n\t\t\t\titem = this.$initItem(item);\r\n\t\t\t}\r\n\t\t\tif(this.callEvent(\"onItemLoading\", [item])){\r\n\t\t\t\tthis.pull[item.id] = item;\r\n\t\t\t\tthis.fullOrder.push(item.id);\r\n\t\t\t\tloaded.push(item);\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn loaded;\r\n\t},\r\n\tparse: function(data){\r\n\t\tthis.callEvent(\"onBeforeParse\", [data]);\r\n\t\tvar loaded = this._parseInner(data);\r\n\t\tthis.refresh();\r\n\t\tthis.callEvent(\"onParse\", [loaded]);\r\n\t},\r\n\tgetItem: function(id){\r\n\t\treturn this.pull[id];\r\n\t},\r\n\r\n\t_updateOrder: function(code){\r\n\t\tcode.call(this.visibleOrder);\r\n\t\tcode.call(this.fullOrder);\r\n\t},\r\n\tupdateItem: function(id, item){\r\n\t\tif (!utils.defined(item)) item = this.getItem(id);\r\n\r\n\t\tif (!this._skip_refresh) {\r\n\t\t\tif (this.callEvent(\"onBeforeUpdate\", [id, item]) === false) return false;\r\n\t\t}\r\n\t\tthis.pull[id]=item;\r\n\t\tif (!this._skip_refresh) {\r\n\t\t\tthis.callEvent(\"onAfterUpdate\", [id, item]);\r\n\t\t\tthis.callEvent(\"onStoreUpdated\", [id, item, \"update\"]);\r\n\t\t}\r\n\t},\r\n\r\n\t_removeItemInner: function(id){\r\n\t\t//clear from collections\r\n\t\t//this.visibleOrder.$remove(id);\r\n\t\tthis._updateOrder(function(){ this.$remove(id);});\r\n\t\tdelete this.pull[id];\r\n\t},\r\n\r\n\tremoveItem: function(id){\r\n\t\t//utils.assert(this.exists(id), \"Not existing ID in remove command\"+id);\r\n\r\n\t\tvar obj = this.getItem(id);\t//save for later event\r\n\t\tif (!this._skip_refresh) {\r\n\t\t\tif (this.callEvent(\"onBeforeDelete\", [id, obj]) === false) return false;\r\n\t\t}\r\n\r\n\t\tthis._removeItemInner(id);\r\n\r\n\t\tif (!this._skip_refresh) {\r\n\t\t\tthis.filter();\r\n\t\t\tthis.callEvent(\"onAfterDelete\", [id, obj]);\r\n\t\t\t//repaint signal\r\n\t\t\tthis.callEvent(\"onStoreUpdated\", [id, obj, \"delete\"]);\r\n\t\t}\r\n\t},\r\n\r\n\t_addItemInner: function(item, index){\r\n\t\t//in case of treetable order is sent as 3rd parameter\r\n\t\t//var order = index;\r\n\r\n\t\tif(this.exists(item.id)){\r\n\t\t\tthis.silent(function(){this.updateItem(item.id, item);});\r\n\t\t}else{\r\n\t\t\tvar order = this.visibleOrder;\r\n\r\n\t\t\t//by default item is added to the end of the list\r\n\t\t\tvar data_size = order.length;\r\n\r\n\t\t\tif (!utils.defined(index) || index < 0)\r\n\t\t\t\tindex = data_size;\r\n\t\t\t//check to prevent too big indexes\r\n\t\t\tif (index > data_size){\r\n\t\t\t\t//dhx.log(\"Warning\",\"DataStore:add\",\"Index of out of bounds\");\r\n\t\t\t\tindex = Math.min(order.length,index);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\r\n\t\t//gantt.assert(!this.exists(id), \"Not unique ID\");\r\n\r\n\t\tthis.pull[item.id]=item;\r\n\t\tif (!this._skip_refresh){\r\n\t\t\tthis._updateOrder(function(){ this.$insertAt(item.id,index);});\r\n\t\t}\r\n\r\n\t\t//order.$insertAt(item.id,index);\r\n\t},\r\n\r\n\r\n\tisVisible: function(id){\r\n\t\treturn this.visibleOrder.$find(id) > -1;\r\n\t},\r\n\tgetVisibleItems: function(){\r\n\t\treturn this.getIndexRange();\r\n\t},\r\n\r\n\taddItem: function(item, index){\r\n\t\tif (!utils.defined(item.id))\r\n\t\t\titem.id = utils.uid();\r\n\r\n\r\n\t\tvar id = item.id;\r\n\r\n\t\tif(this.$initItem){\r\n\t\t\titem = this.$initItem(item);\r\n\t\t}\r\n\r\n\t\tif (!this._skip_refresh){\r\n\t\t\tif (this.callEvent(\"onBeforeAdd\", [id, item]) === false) return false;\r\n\t\t}\r\n\r\n\r\n\t\tthis._addItemInner(item, index);\r\n\r\n\t\tif (!this._skip_refresh){\r\n\t\t\tthis.callEvent(\"onAfterAdd\",[id, item]);\r\n\t\t\t//repaint signal\r\n\t\t\tthis.callEvent(\"onStoreUpdated\",[id,item,\"add\"]);\r\n\t\t}\r\n\t\treturn id;\r\n\t},\r\n\r\n\t_changeIdInner: function(oldId, newId){\r\n\t\tif(this.pull[oldId])\r\n\t\t\tthis.pull[newId] = this.pull[oldId];\r\n\r\n\t\tthis.pull[newId].id = newId;\r\n\t\tthis._updateOrder(function(){\r\n\t\t\tthis[this.$find(oldId)] = newId;\r\n\t\t});\r\n\t\tthis._searchVisibleOrder[newId] = this._searchVisibleOrder[oldId];\r\n\t\tdelete this._searchVisibleOrder[oldId];\r\n\r\n\t\t//this.visibleOrder[this.visibleOrder.$find(oldId)]=newId;\r\n\t\tdelete this.pull[oldId];\r\n\t},\r\n\tchangeId: function(oldId, newId){\r\n\t\tthis._changeIdInner(oldId, newId);\r\n\r\n\t\tthis.callEvent(\"onIdChange\", [oldId, newId]);\r\n\r\n\t},\r\n\texists: function(id){\r\n\t\treturn !!(this.pull[id]);\r\n\t},\r\n\r\n\t_moveInner: function(sindex, tindex){\r\n\t\tvar id = this.getIdByIndex(sindex);\r\n\r\n\t\tthis._updateOrder(function(){\r\n\t\t\tthis.$removeAt(sindex);\r\n\t\t\tthis.$insertAt(id,Math.min(this.length, tindex));\r\n\t\t});\r\n\t\t//this.visibleOrder.$removeAt(sindex);\t//remove at old position\r\n\t\t//if (sindex<tindex) tindex--;\t//correct shift, caused by element removing\r\n\t\t//this.visibleOrder.$insertAt(id,Math.min(this.visibleOrder.length, tindex));\t//insert at new position\r\n\t},\r\n\r\n\tmove: function(sindex, tindex){\r\n\t\t//gantt.assert(sindex>=0 && tindex>=0, \"DataStore::move\",\"Incorrect indexes\");\r\n\r\n\t\tvar id = this.getIdByIndex(sindex);\r\n\t\tvar obj = this.getItem(id);\r\n\t\tthis._moveInner(sindex, tindex);\r\n\r\n\r\n\t\tif (!this._skip_refresh) {\r\n\t\t\t//repaint signal\r\n\t\t\tthis.callEvent(\"onStoreUpdated\", [id, obj, \"move\"]);\r\n\t\t}\r\n\t},\r\n\tclearAll: function(){\r\n\t\tthis.pull = {};\r\n\t\tthis.visibleOrder = powerArray.$create();\r\n\t\tthis.fullOrder = powerArray.$create();\r\n\t\tif (this._skip_refresh) return;\r\n\t\tthis.callEvent(\"onClearAll\",[]);\r\n\t\tthis.refresh();\r\n\t},\r\n\r\n\tsilent:function(code, master){\r\n\t\tthis._skip_refresh = true;\r\n\t\tcode.call(master||this);\r\n\t\tthis._skip_refresh = false;\r\n\t},\r\n\r\n\trefresh: function(id){\r\n\t\tif (this._skip_refresh) return;\r\n\t\tthis.filter();\r\n\t\tif (id)\r\n\t\t\tthis.callEvent(\"onStoreUpdated\",[id, this.pull[id], \"paint\"]);\r\n\t\telse\r\n\t\t\tthis.callEvent(\"onStoreUpdated\",[null,null,null]);\r\n\t},\r\n\r\n\tcount: function(){\r\n\t\treturn this.fullOrder.length;\r\n\t},\r\n\tcountVisible: function(){\r\n\t\treturn this.visibleOrder.length;\r\n\t},\r\n\r\n\tsort: function(sort){},\r\n\r\n\tserialize: function(){},\r\n\r\n\teachItem: function(code){\r\n\t\tfor (var i=0; i<this.fullOrder.length; i++) {\r\n\t\t\tvar item = this.pull[this.fullOrder[i]];\r\n\t\t\tcode.call(this, item);\r\n\t\t}\r\n\t},\r\n\t\r\n\tfilter: function(rule){\r\n\t\tvar filteredOrder = powerArray.$create();\r\n\t\tthis.eachItem(function(item){\r\n\t\t\tif(this.callEvent(\"onFilterItem\", [item.id, item])){\r\n\t\t\t\tfilteredOrder.push(item.id);\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\tthis.visibleOrder = filteredOrder;\r\n\t\tthis._searchVisibleOrder = {};\r\n\t\tfor(var i = 0; i < this.visibleOrder.length; i++){\r\n\t\t\tthis._searchVisibleOrder[this.visibleOrder[i]] = i;\r\n\t\t}\r\n\t},\r\n\r\n\tgetIndexRange: function(from, to){\r\n\t\tto=Math.min((to||Infinity),this.countVisible()-1);\r\n\r\n\t\tvar ret= [];\r\n\t\tfor (var i=(from||0); i <= to; i++)\r\n\t\t\tret.push(this.getItem(this.visibleOrder[i]));\r\n\t\treturn ret;\r\n\t},\r\n\tgetItems: function(){\r\n\t\tvar res = [];\r\n\t\tfor(var i = 0; i < this.fullOrder.length; i++){\r\n\t\t\tres.push(this.pull[this.fullOrder[i]]);\r\n\t\t}\r\n\t\treturn res;\r\n\t},\r\n\r\n\tgetIdByIndex: function(index){\r\n\t\treturn this.visibleOrder[index];\r\n\t},\r\n\tgetIndexById: function(id){\r\n\t\tvar res = this._searchVisibleOrder[id];\r\n\t\tif(res === undefined){\r\n\t\t\tres = -1;\r\n\t\t}\r\n\t\treturn res;\r\n\t},\r\n\tgerFirst: function(){\r\n\t\treturn this.visibleOrder[0];\r\n\t},\r\n\tgetLast: function(){\r\n\t\treturn this.visibleOrder[this.visibleOrder.length-1];\r\n\t},\r\n\tgetNext: function(id){\r\n\t\treturn this.visibleOrder[this.getIndexById(id) + 1];\r\n\t},\r\n\tgetPrev: function(id){\r\n\t\treturn this.visibleOrder[this.getIndexById(id) - 1];\r\n\t}\r\n};\r\n\r\nmodule.exports = DataStore;\n\n\n//////////////////\n// WEBPACK FOOTER\n// c:/www-recent/gantt/sources/core/datastore/datastore.js\n// module id = 14\n// module chunks = 0","var utils = require(\"../../utils/utils\");\r\n\r\nvar $powerArray  = {\r\n\t$create: function(array){\r\n\t\treturn utils.mixin(array || [], this);\r\n\t},\r\n\t//remove element at specified position\r\n\t$removeAt:function(pos,len){\r\n\t\tif (pos>=0) this.splice(pos,(len||1));\r\n\t},\r\n\t//find element in collection and remove it\r\n\t$remove:function(value){\r\n\t\tthis.$removeAt(this.$find(value));\r\n\t},\r\n\t//add element to collection at specific position\r\n\t$insertAt:function(data,pos){\r\n\t\tif (!pos && pos!==0) \t//add to the end by default\r\n\t\t\tthis.push(data);\r\n\t\telse {\r\n\t\t\tvar b = this.splice(pos,(this.length-pos));\r\n\t\t\tthis[pos] = data;\r\n\t\t\tthis.push.apply(this,b); //reconstruct array without loosing this pointer\r\n\t\t}\r\n\t},\r\n\t//return index of element, -1 if it doesn't exists\r\n\t$find:function(data){\r\n\t\tfor (var i=0; i<this.length; i++)\r\n\t\t\tif (data==this[i]) return i;\r\n\t\treturn -1;\r\n\t},\r\n\t//execute some method for each element of array\r\n\t$each:function(functor,master){\r\n\t\tfor (var i=0; i < this.length; i++)\r\n\t\t\tfunctor.call((master||this),this[i]);\r\n\t},\r\n\t//create new array from source, by using results of functor\r\n\t$map:function(functor,master){\r\n\t\tfor (var i=0; i < this.length; i++)\r\n\t\t\tthis[i]=functor.call((master||this),this[i]);\r\n\t\treturn this;\r\n\t},\r\n\t$filter:function(functor, master){\r\n\t\tfor (var i=0; i < this.length; i++)\r\n\t\t\tif (!functor.call((master||this),this[i])){\r\n\t\t\t\tthis.splice(i,1);\r\n\t\t\t\ti--;\r\n\t\t\t}\r\n\t\treturn this;\r\n\t}\r\n};\r\n\r\nmodule.exports = $powerArray;\n\n\n//////////////////\n// WEBPACK FOOTER\n// c:/www-recent/gantt/sources/core/datastore/power_array.js\n// module id = 15\n// module chunks = 0","var ScaleHelper = require(\"./ui/timeline/scales_ignore\");\r\n\r\n\r\nfunction dateRangeResolver(gantt){\r\n\t//reset project timing\r\n\t//_get_tasks_data(gantt);\r\n\treturn gantt.getSubtaskDates();\r\n}\r\n\r\nfunction defaultRangeResolver(){\r\n\treturn {\r\n\t\tstart_date: new Date(),\r\n\t\tend_date: new Date()\r\n\t};\r\n}\r\n\r\nfunction resolveConfigRange(unit, gantt){\r\n\tvar range = {\r\n\t\tstart_date:null,\r\n\t\tend_date:null\r\n\t};\r\n\r\n\tif (gantt.config.start_date && gantt.config.end_date) {\r\n\t\trange.start_date = gantt.date[unit + \"_start\"](new Date(gantt.config.start_date));\r\n\r\n\t\tvar end = new Date(gantt.config.end_date);\r\n\t\tvar start_interval = gantt.date[unit + \"_start\"](new Date(end));\r\n\t\tif (+end != +start_interval) {\r\n\t\t\tend = gantt.date.add(start_interval, 1, unit);\r\n\t\t} else {\r\n\t\t\tend = start_interval;\r\n\t\t}\r\n\r\n\t\trange.end_date = end;\r\n\t}\r\n\treturn range;\r\n}\r\n\r\nfunction _scale_range_unit(gantt) {\r\n\tvar unit = gantt.config.scale_unit;\r\n\tif (gantt.config.scale_offset_minimal) {\r\n\r\n\t\tvar helper = new ScaleHelper(gantt);\r\n\t\tvar scales = [helper.primaryScale()].concat(gantt.config.subscales);\r\n\r\n\t\thelper.sortScales(scales);\r\n\t\tunit = scales[scales.length - 1].unit;\r\n\t}\r\n\treturn unit;\r\n}\r\n\r\nfunction _init_tasks_range(gantt) {\r\n\tvar unit = _scale_range_unit(gantt);\r\n\tvar range = resolveConfigRange(unit, gantt);\r\n\r\n\tif(!(range.start_date && range.end_date)){\r\n\t\trange = dateRangeResolver(gantt);\r\n\t\tif(!range.start_date || !range.end_date){\r\n\t\t\trange = defaultRangeResolver(gantt);\r\n\t\t}\r\n\r\n\t\trange.start_date = gantt.date[unit + \"_start\"](range.start_date);\r\n\t\trange.start_date = gantt.calculateEndDate({\r\n\t\t\tstart_date: gantt.date[unit + \"_start\"](range.start_date),\r\n\t\t\tduration: -1,\r\n\t\t\tunit: unit\r\n\t\t});//one free column before first task\r\n\r\n\t\trange.end_date = gantt.date[unit + \"_start\"](range.end_date);\r\n\t\trange.end_date = gantt.calculateEndDate({start_date: range.end_date, duration: 2, unit: unit});//one free column after last task\r\n\t}\r\n\r\n\tgantt._min_date = range.start_date;\r\n\tgantt._max_date = range.end_date;\r\n}\r\n\r\nfunction _adjust_scales(gantt) {\r\n\tif (gantt.config.fit_tasks) {\r\n\t\tvar old_min = +gantt._min_date,\r\n\t\t\told_max = +gantt._max_date;\r\n\t\t//this._init_tasks_range();\r\n\t\tif (+gantt._min_date != old_min || +gantt._max_date != old_max) {\r\n\t\t\tgantt.render();\r\n\r\n\t\t\tgantt.callEvent(\"onScaleAdjusted\", []);\r\n\t\t\treturn true;\r\n\t\t}\r\n\t}\r\n\treturn false;\r\n}\r\n\r\nmodule.exports = function updateTasksRange(gantt){\r\n\t_init_tasks_range(gantt);\r\n\t_adjust_scales(gantt);\r\n};\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// c:/www-recent/gantt/sources/core/gantt_data_range.js\n// module id = 16\n// module chunks = 0","var utils = require(\"../../utils/utils\");\r\n\r\nvar calendarArgumentsHelper = function(gantt){\r\n\treturn {\r\n\t\tgetWorkHoursArguments: function () {\r\n\t\t\tvar config = arguments[0];\r\n\t\t\tif (config instanceof Date) {\r\n\t\t\t\tconfig = {\r\n\t\t\t\t\tdate: config\r\n\t\t\t\t};\r\n\t\t\t} else {\r\n\t\t\t\tconfig = utils.mixin({}, config);\r\n\t\t\t}\r\n\t\t\treturn config;\r\n\t\t},\r\n\t\tsetWorkTimeArguments: function () {\r\n\t\t\treturn arguments[0];\r\n\t\t},\r\n\t\tunsetWorkTimeArguments: function () {\r\n\t\t\treturn arguments[0];\r\n\t\t},\r\n\t\tisWorkTimeArguments: function () {\r\n\t\t\tvar config = arguments[0];\r\n\t\t\tif (!config.date) {\r\n\t\t\t\tconfig = {};\r\n\t\t\t\tconfig.date = arguments[0];\r\n\t\t\t\tconfig.unit = arguments[1];\r\n\t\t\t\tconfig.task = arguments[2];\r\n\t\t\t\tconfig.calendar = arguments[3];\r\n\t\t\t} else {\r\n\t\t\t\tconfig = utils.mixin({}, config);\r\n\t\t\t\tconfig.unit = config.unit || gantt.config.duration_unit;\r\n\t\t\t\tconfig.task = config.task || null;\r\n\t\t\t\tconfig.calendar = config.calendar || null;\r\n\t\t\t}\r\n\r\n\t\t\tconfig.unit = config.unit || gantt.config.duration_unit;\r\n\r\n\t\t\treturn config;\r\n\t\t},\r\n\t\tgetClosestWorkTimeArguments: function (config) {\r\n\t\t\tconfig = arguments[0];\r\n\t\t\tif (config instanceof Date) {\r\n\t\t\t\tconfig = {\r\n\t\t\t\t\tdate: config\r\n\t\t\t\t};\r\n\t\t\t} else {\r\n\t\t\t\tconfig = utils.mixin({}, config);\r\n\t\t\t}\r\n\t\t\tconfig.dir = config.dir || 'any';\r\n\t\t\tconfig.unit = config.unit || gantt.config.duration_unit;\r\n\r\n\t\t\treturn config;\r\n\t\t},\r\n\r\n\t\tgetDurationConfig: function (start, end, task, calendar) {\r\n\t\t\tthis.start_date = start;\r\n\t\t\tthis.end_date = end;\r\n\t\t\tthis.task = task;\r\n\t\t\tthis.calendar = calendar;\r\n\t\t\tthis.unit = null;\r\n\t\t\tthis.step = null;\r\n\t\t\treturn this;\r\n\t\t},\r\n\t\t_getStartEndConfig: function (param) {\r\n\t\t\tvar argumentType = this.getDurationConfig;\r\n\t\t\tvar config;\r\n\t\t\tif (param instanceof argumentType)\r\n\t\t\t\treturn param;\r\n\r\n\t\t\tif (param instanceof Date) {\r\n\t\t\t\tconfig = new argumentType(arguments[0], arguments[1], arguments[2], arguments[3]);\r\n\t\t\t} else {\r\n\t\t\t\tconfig = new argumentType(param.start_date, param.end_date, param.task);\r\n\t\t\t\tif (param.id) {\r\n\t\t\t\t\tconfig.task = param;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tconfig.unit = config.unit || gantt.config.duration_unit;\r\n\t\t\tconfig.step = config.step || gantt.config.duration_step;\r\n\t\t\tconfig.start_date = config.start_date || config.start || config.date;\r\n\r\n\t\t\treturn config;\r\n\t\t},\r\n\r\n\t\tgetDurationArguments: function (start, end, unit, step) {\r\n\t\t\treturn this._getStartEndConfig.apply(this, arguments);\r\n\t\t},\r\n\r\n\t\thasDurationArguments: function (start, end, unit, step) {\r\n\t\t\treturn this._getStartEndConfig.apply(this, arguments);\r\n\t\t},\r\n\r\n\t\tcalculateEndDateArguments: function (start, duration, unit, step) {\r\n\t\t\tvar config = arguments[0];\r\n\t\t\tif (config instanceof Date) {\r\n\t\t\t\tconfig = {\r\n\t\t\t\t\tstart_date: arguments[0],\r\n\t\t\t\t\tduration: arguments[1],\r\n\t\t\t\t\tunit: arguments[2],\r\n\t\t\t\t\ttask: arguments[3],\r\n\t\t\t\t\tcalendar: arguments[4]\r\n\t\t\t\t};\r\n\t\t\t} else {\r\n\t\t\t\tconfig = utils.mixin({}, config);\r\n\t\t\t}\r\n\r\n\t\t\tconfig.unit = config.unit || gantt.config.duration_unit;\r\n\t\t\tconfig.step = config.step || gantt.config.duration_step;\r\n\r\n\t\t\treturn config;\r\n\t\t}\r\n\t};\r\n};\r\n\r\n\r\nmodule.exports = calendarArgumentsHelper;\n\n\n//////////////////\n// WEBPACK FOOTER\n// c:/www-recent/gantt/sources/core/worktime/calendar_arguments_helper.js\n// module id = 17\n// module chunks = 0","\r\nwindow.gantt = require(\"./core/gantt\")();\r\n\r\nrequire(\"./core/deprecated_warnings\")(gantt);\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// c:/www-recent/gantt/sources/dhtmlxgantt.js\n// module id = 19\n// module chunks = 0","module.exports = function() {\r\n\r\n\tvar gantt = {\r\n\t\tversion: \"5.0.1\",\r\n\t\ttemplates: {},\r\n\t\tkeys: {\r\n\t\t\tedit_save: 13,\r\n\t\t\tedit_cancel: 27\r\n\t\t}\r\n\t};\r\n\r\n\trequire(\"./common/import\")(gantt);\r\n\r\n\tgantt.$services = gantt.$inject(require(\"./common/services\"));\r\n\tgantt.config = gantt.$inject(require(\"./common/config\"));\r\n\tgantt.ajax =  require(\"./common/ajax\")(gantt);\r\n\tgantt.date = require(\"./common/date\")(gantt);\r\n\tvar dnd = require(\"./common/dnd\")(gantt);\r\n\tgantt.$services.setService(\"dnd\", function(){return dnd;});\r\n\r\n\tgantt.$services.setService(\"config\", function () {\r\n\t\treturn gantt.config;\r\n\t});\r\n\tgantt.$services.setService(\"date\", function () {\r\n\t\treturn gantt.date;\r\n\t});\r\n\tgantt.$services.setService(\"locale\", function () {\r\n\t\treturn gantt.locale;\r\n\t});\r\n\tgantt.$services.setService(\"templates\", function () {\r\n\t\treturn gantt.templates;\r\n\t});\r\n\r\n\tvar templatesLoader = require(\"./common/templates\")(gantt);\r\n\tgantt.$services.setService(\"templateLoader\", function () {\r\n\t\treturn templatesLoader;\r\n\t});\r\n\r\n\tvar eventable = require(\"../utils/eventable\");\r\n\teventable(gantt);\r\n\r\n\tvar StateService = require(\"./common/state\");\r\n\tvar stateService = new StateService();\r\n\r\n\tstateService.registerProvider(\"global\", function () {\r\n\t\treturn {\r\n\t\t\tmin_date: gantt._min_date,\r\n\t\t\tmax_date: gantt._max_date,\r\n\t\t\tselected_task: gantt._selected_task\r\n\t\t};\r\n\t});\r\n\tgantt.getState = stateService.getState;\r\n\tgantt.$services.setService(\"state\", function () {\r\n\t\treturn stateService;\r\n\t});\r\n\r\n\tvar utils = require(\"../utils/utils\");\r\n\tutils.mixin(gantt, utils);\r\n\tgantt.env = require(\"../utils/env\");\r\n\r\n\tutils.mixin(gantt, require(\"./message\")(gantt));\r\n\tvar uiApi = require(\"./ui/index\").init(gantt);\r\n\tgantt.$ui = uiApi.factory;\r\n\tgantt.$ui.layers = uiApi.render;\r\n\tgantt.$mouseEvents = uiApi.mouseEvents;\r\n\tgantt.$services.setService(\"mouseEvents\", function () {\r\n\t\treturn gantt.$mouseEvents;\r\n\t});\r\n\tgantt.mixin(gantt, uiApi.layersApi);\r\n\r\n\trequire(\"./data_task_layers\")(gantt);\r\n\r\n\tgantt.$services.setService(\"layers\", function () {\r\n\t\treturn uiApi.layersService;\r\n\t});\r\n\r\n\trequire(\"./datastore/datastore_hooks\")(gantt);\r\n\r\n\trequire(\"./dataprocessor/hooks\")(gantt);\r\n\trequire(\"./plugins\")(gantt);\r\n\r\n\trequire(\"./dynamic_loading\")(gantt);\r\n\trequire(\"./grid_column_api\")(gantt);\r\n\trequire(\"./wai_aria\")(gantt);\r\n\trequire(\"./tasks\")(gantt);\r\n\trequire(\"./load\")(gantt);\r\n\trequire(\"./worktime/work_time\")(gantt);\r\n\trequire(\"./data\")(gantt);\r\n\trequire(\"./lightbox\")(gantt);\r\n\trequire(\"./lightbox_optional_time\")(gantt);\r\n\trequire(\"./data_task_types\")(gantt);\r\n\trequire(\"./cached_functions\")(gantt);\r\n\trequire(\"./skin\")(gantt);\r\n\trequire(\"../css/skins/skyblue\")(gantt);\r\n\trequire(\"../css/skins/meadow\")(gantt);\r\n\trequire(\"../css/skins/terrace\")(gantt);\r\n\trequire(\"../css/skins/broadway\")(gantt);\r\n\trequire(\"../css/skins/material\")(gantt);\r\n\trequire(\"../css/skins/contrast_black\")(gantt);\r\n\trequire(\"../css/skins/contrast_white\")(gantt);\r\n\trequire(\"./touch\")(gantt);\r\n\trequire(\"../locale/locale\")(gantt);\r\n\trequire(\"./gantt_core\")(gantt);\r\n\r\n\treturn gantt;\r\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// c:/www-recent/gantt/sources/core/gantt.js\n// module id = 20\n// module chunks = 0","module.exports = function(gantt){\r\n\tgantt.$inject = function(module){\r\n\t\treturn module(this.$services);\r\n\t};\r\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// c:/www-recent/gantt/sources/core/common/import.js\n// module id = 21\n// module chunks = 0","module.exports = function(){\r\n\tvar services = {};\r\n\tfunction register (name, getter){\r\n\t\tservices[name] = getter;\r\n\t}\r\n\r\n\tfunction getService(name){\r\n\t\tif(!services[name]){\r\n\t\t\treturn null;\r\n\t\t}\r\n\t\treturn services[name]();\r\n\t}\r\n\r\n\tvar servicesEnum = {\r\n\t\t\"config\": \"config\",\r\n\t\t\"templates\": \"templates\",\r\n\t\t\"locale\": \"locale\"\r\n\t};\r\n\r\n\treturn {\r\n\t\tservices: servicesEnum,\r\n\t\tsetService: register,\r\n\t\tgetService: getService,\r\n\t\tconfig: function(){\r\n\t\t\treturn this.getService(\"config\");\r\n\t\t},\r\n\t\ttemplates: function(){\r\n\t\t\treturn this.getService(\"templates\");\r\n\t\t},\r\n\t\tlocale: function(){\r\n\t\t\treturn this.getService(\"locale\");\r\n\t\t}\r\n\t};\r\n};\r\n/*\r\nvar services = {};\r\nfunction register (name, getter){\r\n\tservices[name] = getter;\r\n}\r\n\r\nfunction getService(name){\r\n\tif(!services[name]){\r\n\t\treturn null;\r\n\t}\r\n\treturn services[name]();\r\n}\r\n\r\nvar servicesEnum = {\r\n\t\"config\": \"config\",\r\n\t\"templates\": \"templates\",\r\n\t\"locale\": \"locale\"\r\n};\r\n\r\nmodule.exports = {\r\n\tservices: servicesEnum,\r\n\tsetService: register,\r\n\tgetService: getService,\r\n\tconfig: function(){\r\n\t\treturn this.getService(\"config\");\r\n\t},\r\n\ttemplates: function(){\r\n\t\treturn this.getService(\"templates\");\r\n\t},\r\n\tlocale: function(){\r\n\t\treturn this.getService(\"locale\");\r\n\t}\r\n};*/\n\n\n//////////////////\n// WEBPACK FOOTER\n// c:/www-recent/gantt/sources/core/common/services.js\n// module id = 22\n// module chunks = 0","module.exports = function() {\r\n\treturn {\r\n\t\tlayout: {\r\n\t\t\tcss: \"gantt_container\",\r\n\t\t\trows: [\r\n\t\t\t\t{\r\n\t\t\t\t\tcols: [\r\n\t\t\t\t\t\t{view: \"grid\", id: \"grid\", scrollX: \"scrollHor\", scrollY: \"scrollVer\"},\r\n\t\t\t\t\t\t{resizer: true, width: 1},\r\n\t\t\t\t\t\t{view: \"timeline\", id: \"timeline\", scrollX: \"scrollHor\", scrollY: \"scrollVer\"},\r\n\t\t\t\t\t\t{view: \"scrollbar\", scroll: \"y\", id: \"scrollVer\"}\r\n\t\t\t\t\t]\r\n\r\n\t\t\t\t},\r\n\t\t\t\t{view: \"scrollbar\", scroll: \"x\", id: \"scrollHor\", height: 20}\r\n\t\t\t]\r\n\t\t},\r\n\t\tlinks: {\r\n\t\t\t\"finish_to_start\": \"0\",\r\n\t\t\t\"start_to_start\": \"1\",\r\n\t\t\t\"finish_to_finish\": \"2\",\r\n\t\t\t\"start_to_finish\": \"3\"\r\n\t\t},\r\n\t\ttypes: {\r\n\t\t\t'task': 'task',\r\n\t\t\t'project': 'project',\r\n\t\t\t'milestone': 'milestone'\r\n\t\t},\r\n\t\tduration_unit: \"day\",\r\n\t\twork_time: false,\r\n\t\tcorrect_work_time: false,\r\n\t\tskip_off_time: false,\r\n\r\n\t\tcascade_delete: true,\r\n\r\n\t\tautosize: false,\r\n\t\tautosize_min_width: 0,\r\n\t\tautoscroll: true,\r\n\t\tautoscroll_speed: 30,\r\n\r\n\t\tshow_links: true,\r\n\t\tshow_task_cells: true,\r\n\t\t// replace backgroung of the task area with a canvas img\r\n\t\tstatic_background: false,\r\n\t\tbranch_loading: false,\r\n\t\tshow_loading: false,\r\n\t\tshow_chart: true,\r\n\t\tshow_grid: true,\r\n\t\tmin_duration: 60 * 60 * 1000,\r\n\t\txml_date: \"%d-%m-%Y %H:%i\",\r\n\t\tapi_date: \"%d-%m-%Y %H:%i\",\r\n\t\tstart_on_monday: true,\r\n\t\tserver_utc: false,\r\n\t\tshow_progress: true,\r\n\t\tfit_tasks: false,\r\n\t\tselect_task: true,\r\n\t\tscroll_on_click: true,\r\n\t\tpreserve_scroll: true,\r\n\t\treadonly: false,\r\n\r\n\t\t/*grid */\r\n\t\tdate_grid: \"%Y-%m-%d\",\r\n\r\n\t\tdrag_links: true,\r\n\t\tdrag_progress: true,\r\n\t\tdrag_resize: true,\r\n\t\tdrag_move: true,\r\n\t\tdrag_mode: {\r\n\t\t\t\"resize\": \"resize\",\r\n\t\t\t\"progress\": \"progress\",\r\n\t\t\t\"move\": \"move\",\r\n\t\t\t\"ignore\": \"ignore\"\r\n\t\t},\r\n\t\tround_dnd_dates: true,\r\n\t\tlink_wrapper_width: 20,\r\n\t\troot_id: 0,\r\n\r\n\t\tautofit: false, // grid column automatic fit grid_width config\r\n\t\tcolumns: [\r\n\t\t\t{name: \"text\", tree: true, width: '*', resize: true},\r\n\t\t\t{name: \"start_date\", align: \"center\", resize: true},\r\n\t\t\t{name: \"duration\", align: \"center\"},\r\n\t\t\t{name: \"add\", width: '44'}\r\n\t\t],\r\n\r\n\t\t/*scale*/\r\n\t\tstep: 1,\r\n\t\tscale_unit: \"day\",\r\n\t\tscale_offset_minimal: true,\r\n\t\tsubscales: [],\r\n\r\n\t\tinherit_scale_class: false,\r\n\r\n\t\ttime_step: 60,\r\n\t\tduration_step: 1,\r\n\t\tdate_scale: \"%d %M\",\r\n\t\ttask_date: \"%d %F %Y\",\r\n\t\ttime_picker: \"%H:%i\",\r\n\t\ttask_attribute: \"task_id\",\r\n\t\tlink_attribute: \"link_id\",\r\n\t\tlayer_attribute: \"data-layer\",\r\n\t\tbuttons_left: [\r\n\t\t\t\"gantt_save_btn\",\r\n\t\t\t\"gantt_cancel_btn\"\r\n\t\t],\r\n\t\t_migrate_buttons: {\r\n\t\t\t\"dhx_save_btn\": \"gantt_save_btn\",\r\n\t\t\t\"dhx_cancel_btn\": \"gantt_cancel_btn\",\r\n\t\t\t\"dhx_delete_btn\": \"gantt_delete_btn\"\r\n\t\t},\r\n\t\tbuttons_right: [\r\n\t\t\t\"gantt_delete_btn\"\r\n\t\t],\r\n\t\tlightbox: {\r\n\t\t\tsections: [\r\n\t\t\t\t{name: \"description\", height: 70, map_to: \"text\", type: \"textarea\", focus: true},\r\n\t\t\t\t{name: \"time\", type: \"duration\", map_to: \"auto\"}\r\n\t\t\t],\r\n\t\t\tproject_sections: [\r\n\t\t\t\t{name: \"description\", height: 70, map_to: \"text\", type: \"textarea\", focus: true},\r\n\t\t\t\t{name: \"type\", type: \"typeselect\", map_to: \"type\"},\r\n\t\t\t\t{name: \"time\", type: \"duration\", readonly: true, map_to: \"auto\"}\r\n\t\t\t],\r\n\t\t\tmilestone_sections: [\r\n\t\t\t\t{name: \"description\", height: 70, map_to: \"text\", type: \"textarea\", focus: true},\r\n\t\t\t\t{name: \"type\", type: \"typeselect\", map_to: \"type\"},\r\n\t\t\t\t{name: \"time\", type: \"duration\", single_date: true, map_to: \"auto\"}\r\n\t\t\t]\r\n\t\t},\r\n\t\tdrag_lightbox: true,\r\n\t\tsort: false,\r\n\t\tdetails_on_create: true,\r\n\t\tdetails_on_dblclick: true,\r\n\t\tinitial_scroll: true,\r\n\t\ttask_scroll_offset: 100,\r\n\r\n\t\torder_branch: false,\r\n\t\torder_branch_free: false,\r\n\r\n\t\ttask_height: \"full\",//number px of 'full' for row height\r\n\t\tmin_column_width: 70,\r\n\r\n\t\t// min width for grid column (when resizing)\r\n\t\tmin_grid_column_width: 70,\r\n\t\t// name of the attribute with column index for resize element\r\n\t\tgrid_resizer_column_attribute: \"column_index\",\r\n\t\t// name of the attribute with column index for resize element\r\n\t\tgrid_resizer_attribute: \"grid_resizer\",\r\n\r\n\t\t// grid width can be increased after the column has been resized\r\n\t\tkeep_grid_width: false,\r\n\r\n\t\t// grid width can be adjusted\r\n\t\tgrid_resize: false,\r\n\r\n\t\tshow_unscheduled: true,\r\n\r\n\t\t//\r\n\t\treadonly_property: \"readonly\",\r\n\t\teditable_property: \"editable\",\r\n\t\tcalendar_property: \"calendar_id\",\r\n\t\tresource_calendars: {},\r\n\r\n\t\ttype_renderers: {},\r\n\r\n\t\topen_tree_initially: false,\r\n\t\toptimize_render: true,\r\n\t\tprevent_default_scroll: false,\r\n\t\tshow_errors: true,\r\n\t\twai_aria_attributes: true,\r\n\t\tsmart_scales: true\r\n\t};\r\n};\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// c:/www-recent/gantt/sources/core/common/config.js\n// module id = 23\n// module chunks = 0","var env = require(\"../../utils/env\");\r\n\r\nmodule.exports = function(gantt){\r\n\treturn {\r\n\r\n\t\t// if false - dhxr param will added to prevent caching on client side (default),\r\n\t\t// if true - do not add extra params\r\n\t\tcache: true,\r\n\r\n\t\t// default method for load/loadStruct, post/get allowed\r\n\t\t// get - since 4.1.1, this should fix 412 error for macos safari\r\n\t\tmethod: \"get\",\r\n\r\n\t\tparse: function(data) {\r\n\t\t\tif (typeof data !== \"string\") return data;\r\n\r\n\t\t\tvar obj;\r\n\t\t\tdata = data.replace(/^[\\s]+/,\"\");\r\n\t\t\tif (window.DOMParser && !env.isIE) { // ff,ie9\r\n\t\t\t\tobj = (new window.DOMParser()).parseFromString(data, \"text/xml\");\r\n\t\t\t} else if (window.ActiveXObject !== window.undefined) {\r\n\t\t\t\tobj = new window.ActiveXObject(\"Microsoft.XMLDOM\");\r\n\t\t\t\tobj.async = \"false\";\r\n\t\t\t\tobj.loadXML(data);\r\n\t\t\t}\r\n\t\t\treturn obj;\r\n\t\t},\r\n\t\txmltop: function(tagname, xhr, obj) {\r\n\t\t\tif (typeof xhr.status == \"undefined\" || xhr.status < 400) {\r\n\t\t\t\tvar xml = (!xhr.responseXML) ? this.parse(xhr.responseText || xhr) : (xhr.responseXML || xhr);\r\n\t\t\t\tif (xml && xml.documentElement !== null && !xml.getElementsByTagName(\"parsererror\").length) {\r\n\t\t\t\t\treturn xml.getElementsByTagName(tagname)[0];\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (obj !== -1) gantt.callEvent(\"onLoadXMLError\",[\"Incorrect XML\", arguments[1], obj]);\r\n\t\t\treturn document.createElement(\"DIV\");\r\n\t\t},\r\n\t\txpath: function(xpathExp, docObj) {\r\n\t\t\tif (!docObj.nodeName) docObj = docObj.responseXML || docObj;\r\n\t\t\tif (env.isIE) {\r\n\t\t\t\treturn docObj.selectNodes(xpathExp)||[];\r\n\t\t\t} else {\r\n\t\t\t\tvar rows = [];\r\n\t\t\t\tvar first;\r\n\t\t\t\tvar col = (docObj.ownerDocument||docObj).evaluate(xpathExp, docObj, null, XPathResult.ANY_TYPE, null);\r\n\r\n\t\t\t\twhile (true){\r\n\t\t\t\t\tfirst = col.iterateNext();\r\n\t\t\t\t\tif(first){\r\n\t\t\t\t\t\trows.push(first);\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\treturn rows;\r\n\t\t\t}\r\n\t\t},\r\n\t\tquery: function(config) {\r\n\t\t\tthis._call(\r\n\t\t\t\t(config.method || \"GET\"),\r\n\t\t\t\tconfig.url,\r\n\t\t\t\tconfig.data || \"\",\r\n\t\t\t\t(config.async || true),\r\n\t\t\t\tconfig.callback,\r\n\t\t\t\tnull,\r\n\t\t\t\tconfig.headers\r\n\t\t\t);\r\n\t\t},\r\n\t\tget: function(url, onLoad) {\r\n\t\t\tthis._call(\"GET\", url, null, true, onLoad);\r\n\t\t},\r\n\t\tgetSync: function(url) {\r\n\t\t\treturn this._call(\"GET\", url, null, false);\r\n\t\t},\r\n\t\tput: function(url, postData, onLoad) {\r\n\t\t\tthis._call(\"PUT\", url, postData, true, onLoad);\r\n\t\t},\r\n\t\tdel: function(url, postData, onLoad) {\r\n\t\t\tthis._call(\"DELETE\", url, postData, true, onLoad);\r\n\t\t},\r\n\t\tpost: function(url, postData, onLoad) {\r\n\t\t\tif (arguments.length == 1) {\r\n\t\t\t\tpostData = \"\";\r\n\t\t\t} else if (arguments.length == 2 && (typeof(postData) == \"function\" || typeof(window[postData]) == \"function\")) {\r\n\t\t\t\tonLoad = postData;\r\n\t\t\t\tpostData = \"\";\r\n\t\t\t} else {\r\n\t\t\t\tpostData = String(postData);\r\n\t\t\t}\r\n\t\t\tthis._call(\"POST\", url, postData, true, onLoad);\r\n\t\t},\r\n\t\tpostSync: function(url, postData) {\r\n\t\t\tpostData = (postData === null ? \"\" : String(postData));\r\n\t\t\treturn this._call(\"POST\", url, postData, false);\r\n\t\t},\r\n\t\tgetLong: function(url, onLoad) {\r\n\t\t\tthis._call(\"GET\", url, null, true, onLoad, {url:url});\r\n\t\t},\r\n\t\tpostLong: function(url, postData, onLoad) {\r\n\t\t\tif (arguments.length == 2 && (typeof(postData) == \"function\" || typeof(window[postData]))) {\r\n\t\t\t\tonLoad = postData;\r\n\t\t\t\tpostData = \"\";\r\n\t\t\t}\r\n\t\t\tthis._call(\"POST\", url, postData, true, onLoad, {url:url, postData:postData});\r\n\t\t},\r\n\t\t_call: function(method, url, postData, async, onLoad, longParams, headers) {\r\n\r\n\t\t\tvar t = (window.XMLHttpRequest && !env.isIE ? new XMLHttpRequest() : new ActiveXObject(\"Microsoft.XMLHTTP\"));\r\n\t\t\tvar isQt = (navigator.userAgent.match(/AppleWebKit/) !== null && navigator.userAgent.match(/Qt/) !== null && navigator.userAgent.match(/Safari/) !== null);\r\n\r\n\t\t\tif (!!async) {\r\n\t\t\t\tt.onreadystatechange = function() {\r\n\t\t\t\t\tif ((t.readyState == 4) || (isQt && t.readyState == 3)) { // what for long response and status 404?\r\n\t\t\t\t\t\tif (t.status != 200 || t.responseText === \"\")\r\n\t\t\t\t\t\t\tif (!gantt.callEvent(\"onAjaxError\", [t])) return;\r\n\r\n\t\t\t\t\t\twindow.setTimeout(function(){\r\n\t\t\t\t\t\t\tif (typeof(onLoad) == \"function\") {\r\n\t\t\t\t\t\t\t\tonLoad.apply(window, [{xmlDoc:t, filePath:url}]); // dhtmlx-compat, response.xmlDoc.responseXML/responseText\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tif (longParams) {\r\n\t\t\t\t\t\t\t\tif (typeof(longParams.postData) != \"undefined\") {\r\n\t\t\t\t\t\t\t\t\tthis.postLong(longParams.url, longParams.postData, onLoad);\r\n\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\tthis.getLong(longParams.url, onLoad);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tonLoad = null;\r\n\t\t\t\t\t\t\tt = null;\r\n\t\t\t\t\t\t},1);\r\n\t\t\t\t\t}\r\n\t\t\t\t};\r\n\t\t\t}\r\n\r\n\t\t\tif (method == \"GET\" && !this.cache) {\r\n\t\t\t\turl += (url.indexOf(\"?\")>=0?\"&\":\"?\")+\"dhxr\"+new Date().getTime()+\"=1\";\r\n\t\t\t}\r\n\r\n\t\t\tt.open(method, url, async);\r\n\r\n\t\t\tif (headers){\r\n\t\t\t\tfor (var key in headers)\r\n\t\t\t\t\tt.setRequestHeader(key, headers[key]);\r\n\t\t\t} else if (method.toUpperCase() == \"POST\" || method == \"PUT\" || method == \"DELETE\") {\r\n\t\t\t\tt.setRequestHeader(\"Content-Type\", \"application/x-www-form-urlencoded\");\r\n\t\t\t} else if (method == \"GET\") {\r\n\t\t\t\tpostData = null;\r\n\t\t\t}\r\n\r\n\t\t\tt.setRequestHeader(\"X-Requested-With\", \"XMLHttpRequest\");\r\n\r\n\t\t\tt.send(postData);\r\n\r\n\t\t\tif (!async) return {xmlDoc:t, filePath:url}; // dhtmlx-compat, response.xmlDoc.responseXML/responseText\r\n\r\n\t\t},\r\n\t\turlSeparator: function(str){\r\n\t\t\tif (str.indexOf(\"?\") != -1)\r\n\t\t\t\treturn \"&\";\r\n\t\t\telse\r\n\t\t\t\treturn \"?\";\r\n\t\t}\r\n\t};\r\n};\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// c:/www-recent/gantt/sources/core/common/ajax.js\n// module id = 24\n// module chunks = 0","module.exports = function(gantt) {\r\n\tvar dateHelper = {\r\n\t\tinit: function () {\r\n\t\t\tvar locale = gantt.locale;\r\n\r\n\t\t\tvar s = locale.date.month_short;\r\n\t\t\tvar t = locale.date.month_short_hash = {};\r\n\t\t\tfor (var i = 0; i < s.length; i++)\r\n\t\t\t\tt[s[i]] = i;\r\n\r\n\t\t\tvar s = locale.date.month_full;\r\n\t\t\tvar t = locale.date.month_full_hash = {};\r\n\t\t\tfor (var i = 0; i < s.length; i++)\r\n\t\t\t\tt[s[i]] = i;\r\n\t\t},\r\n\t\tdate_part: function (date) {\r\n\t\t\tvar old = new Date(date);\r\n\t\t\tdate.setHours(0);\r\n\t\t\tthis.hour_start(date);\r\n\t\t\tif (date.getHours() && //shift to yesterday on dst\r\n\t\t\t\t(date.getDate() < old.getDate() || date.getMonth() < old.getMonth() || date.getFullYear() < old.getFullYear()))\r\n\t\t\t\tdate.setTime(date.getTime() + 60 * 60 * 1000 * (24 - date.getHours()));\r\n\t\t\treturn date;\r\n\t\t},\r\n\t\ttime_part: function (date) {\r\n\t\t\treturn (date.valueOf() / 1000 - date.getTimezoneOffset() * 60) % 86400;\r\n\t\t},\r\n\t\tweek_start: function (date) {\r\n\t\t\tvar shift = date.getDay();\r\n\t\t\tif (gantt.config.start_on_monday) {\r\n\t\t\t\tif (shift === 0) shift = 6;\r\n\t\t\t\telse shift--;\r\n\t\t\t}\r\n\t\t\treturn this.date_part(this.add(date, -1 * shift, \"day\"));\r\n\t\t},\r\n\t\tmonth_start: function (date) {\r\n\t\t\tdate.setDate(1);\r\n\t\t\treturn this.date_part(date);\r\n\t\t},\r\n\t\tquarter_start: function (date) {\r\n\t\t\tthis.month_start(date);\r\n\t\t\tvar m = date.getMonth(),\r\n\t\t\t\tres_month;\r\n\r\n\t\t\tif (m >= 9) {\r\n\t\t\t\tres_month = 9;\r\n\t\t\t} else if (m >= 6) {\r\n\t\t\t\tres_month = 6;\r\n\t\t\t} else if (m >= 3) {\r\n\t\t\t\tres_month = 3;\r\n\t\t\t} else {\r\n\t\t\t\tres_month = 0;\r\n\t\t\t}\r\n\r\n\t\t\tdate.setMonth(res_month);\r\n\t\t\treturn date;\r\n\t\t},\r\n\t\tyear_start: function (date) {\r\n\t\t\tdate.setMonth(0);\r\n\t\t\treturn this.month_start(date);\r\n\t\t},\r\n\t\tday_start: function (date) {\r\n\t\t\treturn this.date_part(date);\r\n\t\t},\r\n\t\thour_start: function (date) {\r\n\t\t\tif (date.getMinutes())\r\n\t\t\t\tdate.setMinutes(0);\r\n\t\t\tthis.minute_start(date);\r\n\r\n\t\t\treturn date;\r\n\t\t},\r\n\t\tminute_start: function (date) {\r\n\t\t\tif (date.getSeconds())\r\n\t\t\t\tdate.setSeconds(0);\r\n\t\t\tif (date.getMilliseconds())\r\n\t\t\t\tdate.setMilliseconds(0);\r\n\t\t\treturn date;\r\n\t\t},\r\n\t\t_add_days: function (date, inc) {\r\n\t\t\tvar ndate = new Date(date.valueOf());\r\n\r\n\t\t\tndate.setDate(ndate.getDate() + inc);\r\n\t\t\tif (inc >= 0 && (!date.getHours() && ndate.getHours()) &&//shift to yesterday on dst\r\n\t\t\t\t(ndate.getDate() <= date.getDate() || ndate.getMonth() < date.getMonth() || ndate.getFullYear() < date.getFullYear()))\r\n\t\t\t\tndate.setTime(ndate.getTime() + 60 * 60 * 1000 * (24 - ndate.getHours()));\r\n\t\t\treturn ndate;\r\n\t\t},\r\n\r\n\t\tadd: function (date, inc, mode) {\r\n\t\t\t/*jsl:ignore*/\r\n\t\t\tvar ndate = new Date(date.valueOf());\r\n\t\t\tswitch (mode) {\r\n\t\t\t\tcase \"day\":\r\n\t\t\t\t\tndate = this._add_days(ndate, inc);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase \"week\":\r\n\t\t\t\t\tndate = this._add_days(ndate, inc * 7);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase \"month\":\r\n\t\t\t\t\tndate.setMonth(ndate.getMonth() + inc);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase \"year\":\r\n\t\t\t\t\tndate.setYear(ndate.getFullYear() + inc);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase \"hour\":\r\n\t\t\t\t\t/*\r\n\t\t\t\t\t\tadding hours/minutes via setHour(getHour() + inc) gives weird result when\r\n\t\t\t\t\t\tadding one hour to the time before switch to a Daylight Saving time\r\n\r\n\t\t\t\t\t\texample: //Sun Mar 30 2014 01:00:00 GMT+0100 (W. Europe Standard Time)\r\n\t\t\t\t\t\tnew Date(2014, 02, 30, 1).setHours(2)\r\n\t\t\t\t\t\t>>Sun Mar 30 2014 01:00:00 GMT+0100 (W. Europe Standard Time)\r\n\r\n\t\t\t\t\t\tsetTime seems working as expected\r\n\t\t\t\t\t */\r\n\t\t\t\t\tndate.setTime(ndate.getTime() + inc * 60 * 60 * 1000);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase \"minute\":\r\n\r\n\t\t\t\t\tndate.setTime(ndate.getTime() + inc * 60 * 1000);\r\n\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tdefault:\r\n\t\t\t\t\treturn this[\"add_\" + mode](date, inc, mode);\r\n\t\t\t}\r\n\t\t\treturn ndate;\r\n\t\t\t/*jsl:end*/\r\n\t\t},\r\n\t\tadd_quarter: function (date, inc) {\r\n\t\t\treturn this.add(date, inc * 3, \"month\");\r\n\t\t},\r\n\r\n\t\tto_fixed: function (num) {\r\n\t\t\tif (num < 10) return \"0\" + num;\r\n\t\t\treturn num;\r\n\t\t},\r\n\t\tcopy: function (date) {\r\n\t\t\treturn new Date(date.valueOf());\r\n\t\t},\r\n\t\tdate_to_str: function (format, utc) {\r\n\t\t\tformat = format.replace(/%[a-zA-Z]/g, function (a) {\r\n\t\t\t\tswitch (a) {\r\n\t\t\t\t\tcase \"%d\":\r\n\t\t\t\t\t\treturn \"\\\"+to_fixed(date.getDate())+\\\"\";\r\n\t\t\t\t\tcase \"%m\":\r\n\t\t\t\t\t\treturn \"\\\"+to_fixed((date.getMonth()+1))+\\\"\";\r\n\t\t\t\t\tcase \"%j\":\r\n\t\t\t\t\t\treturn \"\\\"+date.getDate()+\\\"\";\r\n\t\t\t\t\tcase \"%n\":\r\n\t\t\t\t\t\treturn \"\\\"+(date.getMonth()+1)+\\\"\";\r\n\t\t\t\t\tcase \"%y\":\r\n\t\t\t\t\t\treturn \"\\\"+to_fixed(date.getFullYear()%100)+\\\"\";\r\n\t\t\t\t\tcase \"%Y\":\r\n\t\t\t\t\t\treturn \"\\\"+date.getFullYear()+\\\"\";\r\n\t\t\t\t\tcase \"%D\":\r\n\t\t\t\t\t\treturn \"\\\"+locale.date.day_short[date.getDay()]+\\\"\";\r\n\t\t\t\t\tcase \"%l\":\r\n\t\t\t\t\t\treturn \"\\\"+locale.date.day_full[date.getDay()]+\\\"\";\r\n\t\t\t\t\tcase \"%M\":\r\n\t\t\t\t\t\treturn \"\\\"+locale.date.month_short[date.getMonth()]+\\\"\";\r\n\t\t\t\t\tcase \"%F\":\r\n\t\t\t\t\t\treturn \"\\\"+locale.date.month_full[date.getMonth()]+\\\"\";\r\n\t\t\t\t\tcase \"%h\":\r\n\t\t\t\t\t\treturn \"\\\"+to_fixed((date.getHours()+11)%12+1)+\\\"\";\r\n\t\t\t\t\tcase \"%g\":\r\n\t\t\t\t\t\treturn \"\\\"+((date.getHours()+11)%12+1)+\\\"\";\r\n\t\t\t\t\tcase \"%G\":\r\n\t\t\t\t\t\treturn \"\\\"+date.getHours()+\\\"\";\r\n\t\t\t\t\tcase \"%H\":\r\n\t\t\t\t\t\treturn \"\\\"+to_fixed(date.getHours())+\\\"\";\r\n\t\t\t\t\tcase \"%i\":\r\n\t\t\t\t\t\treturn \"\\\"+to_fixed(date.getMinutes())+\\\"\";\r\n\t\t\t\t\tcase \"%a\":\r\n\t\t\t\t\t\treturn \"\\\"+(date.getHours()>11?\\\"pm\\\":\\\"am\\\")+\\\"\";\r\n\t\t\t\t\tcase \"%A\":\r\n\t\t\t\t\t\treturn \"\\\"+(date.getHours()>11?\\\"PM\\\":\\\"AM\\\")+\\\"\";\r\n\t\t\t\t\tcase \"%s\":\r\n\t\t\t\t\t\treturn \"\\\"+to_fixed(date.getSeconds())+\\\"\";\r\n\t\t\t\t\tcase \"%W\":\r\n\t\t\t\t\t\treturn \"\\\"+to_fixed(getISOWeek(date))+\\\"\";\r\n\t\t\t\t\tdefault:\r\n\t\t\t\t\t\treturn a;\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\tif (utc) format = format.replace(/date\\.get/g, \"date.getUTC\");\r\n\t\t\tvar dateToStr = new Function(\"date\", \"to_fixed\", \"locale\", \"getISOWeek\", \"return \\\"\" + format + \"\\\";\");\r\n\r\n\t\t\treturn function (date) {\r\n\t\t\t\treturn dateToStr(date, dateHelper.to_fixed, gantt.locale, dateHelper.getISOWeek);\r\n\t\t\t};\r\n\t\t},\r\n\t\tstr_to_date: function (format, utc) {\r\n\t\t\tvar splt = \"var temp=date.match(/[a-zA-Z]+|[0-9]+/g);\";\r\n\t\t\tvar mask = format.match(/%[a-zA-Z]/g);\r\n\t\t\tfor (var i = 0; i < mask.length; i++) {\r\n\t\t\t\tswitch (mask[i]) {\r\n\t\t\t\t\tcase \"%j\":\r\n\t\t\t\t\tcase \"%d\":\r\n\t\t\t\t\t\tsplt += \"set[2]=temp[\" + i + \"]||1;\";\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase \"%n\":\r\n\t\t\t\t\tcase \"%m\":\r\n\t\t\t\t\t\tsplt += \"set[1]=(temp[\" + i + \"]||1)-1;\";\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase \"%y\":\r\n\t\t\t\t\t\tsplt += \"set[0]=temp[\" + i + \"]*1+(temp[\" + i + \"]>50?1900:2000);\";\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase \"%g\":\r\n\t\t\t\t\tcase \"%G\":\r\n\t\t\t\t\tcase \"%h\":\r\n\t\t\t\t\tcase \"%H\":\r\n\t\t\t\t\t\tsplt += \"set[3]=temp[\" + i + \"]||0;\";\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase \"%i\":\r\n\t\t\t\t\t\tsplt += \"set[4]=temp[\" + i + \"]||0;\";\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase \"%Y\":\r\n\t\t\t\t\t\tsplt += \"set[0]=temp[\" + i + \"]||0;\";\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase \"%a\":\r\n\t\t\t\t\tcase \"%A\":\r\n\t\t\t\t\t\tsplt += \"set[3]=set[3]%12+((temp[\" + i + \"]||'').toLowerCase()=='am'?0:12);\";\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase \"%s\":\r\n\t\t\t\t\t\tsplt += \"set[5]=temp[\" + i + \"]||0;\";\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase \"%M\":\r\n\t\t\t\t\t\tsplt += \"set[1]=locale.date.month_short_hash[temp[\" + i + \"]]||0;\";\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase \"%F\":\r\n\t\t\t\t\t\tsplt += \"set[1]=locale.date.month_full_hash[temp[\" + i + \"]]||0;\";\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tdefault:\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tvar code = \"set[0],set[1],set[2],set[3],set[4],set[5]\";\r\n\t\t\tif (utc) code = \" Date.UTC(\" + code + \")\";\r\n\t\t\tvar strToDate = new Function(\"date\", \"locale\", \"var set=[0,0,1,0,0,0]; \" + splt + \" return new Date(\" + code + \");\");\r\n\r\n\t\t\treturn function (dateString) {\r\n\t\t\t\treturn strToDate(dateString, gantt.locale);\r\n\t\t\t};\r\n\t\t},\r\n\t\tgetISOWeek: function (ndate) {\r\n\t\t\tif (!ndate) return false;\r\n\t\t\tvar nday = ndate.getDay();\r\n\t\t\tif (nday === 0) {\r\n\t\t\t\tnday = 7;\r\n\t\t\t}\r\n\t\t\tvar first_thursday = new Date(ndate.valueOf());\r\n\t\t\tfirst_thursday.setDate(ndate.getDate() + (4 - nday));\r\n\t\t\tvar year_number = first_thursday.getFullYear(); // year of the first Thursday\r\n\t\t\tvar ordinal_date = Math.round((first_thursday.getTime() - new Date(year_number, 0, 1).getTime()) / 86400000); //ordinal date of the first Thursday - 1 (so not really ordinal date)\r\n\t\t\tvar week_number = 1 + Math.floor(ordinal_date / 7);\r\n\t\t\treturn week_number;\r\n\t\t},\r\n\t\tgetUTCISOWeek: function (ndate) {\r\n\t\t\treturn this.getISOWeek(ndate);\r\n\t\t},\r\n\t\tconvert_to_utc: function (date) {\r\n\t\t\treturn new Date(date.getUTCFullYear(), date.getUTCMonth(), date.getUTCDate(), date.getUTCHours(), date.getUTCMinutes(), date.getUTCSeconds());\r\n\t\t},\r\n\t\tparseDate: function (date, format) {\r\n\t\t\t// raw date may be of type string, number (timestamp) or something else\r\n\t\t\t// do not check for instanceof Date explicitly, since we may swap native date with different date implementation at some point\r\n\t\t\tif (date && !date.getFullYear) {\r\n\t\t\t\tif (gantt.defined(format)) {\r\n\t\t\t\t\tif (typeof(format) == \"string\")\r\n\t\t\t\t\t\tformat = gantt.defined(gantt.templates[format]) ? gantt.templates[format] : gantt.date.str_to_date(format);\r\n\t\t\t\t\telse\r\n\t\t\t\t\t\tformat = gantt.templates.xml_date;\r\n\t\t\t\t}\r\n\t\t\t\tif (date)\r\n\t\t\t\t\tdate = format(date);\r\n\t\t\t\telse\r\n\t\t\t\t\tdate = null;\r\n\t\t\t}\r\n\t\t\treturn date;\r\n\t\t}\r\n\t};\r\n\treturn dateHelper;\r\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// c:/www-recent/gantt/sources/core/common/date.js\n// module id = 25\n// module chunks = 0","var eventable = require(\"../../utils/eventable\");\r\nvar utils = require(\"../../utils/utils\");\r\nvar timeout = require(\"../../utils/timeout\");\r\n\r\nmodule.exports = function(gantt){\r\n\tfunction DnD(obj, config) {\r\n\t\tthis._obj = obj;\r\n\t\tif (config) {\r\n\t\t\tthis._settings = config;\r\n\t\t}\r\n\t\teventable(this);\r\n\r\n\t\tvar inputMethods = this.getInputMethods();\r\n\r\n\t\tthis._drag_start_timer = null;\r\n\t\tgantt.attachEvent(\"onGanttScroll\", utils.bind(function (left, top) {\r\n\t\t\tthis.clearDragTimer();\r\n\t\t}, this));\r\n\r\n\t\tfor(var i = 0; i < inputMethods.length; i++){\r\n\t\t\t(utils.bind(function(input){\r\n\r\n\t\t\t\tutils.event(obj, input.down, utils.bind(function (e) {\r\n\t\t\t\t\tconfig.original_target = {target: e.target || e.srcElement};\r\n\t\t\t\t\tif (gantt.config.touch) {\r\n\t\t\t\t\t\tthis.clearDragTimer();\r\n\r\n\t\t\t\t\t\tthis._drag_start_timer = setTimeout(utils.bind(function () {\r\n\t\t\t\t\t\t\tthis.dragStart(obj, e, input);\r\n\t\t\t\t\t\t}, this), gantt.config.touch_drag);\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse {\r\n\t\t\t\t\t\tthis.dragStart(obj, e, input);\r\n\t\t\t\t\t}\r\n\t\t\t\t}, this));\r\n\r\n\t\t\t\tutils.event(document.body, input.up, utils.bind(function (e) {\r\n\t\t\t\t\tthis.clearDragTimer();\r\n\t\t\t\t}, this));\r\n\r\n\t\t\t}, this))(inputMethods[i]);\r\n\t\t}\r\n\t}\r\n\r\n\tDnD.prototype = {\r\n\t\ttraceDragEvents: function (domElement, inputMethod) {\r\n\t\t\tvar mousemove = utils.bind(function (e) {\r\n\t\t\t\treturn this.dragMove(domElement, e, inputMethod.accessor);\r\n\t\t\t}, this);\r\n\t\t\tvar scroll = utils.bind(function (e) {\r\n\t\t\t\treturn this.dragScroll(domElement, e);\r\n\t\t\t}, this);\r\n\r\n\t\t\tvar limited_mousemove = utils.bind(function (e) {\r\n\t\t\t\tif (e && e.preventDefault) //Cancel default action on DND\r\n\t\t\t\t\te.preventDefault();\r\n\t\t\t\t(e || event).cancelBubble = true;\r\n\t\t\t\tif (utils.defined(this.config.updates_per_second)) {\r\n\t\t\t\t\tif (!timeout(this, this.config.updates_per_second))\r\n\t\t\t\t\t\treturn true;\r\n\t\t\t\t}\r\n\t\t\t\treturn mousemove(e);\r\n\t\t\t}, this);\r\n\r\n\t\t\tvar mouseup = utils.bind(function (e) {\r\n\t\t\t\tutils.eventRemove(document.body, inputMethod.move, limited_mousemove);\r\n\t\t\t\tutils.eventRemove(document.body, inputMethod.up, mouseup);\r\n\t\t\t\treturn this.dragEnd(domElement);\r\n\t\t\t}, this);\r\n\r\n\r\n\t\t\tutils.event(document.body, inputMethod.move, limited_mousemove);\r\n\t\t\tutils.event(document.body, inputMethod.up, mouseup);\r\n\t\t},\r\n\t\tcheckPositionChange: function (pos) {\r\n\t\t\tvar diff_x = pos.x - this.config.pos.x;\r\n\t\t\tvar diff_y = pos.y - this.config.pos.y;\r\n\t\t\tvar distance = Math.sqrt(Math.pow(Math.abs(diff_x), 2) + Math.pow(Math.abs(diff_y), 2));\r\n\r\n\t\t\tif (distance > this.config.sensitivity) {\r\n\t\t\t\treturn true;\r\n\t\t\t} else {\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t},\r\n\t\tinitDnDMarker: function () {\r\n\t\t\t// create dnd placeholder and put it in dom\r\n\t\t\tvar marker = this.config.marker = document.createElement(\"div\");\r\n\t\t\tmarker.className = \"gantt_drag_marker\";\r\n\t\t\tmarker.innerHTML = \"Dragging object\";\r\n\t\t\tdocument.body.appendChild(marker);\r\n\t\t},\r\n\t\tbackupEventTarget: function (domEvent, getEvent) {\r\n\t\t\tif (!gantt.config.touch) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\t// keep original event target in DOM in order to keep dnd on touchmove event\r\n\t\t\tvar e = getEvent(domEvent);\r\n\r\n\t\t\tvar el = e.target || e.srcElement;\r\n\t\t\tvar copy = el.cloneNode(true);\r\n\t\t\t//this.config.target.target = copy;\r\n\t\t\tthis.config.original_target = {target: copy};\r\n\t\t\tthis.config.backup_element = el;\r\n\t\t\tel.parentNode.appendChild(copy);\r\n\r\n\t\t\tel.style.display = \"none\";\r\n\t\t\tdocument.body.appendChild(el);\r\n\t\t},\r\n\t\tgetInputMethods: function () {\r\n\t\t\t// bind actions to browser events\r\n\t\t\tvar inputMethods = [];\r\n\r\n\t\t\tinputMethods.push({\r\n\t\t\t\t\"move\": \"mousemove\",\r\n\t\t\t\t\"down\": \"mousedown\",\r\n\t\t\t\t\"up\": \"mouseup\",\r\n\t\t\t\t\"accessor\": function (e) {\r\n\t\t\t\t\treturn e;\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\tif (gantt.config.touch) {\r\n\r\n\t\t\t\tvar touchEventsSupported = true;\r\n\t\t\t\ttry{\r\n\t\t\t\t\tdocument.createEvent(\"TouchEvent\");\r\n\t\t\t\t}catch (e){\r\n\t\t\t\t\ttouchEventsSupported = false;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif(touchEventsSupported){\r\n\t\t\t\t\tinputMethods.push({\r\n\t\t\t\t\t\t\"move\": \"touchmove\",\r\n\t\t\t\t\t\t\"down\": \"touchstart\",\r\n\t\t\t\t\t\t\"up\": \"touchend\",\r\n\t\t\t\t\t\t\"accessor\": function (ev) {\r\n\t\t\t\t\t\t\tif (ev.touches && ev.touches.length > 1) return null;\r\n\t\t\t\t\t\t\tif (ev.touches[0])\r\n\t\t\t\t\t\t\t\treturn {\r\n\t\t\t\t\t\t\t\t\ttarget: document.elementFromPoint(ev.touches[0].clientX, ev.touches[0].clientY),\r\n\t\t\t\t\t\t\t\t\tpageX: ev.touches[0].pageX,\r\n\t\t\t\t\t\t\t\t\tpageY: ev.touches[0].pageY,\r\n\t\t\t\t\t\t\t\t\tclientX: ev.touches[0].clientX,\r\n\t\t\t\t\t\t\t\t\tclientY: ev.touches[0].clientY\r\n\t\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\t\telse\r\n\t\t\t\t\t\t\t\treturn ev;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t}else if(window.navigator.pointerEnabled){\r\n\t\t\t\t\tinputMethods.push({\r\n\t\t\t\t\t\t\"move\": \"pointermove\",\r\n\t\t\t\t\t\t\"down\": \"pointerdown\",\r\n\t\t\t\t\t\t\"up\": \"pointerup\",\r\n\t\t\t\t\t\t\"accessor\": function (ev) {\r\n\t\t\t\t\t\t\tif (ev.pointerType == \"mouse\") return null;\r\n\t\t\t\t\t\t\treturn ev;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\r\n\t\t\t\t}else if (window.navigator.msPointerEnabled){\r\n\t\t\t\t\tinputMethods.push({\r\n\t\t\t\t\t\t\"move\": \"MSPointerMove\",\r\n\t\t\t\t\t\t\"down\": \"MSPointerDown\",\r\n\t\t\t\t\t\t\"up\": \"MSPointerUp\",\r\n\t\t\t\t\t\t\"accessor\": function (ev) {\r\n\t\t\t\t\t\t\tif (ev.pointerType == ev.MSPOINTER_TYPE_MOUSE) return null;\r\n\t\t\t\t\t\t\treturn ev;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\treturn inputMethods;\r\n\t\t},\r\n\t\tclearDragTimer: function () {\r\n\t\t\tif (this._drag_start_timer) {\r\n\t\t\t\tclearTimeout(this._drag_start_timer);\r\n\t\t\t\tthis._drag_start_timer = null;\r\n\t\t\t}\r\n\t\t},\r\n\t\tdragStart: function (obj, e, inputMethod) {\r\n\t\t\tthis.config = {\r\n\t\t\t\tobj: obj,\r\n\t\t\t\tmarker: null,\r\n\t\t\t\tstarted: false,\r\n\t\t\t\tpos: this.getPosition(e),\r\n\t\t\t\tsensitivity: 4\r\n\t\t\t};\r\n\t\t\tif (this._settings)\r\n\t\t\t\tutils.mixin(this.config, this._settings, true);\r\n\r\n\r\n\t\t\tthis.traceDragEvents(obj, inputMethod);\r\n\r\n\t\t\tgantt._prevent_touch_scroll = true;\r\n\t\t\tdocument.body.className += \" gantt_noselect\";\r\n\r\n\t\t\tif (gantt.config.touch) {\r\n\t\t\t\tthis.dragMove(obj, e, inputMethod.accessor);\r\n\t\t\t}\r\n\r\n\t\t},\r\n\t\tdragMove: function (obj, e, getEvent) {\r\n\t\t\tvar source = getEvent(e);\r\n\t\t\tif (!source) return;\r\n\r\n\t\t\tif (!this.config.marker && !this.config.started) {\r\n\t\t\t\tvar pos = this.getPosition(source);\r\n\r\n\t\t\t\tif (gantt.config.touch || this.checkPositionChange(pos)) {\r\n\t\t\t\t\t// real drag starts here,\r\n\t\t\t\t\t// when user moves mouse at first time after onmousedown\r\n\t\t\t\t\tthis.config.started = true;\r\n\t\t\t\t\tthis.config.ignore = false;\r\n\t\t\t\t\tif (this.callEvent(\"onBeforeDragStart\", [obj, this.config.original_target]) === false) {\r\n\t\t\t\t\t\tthis.config.ignore = true;\r\n\t\t\t\t\t\treturn true;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthis.backupEventTarget(e, getEvent);\r\n\t\t\t\t\tthis.initDnDMarker();\r\n\t\t\t\t\tgantt._touch_feedback();\r\n\t\t\t\t\tthis.callEvent(\"onAfterDragStart\", [obj, this.config.original_target]);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.config.ignore = true;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\r\n\t\t\tif (!this.config.ignore) {\r\n\t\t\t\tsource.pos = this.getPosition(source);\r\n\t\t\t\tthis.config.marker.style.left = source.pos.x + \"px\";\r\n\t\t\t\tthis.config.marker.style.top = source.pos.y + \"px\";\r\n\t\t\t\tthis.callEvent(\"onDragMove\", [obj, source]);\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\tdragEnd: function (obj) {\r\n\t\t\tvar target = this.config.backup_element;\r\n\t\t\tif (target && target.parentNode) {\r\n\t\t\t\ttarget.parentNode.removeChild(target);\r\n\t\t\t}\r\n\t\t\tgantt._prevent_touch_scroll = false;\r\n\t\t\tif (this.config.marker) {\r\n\t\t\t\tthis.config.marker.parentNode.removeChild(this.config.marker);\r\n\t\t\t\tthis.config.marker = null;\r\n\r\n\t\t\t\tthis.callEvent(\"onDragEnd\", []);\r\n\t\t\t}\r\n\t\t\tdocument.body.className = document.body.className.replace(\" gantt_noselect\", \"\");\r\n\t\t},\r\n\r\n\t\tgetPosition: function (e) {\r\n\t\t\tvar x = 0, y = 0;\r\n\t\t\te = e || window.event;\r\n\t\t\tif (e.pageX || e.pageY) {\r\n\t\t\t\tx = e.pageX;\r\n\t\t\t\ty = e.pageY;\r\n\t\t\t} else if (e.clientX || e.clientY) {\r\n\t\t\t\tx = e.clientX + document.body.scrollLeft + document.documentElement.scrollLeft;\r\n\t\t\t\ty = e.clientY + document.body.scrollTop + document.documentElement.scrollTop;\r\n\t\t\t}\r\n\t\t\treturn {x: x, y: y};\r\n\t\t}\r\n\t};\r\n\r\n\treturn DnD;\r\n};\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// c:/www-recent/gantt/sources/core/common/dnd.js\n// module id = 26\n// module chunks = 0","/*\r\n %d - the day as a number with a leading zero ( 01 to 31 );\r\n %j - the day as a number without a leading zero ( 1 to 31 );\r\n %D - the day as an abbreviation ( Sun to Sat );\r\n %l - the day as a full name ( Sunday to Saturday );\r\n %W - the ISO-8601 week number of the year. Weeks start on Monday; 1)\r\n %m - the month as a number without a leading zero ( 1 to 12 );\r\n %n - the month as a number with a leading zero ( 01 to 12);\r\n %M - the month as an abbreviation ( Jan to Dec );\r\n %F - the month as a full name ( January to December );\r\n %y - the year as a two-digit number ( 00 to 99 );\r\n %Y - the year as a four-digit number ( 19009999 );\r\n %h - the hour based on the 12-hour clock ( 00 to 11 );\r\n %H - the hour based on the 24-hour clock ( 00 to 23 );\r\n %i - the minute as a number with a leading zero ( 00 to 59 );\r\n %s - the second as a number without a leading zero ( 00 to 59 ); 2)\r\n %a - displays am (for times from midnight until noon) and pm (for times from noon until midnight);\r\n %A - displays AM (for times from midnight until noon) and PM (for times from noon until midnight).\r\n\r\n */\r\n\r\nmodule.exports = function(gantt) {\r\n\r\n\tvar regTemplates = {};\r\n\r\n\tfunction initTemplate(name, initial, template_name) {\r\n\t\ttemplate_name = template_name || name;\r\n\t\tvar config = gantt.config,\r\n\t\t\ttemplates = gantt.templates;\r\n\r\n\t\tif (gantt.config[name] && regTemplates[template_name] != config[name]) {\r\n\t\t\tif (!(initial && templates[template_name])) {\r\n\t\t\t\ttemplates[template_name] = gantt.date.date_to_str(config[name]);\r\n\t\t\t\tregTemplates[template_name] = config[name];\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tfunction initTemplates() {\r\n\t\tvar labels = gantt.locale.labels;\r\n\t\tlabels.gantt_save_btn = labels.icon_save;\r\n\t\tlabels.gantt_cancel_btn = labels.icon_cancel;\r\n\t\tlabels.gantt_delete_btn = labels.icon_delete;\r\n\r\n\r\n\t\tvar date = gantt.date;\r\n\r\n\t\t//build configuration based templates\r\n\t\tvar d = date.date_to_str;\r\n\t\tvar c = gantt.config;\r\n\t\tinitTemplate(\"date_scale\", true, undefined, gantt.config, gantt.templates);\r\n\t\tinitTemplate(\"date_grid\", true, \"grid_date_format\", gantt.config, gantt.templates);\r\n\t\tinitTemplate(\"task_date\", true, undefined, gantt.config, gantt.templates);\r\n\r\n\t\tgantt.mixin(gantt.templates, {\r\n\t\t\txml_date: date.str_to_date(c.xml_date, c.server_utc),\r\n\t\t\txml_format: d(c.xml_date, c.server_utc),\r\n\t\t\tapi_date: date.str_to_date(c.api_date),\r\n\t\t\tprogress_text: function (start, end, task) {\r\n\t\t\t\treturn \"\";\r\n\t\t\t},\r\n\t\t\tgrid_header_class: function (column, config) {\r\n\t\t\t\treturn \"\";\r\n\t\t\t},\r\n\r\n\t\t\ttask_text: function (start, end, task) {\r\n\t\t\t\treturn task.text;\r\n\t\t\t},\r\n\t\t\ttask_class: function (start, end, task) {\r\n\t\t\t\treturn \"\";\r\n\t\t\t},\r\n\t\t\tgrid_row_class: function (start, end, task) {\r\n\t\t\t\treturn \"\";\r\n\t\t\t},\r\n\t\t\ttask_row_class: function (start, end, task) {\r\n\t\t\t\treturn \"\";\r\n\t\t\t},\r\n\t\t\ttask_cell_class: function (item, date) {\r\n\t\t\t\treturn \"\";\r\n\t\t\t},\r\n\t\t\tscale_cell_class: function (date) {\r\n\t\t\t\treturn \"\";\r\n\t\t\t},\r\n\t\t\tscale_row_class: function (date) {\r\n\t\t\t\treturn \"\";\r\n\t\t\t},\r\n\r\n\t\t\tgrid_indent: function (item) {\r\n\t\t\t\treturn \"<div class='gantt_tree_indent'></div>\";\r\n\t\t\t},\r\n\t\t\tgrid_folder: function (item) {\r\n\t\t\t\treturn \"<div class='gantt_tree_icon gantt_folder_\" + (item.$open ? \"open\" : \"closed\") + \"'></div>\";\r\n\t\t\t},\r\n\t\t\tgrid_file: function (item) {\r\n\t\t\t\treturn \"<div class='gantt_tree_icon gantt_file'></div>\";\r\n\t\t\t},\r\n\t\t\tgrid_open: function (item) {\r\n\t\t\t\treturn \"<div class='gantt_tree_icon gantt_\" + (item.$open ? \"close\" : \"open\") + \"'></div>\";\r\n\t\t\t},\r\n\t\t\tgrid_blank: function (item) {\r\n\t\t\t\treturn \"<div class='gantt_tree_icon gantt_blank'></div>\";\r\n\t\t\t},\r\n\t\t\tdate_grid: function (date, item) {\r\n\t\t\t\tif (item && gantt.isUnscheduledTask(item) && gantt.config.show_unscheduled) {\r\n\t\t\t\t\treturn gantt.templates.task_unscheduled_time(item);\r\n\t\t\t\t} else {\r\n\t\t\t\t\treturn gantt.templates.grid_date_format(date);\r\n\t\t\t\t}\r\n\t\t\t},\r\n\r\n\t\t\ttask_time: function (start, end, ev) {\r\n\t\t\t\tif (gantt.isUnscheduledTask(ev) && gantt.config.show_unscheduled) {\r\n\t\t\t\t\treturn gantt.templates.task_unscheduled_time(ev);\r\n\t\t\t\t} else {\r\n\t\t\t\t\treturn gantt.templates.task_date(start) + \" - \" + gantt.templates.task_date(end);\r\n\t\t\t\t}\r\n\t\t\t},\r\n\r\n\t\t\ttask_unscheduled_time: function (task) {\r\n\t\t\t\treturn \"\";\r\n\t\t\t},\r\n\r\n\t\t\ttime_picker: d(c.time_picker),\r\n\t\t\tlink_class: function (link) {\r\n\t\t\t\treturn \"\";\r\n\t\t\t},\r\n\t\t\tlink_description: function (link) {\r\n\t\t\t\tvar from = gantt.getTask(link.source),\r\n\t\t\t\t\tto = gantt.getTask(link.target);\r\n\r\n\t\t\t\treturn \"<b>\" + from.text + \"</b> &ndash;  <b>\" + to.text + \"</b>\";\r\n\t\t\t},\r\n\r\n\t\t\tdrag_link: function (from, from_start, to, to_start) {\r\n\t\t\t\tfrom = gantt.getTask(from);\r\n\t\t\t\tvar labels = gantt.locale.labels;\r\n\r\n\t\t\t\tvar text = \"<b>\" + from.text + \"</b> \" + (from_start ? labels.link_start : labels.link_end) + \"<br/>\";\r\n\t\t\t\tif (to) {\r\n\t\t\t\t\tto = gantt.getTask(to);\r\n\t\t\t\t\ttext += \"<b> \" + to.text + \"</b> \" + (to_start ? labels.link_start : labels.link_end) + \"<br/>\";\r\n\t\t\t\t}\r\n\t\t\t\treturn text;\r\n\t\t\t},\r\n\t\t\tdrag_link_class: function (from, from_start, to, to_start) {\r\n\t\t\t\tvar add = \"\";\r\n\r\n\t\t\t\tif (from && to) {\r\n\t\t\t\t\tvar allowed = gantt.isLinkAllowed(from, to, from_start, to_start);\r\n\t\t\t\t\tadd = \" \" + (allowed ? \"gantt_link_allow\" : \"gantt_link_deny\");\r\n\t\t\t\t}\r\n\r\n\t\t\t\treturn \"gantt_link_tooltip\" + add;\r\n\t\t\t},\r\n\r\n\t\t\t/* used for aria-labels of bar elements and for tooltip.js */\r\n\t\t\ttooltip_date_format: date.date_to_str(\"%Y-%m-%d\"),\r\n\t\t\ttooltip_text: function (start, end, event) {\r\n\t\t\t\treturn \"<b>Task:</b> \" + event.text + \"<br/><b>Start date:</b> \" + gantt.templates.tooltip_date_format(start) + \"<br/><b>End date:</b> \" + gantt.templates.tooltip_date_format(end);\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\treturn {\r\n\t\tinitTemplates: initTemplates,\r\n\t\tinitTemplate: initTemplate\r\n\t};\r\n\r\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// c:/www-recent/gantt/sources/core/common/templates.js\n// module id = 27\n// module chunks = 0","var utils = require(\"../../utils/utils\");\r\n\r\nvar StateService = (function(){\r\n\tvar stateProviders = {};\r\n\r\n\tfunction getState(){\r\n\t\tvar res = {};\r\n\t\tfor(var i in stateProviders){\r\n\t\t\tutils.mixin(res, stateProviders[i](), true);\r\n\t\t}\r\n\t\treturn res;\r\n\t}\r\n\r\n\tfunction registerProvider(name, provider){\r\n\t\tstateProviders[name] = provider;\r\n\t}\r\n\r\n\tfunction unregisterProvider(name){\r\n\t\tdelete stateProviders[name];\r\n\t}\r\n\r\n\treturn {\r\n\t\tgetState: getState,\r\n\t\tregisterProvider: registerProvider,\r\n\t\tunregisterProvider: unregisterProvider\r\n\t};\r\n});\r\n\r\nmodule.exports = StateService;\r\n\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// c:/www-recent/gantt/sources/core/common/state.js\n// module id = 28\n// module chunks = 0","var utils = require(\"../utils/utils\");\r\nvar domHelpers = require(\"../utils/dom_helpers\");\r\n\r\nmodule.exports = function(gantt) {\r\n\r\n\tvar _dhx_msg_cfg = null;\r\n\r\n\tfunction callback(config, result) {\r\n\t\tvar usercall = config.callback;\r\n\t\tmodalBox.hide(config.box);\r\n\r\n\t\t_dhx_msg_cfg = config.box = null;\r\n\t\tif (usercall)\r\n\t\t\tusercall(result);\r\n\t}\r\n\r\n\tfunction modal_key(e) {\r\n\t\tif (_dhx_msg_cfg) {\r\n\t\t\te = e || event;\r\n\t\t\tvar code = e.which || event.keyCode;\r\n\t\t\tvar preventDefault = false;\r\n\r\n\t\t\tif (messageBox.keyboard) {\r\n\t\t\t\tif (code == 13 || code == 32) {\r\n\t\t\t\t\t// default behavior is to confirm/submit popup on space/enter\r\n\t\t\t\t\t// if browser focus is set on button element - do button click instead of default behavior\r\n\t\t\t\t\tvar target = e.target || e.srcElement;\r\n\t\t\t\t\tif (domHelpers.getClassName(target).indexOf(\"gantt_popup_button\") > -1 && target.click) {\r\n\t\t\t\t\t\ttarget.click();\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tcallback(_dhx_msg_cfg, true);\r\n\t\t\t\t\t\tpreventDefault = true;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (code == 27) {\r\n\t\t\t\t\tcallback(_dhx_msg_cfg, false);\r\n\t\t\t\t\tpreventDefault = true;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tif (preventDefault) {\r\n\t\t\t\tif (e.preventDefault)\r\n\t\t\t\t\te.preventDefault();\r\n\t\t\t\treturn !(e.cancelBubble = true);\r\n\t\t\t}\r\n\t\t\treturn;\r\n\t\t}\r\n\t}\r\n\r\n\tif (document.attachEvent)\r\n\t\tdocument.attachEvent(\"onkeydown\", modal_key);\r\n\telse\r\n\t\tdocument.addEventListener(\"keydown\", modal_key, true);\r\n\r\n\tfunction modality(mode) {\r\n\t\tif (!modality.cover) {\r\n\t\t\tmodality.cover = document.createElement(\"DIV\");\r\n\t\t\t//necessary for IE only\r\n\t\t\tmodality.cover.onkeydown = modal_key;\r\n\t\t\tmodality.cover.className = \"dhx_modal_cover\";\r\n\t\t\tdocument.body.appendChild(modality.cover);\r\n\t\t}\r\n\t\tvar height = document.body.scrollHeight;\r\n\t\tmodality.cover.style.display = mode ? \"inline-block\" : \"none\";\r\n\t}\r\n\r\n\tfunction button(text, className, result) {\r\n\t\tvar buttonAriaAttrs = gantt._waiAria.messageButtonAttrString(text);\r\n\t\tvar button_css = \"gantt_\" + className.toLowerCase().replace(/ /g, \"_\") + \"_button\" + \" dhtmlx_\" + className.toLowerCase().replace(/ /g, \"_\") + \"_button\"; // dhtmlx_ok_button, dhtmlx_click_me_button\r\n\t\treturn \"<div \" + buttonAriaAttrs + \" class='gantt_popup_button dhtmlx_popup_button \" + button_css + \"' result='\" + result + \"' ><div>\" + text + \"</div></div>\";\r\n\t}\r\n\r\n\tfunction info(text) {\r\n\t\tif (!messageBox.area) {\r\n\t\t\tmessageBox.area = document.createElement(\"DIV\");\r\n\t\t\tmessageBox.area.className = \"gantt_message_area dhtmlx_message_area\";\r\n\t\t\tmessageBox.area.style[messageBox.position] = \"5px\";\r\n\t\t\tdocument.body.appendChild(messageBox.area);\r\n\t\t}\r\n\r\n\t\tmessageBox.hide(text.id);\r\n\t\tvar message = document.createElement(\"DIV\");\r\n\t\tmessage.innerHTML = \"<div>\" + text.text + \"</div>\";\r\n\t\tmessage.className = \"gantt-info dhtmlx-info gantt-\" + text.type + \" dhtmlx-\" + text.type;\r\n\t\tmessage.onclick = function () {\r\n\t\t\tmessageBox.hide(text.id);\r\n\t\t\ttext = null;\r\n\t\t};\r\n\r\n\t\tgantt._waiAria.messageInfoAttr(message);\r\n\r\n\t\tif (messageBox.position == \"bottom\" && messageBox.area.firstChild)\r\n\t\t\tmessageBox.area.insertBefore(message, messageBox.area.firstChild);\r\n\t\telse\r\n\t\t\tmessageBox.area.appendChild(message);\r\n\r\n\t\tif (text.expire > 0)\r\n\t\t\tmessageBox.timers[text.id] = window.setTimeout(function () {\r\n\t\t\t\tmessageBox.hide(text.id);\r\n\t\t\t}, text.expire);\r\n\r\n\t\tmessageBox.pull[text.id] = message;\r\n\t\tmessage = null;\r\n\r\n\t\treturn text.id;\r\n\t}\r\n\r\n\tfunction getFirstDefined() {\r\n\t\tvar values = [].slice.apply(arguments, [0]);\r\n\r\n\t\tfor (var i = 0; i < values.length; i++) {\r\n\t\t\tif (values[i]) {\r\n\t\t\t\treturn values[i];\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tfunction _boxStructure(config, ok, cancel) {\r\n\t\tvar box = document.createElement(\"DIV\");\r\n\r\n\t\tvar locale = gantt.locale;\r\n\r\n\t\tvar contentId = utils.uid();\r\n\t\tgantt._waiAria.messageModalAttr(box, contentId);\r\n\r\n\r\n\t\tbox.className = \" gantt_modal_box dhtmlx_modal_box gantt-\" + config.type + \" dhtmlx-\" + config.type;\r\n\t\tbox.setAttribute(\"dhxbox\", 1);\r\n\r\n\t\tvar inner = '';\r\n\r\n\t\tif (config.width)\r\n\t\t\tbox.style.width = config.width;\r\n\t\tif (config.height)\r\n\t\t\tbox.style.height = config.height;\r\n\t\tif (config.title)\r\n\t\t\tinner += '<div class=\"gantt_popup_title dhtmlx_popup_title\">' + config.title + '</div>';\r\n\t\tinner += '<div class=\"gantt_popup_text dhtmlx_popup_text\" id=\"' + contentId + '\"><span>' + (config.content ? '' : config.text) + '</span></div><div  class=\"gantt_popup_controls dhtmlx_popup_controls\">';\r\n\t\tif (ok)\r\n\t\t\tinner += button(getFirstDefined(config.ok, gantt.locale.labels.message_ok, \"OK\"), \"ok\", true);\r\n\t\tif (cancel)\r\n\t\t\tinner += button(getFirstDefined(config.cancel, gantt.locale.labels.message_cancel, \"Cancel\"), \"cancel\", false);\r\n\r\n\t\tif (config.buttons) {\r\n\t\t\tfor (var i = 0; i < config.buttons.length; i++) {\r\n\t\t\t\tvar btn = config.buttons[i];\r\n\t\t\t\tif (typeof btn == \"object\") {\r\n\t\t\t\t\t// Support { label:\"Save\", css:\"main_button\", value:\"save\" }\r\n\t\t\t\t\tvar label = btn.label;\r\n\t\t\t\t\tvar css = btn.css || (\"gantt_\" + btn.label.toLowerCase() + \"_button dhtmlx_\" + btn.label.toLowerCase() + \"_button\");\r\n\t\t\t\t\tvar value = btn.value || i;\r\n\t\t\t\t\tinner += button(label, css, value);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tinner += button(btn, btn, i);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tinner += '</div>';\r\n\t\tbox.innerHTML = inner;\r\n\r\n\t\tif (config.content) {\r\n\t\t\tvar node = config.content;\r\n\t\t\tif (typeof node == \"string\")\r\n\t\t\t\tnode = document.getElementById(node);\r\n\t\t\tif (node.style.display == 'none')\r\n\t\t\t\tnode.style.display = \"\";\r\n\t\t\tbox.childNodes[config.title ? 1 : 0].appendChild(node);\r\n\t\t}\r\n\r\n\t\tbox.onclick = function (e) {\r\n\t\t\te = e || event;\r\n\t\t\tvar source = e.target || e.srcElement;\r\n\t\t\tif (!source.className) source = source.parentNode;\r\n\t\t\tif (source.className.split(\" \")[0] == \"gantt_popup_button\") {\r\n\t\t\t\tvar result = source.getAttribute(\"result\");\r\n\t\t\t\tresult = (result == \"true\") || (result == \"false\" ? false : result);\r\n\t\t\t\tcallback(config, result);\r\n\t\t\t}\r\n\t\t};\r\n\t\tconfig.box = box;\r\n\t\tif (ok || cancel)\r\n\t\t\t_dhx_msg_cfg = config;\r\n\r\n\t\treturn box;\r\n\t}\r\n\r\n\tfunction _createBox(config, ok, cancel) {\r\n\t\tvar box = config.tagName ? config : _boxStructure(config, ok, cancel);\r\n\r\n\t\tif (!config.hidden)\r\n\t\t\tmodality(true);\r\n\t\tdocument.body.appendChild(box);\r\n\t\tvar x = Math.abs(Math.floor(((window.innerWidth || document.documentElement.offsetWidth) - box.offsetWidth) / 2));\r\n\t\tvar y = Math.abs(Math.floor(((window.innerHeight || document.documentElement.offsetHeight) - box.offsetHeight) / 2));\r\n\t\tif (config.position == \"top\")\r\n\t\t\tbox.style.top = \"-3px\";\r\n\t\telse\r\n\t\t\tbox.style.top = y + 'px';\r\n\t\tbox.style.left = x + 'px';\r\n\t\t//necessary for IE only\r\n\t\tbox.onkeydown = modal_key;\r\n\r\n\t\tmodalBox.focus(box);\r\n\r\n\t\tif (config.hidden)\r\n\t\t\tmodalBox.hide(box);\r\n\r\n\t\tgantt.callEvent(\"onMessagePopup\", [box]);\r\n\t\treturn box;\r\n\t}\r\n\r\n\tfunction alertPopup(config) {\r\n\t\treturn _createBox(config, true, false);\r\n\t}\r\n\r\n\tfunction confirmPopup(config) {\r\n\t\treturn _createBox(config, true, true);\r\n\t}\r\n\r\n\tfunction boxPopup(config) {\r\n\t\treturn _createBox(config);\r\n\t}\r\n\r\n\tfunction box_params(text, type, callback) {\r\n\t\tif (typeof text != \"object\") {\r\n\t\t\tif (typeof type == \"function\") {\r\n\t\t\t\tcallback = type;\r\n\t\t\t\ttype = \"\";\r\n\t\t\t}\r\n\t\t\ttext = {text: text, type: type, callback: callback};\r\n\t\t}\r\n\t\treturn text;\r\n\t}\r\n\r\n\tfunction params(text, type, expire, id) {\r\n\t\tif (typeof text != \"object\")\r\n\t\t\ttext = {text: text, type: type, expire: expire, id: id};\r\n\t\ttext.id = text.id || utils.uid();\r\n\t\ttext.expire = text.expire || messageBox.expire;\r\n\t\treturn text;\r\n\t}\r\n\r\n\tvar alertBox = function () {\r\n\t\tvar text = box_params.apply(this, arguments);\r\n\t\ttext.type = text.type || \"confirm\";\r\n\t\treturn alertPopup(text);\r\n\t};\r\n\tvar confirmBox = function () {\r\n\t\tvar text = box_params.apply(this, arguments);\r\n\t\ttext.type = text.type || \"alert\";\r\n\t\treturn confirmPopup(text);\r\n\t};\r\n\tvar modalBox = function () {\r\n\t\tvar text = box_params.apply(this, arguments);\r\n\t\ttext.type = text.type || \"alert\";\r\n\t\treturn boxPopup(text);\r\n\t};\r\n\tmodalBox.hide = function (node) {\r\n\t\twhile (node && node.getAttribute && !node.getAttribute(\"dhxbox\"))\r\n\t\t\tnode = node.parentNode;\r\n\t\tif (node) {\r\n\t\t\tnode.parentNode.removeChild(node);\r\n\t\t\tmodality(false);\r\n\r\n\t\t\tgantt.callEvent(\"onAfterMessagePopup\", [node]);\r\n\t\t}\r\n\t};\r\n\r\n\tvar domHelpers = require(\"../utils/dom_helpers\");\r\n\r\n\tmodalBox.focus = function (node) {\r\n\t\tsetTimeout(function () {\r\n\t\t\tvar focusable = domHelpers.getFocusableNodes(node);\r\n\t\t\tif (focusable.length) {\r\n\t\t\t\tif (focusable[0].focus) focusable[0].focus();\r\n\t\t\t}\r\n\t\t}, 1);\r\n\t};\r\n\r\n\tvar messageBox = function (text, type, expire, id) {\r\n\t\ttext = params.apply(this, arguments);\r\n\t\ttext.type = text.type || \"info\";\r\n\r\n\t\tvar subtype = text.type.split(\"-\")[0];\r\n\t\tswitch (subtype) {\r\n\t\t\tcase \"alert\":\r\n\t\t\t\treturn alertPopup(text);\r\n\t\t\tcase \"confirm\":\r\n\t\t\t\treturn confirmPopup(text);\r\n\t\t\tcase \"modalbox\":\r\n\t\t\t\treturn boxPopup(text);\r\n\t\t\tdefault:\r\n\t\t\t\treturn info(text);\r\n\t\t}\r\n\t};\r\n\r\n\tmessageBox.seed = (new Date()).valueOf();\r\n\tmessageBox.uid = utils.uid;\r\n\tmessageBox.expire = 4000;\r\n\tmessageBox.keyboard = true;\r\n\tmessageBox.position = \"top\";\r\n\tmessageBox.pull = {};\r\n\tmessageBox.timers = {};\r\n\r\n\tmessageBox.hideAll = function () {\r\n\t\tfor (var key in messageBox.pull)\r\n\t\t\tmessageBox.hide(key);\r\n\t};\r\n\tmessageBox.hide = function (id) {\r\n\t\tvar obj = messageBox.pull[id];\r\n\t\tif (obj && obj.parentNode) {\r\n\t\t\twindow.setTimeout(function () {\r\n\t\t\t\tobj.parentNode.removeChild(obj);\r\n\t\t\t\tobj = null;\r\n\t\t\t}, 2000);\r\n\t\t\tobj.className += \" hidden\";\r\n\r\n\t\t\tif (messageBox.timers[id])\r\n\t\t\t\twindow.clearTimeout(messageBox.timers[id]);\r\n\t\t\tdelete messageBox.pull[id];\r\n\t\t}\r\n\t};\r\n\r\n\treturn {\r\n\t\talert: alertBox,\r\n\t\tconfirm: confirmBox,\r\n\t\tmessage: messageBox,\r\n\t\tmodalbox: modalBox\r\n\t};\r\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// c:/www-recent/gantt/sources/core/message.js\n// module id = 29\n// module chunks = 0","var uiFactory = require(\"./ui_factory\"),\r\n\tmouseEvents = require(\"./mouse\"),\r\n\tcreateLayers = require(\"./gantt_layers\"),\r\n\tCell = require(\"./layout/cell\"),\r\n\tLayout = require(\"./layout/layout\"),\r\n\tViewLayout = require(\"./layout/view_layout\"),\r\n\tViewCell = require(\"./layout/view_cell\"),\r\n\tResizer = require(\"./layout/resizer_cell\"),\r\n\tScrollbar = require(\"./layout/scrollbar_cell\"),\r\n\tTimeline = require(\"./timeline/timeline\"),\r\n\tGrid = require(\"./grid/grid\");\r\n\r\nvar renderTaskBar = require(\"./render/task_bar_render\"),\r\n\trenderTaskBg = require(\"./render/task_bg_render\"),\r\n\trenderLink = require(\"./render/link_render\"),\r\n\tgridRenderer = require(\"./render/task_grid_line_render\");\r\n\r\nvar mainGridInitializer = require(\"./grid/main_grid_initializer\");\r\nvar mainTimelineInitializer = require(\"./timeline/main_timeline_initializer\");\r\nvar mainLayoutInitializer = require(\"./main_layout_initializer\");\r\n\r\nfunction initUI(gantt){\r\n\tfunction inheritGridConfig(id){\r\n\t\treturn {\r\n\t\t\t//width: gantt.config.grid_width\r\n\t\t};\r\n\t}\r\n\r\n\tfunction attachInitializer(view, initializer){\r\n\t\tvar ext = initializer(gantt);\r\n\t\tif(ext.onCreated)\r\n\t\t\text.onCreated(view);\r\n\t\tview.attachEvent(\"onReady\", function(){\r\n\t\t\tif(ext.onInitialized)\r\n\t\t\t\text.onInitialized(view);\r\n\t\t});\r\n\t\tview.attachEvent(\"onDestroy\", function(){\r\n\t\t\tif(ext.onDestroyed)\r\n\t\t\t\text.onDestroyed(view);\r\n\t\t});\r\n\t}\r\n\r\n\tvar factory = uiFactory.createFactory(gantt);\r\n\tfactory.registerView(\"cell\", Cell);\r\n\tfactory.registerView(\"resizer\", Resizer);\r\n\tfactory.registerView(\"scrollbar\", Scrollbar);\r\n\tfactory.registerView(\"layout\", Layout, function(view){\r\n\t\tvar id = view.$config ? view.$config.id : null;\r\n\t\tif(id === \"main\"){\r\n\t\t\tattachInitializer(view, mainLayoutInitializer);\r\n\t\t}\r\n\t});\r\n\tfactory.registerView(\"viewcell\", ViewCell);\r\n\tfactory.registerView(\"multiview\", ViewLayout);\r\n\tfactory.registerView(\"timeline\", Timeline, function(view){\r\n\t\tvar id = view.$config ? view.$config.id : null;\r\n\t\tif(id === \"timeline\" || view.$config.bind == \"task\"){\r\n\t\t\tattachInitializer(view, mainTimelineInitializer);\r\n\t\t}\r\n\t});\r\n\tfactory.registerView(\"grid\", Grid, function(view){\r\n\t\tvar id = view.$config ? view.$config.id : null;\r\n\t\tif(id === \"grid\" || view.$config.bind == \"task\"){\r\n\t\t\tattachInitializer(view, mainGridInitializer);\r\n\t\t}\r\n\t});\r\n\r\n\tvar layersEngine = createLayers(gantt);\r\n\r\n\treturn {\r\n\t\tfactory:factory,\r\n\t\tmouseEvents: mouseEvents.init(gantt),\r\n\t\tlayersApi: layersEngine.init(),\r\n\t\trender:{\r\n\t\t\tgridLine: gridRenderer(gantt),\r\n\t\t\ttaskBg: renderTaskBg(gantt),\r\n\t\t\ttaskBar: renderTaskBar(gantt),\r\n\t\t\tlink: renderLink(gantt)\r\n\t\t},\r\n\t\tlayersService: {\r\n\t\t\tgetDataRender: function(name){\r\n\t\t\t\treturn layersEngine.getDataRender(name, gantt);\r\n\t\t\t},\r\n\t\t\tcreateDataRender: function(config){\r\n\t\t\t\treturn layersEngine.createDataRender(config, gantt);\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n}\r\n\r\nmodule.exports = {\r\n\tinit: initUI\r\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// c:/www-recent/gantt/sources/core/ui/index.js\n// module id = 30\n// module chunks = 0","var domHelpers = require(\"../../utils/dom_helpers\");\r\n\r\nvar createMouseHandler = (function(domHelpers) {\r\n\treturn function (gantt) {\r\n\t\tvar eventHandlers = {\r\n\t\t\t\"click\": {},\r\n\t\t\t\"doubleclick\": {},\r\n\t\t\t\"contextMenu\": {}\r\n\t\t};\r\n\r\n\t\tfunction addEventTarget(event, className, handler, root) {\r\n\t\t\tif(!eventHandlers[event][className]){\r\n\t\t\t\teventHandlers[event][className] = [];\r\n\t\t\t}\r\n\r\n\t\t\teventHandlers[event][className].push({\r\n\t\t\t\thandler: handler,\r\n\t\t\t\troot: root\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\tfunction callHandler(eventName, className, root, args) {\r\n\t\t\tvar handlers = eventHandlers[eventName][className];\r\n\t\t\tif(handlers){\r\n\t\t\t\tfor(var i = 0; i < handlers.length; i++){\r\n\t\t\t\t\tif(!root || root == handlers[i].root == root){\r\n\t\t\t\t\t\thandlers[i].handler.apply(this, args);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tfunction onClick(e) {\r\n\t\t\te = e || window.event;\r\n\t\t\tvar trg = e.target || e.srcElement;\r\n\t\t\tvar id = gantt.locate(e);\r\n\r\n\t\t\tvar res = true;\r\n\t\t\tif (id !== null) {\r\n\t\t\t\tres = !gantt.checkEvent(\"onTaskClick\") || gantt.callEvent(\"onTaskClick\", [id, e]);\r\n\t\t\t} else {\r\n\t\t\t\tgantt.callEvent(\"onEmptyClick\", [e]);\r\n\t\t\t}\r\n\r\n\t\t\tvar targets = eventHandlers.click;\r\n\r\n\t\t\tif (res) {\r\n\t\t\t\tvar default_action = findEventHandler(e, trg, targets, id);\r\n\t\t\t\tif (!default_action)\r\n\t\t\t\t\treturn;\r\n\r\n\t\t\t\tif (id && gantt.getTask(id) && gantt.config.select_task) {\r\n\t\t\t\t\tgantt.selectTask(id);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tfunction onContextMenu(e) {\r\n\t\t\te = e || window.event;\r\n\t\t\tvar src = e.target || e.srcElement,\r\n\t\t\t\ttaskId = gantt.locate(src),\r\n\t\t\t\tlinkId = gantt.locate(src, gantt.config.link_attribute);\r\n\r\n\t\t\tvar res = !gantt.checkEvent(\"onContextMenu\") || gantt.callEvent(\"onContextMenu\", [taskId, linkId, e]);\r\n\t\t\tif (!res) {\r\n\t\t\t\tif (e.preventDefault)\r\n\t\t\t\t\te.preventDefault();\r\n\t\t\t\telse\r\n\t\t\t\t\te.returnValue = false;\r\n\t\t\t}\r\n\t\t\treturn res;\r\n\t\t}\r\n\r\n\t\tfunction findEventHandler(e, trg, hash, id) {\r\n\t\t\tvar res = true;\r\n\t\t\twhile (trg) {\r\n\t\t\t\tvar css = domHelpers.getClassName(trg);\r\n\t\t\t\tif (css) {\r\n\t\t\t\t\tcss = css.split(\" \");\r\n\t\t\t\t\tfor (var i = 0; i < css.length; i++) {\r\n\t\t\t\t\t\tif (!css[i]) continue;\r\n\t\t\t\t\t\tif (hash[css[i]]) {\r\n\t\t\t\t\t\t\tvar delegateHandlers = hash[css[i]];\r\n\r\n\t\t\t\t\t\t\tfor(var h = 0; h < delegateHandlers.length; h++){\r\n\t\t\t\t\t\t\t\tif(delegateHandlers[h].root){\r\n\t\t\t\t\t\t\t\t\tif(!domHelpers.isChildOf(trg, delegateHandlers[h].root)){\r\n\t\t\t\t\t\t\t\t\t\tcontinue;\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tvar handler = delegateHandlers[h].handler.call(gantt, e, id, trg);\r\n\t\t\t\t\t\t\t\tres = res && !(typeof handler != \"undefined\" && handler !== true);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\ttrg = trg.parentNode;\r\n\t\t\t}\r\n\t\t\treturn res;\r\n\t\t}\r\n\r\n\t\tfunction onDoubleClick(e) {\r\n\t\t\te = e || window.event;\r\n\t\t\tvar trg = e.target || e.srcElement;\r\n\t\t\tvar id = gantt.locate(e);\r\n\t\t\tvar res = !gantt.checkEvent(\"onTaskDblClick\") || gantt.callEvent(\"onTaskDblClick\", [id, e]);\r\n\t\t\tif (res) {\r\n\t\t\t\tvar default_action = findEventHandler(e, trg, eventHandlers.doubleclick, id);\r\n\t\t\t\tif (!default_action)\r\n\t\t\t\t\treturn;\r\n\r\n\t\t\t\tif (id !== null && gantt.getTask(id)) {\r\n\t\t\t\t\tif (res && gantt.config.details_on_dblclick) {\r\n\t\t\t\t\t\tgantt.showLightbox(id);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tfunction onMouseMove(e) {\r\n\t\t\tif (gantt.checkEvent(\"onMouseMove\")) {\r\n\t\t\t\tvar id = gantt.locate(e);\r\n\t\t\t\tgantt._last_move_event = e;\r\n\t\t\t\tgantt.callEvent(\"onMouseMove\", [id, e]);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tfunction detach(eventName, className, handler, root) {\r\n\t\t\tif (eventHandlers[eventName]) {\r\n\t\t\t\tfor(var i = 0; i < eventHandlers[eventName].length; i++){\r\n\t\t\t\t\tif(eventHandlers[eventName][i].root == root){\r\n\t\t\t\t\t\teventHandlers[eventName].splice(i, 1);\r\n\t\t\t\t\t\ti--;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tvar globalHandlers = [];\r\n\r\n\t\tfunction reset(node){\r\n\r\n\t\t\tfor(var i = 0; i < globalHandlers.length; i++){\r\n\t\t\t\tgantt.eventRemove(globalHandlers[i][0], globalHandlers[i][1], globalHandlers[i][2]);\r\n\t\t\t}\r\n\t\t\tglobalHandlers = [];\r\n\r\n\t\t\tif(node){\r\n\t\t\t\tglobalHandlers.push([node, \"click\", onClick]);\r\n\t\t\t\tglobalHandlers.push([node, \"dblclick\", onDoubleClick]);\r\n\t\t\t\tglobalHandlers.push([node, \"mousemove\", onMouseMove]);\r\n\t\t\t\tglobalHandlers.push([node, \"contextmenu\", onContextMenu]);\r\n\t\t\t\tfor(var i = 0; i < globalHandlers.length; i++){\r\n\t\t\t\t\tgantt.event(globalHandlers[i][0], globalHandlers[i][1], globalHandlers[i][2]);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\r\n\r\n\t\treturn {\r\n\t\t\treset: reset,\r\n\t\t\tglobal: function(event, classname, handler){\r\n\t\t\t\taddEventTarget(event, classname, handler, null);\r\n\t\t\t},\r\n\t\t\tdelegate: addEventTarget,\r\n\t\t\tdetach: detach,\r\n\t\t\tcallHandler: callHandler\r\n\t\t};\r\n\t};\r\n\r\n})(domHelpers);\r\n\r\n\r\nmodule.exports = {\r\n\tinit:createMouseHandler\r\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// c:/www-recent/gantt/sources/core/ui/mouse.js\n// module id = 31\n// module chunks = 0","var createLayerFactory = require(\"./render/layer_engine\");\r\n\r\nvar createLayerEngine = function(gantt){\r\n\tvar factory = createLayerFactory(gantt);\r\n\treturn {\r\n\t\tgetDataRender: function(name){\r\n\t\t\treturn gantt.$services.getService(\"layer:\" + name) || null;\r\n\t\t},\r\n\t\tcreateDataRender: function(config){\r\n\t\t\tvar name = config.name,\r\n\t\t\t\tdefaultContainer = config.defaultContainer,\r\n\t\t\t\tpreviusSiblingContainer = config.defaultContainerSibling;\r\n\r\n\t\t\tvar layers = factory.createGroup(\r\n\t\t\t\tdefaultContainer,\r\n\t\t\t\tpreviusSiblingContainer,\r\n\t\t\t\tfunction(item){\r\n\t\t\t\t\tif(layers.filters){\r\n\t\t\t\t\t\tfor(var i = 0; i < layers.filters.length; i++){\r\n\t\t\t\t\t\t\tif(layers.filters[i](item) === false){\r\n\t\t\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\treturn true;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t);\r\n\r\n\t\t\tgantt.$services.setService(\"layer:\" + name, function(){\r\n\t\t\t\treturn layers;\r\n\t\t\t});\r\n\r\n\t\t\tgantt.attachEvent(\"onGanttReady\", function () {\r\n\t\t\t\tlayers.addLayer();// init layers on start\r\n\t\t\t});\r\n\r\n\t\t\treturn layers;\r\n\t\t},\r\n\t\tinit: function(){\r\n\t\t\tvar taskLayers = this.createDataRender({\r\n\t\t\t\tname: \"task\",\r\n\t\t\t\tdefaultContainer: function(){return gantt.$task_data; },\r\n\t\t\t\tdefaultContainerSibling: function(){return gantt.$task_links; },\r\n\t\t\t\tfilter: function(item){\r\n\r\n\t\t\t\t}\r\n\t\t\t}, gantt);\r\n\r\n\t\t\tvar linkLayers = this.createDataRender({\r\n\t\t\t\tname: \"link\",\r\n\t\t\t\tdefaultContainer: function(){return gantt.$task_data; }\r\n\t\t\t}, gantt);\r\n\r\n\t\t\treturn {\r\n\t\t\t\taddTaskLayer: function(config){\r\n\t\t\t\t\treturn taskLayers.addLayer(config);\r\n\t\t\t\t},\r\n\r\n\t\t\t\t/*getTaskLayer: function(id){\r\n\t\t\t\t\treturn taskLayers.getLayer(id);\r\n\t\t\t\t},*/\r\n\r\n\t\t\t\t_getTaskLayers: function(){\r\n\t\t\t\t\treturn taskLayers.getLayers();\r\n\t\t\t\t},\r\n\t\t\t\tremoveTaskLayer: function(id){\r\n\t\t\t\t\ttaskLayers.removeLayer(id);\r\n\t\t\t\t},\r\n\t\t\t\t/*eachTaskLayer: function(code){\r\n\t\t\t\t\ttaskLayers.eachLayer(code);\r\n\t\t\t\t},*/\r\n\t\t\t\t_clearTaskLayers: function(){\r\n\t\t\t\t\ttaskLayers.clear();\r\n\t\t\t\t},\r\n\t\t\t\taddLinkLayer: function(config){\r\n\t\t\t\t\treturn linkLayers.addLayer(config);\r\n\t\t\t\t},\r\n\t\t\t\t/*getLinkLayer: function(id){\r\n\t\t\t\t\treturn linkLayers.getLayer(id);\r\n\t\t\t\t},*/\r\n\t\t\t\t_getLinkLayers: function(){\r\n\t\t\t\t\treturn linkLayers.getLayers();\r\n\t\t\t\t},\r\n\t\t\t\tremoveLinkLayer: function(id){\r\n\t\t\t\t\tlinkLayers.removeLayer(id);\r\n\t\t\t\t},\r\n\t\t\t\t/*eachLinkLayer: function(code){\r\n\t\t\t\t\tlinkLayers.eachLayer(code);\r\n\t\t\t\t},*/\r\n\t\t\t\t_clearLinkLayers: function(){\r\n\t\t\t\t\tlinkLayers.clear();\r\n\t\t\t\t}\r\n\t\t\t};\r\n\t\t}\r\n\t};\r\n};\r\n\r\nmodule.exports = createLayerEngine;\n\n\n//////////////////\n// WEBPACK FOOTER\n// c:/www-recent/gantt/sources/core/ui/gantt_layers.js\n// module id = 32\n// module chunks = 0","var renderFactoryProvider = require(\"./render_factory\");\r\nvar utils = require(\"../../../utils/utils\");\r\n\r\nvar layerFactory = function(gantt){\r\n\r\n\tvar renderFactory = renderFactoryProvider(gantt);\r\n\treturn {\r\n\tcreateGroup: function (get_container, rel_root, defaultFilters) {\r\n\r\n\t\treturn {\r\n\t\t\ttempCollection: [],\r\n\t\t\trenderers: {},\r\n\t\t\tcontainer: get_container,\r\n\t\t\tfilters: [],\r\n\t\t\tgetLayers: function () {\r\n\t\t\t\tvar res = [];\r\n\t\t\t\tfor (var i in this.renderers) {\r\n\t\t\t\t\tres.push(this.renderers[i]);\r\n\t\t\t\t}\r\n\t\t\t\treturn res;\r\n\t\t\t},\r\n\t\t\tgetLayer: function (id) {\r\n\t\t\t\treturn this.renderers[id];\r\n\t\t\t},\r\n\t\t\t_add: function (layer) {\r\n\t\t\t\tif (layer) {\r\n\t\t\t\t\tlayer.id = layer.id || utils.uid();\r\n\t\t\t\t\tthis.tempCollection.push(layer);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (!this.container()) return;\r\n\r\n\t\t\t\tvar container = this.container();\r\n\r\n\t\t\t\tvar pending = this.tempCollection;\r\n\t\t\t\tfor (var i = 0; i < pending.length; i++) {\r\n\t\t\t\t\tlayer = pending[i];\r\n\r\n\r\n\t\t\t\t\tvar node = layer.container,\r\n\t\t\t\t\t\tid = layer.id,\r\n\t\t\t\t\t\ttopmost = layer.topmost;\r\n\t\t\t\t\tif (!node.parentNode) {\r\n\t\t\t\t\t\t//insert on top or below the tasks\r\n\t\t\t\t\t\tif (topmost) {\r\n\t\t\t\t\t\t\tcontainer.appendChild(node);\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tvar rel = rel_root ? rel_root() : container.firstChild;\r\n\t\t\t\t\t\t\tif (rel)\r\n\t\t\t\t\t\t\t\tcontainer.insertBefore(node, rel);\r\n\t\t\t\t\t\t\telse\r\n\t\t\t\t\t\t\t\tcontainer.appendChild(node);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthis.renderers[id] = renderFactory.getRenderer(\r\n\t\t\t\t\t\tid,\r\n\t\t\t\t\t\tlayer,\r\n\t\t\t\t\t\tnode\r\n\t\t\t\t\t);\r\n\t\t\t\t\tthis.tempCollection.splice(i, 1);\r\n\t\t\t\t\ti--;\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\taddLayer: function (config) {\r\n\t\t\t\t//config = prepareConfig(config);\r\n\t\t\t\tif(config){\r\n\t\t\t\t\tif(typeof config == \"function\"){\r\n\t\t\t\t\t\tconfig = {renderer: config};\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif(config.filter === undefined){\r\n\t\t\t\t\t\tconfig.filter = mergeFilters(defaultFilters || []);\r\n\t\t\t\t\t}else if(config.filter instanceof Array){\r\n\t\t\t\t\t\tconfig.filter.push(defaultFilters);\r\n\t\t\t\t\t\tconfig.filter = mergeFilters(config.filter);\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif(!config.container){\r\n\t\t\t\t\t\tconfig.container = document.createElement(\"div\");\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tthis._add(config);\r\n\t\t\t\treturn (config ? config.id : undefined);\r\n\t\t\t},\r\n\t\t\teachLayer: function(code){\r\n\t\t\t\tfor (var i in this.renderers) {\r\n\t\t\t\t\tcode(this.renderers[i]);\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tremoveLayer: function (id) {\r\n\t\t\t\tthis.renderers[id].unload();\r\n\t\t\t\tdelete this.renderers[id];\r\n\t\t\t},\r\n\t\t\tclear: function () {\r\n\t\t\t\tfor (var i in this.renderers) {\r\n\t\t\t\t\tthis.renderers[i].unload();\r\n\t\t\t\t}\r\n\t\t\t\tthis.renderers = {};\r\n\t\t\t}//,\r\n\t\t\t//prepareConfig: prepareConfig\r\n\t\t};\r\n\t}\r\n};};\r\n\r\n\r\nfunction mergeFilters(filter_methods){\r\n\tif(!(filter_methods instanceof Array)){\r\n\t\tfilter_methods = Array.prototype.slice.call(arguments, 0);\r\n\t}\r\n\r\n\treturn function(obj){\r\n\t\tvar res = true;\r\n\t\tfor(var i = 0, len = filter_methods.length; i < len; i++){\r\n\t\t\tvar filter_method = filter_methods[i];\r\n\t\t\tif(filter_method){\r\n\t\t\t\tres = res && (filter_method(obj.id, obj) !== false);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn res;\r\n\t};\r\n}\r\n\r\n\r\nmodule.exports = layerFactory;\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// c:/www-recent/gantt/sources/core/ui/render/layer_engine.js\n// module id = 33\n// module chunks = 0","var rendererFactory = function(gantt){\r\n\tvar services = gantt.$services;\r\n\r\n\t//hash of dom elements is needed to redraw single bar/link\r\n\tvar task_area_pulls = {},\r\n\t\ttask_area_renderers = {};\r\n\r\n\tfunction getRenderer(id, layer, node) {\r\n\r\n\t\tif (task_area_renderers[id])\r\n\t\t\treturn task_area_renderers[id];\r\n\r\n\t\tif (!layer.renderer)\r\n\t\t\tgantt.assert(false, \"Invalid renderer call\");\r\n\r\n\t\tvar renderOne = function(item){\r\n\t\t\treturn layer.renderer.call(this, item, layer.host);\r\n\t\t} ;\r\n\r\n\t\tvar filter = layer.filter;\r\n\r\n\t\tif (node)\r\n\t\t\tnode.setAttribute(services.config().layer_attribute, true);\r\n\r\n\t\ttask_area_renderers[id] = {\r\n\t\t\trender_item: function (item, container) {\r\n\t\t\t\tcontainer = container || node;\r\n\r\n\t\t\t\tif (filter) {\r\n\t\t\t\t\tif (!filter(item)) {\r\n\t\t\t\t\t\tthis.remove_item(item.id);\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tvar dom = renderOne.call(gantt, item);\r\n\t\t\t\tthis.append(item, dom, container);\r\n\r\n\t\t\t},\r\n\r\n\t\t\tclear: function (container) {\r\n\t\t\t\tthis.rendered = task_area_pulls[id] = {};\r\n\t\t\t\tthis.clear_container(container);\r\n\t\t\t},\r\n\t\t\tclear_container: function (container) {\r\n\t\t\t\tcontainer = container || node;\r\n\t\t\t\tif (container)\r\n\t\t\t\t\tcontainer.innerHTML = \"\";\r\n\t\t\t},\r\n\t\t\trender_items: function (items, container) {\r\n\t\t\t\tcontainer = container || node;\r\n\r\n\t\t\t\tvar buffer = document.createDocumentFragment();\r\n\t\t\t\tthis.clear(container);\r\n\t\t\t\tfor (var i = 0, vis = items.length; i < vis; i++) {\r\n\t\t\t\t\tthis.render_item(items[i], buffer);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tcontainer.appendChild(buffer);\r\n\t\t\t},\r\n\t\t\tappend: function (item, node, container) {\r\n\t\t\t\tif (!node) {\r\n\t\t\t\t\tif (this.rendered[item.id]) {\r\n\t\t\t\t\t\tthis.remove_item(item.id);\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (this.rendered[item.id] && this.rendered[item.id].parentNode) {\r\n\t\t\t\t\tthis.replace_item(item.id, node);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tcontainer.appendChild(node);\r\n\t\t\t\t}\r\n\t\t\t\tthis.rendered[item.id] = node;\r\n\r\n\t\t\t},\r\n\t\t\treplace_item: function (item_id, newNode) {\r\n\t\t\t\tvar item = this.rendered[item_id];\r\n\t\t\t\tif (item && item.parentNode) {\r\n\t\t\t\t\titem.parentNode.replaceChild(newNode, item);\r\n\t\t\t\t}\r\n\t\t\t\tthis.rendered[item_id] = newNode;\r\n\t\t\t},\r\n\t\t\tremove_item: function (item_id) {\r\n\t\t\t\tthis.hide(item_id);\r\n\t\t\t\tdelete this.rendered[item_id];\r\n\t\t\t},\r\n\t\t\thide: function (item_id) {\r\n\t\t\t\tvar item = this.rendered[item_id];\r\n\t\t\t\tif (item && item.parentNode) {\r\n\t\t\t\t\titem.parentNode.removeChild(item);\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\trestore: function (item) {\r\n\t\t\t\tvar dom = this.rendered[item.id];\r\n\t\t\t\tif (dom) {\r\n\t\t\t\t\tif (!dom.parentNode) {\r\n\t\t\t\t\t\tthis.append(item, dom, node);\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.render_item(item, node);\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tchange_id: function (oldid, newid) {\r\n\t\t\t\tthis.rendered[newid] = this.rendered[oldid];\r\n\t\t\t\tdelete this.rendered[oldid];\r\n\t\t\t},\r\n\t\t\trendered: task_area_pulls[id],\r\n\t\t\tnode: node,\r\n\t\t\tunload: function () {\r\n\t\t\t\tthis.clear();\r\n\t\t\t\tdelete task_area_renderers[id];\r\n\t\t\t\tdelete task_area_pulls[id];\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\treturn task_area_renderers[id];\r\n\t}\r\n\r\n\r\n\tfunction clearRenderers() {\r\n\t\tfor (var i in task_area_renderers) {\r\n\t\t\tgetRenderer(i).unload();\r\n\t\t}\r\n\t}\r\n\r\n\treturn {\r\n\t\tgetRenderer: getRenderer,\r\n\t\tclearRenderers: clearRenderers\r\n\t};\r\n\r\n};\r\n\r\nmodule.exports = rendererFactory;\n\n\n//////////////////\n// WEBPACK FOOTER\n// c:/www-recent/gantt/sources/core/ui/render/render_factory.js\n// module id = 34\n// module chunks = 0","var __extends = require(\"../../../utils/extends\"),\r\n\tdomHelpers = require(\"../../../utils/dom_helpers\"),\r\n\tutils = require(\"../../../utils/utils\"),\r\n\tenv = require(\"../../../utils/env\"),\r\n\teventable = require(\"../../../utils/eventable\"),\r\n\tCell = require(\"./cell\");\r\n\r\nvar ScrollbarCell = (function (_super) {\r\n\t\"use strict\";\r\n\r\n\t__extends(ScrollbarCell, _super);\r\n\tfunction ScrollbarCell(parent, config, factory, gantt) {\r\n\r\n\t\tvar _this = _super.apply(this, arguments) || this;\r\n\t\tthis.$config = utils.mixin(config, {scroll: \"x\"});\r\n\t\t_this._scrollHorizontalHandler = utils.bind(_this._scrollHorizontalHandler, _this);\r\n\t\t_this._scrollVerticalHandler = utils.bind(_this._scrollVerticalHandler, _this);\r\n\t\t_this._outerScrollVerticalHandler = utils.bind(_this._outerScrollVerticalHandler, _this);\r\n\t\t_this._outerScrollHorizontalHandler = utils.bind(_this._outerScrollHorizontalHandler, _this);\r\n\t\t_this._mouseWheelHandler = utils.bind(_this._mouseWheelHandler, _this);\r\n\r\n\t\tthis.$config.hidden = true;\r\n\t\tvar size = gantt.config.scroll_size;\r\n\t\tif(this._isHorizontal()){\r\n\t\t\t_this.$config.height = size;\r\n\t\t\t_this.$parent.$config.height = size;\r\n\t\t}else{\r\n\t\t\t_this.$config.width = size;\r\n\t\t\t_this.$parent.$config.width = size;\r\n\t\t}\r\n\r\n\t\tthis.$config.scrollPosition = 0;\r\n\r\n\t\t_this.$name = \"scroller\";\r\n\t\treturn _this;\r\n\t}\r\n\r\n\tScrollbarCell.prototype.init = function(container){\r\n\t\tcontainer.innerHTML = this.$toHTML();\r\n\t\tthis.$view = container.firstChild;\r\n\r\n\t\tif(!this.$view){\r\n\t\t\tthis.init();\r\n\t\t}\r\n\t\tif(this._isVertical()){\r\n\t\t\tthis._initVertical();\r\n\t\t}else{\r\n\t\t\tthis._initHorizontal();\r\n\t\t}\r\n\t\tthis._initMouseWheel();\r\n\t\tthis._initLinkedViews();\r\n\t};\r\n\r\n\tScrollbarCell.prototype.$toHTML = function () {\r\n\t\tvar className = this._isHorizontal() ? \"gantt_hor_scroll\" : \"gantt_ver_scroll\";\r\n\t\treturn \"<div class='gantt_layout_cell \"+className+\"'><div style='\"+(this._isHorizontal() ? \"width:2000px\" : \"height:2000px\")+\"'></div></div>\";\r\n\t};\r\n\r\n\tScrollbarCell.prototype._getRootParent = function(){\r\n\t\tvar parent = this.$parent;\r\n\t\twhile(parent && parent.$parent){\r\n\t\t\tparent = parent.$parent;\r\n\t\t}\r\n\t\tif(parent){\r\n\t\t\treturn parent;\r\n\t\t}\r\n\t};\r\n\r\n\r\n\tfunction eachCell(root, res){\r\n\t\tres.push(root);\r\n\t\tif(root.$cells){\r\n\t\t\tfor(var i = 0; i < root.$cells.length; i++){\r\n\t\t\t\teachCell(root.$cells[i], res);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\tScrollbarCell.prototype._eachView = function(){\r\n\t\tvar res = [];\r\n\t\teachCell(this._getRootParent(), res);\r\n\t\treturn res;\r\n\t};\r\n\r\n\tScrollbarCell.prototype._getLinkedViews = function(){\r\n\t\tvar views = this._eachView();\r\n\t\tvar res = [];\r\n\t\tfor(var i = 0; i < views.length; i++){\r\n\t\t\tif(views[i].$config && ((this._isVertical() && views[i].$config.scrollY == this.$id) || (this._isHorizontal() && views[i].$config.scrollX == this.$id)) ){\r\n\t\t\t\tres.push(views[i]);\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn res;\r\n\t};\r\n\r\n\r\n\tScrollbarCell.prototype._initHorizontal = function(){\r\n\t\tthis.$scroll_hor = this.$view;\r\n\t\tutils.event(this.$view, \"scroll\", this._scrollHorizontalHandler);\r\n\r\n\t};\r\n\r\n\tScrollbarCell.prototype._initLinkedViews = function(){\r\n\t\tvar views = this._getLinkedViews();\r\n\t\tvar css = this._isVertical() ?\"gantt_layout_outer_scroll gantt_layout_outer_scroll_vertical\" : \"gantt_layout_outer_scroll gantt_layout_outer_scroll_horizontal\";\r\n\t\tfor(var i = 0; i < views.length; i++){\r\n\t\t\t//views[i].$config.css = [views[i].$config.css || \"\", css].join(\" \");\r\n\t\t\tdomHelpers.addClassName(views[i].$view || views[i].getNode(), css);\r\n\t\t}\r\n\t};\r\n\r\n\tScrollbarCell.prototype._initVertical = function(){\r\n\t\tthis.$scroll_ver = this.$view;\r\n\t\tutils.event(this.$view, \"scroll\", this._scrollVerticalHandler);\r\n\t};\r\n\r\n\tScrollbarCell.prototype._updateLinkedViews = function(){\r\n\t\tvar root = this._getRootParent();\r\n\t};\r\n\r\n\tScrollbarCell.prototype._initMouseWheel = function(){\r\n\t\tvar ff = env.isFF;\r\n\t\tif (ff)\r\n\t\t\tutils.event(this._getRootParent().$view, \"wheel\", this._mouseWheelHandler);\r\n\t\telse\r\n\t\t\tutils.event(this._getRootParent().$view, \"mousewheel\", this._mouseWheelHandler);\r\n\t};\r\n\r\n\r\n\r\n\r\n\tScrollbarCell.prototype.scrollHorizontally = function(left){\r\n\t\tif(this._scrolling) return;\r\n\t\tthis._scrolling = true;\r\n\r\n\t\tthis.$scroll_hor.scrollLeft = left;\r\n\t\tleft = this.$scroll_hor.scrollLeft;\r\n\r\n\t\tvar views = this._getLinkedViews();\r\n\t\tfor(var i = 0; i < views.length; i++){\r\n\t\t\tif(views[i].scrollTo){\r\n\t\t\t\tviews[i].scrollTo(left, undefined);\r\n\t\t\t}\r\n\t\t}\r\n\t\tvar oldSize = this.$config.scrollPosition;\r\n\t\tthis.$config.scrollPosition = left;\r\n\t\tthis.callEvent(\"onScroll\", [oldSize, left, this.$config.scroll]);\r\n\t\tthis._scrolling = false;\r\n\t};\r\n\tScrollbarCell.prototype.scrollVertically = function(top){\r\n\t\tif(this._scrolling) return;\r\n\t\tthis._scrolling = true;\r\n\r\n\t\tthis.$scroll_ver.scrollTop = top;\r\n\t\ttop = this.$scroll_ver.scrollTop;\r\n\r\n\t\tvar views = this._getLinkedViews();\r\n\r\n\t\tfor(var i = 0; i < views.length; i++){\r\n\t\t\tif(views[i].scrollTo){\r\n\t\t\t\tviews[i].scrollTo(undefined, top);\r\n\t\t\t}\r\n\t\t}\r\n\t\tvar oldSize = this.$config.scrollPosition;\r\n\t\tthis.$config.scrollPosition = top;\r\n\t\tthis.callEvent(\"onScroll\", [oldSize, top, this.$config.scroll]);\r\n\t\tthis._scrolling = false;\r\n\t};\r\n\r\n\tScrollbarCell.prototype._isVertical = function(){\r\n\t\treturn this.$config.scroll == \"y\";\r\n\t};\r\n\tScrollbarCell.prototype._isHorizontal = function(){\r\n\t\treturn this.$config.scroll == \"x\";\r\n\t};\r\n\tScrollbarCell.prototype._scrollHorizontalHandler = function (e) {\r\n\t\tif(this._isVertical() || this._scrolling){\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\t//in safari we can catch previous onscroll after setting new value from mouse-wheel event\r\n\t\t//set delay to prevent value drifiting\r\n\t\tif ((new Date()) - ( this._wheel_time || 0 ) < 100) return true;\r\n\t\tif (gantt._touch_scroll_active) return;\r\n\t\tvar left = this.$scroll_hor.scrollLeft;\r\n\r\n\t\tthis.scrollHorizontally(left);\r\n\r\n\t\tthis._oldLeft = this.$scroll_hor.scrollLeft;\r\n\t};\r\n\tScrollbarCell.prototype._outerScrollHorizontalHandler = function(e){\r\n\t\tif(this._isVertical()){\r\n\t\t\treturn;\r\n\t\t}\r\n\t};\r\n\r\n\tScrollbarCell.prototype.show = function(){\r\n\t\tthis.$parent.show();\r\n\t};\r\n\tScrollbarCell.prototype.hide = function(){\r\n\t\tthis.$parent.hide();\r\n\t};\r\n\r\n\tScrollbarCell.prototype._getScrollSize = function(){\r\n\t\tvar scrollSize = 0;\r\n\t\tvar outerSize = 0;\r\n\r\n\t\tvar linked = this._getLinkedViews();\r\n\t\tvar view;\r\n\t\tvar scrollProperty = this._isHorizontal() ? \"contentX\" : \"contentY\";\r\n\t\tvar outerProperty = this._isHorizontal() ? \"x\" : \"y\";\r\n\t\tfor(var i = 0; i < linked.length; i++){\r\n\t\t\tview = linked[i];\r\n\t\t\tif(!(view && view.$content && view.$content.getSize)) continue;\r\n\r\n\t\t\tvar sizes = view.$content.getSize();\r\n\r\n\t\t\tif(sizes[scrollProperty] > sizes[outerProperty] && sizes[scrollProperty] > scrollSize){\r\n\t\t\t\tscrollSize = sizes[scrollProperty];\r\n\t\t\t\touterSize = sizes[outerProperty];\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn {\r\n\t\t\touterScroll: outerSize,\r\n\t\t\tinnerScroll: scrollSize\r\n\t\t};\r\n\t};\r\n\r\n\tScrollbarCell.prototype.scroll = function(position){\r\n\t\tif(this._isHorizontal()){\r\n\t\t\tthis.scrollHorizontally(position);\r\n\t\t}else{\r\n\t\t\tthis.scrollVertically(position);\r\n\t\t}\r\n\t};\r\n\r\n\tScrollbarCell.prototype.getScrollState = function(){\r\n\t\treturn {\r\n\t\t\tvisible: this._isVisible(),\r\n\t\t\tdirection: this.$config.scroll,\r\n\t\t\tsize: this._isHorizontal() ? this.$config.width : this.$config.height,\r\n\t\t\tscrollSize: this.$config.scrollSize || 0,\r\n\t\t\tposition: this.$config.scrollPosition || 0\r\n\t\t};\r\n\t};\r\n\r\n\tScrollbarCell.prototype.setSize = function(width, height){\r\n\t\t_super.prototype.setSize.apply(this, arguments);\r\n\r\n\t\tvar scrollSizes = this._getScrollSize();\r\n\t\tif(scrollSizes.innerScroll && width > scrollSizes.outerScroll){\r\n\t\t\tscrollSizes.innerScroll += (width - scrollSizes.outerScroll);\r\n\t\t}\r\n\t\tthis.$config.scrollSize = scrollSizes.innerScroll;\r\n\r\n\t\tthis.$config.width = width;\r\n\t\tthis.$config.height = height;\r\n\t\tthis._setScrollSize(scrollSizes.innerScroll);\r\n\t};\r\n\r\n\tScrollbarCell.prototype._isVisible = function(){\r\n\t\treturn !!(this.$parent && this.$parent.$view.parentNode);\r\n\t};\r\n\r\n\tScrollbarCell.prototype.toggleVisibility = function(){\r\n\t\tvar scrollSizes = this._getScrollSize();\r\n\t\tif(!scrollSizes.innerScroll && (this.$parent && this.$parent.$view.parentNode)){\r\n\t\t\tthis.hide();\r\n\t\t}else if(scrollSizes.innerScroll && !(this.$parent && this.$parent.$view.parentNode)){\r\n\t\t\tthis.show();\r\n\t\t}\r\n\t};\r\n\r\n\tScrollbarCell.prototype._setScrollSize = function(size){\r\n\t\tvar property = this._isHorizontal() ? \"width\" : \"height\";\r\n\t\tvar scrollbar = this._isHorizontal() ? this.$scroll_hor : this.$scroll_ver;\r\n\r\n\t\tvar offset = 0;\r\n\t\tif(this._isVertical()){\r\n\t\t\tvar prev = null;\r\n\t\t\tvar cells = this.$parent.$parent.getCells();\r\n\r\n\t\t\tfor (var i = 0; i < cells.length; i++) {\r\n\t\t\t\tif (this.$parent === cells[i]) {\r\n\t\t\t\t\tprev = cells[i - 1];\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif(prev && (prev.$config.view == \"timeline\" || prev.$config.view == \"grid\")){\r\n\t\t\t\toffset = prev.$content.$getConfig().scale_height;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tvar node = scrollbar.firstChild;\r\n\r\n\t\tif(offset && this._isVertical()){\r\n\r\n\t\t\tscrollbar.style.height = (this.$config.height - offset) + \"px\";\r\n\t\t\tscrollbar.style.top = (offset-1) + \"px\";\r\n\t\t\tdomHelpers.addClassName(scrollbar, this.$parent._borders.top);\r\n\t\t}else{\r\n\t\t\tscrollbar.style.top = \"auto\";\r\n\t\t\tdomHelpers.removeClassName(scrollbar, this.$parent._borders.top);\r\n\t\t}\r\n\r\n\t\tnode.style[property] = size + \"px\";\r\n\t};\r\n\r\n\tScrollbarCell.prototype._scrollVerticalHandler = function (e) {\r\n\t\tif(this._scrollHorizontalHandler() || this._scrolling){\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tif (gantt._touch_scroll_active) return;\r\n\t\tvar top = this.$scroll_ver.scrollTop;\r\n\t\tvar prev = this._oldTop;\r\n\t\tif(top == prev) return;\r\n\r\n\t\tthis.scrollVertically(top);\r\n\r\n\t\tthis._oldTop = this.$scroll_ver.scrollTop;\r\n\r\n\t};\r\n\tScrollbarCell.prototype._outerScrollVerticalHandler = function(e){\r\n\t\tif(this._scrollHorizontalHandler()){\r\n\t\t\treturn;\r\n\t\t}\r\n\t};\r\n\r\n\tScrollbarCell.prototype._checkWheelTarget = function(targetNode){\r\n\t\tvar connectedViews = this._getLinkedViews().concat(this);\r\n\r\n\t\tfor(var i = 0; i < connectedViews.length; i++){\r\n\t\t\tvar node = connectedViews[i].$view;\r\n\t\t\tif(domHelpers.isChildOf(targetNode, node)){\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn false;\r\n\t};\r\n\r\n\tScrollbarCell.prototype._mouseWheelHandler = function(e){\r\n\t\tvar target = e.target || e.srcElement;\r\n\r\n\t\tif(!this._checkWheelTarget(target))\r\n\t\t\treturn;\r\n\r\n\t\tthis._wheel_time = new Date();\r\n\r\n\t\tvar res = {};\r\n\t\tvar ff = env.isFF;\r\n\t\tvar wx = ff ? (e.deltaX*-20) : e.wheelDeltaX*2;\r\n\t\tvar wy = ff ? (e.deltaY*-40) : e.wheelDelta;\r\n\r\n\t\tif(e.shiftKey && !(e.deltaX || e.wheelDeltaX)){\r\n\t\t\t// shift+mousewheel for horizontal scroll\r\n\t\t\twx = wy*2;\r\n\t\t\twy = 0;\r\n\t\t}\r\n\r\n\t\tif (wx && Math.abs(wx) > Math.abs(wy)){\r\n\t\t\tif(this._isVertical()){\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tif(res.x) return true;//no horisontal scroll, must not block scrolling\r\n\t\t\tif(!this.$scroll_hor || !this.$scroll_hor.offsetWidth) return true;\r\n\r\n\t\t\tvar dir  = wx/-40;\r\n\t\t\tvar oldLeft = this._oldLeft;\r\n\t\t\tvar left = oldLeft+dir*30;\r\n\t\t\tthis.scrollHorizontally(left);\r\n\t\t\tthis.$scroll_hor.scrollLeft = left;\r\n\t\t\t// not block scroll if position hasn't changed\r\n\t\t\tif(oldLeft == this.$scroll_hor.scrollLeft){\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\r\n\t\t\tthis._oldLeft = this.$scroll_hor.scrollLeft;\r\n\t\t} else {\r\n\t\t\tif(this._isHorizontal()){\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tif(res.y) return true;//no vertical scroll, must not block scrolling\r\n\t\t\tif(!this.$scroll_ver || !this.$scroll_ver.offsetHeight) return true;\r\n\r\n\t\t\tvar dir  = wy/-40;\r\n\t\t\tif (typeof wy == \"undefined\")\r\n\t\t\t\tdir = e.detail;\r\n\r\n\t\t\tvar oldTop = this._oldTop;\r\n\t\t\tvar top = this.$scroll_ver.scrollTop+dir*30;\r\n\r\n\t\t\t//if(!gantt.config.prevent_default_scroll &&\r\n\t\t\t//\t(gantt._cached_scroll_pos && ((gantt._cached_scroll_pos.y == top) || (gantt._cached_scroll_pos.y <= 0 && top <= 0)))) return true;\r\n\r\n\r\n\t\t\tthis.scrollVertically(top);\r\n\t\t\tthis.$scroll_ver.scrollTop = top;\r\n\r\n\t\t\t// not block scroll if position hasn't changed\r\n\t\t\tif(oldTop == this.$scroll_ver.scrollTop){\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t\tthis._oldTop = this.$scroll_ver.scrollTop;\r\n\t\t}\r\n\r\n\t\tif (e.preventDefault)\r\n\t\t\te.preventDefault();\r\n\t\te.cancelBubble=true;\r\n\t\treturn false;\r\n\t};\r\n\r\n\treturn ScrollbarCell;\r\n})(Cell);\r\n\r\nmodule.exports = ScrollbarCell;\n\n\n//////////////////\n// WEBPACK FOOTER\n// c:/www-recent/gantt/sources/core/ui/layout/scrollbar_cell.js\n// module id = 35\n// module chunks = 0","var ScaleHelper = require(\"./scales_ignore\");\r\nvar configurable = require(\"../configurable\");\r\nvar eventable = require(\"../../../utils/eventable\");\r\nvar utils = require(\"../../../utils/utils\");\r\n\r\nvar canvasRender = require(\"./tasks_canvas_render\");\r\n\r\nvar Timeline = function(parent, config, factory, gantt){\r\n\tthis.$config = utils.mixin({}, config || {});\r\n\tthis.$scaleHelper = new ScaleHelper(gantt);\r\n\tthis.$gantt = gantt;\r\n\teventable(this);\r\n\tconfigurable(this);\r\n};\r\n\r\nTimeline.prototype = {\r\n\tinit: function(container){\r\n\t\tcontainer.innerHTML += \"<div class='gantt_task' style='width:inherit;height:inherit;'></div>\";\r\n\t\tthis.$task = container.childNodes[0];\r\n\r\n\t\tthis.$task.innerHTML = \"<div class='gantt_task_scale'></div><div class='gantt_data_area'></div>\";\r\n\t\tthis.$task_scale = this.$task.childNodes[0];\r\n\r\n\t\tthis.$task_data = this.$task.childNodes[1];\r\n\t\tthis.$task_data.innerHTML = \"<div class='gantt_task_bg'></div><div class='gantt_links_area'></div><div class='gantt_bars_area'></div>\";\r\n\t\tthis.$task_bg = this.$task_data.childNodes[0];\r\n\t\tthis.$task_links = this.$task_data.childNodes[1];\r\n\t\tthis.$task_bars = this.$task_data.childNodes[2];\r\n\r\n\t\tthis._tasks = {\r\n\t\t\tcol_width: 0,\r\n\t\t\twidth: [], // width of each column\r\n\t\t\tfull_width: 0, // width of all columns\r\n\t\t\ttrace_x: [],\r\n\t\t\trendered: {}\r\n\t\t};\r\n\r\n\t\tvar config = this.$getConfig();\r\n\t\tvar attr = config[this.$config.bind + \"_attribute\"];\r\n\t\tvar linksAttr = config[this.$config.bindLinks + \"_attribute\"];\r\n\t\tif(!attr && this.$config.bind){\r\n\t\t\tattr = this.$config.bind + \"_id\";\r\n\t\t}\r\n\t\tif(!linksAttr && this.$config.bindLinks){\r\n\t\t\tlinksAttr = this.$config.bindLinks + \"_id\";\r\n\t\t}\r\n\t\tthis.$config.item_attribute = attr || null;\r\n\t\tthis.$config.link_attribute = linksAttr || null;\r\n\r\n\t\tvar layers = this._createLayerConfig();\r\n\t\tif(!this.$config.layers){\r\n\t\t\tthis.$config.layers = layers.tasks;\r\n\t\t}\r\n\t\tif(!this.$config.linkLayers){\r\n\t\t\tthis.$config.linkLayers = layers.links;\r\n\t\t}\r\n\r\n\t\tthis._attachLayers(this.$gantt);\r\n\t\tthis.callEvent(\"onReady\", []);\r\n\t\t//this.refresh();\r\n\t},\r\n\r\n\tsetSize: function(width, height){\r\n\t\tvar config = this.$getConfig();\r\n\r\n\t\tif(width*1 === width){\r\n\t\t\tthis.$config.width = width;\r\n\t\t}\r\n\t\tif(height*1 === height){\r\n\r\n\t\t\tthis.$config.height = height;\r\n\t\t\tvar dataHeight = Math.max(this.$config.height - config.scale_height);\r\n\t\t\tthis.$task_data.style.height = dataHeight + 'px';\r\n\t\t}\r\n\r\n\t\tthis.refresh();\r\n\t\tthis.$task_bg.style.backgroundImage = \"\";\r\n\r\n\t\tif(config.smart_rendering){\r\n\t\t\tvar store = this.$gantt.getDatastore(this.$config.bind);\r\n\t\t\tthis.$task_bg.style.height = config.row_height * store.countVisible() +\"px\";\r\n\t\t}else{\r\n\t\t\tthis.$task_bg.style.height = \"\";\r\n\t\t}\r\n\r\n\t\tvar scale = this._tasks;\r\n\t\t//timeline area layers\r\n\t\tvar data_els = this.$task_data.childNodes;\r\n\t\tfor(var i= 0, len = data_els.length; i < len; i++){\r\n\t\t\tvar el = data_els[i];\r\n\t\t\tif(el.hasAttribute(\"data-layer\") && el.style)\r\n\t\t\t\tel.style.width = scale.full_width + \"px\";\r\n\t\t}\r\n\t},\r\n\r\n\tisVisible: function(){\r\n\t\tif(this.$parent && this.$parent.$config){\r\n\t\t\treturn !this.$parent.$config.hidden;\r\n\t\t}else{\r\n\t\t\treturn this.$task.offsetWidth;\r\n\t\t}\r\n\t},\r\n\r\n\tgetSize: function(){\r\n\t\tvar config = this.$getConfig();\r\n\t\tvar store = this.$gantt.getDatastore(this.$config.bind);\r\n\r\n\t\treturn {\r\n\t\t\tx: this.$config.width,\r\n\t\t\ty: this.$config.height,\r\n\t\t\tcontentX: this.isVisible() ? this._tasks.full_width : 0,\r\n\t\t\tcontentY: config.scale_height + config.row_height * store.countVisible()\r\n\t\t};\r\n\t},\r\n\r\n\tscrollTo: function(left, top){\r\n\t\tif(!this.isVisible())\r\n\t\t\treturn;\r\n\r\n\t\tif(top*1 === top){\r\n\t\t\tthis.$config.scrollTop = top;\r\n\t\t\tthis.$task_data.scrollTop = this.$config.scrollTop;\r\n\t\t}\r\n\t\tif (left*1 === left){\r\n\t\t\tthis.$task.scrollLeft = left;\r\n\t\t\tthis.$config.scrollLeft = this.$task.scrollLeft;\r\n\t\t}\r\n\r\n\t\tthis._refreshScales();\r\n\t},\r\n\r\n\t_refreshScales: function _refreshScales() {\r\n\t\tif(!this.isVisible())\r\n\t\t\treturn;\r\n\r\n\t\tvar config = this.$getConfig();\r\n\t\tif (!config.smart_scales) return;\r\n\r\n\t\tvar x = this.$config.scrollLeft;\r\n\t\tvar width = this.$config.width;\r\n\r\n\t\tvar scales = this._scales;\r\n\t\tthis.$task_scale.innerHTML = this._getScaleChunkHtml(scales, x, x + width);\r\n\t},\r\n\t_createLayerConfig: function(){\r\n\t\tvar self = this;\r\n\t\tvar taskFilter = function(){\r\n\t\t\treturn self.isVisible();\r\n\t\t};\r\n\r\n\t\tvar taskLayers = [\r\n\t\t\t{\r\n\t\t\t\texpose: true,\r\n\t\t\t\trenderer: this.$gantt.$ui.layers.taskBar,\r\n\t\t\t\tcontainer: this.$task_bars,\r\n\t\t\t\tfilter: [taskFilter]\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\trenderer: this.$gantt.$ui.layers.taskBg,\r\n\t\t\t\tcontainer: this.$task_bg,\r\n\t\t\t\tfilter: [\r\n\t\t\t\t\tfunction(){\r\n\t\t\t\t\t\treturn !self.$getConfig().static_background;\r\n\t\t\t\t\t},\r\n\t\t\t\t\ttaskFilter\r\n\t\t\t\t]\r\n\t\t\t}\r\n\t\t];\r\n\r\n\t\tvar linkLayers = [\r\n\t\t\t{\r\n\t\t\t\texpose: true,\r\n\t\t\t\trenderer: this.$gantt.$ui.layers.link,\r\n\t\t\t\tcontainer: this.$task_links,\r\n\t\t\t\tfilter: [taskFilter]\r\n\t\t\t}\r\n\t\t];\r\n\r\n\t\treturn {\r\n\t\t\ttasks: taskLayers,\r\n\t\t\tlinks: linkLayers\r\n\t\t};\r\n\r\n\t},\r\n\r\n\t_attachLayers: function(gantt){\r\n\t\tthis._taskLayers = [];\r\n\t\tthis._linkLayers = [];\r\n\r\n\t\tvar self = this;\r\n\r\n\t\tvar layers = this.$gantt.$services.getService(\"layers\");\r\n\r\n\t\tif(this.$config.bind){\r\n\t\t\tvar taskRenderer = layers.getDataRender(this.$config.bind);\r\n\r\n\t\t\tif(!taskRenderer){\r\n\t\t\t\ttaskRenderer = layers.createDataRender({\r\n\t\t\t\t\tname: this.$config.bind,\r\n\t\t\t\t\tdefaultContainer: function(){ return self.$task_data;}\r\n\t\t\t\t});\r\n\t\t\t}\r\n\r\n\t\t\ttaskRenderer.container = function(){ return self.$task_data;};\r\n\r\n\t\t\tvar taskLayers = this.$config.layers;\r\n\t\t\tfor(var i = 0; taskLayers && i < taskLayers.length; i++){\r\n\t\t\t\tvar layer = taskLayers[i];\r\n\r\n\t\t\t\tif(typeof layer == \"function\"){\r\n\t\t\t\t\tlayer = {renderer: layer};\r\n\t\t\t\t}\r\n\r\n\t\t\t\tlayer.host = this;\r\n\t\t\t\tvar bar_layer = taskRenderer.addLayer(layer);\r\n\t\t\t\tthis._taskLayers.push(bar_layer);\r\n\t\t\t\tif(layer.expose){\r\n\t\t\t\t\tthis._taskRenderer = taskRenderer.getLayer(bar_layer);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tvar staticRender = canvasRender.create();\r\n\t\t\tthis.$gantt.attachEvent(\"onDataRender\", function () {\r\n\t\t\t\tif(!self.isVisible())\r\n\t\t\t\t\treturn;\r\n\t\t\t\tvar config = self.$getConfig();\r\n\t\t\t\tif(config.static_background) {\r\n\t\t\t\t\tvar store = self.$gantt.getDatastore(self.$config.bind);\r\n\t\t\t\t\tstaticRender.render(self.$task_bg, config, self.getScale(), config.row_height * store.countVisible());\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\tif(this.$config.bindLinks){\r\n\t\t\tvar linkRenderer = layers.getDataRender(this.$config.bindLinks);\r\n\r\n\t\t\tif(!linkRenderer){\r\n\t\t\t\tlinkRenderer = layers.createDataRender({\r\n\t\t\t\t\tname: this.$config.bindLinks,\r\n\t\t\t\t\tdefaultContainer: function(){ return self.$task_data;}\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t\tvar linkLayers = this.$config.linkLayers;\r\n\t\t\tfor(var i = 0; linkLayers && i < linkLayers.length; i++){\r\n\t\t\t\tvar layer = linkLayers[i];\r\n\t\t\t\tlayer.host = this;\r\n\t\t\t\tvar linkLayer = linkRenderer.addLayer(layer);\r\n\t\t\t\tthis._taskLayers.push(linkLayer);\r\n\t\t\t\tif(linkLayers[i].expose){\r\n\t\t\t\t\tthis._linkRenderer = linkRenderer.getLayer(linkLayer);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\r\n\t_clearLayers: function(gantt){\r\n\t\tvar layers = this.$gantt.$services.getService(\"layers\");\r\n\t\tvar taskRenderer = layers.getDataRender(this.$config.bind);\r\n\t\tvar linkRenderer = layers.getDataRender(this.$config.bindLinks);\r\n\r\n\t\tfor(var i = 0; i < this._taskLayers.length; i++){\r\n\t\t\ttaskRenderer.removeLayer(this._taskLayers[i]);\r\n\t\t}\r\n\t\tfor(var i = 0; i < this._linkLayers.length; i++){\r\n\t\t\tlinkRenderer.removeLayer(this._linkLayers[i]);\r\n\t\t}\r\n\r\n\t\tthis._linkLayers = [];\r\n\t\tthis._taskLayers = [];\r\n\t},\r\n\r\n\t_render_tasks_scales: function _render_tasks_scales() {\r\n\t\tvar config = this.$getConfig();\r\n\r\n\t\tvar scales_html = \"\",\r\n\t\t\touter_width = 0,\r\n\t\t\tscale_height = 0;\r\n\r\n\t\tvar state = this.$gantt.getState();\r\n\r\n\t\tif (this.isVisible()) {\r\n\t\t\tvar helpers = this.$scaleHelper;\r\n\t\t\tvar scales = this._getScales();\r\n\t\t\tscale_height = (config.scale_height - 1);\r\n\r\n\t\t\tvar availWidth = this.$config.width;\r\n\t\t\tif(config.autosize == \"x\" || config.autosize == \"xy\"){\r\n\t\t\t\tavailWidth = Math.max(config.autosize_min_width, 0);\r\n\t\t\t}\r\n\r\n\t\t\tvar cfgs = helpers.prepareConfigs(scales, config.min_column_width, availWidth, scale_height, state.min_date, state.max_date);\r\n\t\t\tvar cfg = this._tasks = cfgs[cfgs.length - 1];\r\n\t\t\tthis._scales = cfgs;\r\n\r\n\t\t\tscales_html = this._getScaleChunkHtml(cfgs, 0, this.$config.width);\r\n\r\n\t\t\touter_width = cfg.full_width + \"px\";//cfg.full_width + (this._scroll_sizes().y ? scrollSizes.scroll_size : 0) + \"px\";\r\n\t\t\tscale_height += \"px\";\r\n\t\t}\r\n\r\n\t\tthis.$task_scale.style.height = scale_height;\r\n\r\n\t\tthis.$task_data.style.width =\r\n\t\t\tthis.$task_scale.style.width = outer_width;\r\n\r\n\t\tthis.$task_scale.innerHTML = scales_html;\r\n\r\n\t},\r\n\r\n\t_getScaleChunkHtml: function _get_scale_chunk_html (scales, fromPos, toPos) {\r\n\t\tvar templates = this.$gantt.$services.templates();\r\n\t\tvar html = [];\r\n\r\n\t\tvar css = templates.scale_row_class;\r\n\t\tfor (var i = 0; i < scales.length; i++) {\r\n\t\t\tvar cssClass = \"gantt_scale_line\";\r\n\t\t\tvar tplClass = css(scales[i]);\r\n\t\t\tif (tplClass) {\r\n\t\t\t\tcssClass += \" \" + tplClass;\r\n\t\t\t}\r\n\r\n\t\t\thtml.push(\"<div class=\\\"\" + cssClass + \"\\\" style=\\\"height:\" + (scales[i].height) +\r\n\t\t\t\t\"px;position:relative;line-height:\" + (scales[i].height) + \"px\\\">\" + this._prepareScaleHtml(scales[i], fromPos, toPos) + \"</div>\");\r\n\t\t}\r\n\r\n\t\treturn html.join(\"\");\r\n\t},\r\n\t_prepareScaleHtml: function _prepare_scale_html(config, fromPos, toPos) {\r\n\t\tvar globalConfig = this.$getConfig();\r\n\t\tvar globalTemplates = this.$gantt.$services.templates();\r\n\r\n\t\tvar cells = [];\r\n\t\tvar date = null, content = null, css = null;\r\n\r\n\t\tif (config.template || config.date) {\r\n\t\t\tcontent = config.template || this.$gantt.date.date_to_str(config.date);\r\n\t\t}\r\n\r\n\t\tvar startIndex = 0,\r\n\t\t\tendIndex = config.count;\r\n\r\n\t\tif (globalConfig.smart_scales && (!isNaN(fromPos) && !isNaN(toPos))) {\r\n\t\t\tstartIndex = _findBinary(config.left, fromPos);\r\n\t\t\tendIndex = _findBinary(config.left, toPos) + 1;\r\n\t\t}\r\n\r\n\t\tcss = config.css || function () {\r\n\t\t\t};\r\n\t\tif (!config.css && globalConfig.inherit_scale_class) {\r\n\t\t\tcss = globalTemplates.scale_cell_class;\r\n\t\t}\r\n\r\n\t\tfor (var i = startIndex; i < endIndex; i++) {\r\n\t\t\tif (!config.trace_x[i]) break;\r\n\r\n\t\t\tdate = new Date(config.trace_x[i]);\r\n\t\t\tvar value = content.call(this, date),\r\n\t\t\t\twidth = config.width[i],\r\n\t\t\t\theight = config.height - (globalConfig.smart_scales ? (config.index ? 1 : 0) : 0),\r\n\t\t\t\tleft = config.left[i],\r\n\t\t\t\tstyle = \"\",\r\n\t\t\t\ttemplate = \"\",\r\n\t\t\t\tcssclass = \"\";\r\n\r\n\t\t\tif (width) {\r\n\t\t\t\tvar position = globalConfig.smart_scales ? (\"position:absolute;left:\" + left + \"px\") : \"\";\r\n\r\n\t\t\t\tstyle = \"width:\" + (width) + \"px;height:\" + height + \"px;\" + position;\r\n\t\t\t\tcssclass = \"gantt_scale_cell\" + (i == config.count - 1 ? \" gantt_last_cell\" : \"\");\r\n\r\n\t\t\t\ttemplate = css.call(this, date);\r\n\t\t\t\tif (template) cssclass += \" \" + template;\r\n\r\n\t\t\t\tvar ariaAttr = this.$gantt._waiAria.getTimelineCellAttr(value);\r\n\t\t\t\tvar cell = \"<div class='\" + cssclass + \"'\" + ariaAttr + \" style='\" + style + \"'>\" + value + \"</div>\";\r\n\t\t\t\tcells.push(cell);\r\n\t\t\t} else {\r\n\t\t\t\t//do not render ignored cells\r\n\t\t\t}\r\n\r\n\t\t}\r\n\t\treturn cells.join(\"\");\r\n\t},\r\n\tdateFromPos: function dateFromPos(x) {\r\n\t\tvar scale = this._tasks;\r\n\t\tif (x < 0 || x > scale.full_width || !scale.full_width) {\r\n\t\t\treturn null;\r\n\t\t}\r\n\r\n\t\tvar ind = _findBinary(this._tasks.left, x);\r\n\t\tvar summ = this._tasks.left[ind];\r\n\r\n\t\tvar col_width = scale.width[ind] || scale.col_width;\r\n\t\tvar part = 0;\r\n\t\tif (col_width)\r\n\t\t\tpart = (x - summ) / col_width;\r\n\r\n\t\tvar unit = 0;\r\n\t\tif (part) {\r\n\t\t\tunit = this._getColumnDuration(scale, scale.trace_x[ind]);\r\n\t\t}\r\n\r\n\t\tvar date = new Date(scale.trace_x[ind].valueOf() + Math.round(part * unit));\r\n\t\treturn date;\r\n\t},\r\n\tposFromDate: function posFromDate(date) {\r\n\t\tif (!this.isVisible())\r\n\t\t\treturn 0;\r\n\r\n\t\tvar ind = this.columnIndexByDate(date);\r\n\t\tthis.$gantt.assert(ind >= 0, \"Invalid day index\");\r\n\r\n\t\tvar wholeCells = Math.floor(ind);\r\n\t\tvar partCell = ind % 1;\r\n\r\n\t\tvar pos = this._tasks.left[Math.min(wholeCells, this._tasks.width.length - 1)];\r\n\t\tif (wholeCells == this._tasks.width.length)\r\n\t\t\tpos += this._tasks.width[this._tasks.width.length - 1];\r\n\t\t//for(var i=1; i <= wholeCells; i++)\r\n\t\t//\tpos += gantt._tasks.width[i-1];\r\n\r\n\t\tif (partCell) {\r\n\t\t\tif (wholeCells < this._tasks.width.length) {\r\n\t\t\t\tpos += this._tasks.width[wholeCells] * (partCell % 1);\r\n\t\t\t} else {\r\n\t\t\t\tpos += 1;\r\n\t\t\t}\r\n\r\n\t\t}\r\n\t\treturn Math.round(pos);\r\n\t},\r\n\tcolumnIndexByDate: function columnIndexByDate(date) {\r\n\t\tvar pos = new Date(date).valueOf();\r\n\t\tvar days = this._tasks.trace_x,\r\n\t\t\tignores = this._tasks.ignore_x;\r\n\r\n\t\tvar state = this.$gantt.getState();\r\n\r\n\t\tif (pos <= state.min_date)\r\n\t\t\treturn 0;\r\n\r\n\t\tif (pos >= state.max_date)\r\n\t\t\treturn days.length;\r\n\r\n\t\t/*var day = null;\r\n\t\t for (var xind = 0, length = days.length-1; xind < length; xind++) {\r\n\t\t // | 8:00, 8:30 | 8:15 should be checked against 8:30\r\n\t\t // clicking at the most left part of the cell, say 8:30 should create event in that cell, not previous one\r\n\t\t day = +days[xind+1];\r\n\t\t if (pos < day && !ignores[day])\r\n\t\t break;\r\n\t\t }*/\r\n\r\n\t\tvar day_ind = _findBinary(days, pos);\r\n\t\tvar day = +this._tasks.trace_x[day_ind];\r\n\t\twhile (ignores[day]) {\r\n\t\t\tday = this._tasks.trace_x[++day_ind];\r\n\t\t}\r\n\r\n\t\tif (!day) return 0;\r\n\r\n\t\treturn day_ind + ((date - days[day_ind]) / this._getColumnDuration(this._tasks, days[day_ind]));\r\n\t},\r\n\tgetItemPosition:function (task, start_date, end_date) {\r\n\t\tvar x = this.posFromDate(start_date || task.start_date);\r\n\t\tvar x2 = this.posFromDate(end_date || task.end_date);\r\n\t\tx2 = Math.max(x, x2);\r\n\t\tvar y = this.getItemTop(task.id);\r\n\t\tvar height = this.$gantt.getTaskHeight();\r\n\t\treturn {\r\n\t\t\tleft: x,\r\n\t\t\ttop: y,\r\n\t\t\theight: height,\r\n\t\t\twidth: Math.max((x2 - x), 0)\r\n\t\t};\r\n\t},\r\n\r\n\tgetItemHeight: function(){\r\n\t\tvar config = this.$getConfig();\r\n\r\n\t\t// height of the bar item\r\n\t\tvar height = config.task_height;\r\n\r\n\t\tif (height == \"full\") {\r\n\t\t\tvar offset = config.task_height_offset || 5;\r\n\t\t\theight = config.row_height - offset;\r\n\t\t}\r\n\t\t//item height cannot be bigger than row height\r\n\t\theight = Math.min(height, config.row_height);\r\n\t\treturn Math.max(height, 0);\r\n\t},\r\n\r\n\tgetRowTop: function(index){\r\n\t\treturn index * this.$getConfig().row_height;\r\n\t},\r\n\r\n\tgetItemTop: function (task_id) {\r\n\t\tif(this.$config.bind){\r\n\t\t\tvar store = this.$gantt.getDatastore(this.$config.bind);\r\n\t\t\tif(!store) return 0;\r\n\r\n\t\t\treturn store.getIndexById(task_id) * this.$gantt.config.row_height;\r\n\r\n\t\t}else{\r\n\t\t\treturn 0;\r\n\t\t}\r\n\r\n\t},\r\n\r\n\tgetScale: function(){\r\n\t\treturn this._tasks;\r\n\t},\r\n\r\n\t_getScales: function _get_scales() {\r\n\t\tvar config = this.$getConfig();\r\n\t\tvar helpers = this.$scaleHelper;\r\n\t\tvar scales = [helpers.primaryScale()].concat(config.subscales);\r\n\r\n\t\thelpers.sortScales(scales);\r\n\t\treturn scales;\r\n\t},\r\n\r\n\t_getColumnDuration: function _get_coll_duration(scale, date) {\r\n\t\treturn this.$gantt.date.add(date, scale.step, scale.unit) - date;\r\n\t},\r\n\r\n\trefresh: function(){\r\n\t\tthis._render_tasks_scales();\r\n\t},\r\n\r\n\tdestroy: function(){\r\n\t\tvar gantt = this.$gantt;\r\n\t\tthis._clearLayers(gantt);\r\n\r\n\t\tthis.$task = null;\r\n\t\tthis.$task_scale = null;\r\n\t\tthis.$task_data = null;\r\n\t\tthis.$task_bg = null;\r\n\t\tthis.$task_links = null;\r\n\t\tthis.$task_bars = null;\r\n\r\n\t\tthis.$gantt = null;\r\n\t}\r\n};\r\n\r\nmodule.exports = Timeline;\r\n\r\nfunction _findBinary(array, target) {\r\n\t// modified binary search, target value not exactly match array elements, looking for closest one\r\n\r\n\tvar low = 0, high = array.length - 1, i, item, prev;\r\n\twhile (low <= high) {\r\n\r\n\t\ti = Math.floor((low + high) / 2);\r\n\t\titem = +array[i];\r\n\t\tprev = +array[i - 1];\r\n\t\tif (item < target) {\r\n\t\t\tlow = i + 1;\r\n\t\t\tcontinue;\r\n\t\t}\r\n\t\tif (item > target) {\r\n\t\t\tif (!(!isNaN(prev) && prev < target)) {\r\n\t\t\t\thigh = i - 1;\r\n\t\t\t\tcontinue;\r\n\t\t\t} else {\r\n\t\t\t\t// if target is between 'i' and 'i-1' return 'i - 1'\r\n\t\t\t\treturn i - 1;\r\n\t\t\t}\r\n\r\n\t\t}\r\n\t\twhile (+array[i] == +array[i + 1]) i++;\r\n\r\n\t\treturn i;\r\n\t}\r\n\treturn array.length - 1;\r\n}\r\n\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// c:/www-recent/gantt/sources/core/ui/timeline/timeline.js\n// module id = 36\n// module chunks = 0","var createStaticBgHelper = function(){\r\n\treturn {\r\n\t\trender: function(){}\r\n\t};\r\n};\r\n\r\nmodule.exports = {\r\n\tcreate: function(){\r\n\t\treturn createStaticBgHelper();\r\n\t}\r\n};\r\n\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// c:/www-recent/gantt/sources/core/ui/timeline/tasks_canvas_render.gpl.js\n// module id = 37\n// module chunks = 0","var domHelpers = require(\"../../../utils/dom_helpers\"),\r\n\tutils = require(\"../../../utils/utils\"),\r\n\teventable = require(\"../../../utils/eventable\"),\r\n\tgridResize = require(\"./grid_resize\"),\r\n\tconfigurable = require(\"../configurable\");\r\n\r\nvar Grid = function(parent, config, factory, gantt){\r\n\tthis.$config = utils.mixin({}, config || {});\r\n\tthis.$gantt = gantt;\r\n\tthis.$parent = parent;\r\n\tconfigurable(this);\r\n\teventable(this);\r\n\tthis.$state = {};\r\n};\r\n\r\nGrid.prototype = {\r\n\tinit: function(container){\r\n\t\tvar gantt = this.$gantt;\r\n\t\tvar gridAriaAttr = gantt._waiAria.gridAttrString();\r\n\t\tvar gridDataAriaAttr = gantt._waiAria.gridDataAttrString();\r\n\r\n\t\tcontainer.innerHTML = \"<div class='gantt_grid' style='height:inherit;width:inherit;' \"+gridAriaAttr+\"></div>\";\r\n\t\tthis.$grid = container.childNodes[0];\r\n\r\n\t\tthis.$grid.innerHTML = \"<div class='gantt_grid_scale' \"+\r\n\t\t\tgantt._waiAria.gridScaleRowAttrString()+\"></div><div class='gantt_grid_data' \"+gridDataAriaAttr+\"></div>\";\r\n\r\n\t\tthis.$grid_scale = this.$grid.childNodes[0];\r\n\t\tthis.$grid_data = this.$grid.childNodes[1];\r\n\r\n\t\tvar attr = this.$getConfig()[this.$config.bind + \"_attribute\"];\r\n\t\tif(!attr && this.$config.bind){\r\n\t\t\tattr = this.$config.bind + \"_id\";\r\n\t\t}\r\n\t\tthis.$config.item_attribute = attr || null;\r\n\t\tvar layers = this._createLayerConfig();\r\n\t\tif(!this.$config.layers){\r\n\t\t\tthis.$config.layers = layers;\r\n\t\t}\r\n\r\n\t\tvar resizer = gridResize(this.$gantt, this);\r\n\t\tresizer.init();\r\n\t\tthis._renderHeaderResizers = resizer.doOnRender;\r\n\r\n\t\tthis._addLayers(this.$gantt);\r\n\t\tthis.callEvent(\"onReady\", []);\r\n\t\t//this.refresh();\r\n\t},\r\n\tsetSize: function(width, height){\r\n\t\tthis.$config.width = width;\r\n\t\tthis.$state.width = width;\r\n\t\tthis.$state.height = height;\r\n\t\tthis._setColumnsWidth(width);\r\n\r\n\t\tvar config = this.$getConfig();\r\n\t\tvar dataHeight = Math.max(this.$state.height - config.scale_height, 0);\r\n\t\tthis.$grid_data.style.height = dataHeight + \"px\";\r\n\t\tthis.refresh();\r\n\t},\r\n\tgetSize: function(){\r\n\r\n\t\tvar config = this.$getConfig();\r\n\r\n\t\tvar size = {\r\n\t\t\tx: this.$state.width,\r\n\t\t\ty: this.$state.height,\r\n\t\t\tcontentX: this._getGridWidth(),\r\n\t\t\tcontentY: config.scale_height\r\n\t\t};\r\n\r\n\t\tvar store = this.$gantt.getDatastore(this.$config.bind);\r\n\t\tif(store){\r\n\t\t\tsize.contentY += config.row_height * store.countVisible();\r\n\t\t}\r\n\t\treturn size;\r\n\t},\r\n\trefresh: function(){\r\n\t\tthis._calculateGridWidth();\r\n\t\tthis._renderGridHeader();\r\n\t},\r\n\tscrollTo: function(left, top){\r\n\t\tif(!this.isVisible())\r\n\t\t\treturn;\r\n\r\n\t\tif (left*1 == left){\r\n\t\t\tthis.$grid.scrollLeft = left;\r\n\t\t\tthis.$state.scrollLeft = this.$grid.scrollLeft;\r\n\t\t}\r\n\r\n\t\tvar config = this.$getConfig();\r\n\t\tif(top*1 == top){\r\n\t\t\tthis.$grid_data.scrollTop = top;\r\n\t\t\tthis.$state.scrollTop = this.$grid_data.scrollTop;\r\n\t\t\tif(config.smart_rendering && this.$grid_data.scrollTop !== top){\r\n\t\t\t\tthis.$grid_data.scrollTop = top % config.row_height;\r\n\t\t\t\tthis.$state.scrollTop = this.$grid_data.scrollTop;\r\n\t\t\t}\r\n\t\t}else{\r\n\t\t\tif(config.smart_rendering && this.$grid_data.scrollTop !== this.$state.scrollTop){\r\n\t\t\t\tthis.$grid_data.scrollTop = this.$state.scrollTop % config.row_height;\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\tgetGridColumns: function(){\r\n\t\tvar config = this.$getConfig();\r\n\t\treturn config.columns;\r\n\t},\r\n\tisVisible: function(){\r\n\t\tif(this.$parent && this.$parent.$config){\r\n\t\t\treturn !this.$parent.$config.hidden;\r\n\t\t}else{\r\n\t\t\treturn this.$grid.offsetWidth;\r\n\t\t}\r\n\t},\r\n\r\n\t_createLayerConfig: function(){\r\n\t\tvar gantt = this.$gantt;\r\n\t\tvar self = this;\r\n\t\tvar layers = [\r\n\t\t\t{\r\n\t\t\t\trenderer: gantt.$ui.layers.gridLine,\r\n\t\t\t\tcontainer: this.$grid_data,\r\n\t\t\t\tfilter: [function(){\r\n\t\t\t\t\treturn self.isVisible();\r\n\t\t\t\t}]\r\n\t\t\t}\r\n\t\t];\r\n\t\treturn layers;\r\n\t},\r\n\r\n\t_addLayers: function(gantt){\r\n\t\tif(!this.$config.bind)\r\n\t\t\treturn;\r\n\r\n\t\tthis._taskLayers = [];\r\n\r\n\t\tvar self = this;\r\n\r\n\t\tvar layers = this.$gantt.$services.getService(\"layers\");\r\n\t\tvar taskRenderer = layers.getDataRender(this.$config.bind);\r\n\r\n\t\tif(!taskRenderer){\r\n\t\t\ttaskRenderer = layers.createDataRender({\r\n\t\t\t\tname: this.$config.bind,\r\n\t\t\t\tdefaultContainer: function(){ return self.$grid_data;}\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\tvar taskLayers = this.$config.layers;\r\n\t\tfor(var i = 0; taskLayers && i < taskLayers.length; i++){\r\n\t\t\tvar layer = taskLayers[i];\r\n\t\t\tlayer.host = this;\r\n\t\t\tvar bar_layer = taskRenderer.addLayer(layer);\r\n\t\t\tthis._taskLayers.push(bar_layer);\r\n\t\t}\r\n\t},\r\n\r\n\t_clearLayers: function(gantt){\r\n\t\tvar layers = this.$gantt.$services.getService(\"layers\");\r\n\t\tvar taskRenderer = layers.getDataRender(this.$config.bind);\r\n\r\n\t\tfor(var i = 0; i < this._taskLayers.length; i++){\r\n\t\t\ttaskRenderer.removeLayer(this._taskLayers[i]);\r\n\t\t}\r\n\r\n\t\tthis._taskLayers = [];\r\n\t},\r\n\r\n\t_setColumnsWidth: function(newWidth){\r\n\t\tvar config = this.$getConfig();\r\n\t\tvar columns = this.getGridColumns(),\r\n\t\t\tcolumns_width = 0,\r\n\t\t\tfinal_width = newWidth;\r\n\r\n\t\tfor (var i = 0, l = columns.length; i < l; i++) {\r\n\t\t\tcolumns_width += columns[i].width*1;\r\n\t\t}\r\n\r\n\t\tif(isNaN(columns_width)){\r\n\t\t\tthis._calculateGridWidth();\r\n\t\t}\r\n\t\tcolumns_width = 0;\r\n\t\tfor (var i = 0, l = columns.length; i < l; i++) {\r\n\t\t\tcolumns_width += columns[i].width*1;\r\n\t\t}\r\n\r\n\t\tvar columns_count = columns.length,\r\n\t\t\textra_width = final_width - columns_width;\r\n\r\n\t\tvar colShare = 0;\r\n\t\tfor (var i = 0; i < columns_count; i++) {\r\n\t\t\tvar share = Math.floor(extra_width * (columns[i].width / columns_width));\r\n\t\t\tcolumns_width -= columns[i].width;\r\n\t\t\tcolShare = columns[i].width + share;\r\n\r\n\t\t\tif ((columns[i].min_width && colShare >= columns[i].min_width) || !columns[i].min_width ||\r\n\t\t\t\tcolShare > columns[i].width) {\r\n\t\t\t\textra_width -= share;\r\n\t\t\t\tcolumns[i].width = colShare;\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tvar iterator = extra_width > 0 ? 1 : -1;\r\n\t\twhile ((extra_width > 0 && iterator === 1) || (extra_width < 0 && iterator === -1)) {\r\n\t\t\tvar curExtra = extra_width;\r\n\t\t\tfor (i = 0; i < columns_count; i++) {\r\n\t\t\t\tvar newWidth = columns[i].width + iterator;\r\n\r\n\t\t\t\tif ((columns[i].min_width && newWidth >= columns[i].min_width) || !columns[i].min_width ||\r\n\t\t\t\t\tcolShare > columns[i].width) {\r\n\t\t\t\t\textra_width -= iterator;\r\n\t\t\t\t\tcolumns[i].width = newWidth;\r\n\t\t\t\t\tif (!extra_width) {\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (curExtra == extra_width) {\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t//if (this.callEvent(\"onGridResizeEnd\", [config.grid_width, final_width]) === false)\r\n\t\t//\treturn;\r\n\r\n\t\tconfig.grid_width = final_width;\r\n\t\tthis.$config.width = final_width;\r\n\t\t//this.$state.width = final_width;\r\n\t},\r\n\r\n\t_getColsTotalWidth: function(){\r\n\t\tvar columns = this.getGridColumns();\r\n\t\tvar cols_width = 0;\r\n\r\n\t\tfor (var i = 0; i < columns.length; i++) {\r\n\t\t\tvar v = parseFloat(columns[i].width);\r\n\t\t\tif (window.isNaN(v)) {\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t\tcols_width += v;\r\n\t\t}\r\n\t\treturn cols_width;\r\n\t},\r\n\t_calculateGridWidth: function(){\r\n\t\tvar config = this.$getConfig();\r\n\t\tvar columns = this.getGridColumns();\r\n\t\tvar cols_width = 0;\r\n\t\tvar unknown = [];\r\n\t\tvar width = [];\r\n\r\n\t\tfor (var i = 0; i < columns.length; i++) {\r\n\t\t\tvar v = parseFloat(columns[i].width);\r\n\t\t\tif (window.isNaN(v)) {\r\n\t\t\t\tv = 50;\r\n\t\t\t\tunknown.push(i);\r\n\t\t\t}\r\n\t\t\twidth[i] = v;\r\n\t\t\tcols_width += v;\r\n\t\t}\r\n\r\n\t\tif (config.autofit || unknown.length) {\r\n\t\t\tvar diff = this._getGridWidth() - cols_width;\r\n\t\t\t// TODO: logic may be improved for proportional changing of width\r\n\t\t\tvar step = diff / (unknown.length > 0 ? unknown.length : (width.length > 0 ? width.length : 1));\r\n\t\t\tif (unknown.length > 0) {\r\n\t\t\t\t// there are several columns with undefined width\r\n\t\t\t\tvar delta = diff / (unknown.length ? unknown.length : 1);\r\n\t\t\t\tfor (var i = 0; i < unknown.length; i++) {\r\n\t\t\t\t\tvar index = unknown[i];\r\n\t\t\t\t\twidth[index] += delta;\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\t// delta must be added for all columns\r\n\t\t\t\tvar delta = diff / (width.length ? width.length : 1);\r\n\t\t\t\tfor (var i = 0; i < width.length; i++)\r\n\t\t\t\t\twidth[i] += delta;\r\n\t\t\t}\r\n\r\n\t\t\tfor (var i = 0; i < width.length; i++) {\r\n\t\t\t\tcolumns[i].width = width[i];\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tvar changed = (this._getGridWidth() != cols_width);\r\n\t\t\tthis.$config.width = cols_width;\r\n\t\t\tconfig.grid_width = cols_width;\r\n\t\t\tif(changed){\r\n\t\t\t\tthis.$parent._setContentSize(cols_width, this.$config.height);\r\n//\t\t\t\tthis.$parent.$config.width = cols_width;\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\r\n\t_renderGridHeader: function(){\r\n\t\tvar gantt = this.$gantt;\r\n\t\tvar config = this.$getConfig();\r\n\t\tvar locale = this.$gantt.locale;\r\n\t\tvar templates = this.$gantt.templates;\r\n\r\n\t\tvar columns = this.getGridColumns();\r\n\t\tvar cells = [];\r\n\t\tvar width = 0,\r\n\t\t\tlabels = locale.labels;\r\n\r\n\t\tvar lineHeigth = config.scale_height - 2;\r\n\r\n\t\tfor (var i = 0; i < columns.length; i++) {\r\n\t\t\tvar last = i == columns.length - 1;\r\n\t\t\tvar col = columns[i];\r\n\r\n\t\t\t// ensure columns have non-empty names\r\n\t\t\tif (!col.name) {\r\n\t\t\t\tcol.name = gantt.uid() + \"\";\r\n\t\t\t}\r\n\r\n\t\t\tvar colWidth = col.width * 1;\r\n\t\t\tif (last && this._getGridWidth() > width + colWidth)\r\n\t\t\t\tcol.width = colWidth = this._getGridWidth() - width;\r\n\t\t\twidth += colWidth;\r\n\t\t\tvar sort = (this._sort && col.name == this._sort.name) ? (\"<div class='gantt_sort gantt_\" + this._sort.direction + \"'></div>\") : \"\";\r\n\t\t\tvar cssClass = [\"gantt_grid_head_cell\",\r\n\t\t\t\t(\"gantt_grid_head_\" + col.name),\r\n\t\t\t\t(last ? \"gantt_last_cell\" : \"\"),\r\n\t\t\t\ttemplates.grid_header_class(col.name, col)].join(\" \");\r\n\r\n\t\t\tvar style = \"width:\" + (colWidth - (last ? 1 : 0)) + \"px;\";\r\n\t\t\tvar label = (col.label || labels[\"column_\" + col.name]);\r\n\t\t\tlabel = label || \"\";\r\n\r\n\t\t\tvar ariaAttrs = gantt._waiAria.gridScaleCellAttrString(col, label);\r\n\r\n\t\t\tvar cell = \"<div class='\" + cssClass + \"' style='\" + style + \"' \" + ariaAttrs + \" column_id='\" + col.name + \"'>\" + label + sort + \"</div>\";\r\n\t\t\tcells.push(cell);\r\n\t\t}\r\n\t\tthis.$grid_scale.style.height = (config.scale_height - 1) + \"px\";\r\n\t\tthis.$grid_scale.style.lineHeight = lineHeigth + \"px\";\r\n\t\tthis.$grid_scale.style.width = (width) + \"px\";\r\n\t\tthis.$grid_scale.innerHTML = cells.join(\"\");\r\n\r\n\t\tif(this._renderHeaderResizers){\r\n\t\t\tthis._renderHeaderResizers();\r\n\t\t}\r\n\t},\r\n\r\n\t_getGridWidth: function(){\r\n\t\treturn this.$config.width;\r\n\t},\r\n\r\n\tdestroy: function(){\r\n\t\tthis._clearLayers(this.$gantt);\r\n\r\n\t\tthis.$grid = null;\r\n\t\tthis.$grid_scale = null;\r\n\t\tthis.$grid_data = null;\r\n\t\tthis.$gantt = null;\r\n\t\tthis.callEvent(\"onDestroy\", []);\r\n\t\tthis.detachAllEvents();\r\n\t}\r\n};\r\n\r\nmodule.exports = Grid;\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// c:/www-recent/gantt/sources/core/ui/grid/grid.js\n// module id = 38\n// module chunks = 0","function createResizer(gantt, grid){\r\n\treturn {\r\n\t\tinit: function(){},\r\n\t\tdoOnRender: function(){}\r\n\t};\r\n}\r\n\r\nmodule.exports = createResizer;\n\n\n//////////////////\n// WEBPACK FOOTER\n// c:/www-recent/gantt/sources/core/ui/grid/grid_resize.gpl.js\n// module id = 39\n// module chunks = 0","function createTaskRenderer(gantt){\r\n\r\n\tfunction _render_task_element(task, view) {\r\n\t\tvar config = view.$getConfig();\r\n\t\tvar painters = config.type_renderers;\r\n\t\tvar renderer = painters[gantt.getTaskType(task.type)],\r\n\t\t\tdefaultRenderer = _task_default_render;\r\n\r\n\t\tif (!renderer) {\r\n\t\t\trenderer = defaultRenderer;\r\n\t\t}\r\n\t\treturn renderer.call(gantt, task, view, gantt.bind(defaultRenderer, gantt));\r\n\t}\r\n\r\n\tfunction _task_default_render(task, view) {\r\n\t\tif (gantt._isAllowedUnscheduledTask(task))\r\n\t\t\treturn;\r\n\r\n\r\n\t\tvar pos = view.getItemPosition(task);\r\n\r\n\t\tvar cfg = view.$getConfig();\r\n\t\tvar height = view.getItemHeight();\r\n\r\n\t\tvar taskType = gantt.getTaskType(task.type);\r\n\r\n\t\tvar padd = Math.floor((gantt.config.row_height - height) / 2);\r\n\t\tif (taskType == cfg.types.milestone && cfg.link_line_width > 1) {\r\n\t\t\t//little adjust milestone position, so horisontal corners would match link arrow when thickness of link line is more than 1px\r\n\t\t\tpadd += 1;\r\n\t\t}\r\n\r\n\t\tif (taskType == cfg.types.milestone){\r\n\t\t\tpos.left -= Math.round(height / 2);\r\n\t\t\tpos.width = height;\r\n\t\t}\r\n\r\n\t\tvar div = document.createElement(\"div\");\r\n\r\n\t\tvar width = Math.round(pos.width);\r\n\r\n\t\tif(view.$config.item_attribute){\r\n\t\t\tdiv.setAttribute(view.$config.item_attribute, task.id);\r\n\t\t}\r\n\r\n\t\tif (cfg.show_progress && taskType != cfg.types.milestone) {\r\n\t\t\t_render_task_progress(task, div, width);\r\n\t\t}\r\n\r\n\t\t//use separate div to display content above progress bar\r\n\t\tvar content = _render_task_content(task, width);\r\n\t\tif (task.textColor) {\r\n\t\t\tcontent.style.color = task.textColor;\r\n\t\t}\r\n\t\tdiv.appendChild(content);\r\n\r\n\t\tvar css = _combine_item_class(\"gantt_task_line\",\r\n\t\t\tgantt.templates.task_class(task.start_date, task.end_date, task),\r\n\t\t\ttask.id,\r\n\t\t\tview);\r\n\t\tif (task.color || task.progressColor || task.textColor) {\r\n\t\t\tcss += \" gantt_task_inline_color\";\r\n\t\t}\r\n\t\tdiv.className = css;\r\n\r\n\t\tvar styles = [\r\n\t\t\t\"left:\" + pos.left + \"px\",\r\n\t\t\t\"top:\" + (padd + pos.top) + 'px',\r\n\t\t\t\"height:\" + height + 'px',\r\n\t\t\t\"line-height:\" + (Math.max(height < 30 ? height - 2 : height, 0)) + 'px',\r\n\t\t\t\"width:\" + width + 'px'\r\n\t\t];\r\n\t\tif (task.color) {\r\n\t\t\tstyles.push(\"background-color:\" + task.color);\r\n\t\t}\r\n\t\tif (task.textColor) {\r\n\t\t\tstyles.push(\"color:\" + task.textColor);\r\n\t\t}\r\n\r\n\t\tdiv.style.cssText = styles.join(\";\");\r\n\t\tvar side = _render_leftside_content(task);\r\n\t\tif (side) div.appendChild(side);\r\n\r\n\t\tside = _render_rightside_content(task);\r\n\t\tif (side) div.appendChild(side);\r\n\r\n\t\tgantt._waiAria.setTaskBarAttr(task, div);\r\n\r\n\t\tvar state = gantt.getState();\r\n\r\n\t\tif (!gantt.isReadonly(task)) {\r\n\t\t\tif (cfg.drag_resize && !gantt.isSummaryTask(task) && taskType != cfg.types.milestone) {\r\n\t\t\t\t_render_pair(div, \"gantt_task_drag\", task, function (css) {\r\n\t\t\t\t\tvar el = document.createElement(\"div\");\r\n\t\t\t\t\tel.className = css;\r\n\t\t\t\t\treturn el;\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t\tif (cfg.drag_links && cfg.show_links) {\r\n\t\t\t\t_render_pair(div, \"gantt_link_control\", task, function (css) {\r\n\t\t\t\t\tvar outer = document.createElement(\"div\");\r\n\t\t\t\t\touter.className = css;\r\n\t\t\t\t\touter.style.cssText = [\r\n\t\t\t\t\t\t\"height:\" + height + 'px',\r\n\t\t\t\t\t\t\"line-height:\" + height + 'px'\r\n\t\t\t\t\t].join(\";\");\r\n\t\t\t\t\tvar inner = document.createElement(\"div\");\r\n\t\t\t\t\tinner.className = \"gantt_link_point\";\r\n\r\n\t\t\t\t\tvar showLinkPoints = false;\r\n\t\t\t\t\tif(state.link_source_id && cfg.touch){\r\n\t\t\t\t\t\tshowLinkPoints = true;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tinner.style.display = showLinkPoints ? \"block\" : \"\";\r\n\t\t\t\t\touter.appendChild(inner);\r\n\t\t\t\t\treturn outer;\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn div;\r\n\t}\r\n\r\n\tfunction _render_side_content(task, template, cssClass) {\r\n\t\tif (!template) return null;\r\n\r\n\t\tvar text = template(task.start_date, task.end_date, task);\r\n\t\tif (!text) return null;\r\n\t\tvar content = document.createElement(\"div\");\r\n\t\tcontent.className = \"gantt_side_content \" + cssClass;\r\n\t\tcontent.innerHTML = text;\r\n\t\treturn content;\r\n\t}\r\n\r\n\tfunction _render_leftside_content(task) {\r\n\t\tvar css = \"gantt_left \" + _get_link_crossing_css(true, task);\r\n\t\treturn _render_side_content(task, gantt.templates.leftside_text, css);\r\n\t}\r\n\r\n\tfunction _render_rightside_content(task) {\r\n\t\tvar css = \"gantt_right \" + _get_link_crossing_css(false, task);\r\n\t\treturn _render_side_content(task, gantt.templates.rightside_text, css);\r\n\t}\r\n\r\n\tfunction _get_link_crossing_css(left, task) {\r\n\t\tvar cond = _get_conditions(left);\r\n\r\n\t\tfor (var i in cond) {\r\n\t\t\tvar links = task[i];\r\n\t\t\tfor (var ln = 0; ln < links.length; ln++) {\r\n\t\t\t\tvar link = gantt.getLink(links[ln]);\r\n\r\n\t\t\t\tfor (var tp = 0; tp < cond[i].length; tp++) {\r\n\t\t\t\t\tif (link.type == cond[i][tp]) {\r\n\t\t\t\t\t\treturn \"gantt_link_crossing\";\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn \"\";\r\n\t}\r\n\r\n\r\n\tfunction _render_task_content(task, width) {\r\n\t\tvar content = document.createElement(\"div\");\r\n\t\tif (gantt.getTaskType(task.type) != gantt.config.types.milestone)\r\n\t\t\tcontent.innerHTML = gantt.templates.task_text(task.start_date, task.end_date, task);\r\n\t\tcontent.className = \"gantt_task_content\";\r\n\t\t//content.style.width = width + 'px';\r\n\t\treturn content;\r\n\t}\r\n\r\n\tfunction _render_task_progress(task, element, maxWidth) {\r\n\t\tvar done = task.progress * 1 || 0;\r\n\r\n\t\tmaxWidth = Math.max(maxWidth - 2, 0);//2px for borders\r\n\t\tvar pr = document.createElement(\"div\");\r\n\t\tvar width = Math.round(maxWidth * done);\r\n\r\n\t\twidth = Math.min(maxWidth, width);\r\n\t\tif (task.progressColor) {\r\n\t\t\tpr.style.backgroundColor = task.progressColor;\r\n\t\t\tpr.style.opacity = 1;\r\n\t\t}\r\n\t\tpr.style.width = width + 'px';\r\n\t\tpr.className = \"gantt_task_progress\";\r\n\t\tpr.innerHTML = gantt.templates.progress_text(task.start_date, task.end_date, task);\r\n\r\n\t\tvar wrapper = document.createElement(\"div\");\r\n\t\twrapper.className = \"gantt_task_progress_wrapper\";\r\n\t\twrapper.appendChild(pr);\r\n\t\telement.appendChild(wrapper);\r\n\r\n\t\tif (gantt.config.drag_progress && !gantt.isReadonly(task)) {\r\n\t\t\tvar drag = document.createElement(\"div\");\r\n\t\t\tdrag.style.left = width + 'px';\r\n\t\t\tdrag.className = \"gantt_task_progress_drag\";\r\n\t\t\tpr.appendChild(drag);\r\n\t\t\telement.appendChild(drag);\r\n\t\t}\r\n\t}\r\n\r\n\tfunction _get_conditions(leftside) {\r\n\t\tif (leftside) {\r\n\t\t\treturn {\r\n\t\t\t\t$source: [\r\n\t\t\t\t\tgantt.config.links.start_to_start\r\n\t\t\t\t],\r\n\t\t\t\t$target: [\r\n\t\t\t\t\tgantt.config.links.start_to_start,\r\n\t\t\t\t\tgantt.config.links.finish_to_start\r\n\t\t\t\t]\r\n\t\t\t};\r\n\t\t} else {\r\n\t\t\treturn {\r\n\t\t\t\t$source: [\r\n\t\t\t\t\tgantt.config.links.finish_to_start,\r\n\t\t\t\t\tgantt.config.links.finish_to_finish\r\n\t\t\t\t],\r\n\t\t\t\t$target: [\r\n\t\t\t\t\tgantt.config.links.finish_to_finish\r\n\t\t\t\t]\r\n\t\t\t};\r\n\t\t}\r\n\t}\r\n\r\n\tfunction _combine_item_class(basic, template, itemId, view) {\r\n\t\tvar cfg = view.$getConfig();\r\n\t\tvar css = [basic];\r\n\t\tif (template)\r\n\t\t\tcss.push(template);\r\n\r\n\t\tvar state = gantt.getState();\r\n\r\n\t\tvar task = gantt.getTask(itemId);\r\n\r\n\t\tif (gantt.getTaskType(task.type) == cfg.types.milestone) {\r\n\t\t\tcss.push(\"gantt_milestone\");\r\n\t\t}\r\n\r\n\t\tif (gantt.getTaskType(task.type) == cfg.types.project) {\r\n\t\t\tcss.push(\"gantt_project\");\r\n\t\t}\r\n\r\n\t\tif (gantt.isSummaryTask(task))\r\n\t\t\tcss.push(\"gantt_dependent_task\");\r\n\r\n\t\tif (cfg.select_task && itemId == state.selected_task)\r\n\t\t\tcss.push(\"gantt_selected\");\r\n\r\n\t\tif (itemId == state.drag_id) {\r\n\t\t\tcss.push(\"gantt_drag_\" + state.drag_mode);\r\n\t\t\tif (state.touch_drag) {\r\n\t\t\t\tcss.push(\"gantt_touch_\" + state.drag_mode);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif (state.link_source_id == itemId)\r\n\t\t\tcss.push(\"gantt_link_source\");\r\n\r\n\t\tif (state.link_target_id == itemId)\r\n\t\t\tcss.push(\"gantt_link_target\");\r\n\r\n\r\n\t\tif (cfg.highlight_critical_path && gantt.isCriticalTask) {\r\n\t\t\tif (gantt.isCriticalTask(task))\r\n\t\t\t\tcss.push(\"gantt_critical_task\");\r\n\t\t}\r\n\r\n\t\tif (state.link_landing_area &&\r\n\t\t\t(state.link_target_id && state.link_source_id) &&\r\n\t\t\t(state.link_target_id != state.link_source_id)) {\r\n\r\n\t\t\tvar from_id = state.link_source_id;\r\n\t\t\tvar from_start = state.link_from_start;\r\n\t\t\tvar to_start = state.link_to_start;\r\n\r\n\t\t\tvar allowDrag = gantt.isLinkAllowed(from_id, itemId, from_start, to_start);\r\n\r\n\t\t\tvar dragClass = \"\";\r\n\t\t\tif (allowDrag) {\r\n\t\t\t\tif (to_start)\r\n\t\t\t\t\tdragClass = \"link_start_allow\";\r\n\t\t\t\telse\r\n\t\t\t\t\tdragClass = \"link_finish_allow\";\r\n\t\t\t} else {\r\n\t\t\t\tif (to_start)\r\n\t\t\t\t\tdragClass = \"link_start_deny\";\r\n\t\t\t\telse\r\n\t\t\t\t\tdragClass = \"link_finish_deny\";\r\n\t\t\t}\r\n\t\t\tcss.push(dragClass);\r\n\t\t}\r\n\t\treturn css.join(\" \");\r\n\t}\r\n\r\n\tfunction _render_pair(parent, css, task, content) {\r\n\t\tvar state = gantt.getState();\r\n\r\n\t\tif (+task.start_date >= +state.min_date)\r\n\t\t\tparent.appendChild(content(css + \" task_left\"));\r\n\r\n\t\tif (+task.end_date <= +state.max_date)\r\n\t\t\tparent.appendChild(content(css + \" task_right\"));\r\n\t}\r\n\r\n\treturn _render_task_element;\r\n}\r\n\r\nmodule.exports = createTaskRenderer;\n\n\n//////////////////\n// WEBPACK FOOTER\n// c:/www-recent/gantt/sources/core/ui/render/task_bar_render.js\n// module id = 40\n// module chunks = 0","function createTaskBgRender(gantt){\r\n\t//this.getTaskTop\r\n\tfunction _render_bg_line(item, view) {\r\n\t\tvar config = view.$getConfig();\r\n\t\tvar cfg = view.getScale();\r\n\t\tvar count = cfg.count;\r\n\t\tvar row = document.createElement(\"div\");\r\n\t\tif (config.show_task_cells) {\r\n\t\t\tfor (var j = 0; j < count; j++) {\r\n\t\t\t\tvar width = cfg.width[j],\r\n\t\t\t\t\tcssclass = \"\";\r\n\r\n\t\t\t\tif (width > 0) {//do not render skipped columns\r\n\t\t\t\t\tvar cell = document.createElement(\"div\");\r\n\t\t\t\t\tcell.style.width = (width) + \"px\";\r\n\r\n\t\t\t\t\tcssclass = \"gantt_task_cell\" + (j == count - 1 ? \" gantt_last_cell\" : \"\");\r\n\t\t\t\t\tcssTemplate = gantt.templates.task_cell_class(item, cfg.trace_x[j]);\r\n\t\t\t\t\tif (cssTemplate)\r\n\t\t\t\t\t\tcssclass += \" \" + cssTemplate;\r\n\t\t\t\t\tcell.className = cssclass;\r\n\r\n\t\t\t\t\trow.appendChild(cell);\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\t\t}\r\n\t\tvar odd = gantt.getGlobalTaskIndex(item.id) % 2 !== 0;\r\n\t\tvar cssTemplate = gantt.templates.task_row_class(item.start_date, item.end_date, item);\r\n\t\tvar css = \"gantt_task_row\" + (odd ? \" odd\" : \"\") + (cssTemplate ? ' ' + cssTemplate : '');\r\n\r\n\t\tif (gantt.getState().selected_task == item.id) {\r\n\t\t\tcss += \" gantt_selected\";\r\n\t\t}\r\n\r\n\t\t//var row = \"<div class='\" + css + \"' \" + this.config.task_attribute + \"='\" + item.id + \"'>\" + cells.join(\"\") + \"</div>\";\r\n\r\n\t\trow.className = css;\r\n\r\n\t\tif (config.smart_rendering) {\r\n\t\t\trow.style.position = \"absolute\";\r\n\t\t\trow.style.top = view.getItemPosition(item).top + \"px\";\r\n\t\t\trow.style.width = \"100%\";\r\n\t\t}\r\n\t\trow.style.height = (config.row_height) + \"px\";\r\n\r\n\t\tif(view.$config.item_attribute){\r\n\t\t\trow.setAttribute(view.$config.item_attribute, item.id);\r\n\t\t}\r\n\r\n\t\treturn row;\r\n\t}\r\n\r\n\treturn _render_bg_line;\r\n}\r\n\r\nmodule.exports = createTaskBgRender;\n\n\n//////////////////\n// WEBPACK FOOTER\n// c:/www-recent/gantt/sources/core/ui/render/task_bg_render.js\n// module id = 41\n// module chunks = 0","\r\nfunction createLinkRender(gantt){\r\n\r\nfunction _render_link_element(link, view) {\r\n\tvar config = view.$getConfig();\r\n\tvar dots = path_builder.get_points(link, view);\r\n\tvar lines = drawer.get_lines(dots, view);\r\n\r\n\tvar div = document.createElement(\"div\");\r\n\r\n\tvar css = \"gantt_task_link\";\r\n\r\n\tif (link.color) {\r\n\t\tcss += \" gantt_link_inline_color\";\r\n\t}\r\n\tvar cssTemplate = gantt.templates.link_class ? gantt.templates.link_class(link) : \"\";\r\n\tif (cssTemplate) {\r\n\t\tcss += \" \" + cssTemplate;\r\n\t}\r\n\r\n\tif (config.highlight_critical_path && gantt.isCriticalLink) {\r\n\t\tif (gantt.isCriticalLink(link))\r\n\t\t\tcss += \" gantt_critical_link\";\r\n\t}\r\n\r\n\tdiv.className = css;\r\n\r\n\tif(view.$config.link_attribute){\r\n\t\tdiv.setAttribute(view.$config.link_attribute, link.id);\r\n\t}\r\n\r\n\tfor (var i = 0; i < lines.length; i++) {\r\n\t\tif (i == lines.length - 1) {\r\n\t\t\tlines[i].size -= config.link_arrow_size;\r\n\t\t}\r\n\t\tvar el = drawer.render_line(lines[i], lines[i + 1], view);\r\n\t\tif (link.color) {\r\n\t\t\tel.firstChild.style.backgroundColor = link.color;\r\n\t\t}\r\n\t\tdiv.appendChild(el);\r\n\t}\r\n\r\n\tvar direction = lines[lines.length - 1].direction;\r\n\tvar endpoint = _render_link_arrow(dots[dots.length - 1], direction, view);\r\n\tif (link.color) {\r\n\t\tendpoint.style.borderColor = link.color;\r\n\t}\r\n\tdiv.appendChild(endpoint);\r\n\r\n\tgantt._waiAria.linkAttr(link, div);\r\n\r\n\treturn div;\r\n}\r\n\r\nfunction _render_link_arrow(point, direction, view) {\r\n\tvar config = view.$getConfig();\r\n\tvar div = document.createElement(\"div\");\r\n\tvar top = point.y;\r\n\tvar left = point.x;\r\n\r\n\tvar size = config.link_arrow_size;\r\n\tvar line_width = config.row_height;\r\n\tvar className = \"gantt_link_arrow gantt_link_arrow_\" + direction;\r\n\tswitch (direction) {\r\n\t\tcase drawer.dirs.right:\r\n\t\t\ttop -= (size - line_width) / 2;\r\n\t\t\tleft -= size;\r\n\t\t\tbreak;\r\n\t\tcase drawer.dirs.left:\r\n\t\t\ttop -= (size - line_width) / 2;\r\n\t\t\tbreak;\r\n\t\tcase drawer.dirs.up:\r\n\t\t\tleft -= size;\r\n\t\t\tbreak;\r\n\t\tcase drawer.dirs.down:\r\n\t\t\ttop += size * 2;\r\n\t\t\tleft -= size;\r\n\t\t\tbreak;\r\n\t\tdefault:\r\n\t\t\tbreak;\r\n\t}\r\n\tdiv.style.cssText = [\r\n\t\t\"top:\" + top + \"px\",\r\n\t\t\"left:\" + left + 'px'].join(';');\r\n\tdiv.className = className;\r\n\r\n\treturn div;\r\n}\r\n\r\n\r\nvar drawer = {\r\n\tcurrent_pos: null,\r\n\tdirs: {\"left\": 'left', \"right\": 'right', \"up\": 'up', \"down\": 'down'},\r\n\tpath: [],\r\n\tclear: function () {\r\n\t\tthis.current_pos = null;\r\n\t\tthis.path = [];\r\n\t},\r\n\tpoint: function (pos) {\r\n\t\tthis.current_pos = gantt.copy(pos);\r\n\t},\r\n\tget_lines: function (dots) {\r\n\t\tthis.clear();\r\n\t\tthis.point(dots[0]);\r\n\t\tfor (var i = 1; i < dots.length; i++) {\r\n\t\t\tthis.line_to(dots[i]);\r\n\t\t}\r\n\t\treturn this.get_path();\r\n\t},\r\n\tline_to: function (pos) {\r\n\t\tvar next = gantt.copy(pos);\r\n\t\tvar prev = this.current_pos;\r\n\r\n\t\tvar line = this._get_line(prev, next);\r\n\t\tthis.path.push(line);\r\n\t\tthis.current_pos = next;\r\n\t},\r\n\tget_path: function () {\r\n\t\treturn this.path;\r\n\t},\r\n\tget_wrapper_sizes: function (v, view) {\r\n\t\tvar config = view.$getConfig();\r\n\t\tvar res,\r\n\t\t\twrapper_size = config.link_wrapper_width,\r\n\t\t\tline_size = config.link_line_width,\r\n\t\t\ty = v.y + (config.row_height - wrapper_size) / 2;\r\n\t\tswitch (v.direction) {\r\n\t\t\tcase this.dirs.left:\r\n\t\t\t\tres = {\r\n\t\t\t\t\ttop: y,\r\n\t\t\t\t\theight: wrapper_size,\r\n\t\t\t\t\tlineHeight: wrapper_size,\r\n\t\t\t\t\tleft: v.x - v.size - wrapper_size / 2,\r\n\t\t\t\t\twidth: v.size + wrapper_size\r\n\t\t\t\t};\r\n\t\t\t\tbreak;\r\n\t\t\tcase this.dirs.right:\r\n\t\t\t\tres = {\r\n\t\t\t\t\ttop: y,\r\n\t\t\t\t\tlineHeight: wrapper_size,\r\n\t\t\t\t\theight: wrapper_size,\r\n\t\t\t\t\tleft: v.x - wrapper_size / 2,\r\n\t\t\t\t\twidth: v.size + wrapper_size\r\n\t\t\t\t};\r\n\t\t\t\tbreak;\r\n\t\t\tcase this.dirs.up:\r\n\t\t\t\tres = {\r\n\t\t\t\t\ttop: y - v.size,\r\n\t\t\t\t\tlineHeight: v.size + wrapper_size,\r\n\t\t\t\t\theight: v.size + wrapper_size,\r\n\t\t\t\t\tleft: v.x - wrapper_size / 2,\r\n\t\t\t\t\twidth: wrapper_size\r\n\t\t\t\t};\r\n\t\t\t\tbreak;\r\n\t\t\tcase this.dirs.down:\r\n\t\t\t\tres = {\r\n\t\t\t\t\ttop: y /*- wrapper_size/2*/,\r\n\t\t\t\t\tlineHeight: v.size + wrapper_size,\r\n\t\t\t\t\theight: v.size + wrapper_size,\r\n\t\t\t\t\tleft: v.x - wrapper_size / 2,\r\n\t\t\t\t\twidth: wrapper_size\r\n\t\t\t\t};\r\n\t\t\t\tbreak;\r\n\t\t\tdefault:\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\r\n\t\treturn res;\r\n\t},\r\n\tget_line_sizes: function (v, view) {\r\n\t\tvar config = view.$getConfig();\r\n\t\tvar res,\r\n\t\t\tline_size = config.link_line_width,\r\n\t\t\twrapper_size = config.link_wrapper_width,\r\n\t\t\tsize = v.size + line_size;\r\n\t\tswitch (v.direction) {\r\n\t\t\tcase this.dirs.left:\r\n\t\t\tcase this.dirs.right:\r\n\t\t\t\tres = {\r\n\t\t\t\t\theight: line_size,\r\n\t\t\t\t\twidth: size,\r\n\t\t\t\t\tmarginTop: (wrapper_size - line_size) / 2,\r\n\t\t\t\t\tmarginLeft: (wrapper_size - line_size) / 2\r\n\t\t\t\t};\r\n\t\t\t\tbreak;\r\n\t\t\tcase this.dirs.up:\r\n\t\t\tcase this.dirs.down:\r\n\t\t\t\tres = {\r\n\t\t\t\t\theight: size,\r\n\t\t\t\t\twidth: line_size,\r\n\t\t\t\t\tmarginTop: (wrapper_size - line_size) / 2,\r\n\t\t\t\t\tmarginLeft: (wrapper_size - line_size) / 2\r\n\t\t\t\t};\r\n\t\t\t\tbreak;\r\n\t\t\tdefault:\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\r\n\r\n\t\treturn res;\r\n\t},\r\n\trender_line: function (v, end, view) {\r\n\t\tvar pos = this.get_wrapper_sizes(v, view);\r\n\t\tvar wrapper = document.createElement(\"div\");\r\n\t\twrapper.style.cssText = [\r\n\t\t\t\"top:\" + pos.top + \"px\",\r\n\t\t\t\"left:\" + pos.left + \"px\",\r\n\t\t\t\"height:\" + pos.height + \"px\",\r\n\t\t\t\"width:\" + pos.width + \"px\"\r\n\t\t].join(';');\r\n\t\twrapper.className = \"gantt_line_wrapper\";\r\n\r\n\t\tvar innerPos = this.get_line_sizes(v, view);\r\n\t\tvar inner = document.createElement(\"div\");\r\n\t\tinner.style.cssText = [\r\n\t\t\t\"height:\" + innerPos.height + \"px\",\r\n\t\t\t\"width:\" + innerPos.width + \"px\",\r\n\t\t\t\"margin-top:\" + innerPos.marginTop + \"px\",\r\n\t\t\t\"margin-left:\" + innerPos.marginLeft + \"px\"\r\n\t\t].join(\";\");\r\n\r\n\t\tinner.className = \"gantt_link_line_\" + v.direction;\r\n\t\twrapper.appendChild(inner);\r\n\r\n\t\treturn wrapper;\r\n\t},\r\n\t_get_line: function (from, to) {\r\n\t\tvar direction = this.get_direction(from, to);\r\n\t\tvar vect = {\r\n\t\t\tx: from.x,\r\n\t\t\ty: from.y,\r\n\t\t\tdirection: this.get_direction(from, to)\r\n\t\t};\r\n\t\tif (direction == this.dirs.left || direction == this.dirs.right) {\r\n\t\t\tvect.size = Math.abs(from.x - to.x);\r\n\t\t} else {\r\n\t\t\tvect.size = Math.abs(from.y - to.y);\r\n\t\t}\r\n\t\treturn vect;\r\n\t},\r\n\tget_direction: function (from, to) {\r\n\t\tvar direction = 0;\r\n\t\tif (to.x < from.x) {\r\n\t\t\tdirection = this.dirs.left;\r\n\t\t} else if (to.x > from.x) {\r\n\t\t\tdirection = this.dirs.right;\r\n\t\t} else if (to.y > from.y) {\r\n\t\t\tdirection = this.dirs.down;\r\n\t\t} else {\r\n\t\t\tdirection = this.dirs.up;\r\n\t\t}\r\n\t\treturn direction;\r\n\t}\r\n\r\n};\r\n\r\nvar path_builder = {\r\n\r\n\tpath: [],\r\n\tclear: function () {\r\n\t\tthis.path = [];\r\n\t},\r\n\tcurrent: function () {\r\n\t\treturn this.path[this.path.length - 1];\r\n\t},\r\n\tpoint: function (next) {\r\n\t\tif (!next)\r\n\t\t\treturn this.current();\r\n\r\n\t\tthis.path.push(gantt.copy(next));\r\n\t\treturn next;\r\n\t},\r\n\tpoint_to: function (direction, diff, point) {\r\n\t\tif (!point)\r\n\t\t\tpoint = gantt.copy(this.point());\r\n\t\telse\r\n\t\t\tpoint = {x: point.x, y: point.y};\r\n\t\tvar dir = drawer.dirs;\r\n\t\tswitch (direction) {\r\n\t\t\tcase (dir.left):\r\n\t\t\t\tpoint.x -= diff;\r\n\t\t\t\tbreak;\r\n\t\t\tcase (dir.right):\r\n\t\t\t\tpoint.x += diff;\r\n\t\t\t\tbreak;\r\n\t\t\tcase (dir.up):\r\n\t\t\t\tpoint.y -= diff;\r\n\t\t\t\tbreak;\r\n\t\t\tcase (dir.down):\r\n\t\t\t\tpoint.y += diff;\r\n\t\t\t\tbreak;\r\n\t\t\tdefault:\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\t\treturn this.point(point);\r\n\t},\r\n\tget_points: function (link, view) {\r\n\t\tvar config = view.$getConfig();\r\n\t\tvar pt = this.get_endpoint(link, view);\r\n\t\tvar xy = gantt.config;\r\n\r\n\r\n\t\tvar dy = pt.e_y - pt.y;\r\n\t\tvar dx = pt.e_x - pt.x;\r\n\r\n\t\tvar dir = drawer.dirs;\r\n\r\n\t\tthis.clear();\r\n\t\tthis.point({x: pt.x, y: pt.y});\r\n\r\n\t\tvar shiftX = 2 * xy.link_arrow_size;//just random size for first line\r\n\r\n\r\n\t\tvar forward = (pt.e_x > pt.x);\r\n\t\tif (link.type == config.links.start_to_start) {\r\n\t\t\tthis.point_to(dir.left, shiftX);\r\n\t\t\tif (forward) {\r\n\t\t\t\tthis.point_to(dir.down, dy);\r\n\t\t\t\tthis.point_to(dir.right, dx);\r\n\t\t\t} else {\r\n\t\t\t\tthis.point_to(dir.right, dx);\r\n\t\t\t\tthis.point_to(dir.down, dy);\r\n\t\t\t}\r\n\t\t\tthis.point_to(dir.right, shiftX);\r\n\r\n\t\t} else if (link.type == config.links.finish_to_start) {\r\n\t\t\tforward = (pt.e_x > (pt.x + 2 * shiftX));\r\n\t\t\tthis.point_to(dir.right, shiftX);\r\n\t\t\tif (forward) {\r\n\t\t\t\tdx -= shiftX;\r\n\t\t\t\tthis.point_to(dir.down, dy);\r\n\t\t\t\tthis.point_to(dir.right, dx);\r\n\t\t\t} else {\r\n\t\t\t\tdx -= 2 * shiftX;\r\n\t\t\t\tvar sign = dy > 0 ? 1 : -1;\r\n\r\n\t\t\t\tthis.point_to(dir.down, sign * (xy.row_height / 2));\r\n\t\t\t\tthis.point_to(dir.right, dx);\r\n\t\t\t\tthis.point_to(dir.down, sign * ( Math.abs(dy) - (xy.row_height / 2)));\r\n\t\t\t\tthis.point_to(dir.right, shiftX);\r\n\t\t\t}\r\n\r\n\t\t} else if (link.type == config.links.finish_to_finish) {\r\n\t\t\tthis.point_to(dir.right, shiftX);\r\n\t\t\tif (forward) {\r\n\t\t\t\tthis.point_to(dir.right, dx);\r\n\t\t\t\tthis.point_to(dir.down, dy);\r\n\t\t\t} else {\r\n\t\t\t\tthis.point_to(dir.down, dy);\r\n\t\t\t\tthis.point_to(dir.right, dx);\r\n\t\t\t}\r\n\t\t\tthis.point_to(dir.left, shiftX);\r\n\t\t} else if (link.type == config.links.start_to_finish) {\r\n\r\n\t\t\tforward = (pt.e_x > (pt.x - 2 * shiftX));\r\n\t\t\tthis.point_to(dir.left, shiftX);\r\n\r\n\t\t\tif (!forward) {\r\n\t\t\t\tdx += shiftX;\r\n\t\t\t\tthis.point_to(dir.down, dy);\r\n\t\t\t\tthis.point_to(dir.right, dx);\r\n\t\t\t} else {\r\n\t\t\t\tdx += 2 * shiftX;\r\n\t\t\t\tvar sign = dy > 0 ? 1 : -1;\r\n\t\t\t\tthis.point_to(dir.down, sign * (xy.row_height / 2));\r\n\t\t\t\tthis.point_to(dir.right, dx);\r\n\t\t\t\tthis.point_to(dir.down, sign * ( Math.abs(dy) - (xy.row_height / 2)));\r\n\t\t\t\tthis.point_to(dir.left, shiftX);\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn this.path;\r\n\t},\r\n\tget_endpoint: function (link, view) {\r\n\t\tvar config = view.$getConfig();\r\n\t\tvar types = config.links;\r\n\t\tvar from_start = false, to_start = false;\r\n\r\n\t\tif (link.type == types.start_to_start) {\r\n\t\t\tfrom_start = to_start = true;\r\n\t\t} else if (link.type == types.finish_to_finish) {\r\n\t\t\tfrom_start = to_start = false;\r\n\t\t} else if (link.type == types.finish_to_start) {\r\n\t\t\tfrom_start = false;\r\n\t\t\tto_start = true;\r\n\t\t} else if (link.type == types.start_to_finish) {\r\n\t\t\tfrom_start = true;\r\n\t\t\tto_start = false;\r\n\t\t} else {\r\n\t\t\tgantt.assert(false, \"Invalid link type\");\r\n\t\t}\r\n\r\n\t\tvar source = gantt.getTask(link.source);\r\n\t\tvar target = gantt.getTask(link.target);\r\n\r\n\t\tvar from = getMilestonePosition(source, view),\r\n\t\t\tto = getMilestonePosition(target, view);\r\n\r\n\t\treturn {\r\n\t\t\tx: from_start ? from.left : (from.left + from.width),\r\n\t\t\te_x: to_start ? to.left : (to.left + to.width),\r\n\t\t\ty: from.top,\r\n\t\t\te_y: to.top\r\n\t\t};\r\n\t}\r\n};\r\n\r\nfunction getMilestonePosition(task, view){\r\n\tvar config = view.$getConfig();\r\n\tvar pos = view.getItemPosition(task);\r\n\tif(gantt.getTaskType(task.type) == config.types.milestone){\r\n\t\tvar milestoneHeight = gantt.getTaskHeight();\r\n\t\tvar milestoneWidth = Math.sqrt(2*milestoneHeight*milestoneHeight);\r\n\t\tpos.left -= milestoneWidth / 2;\r\n\t\tpos.width = milestoneWidth;\r\n\t}\r\n\treturn pos;\r\n}\r\n\r\nreturn _render_link_element;\r\n\r\n}\r\n\r\nmodule.exports = createLinkRender;\n\n\n//////////////////\n// WEBPACK FOOTER\n// c:/www-recent/gantt/sources/core/ui/render/link_render.js\n// module id = 42\n// module chunks = 0","function createGridLineRender(gantt){\r\n\tfunction _render_grid_item(item, view) {\r\n\t\t//if (!_is_grid_visible.call(this))\r\n\t\t//\treturn null;\r\n\r\n\t\tvar columns = view.getGridColumns();\r\n\t\tvar config = view.$getConfig();\r\n\r\n\t\tvar cells = [];\r\n\t\tvar width = 0;\r\n\t\tvar has_child;\r\n\t\tfor (var i = 0; i < columns.length; i++) {\r\n\t\t\tvar last = i == columns.length - 1;\r\n\t\t\tvar col = columns[i];\r\n\t\t\tvar cell;\r\n\r\n\t\t\tvar value;\r\n\t\t\tvar textValue;\r\n\t\t\tif (col.name == \"add\") {\r\n\t\t\t\tvar aria = gantt._waiAria.gridAddButtonAttrString(col);\r\n\r\n\t\t\t\tvalue = \"<div \" + aria + \" class='gantt_add'></div>\";\r\n\t\t\t\ttextValue = \"\";\r\n\t\t\t} else {\r\n\t\t\t\tif (col.template)\r\n\t\t\t\t\tvalue = col.template(item);\r\n\t\t\t\telse\r\n\t\t\t\t\tvalue = item[col.name];\r\n\r\n\t\t\t\tif (value instanceof Date)\r\n\t\t\t\t\tvalue = gantt.templates.date_grid(value, item);\r\n\t\t\t\ttextValue = value;\r\n\t\t\t\tvalue = \"<div class='gantt_tree_content'>\" + value + \"</div>\";\r\n\t\t\t}\r\n\t\t\tvar css = \"gantt_cell\" + (last ? \" gantt_last_cell\" : \"\");\r\n\r\n\t\t\tvar tree = \"\";\r\n\t\t\tif (col.tree) {\r\n\t\t\t\tfor (var j = 0; j < item.$level; j++)\r\n\t\t\t\t\ttree += gantt.templates.grid_indent(item);\r\n\r\n\t\t\t\thas_child = gantt._has_children(item.id);\r\n\t\t\t\tif (has_child) {\r\n\t\t\t\t\ttree += gantt.templates.grid_open(item);\r\n\t\t\t\t\ttree += gantt.templates.grid_folder(item);\r\n\t\t\t\t} else {\r\n\t\t\t\t\ttree += gantt.templates.grid_blank(item);\r\n\t\t\t\t\ttree += gantt.templates.grid_file(item);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tvar style = \"width:\" + (col.width - (last ? 1 : 0)) + \"px;\";\r\n\t\t\tif (this.defined(col.align))\r\n\t\t\t\tstyle += \"text-align:\" + col.align + \";\";\r\n\r\n\t\t\tvar aria = gantt._waiAria.gridCellAttrString(col, textValue);\r\n\r\n\t\t\tcell = \"<div class='\" + css + \"' style='\" + style + \"' \" + aria + \">\" + tree + value + \"</div>\";\r\n\t\t\tcells.push(cell);\r\n\t\t}\r\n\t\tvar css = gantt.getGlobalTaskIndex(item.id) % 2 === 0 ? \"\" : \" odd\";\r\n\t\tcss += (item.$transparent) ? \" gantt_transparent\" : \"\";\r\n\r\n\t\tcss += (item.$dataprocessor_class ? \" \" + item.$dataprocessor_class : \"\");\r\n\r\n\t\tif (gantt.templates.grid_row_class) {\r\n\t\t\tvar css_template = gantt.templates.grid_row_class.call(gantt, item.start_date, item.end_date, item);\r\n\t\t\tif (css_template)\r\n\t\t\t\tcss += \" \" + css_template;\r\n\t\t}\r\n\r\n\t\tif (gantt.getState().selected_task == item.id) {\r\n\t\t\tcss += \" gantt_selected\";\r\n\t\t}\r\n\t\tvar el = document.createElement(\"div\");\r\n\t\tel.className = \"gantt_row\" + css;\r\n\t\tel.style.height = config.row_height + \"px\";\r\n\t\tel.style.lineHeight = (config.row_height) + \"px\";\r\n\t\t\r\n\t\tif(view.$config.item_attribute){\r\n\t\t\tel.setAttribute(view.$config.item_attribute, item.id);\r\n\t\t}\r\n\r\n\t\tgantt._waiAria.taskRowAttr(item, el);\r\n\r\n\t\tel.innerHTML = cells.join(\"\");\r\n\t\treturn el;\r\n\t}\r\n\r\n\treturn _render_grid_item;\r\n}\r\n\r\nmodule.exports = createGridLineRender;\r\n\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// c:/www-recent/gantt/sources/core/ui/render/task_grid_line_render.js\n// module id = 43\n// module chunks = 0","var utils = require(\"../../../utils/utils\");\r\nvar rowDnd = require(\"./tasks_grid_dnd\");\r\n\r\nvar initializer = (function(){\r\n\treturn function(gantt){\r\n\t\treturn {\r\n\t\t\tonCreated: function (grid) {\r\n\t\t\t\tgrid.$config = utils.mixin(grid.$config, {\r\n\t\t\t\t\tbind: \"task\"\r\n\t\t\t\t});\r\n\t\t\t\tif(grid.$config.id == \"grid\") {\r\n\t\t\t\t\tthis.extendGantt(grid);\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tonInitialized: function (grid) {\r\n\t\t\t\tvar config = grid.$getConfig();\r\n\t\t\t\tif (config.order_branch) {\r\n\t\t\t\t\trowDnd.init(grid.$gantt, grid);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tthis.initEvents(grid, gantt);\r\n\t\t\t\tif(grid.$config.id == \"grid\") {\r\n\t\t\t\t\tthis.extendDom(grid);\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tonDestroyed: function (grid) {\r\n\t\t\t\tthis.clearEvents(grid, gantt);\r\n\t\t\t},\r\n\r\n\t\t\tinitEvents: function (grid, gantt) {\r\n\t\t\t\tthis._eventHandlers = [];\r\n\t\t\t\tvar mouseEvents = gantt.$services.getService(\"mouseEvents\");\r\n\r\n\t\t\t\tthis._eventHandlers.push([\"click\", \"gantt_close\", gantt.bind(function (e, id, trg) {\r\n\t\t\t\t\tthis.close(id);\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}, gantt)]);\r\n\t\t\t\tthis._eventHandlers.push([\"click\", \"gantt_open\", gantt.bind(function (e, id, trg) {\r\n\t\t\t\t\tthis.open(id);\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}, gantt)]);\r\n\r\n\t\t\t\tthis._eventHandlers.push([\"click\", \"gantt_row\", gantt.bind(function (e, id, trg) {\r\n\t\t\t\t\tvar config = grid.$getConfig();\r\n\t\t\t\t\tif (id !== null) {\r\n\t\t\t\t\t\tvar task = this.getTask(id);\r\n\t\t\t\t\t\tif (config.scroll_on_click)\r\n\t\t\t\t\t\t\tthis.showDate(task.start_date);\r\n\t\t\t\t\t\tgantt.callEvent(\"onTaskRowClick\", [id, trg]);\r\n\t\t\t\t\t}\r\n\t\t\t\t}, gantt)]);\r\n\r\n\t\t\t\tthis._eventHandlers.push([\"click\", \"gantt_grid_head_cell\", gantt.bind(function (e, id, trg) {\r\n\t\t\t\t\tvar column = trg.getAttribute(\"column_id\");\r\n\r\n\t\t\t\t\tif (!gantt.callEvent(\"onGridHeaderClick\", [column, e]))\r\n\t\t\t\t\t\treturn;\r\n\r\n\t\t\t\t\tvar config = grid.$getConfig();\r\n\r\n\t\t\t\t\tif (column == \"add\") {\r\n\t\t\t\t\t\tmouseEvents.callHandler(\"click\", \"gantt_add\", undefined, [e, config.root_id]);\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif (config.sort) {\r\n\t\t\t\t\t\tvar sorting_method = column,\r\n\t\t\t\t\t\t\tconf;\r\n\r\n\t\t\t\t\t\tfor (var i = 0; i < config.columns.length; i++) {\r\n\t\t\t\t\t\t\tif (config.columns[i].name == column) {\r\n\t\t\t\t\t\t\t\tconf = config.columns[i];\r\n\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tif (conf && conf.sort !== undefined && conf.sort !== true) {\r\n\t\t\t\t\t\t\tsorting_method = conf.sort;\r\n\r\n\t\t\t\t\t\t\tif (!sorting_method) { // column sort property 'false', no sorting\r\n\t\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tvar sort = (this._sort && this._sort.direction && this._sort.name == column) ? this._sort.direction : \"desc\";\r\n\t\t\t\t\t\t// invert sort direction\r\n\t\t\t\t\t\tsort = (sort == \"desc\") ? \"asc\" : \"desc\";\r\n\t\t\t\t\t\tthis._sort = {\r\n\t\t\t\t\t\t\tname: column,\r\n\t\t\t\t\t\t\tdirection: sort\r\n\t\t\t\t\t\t};\r\n\t\t\t\t\t\tthis.sort(sorting_method, sort == \"desc\");\r\n\t\t\t\t\t}\r\n\t\t\t\t}, gantt)]);\r\n\t\t\t\tthis._eventHandlers.push([\"click\", \"gantt_add\", gantt.bind(function (e, id, trg) {\r\n\t\t\t\t\tvar config = grid.$getConfig();\r\n\t\t\t\t\tif (config.readonly) return;\r\n\r\n\t\t\t\t\tvar item = {};\r\n\t\t\t\t\tthis.createTask(item, id ? id : gantt.config.root_id);\r\n\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}, gantt)]);\r\n\r\n\t\t\t\tfor (var i = 0; i < this._eventHandlers.length; i++) {\r\n\t\t\t\t\tvar h = this._eventHandlers[i];\r\n\t\t\t\t\tmouseEvents.delegate(h[0], h[1], h[2], this.$grid);\r\n\t\t\t\t}\r\n\t\t\t},\r\n\r\n\t\t\tclearEvents: function(grid, gantt){\r\n\t\t\t\tvar mouseEvents = gantt.$services.getService(\"mouseEvents\");\r\n\t\t\t\tfor(var i = 0; i < this._eventHandlers.length; i++){\r\n\t\t\t\t\tvar h = this._eventHandlers[i];\r\n\t\t\t\t\tmouseEvents.detach(h[0], h[1], h[2], grid.$grid);\r\n\t\t\t\t}\r\n\t\t\t\tthis._eventHandlers = [];\r\n\t\t\t},\r\n\r\n\t\t\textendDom: function(grid){\r\n\t\t\t\tgantt.$grid = grid.$grid;\r\n\t\t\t\tgantt.$grid_scale = grid.$grid_scale;\r\n\t\t\t\tgantt.$grid_data = grid.$grid_data;\r\n\t\t\t},\r\n\t\t\textendGantt: function(grid){\r\n\r\n\t\t\t\tgantt.getGridColumns = gantt.bind(grid.getGridColumns, grid);\r\n\r\n\t\t\t\tgrid.attachEvent(\"onColumnResizeStart\", function(){\r\n\t\t\t\t\treturn gantt.callEvent(\"onColumnResizeStart\", arguments);\r\n\t\t\t\t});\r\n\t\t\t\tgrid.attachEvent(\"onColumnResize\", function(){\r\n\t\t\t\t\treturn gantt.callEvent(\"onColumnResize\", arguments);\r\n\t\t\t\t});\r\n\t\t\t\tgrid.attachEvent(\"onColumnResizeEnd\", function(){\r\n\t\t\t\t\treturn gantt.callEvent(\"onColumnResizeEnd\", arguments);\r\n\t\t\t\t});\r\n\r\n\t\t\t\tgrid.attachEvent(\"onColumnResizeComplete\", function(columns, totalWidth){\r\n\t\t\t\t\tgantt.config.grid_width = totalWidth;\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t};\r\n\t};\r\n})();\r\n\r\nmodule.exports = initializer;\n\n\n//////////////////\n// WEBPACK FOOTER\n// c:/www-recent/gantt/sources/core/ui/grid/main_grid_initializer.js\n// module id = 44\n// module chunks = 0","var domHelpers = require(\"../../../utils/dom_helpers\");\r\n\r\nfunction _init_dnd(gantt, grid) {\r\n\tvar DnD = gantt.$services.getService(\"dnd\");\r\n\r\n\tif(!grid.$config.bind || !gantt.getDatastore(grid.$config.bind)){\r\n\t\treturn;\r\n\t}\r\n\r\n\tfunction locate(e){\r\n\t\treturn domHelpers.locateAttribute(e, grid.$config.item_attribute);\r\n\t}\r\n\r\n\tfunction getStore(){\r\n\t\treturn gantt.getDatastore(grid.$config.bind);\r\n\t}\r\n\r\n\tvar dnd = new DnD(grid.$grid_data, {updates_per_second: 60});\r\n\tif (gantt.defined(grid.$getConfig().dnd_sensitivity))\r\n\t\tdnd.config.sensitivity = grid.$getConfig().dnd_sensitivity;\r\n\r\n\tdnd.attachEvent(\"onBeforeDragStart\", gantt.bind(function (obj, e) {\r\n\t\tvar el = locate(e);\r\n\t\tif (!el) return false;\r\n\t\tif (gantt.hideQuickInfo) gantt._hideQuickInfo();\r\n\r\n\t\tvar id = el.getAttribute(grid.$config.item_attribute);\r\n\r\n\t\tvar datastore = getStore();\r\n\r\n\t\tvar task = datastore.getItem(id);\r\n\r\n\t\tif (gantt.isReadonly(task))\r\n\t\t\treturn false;\r\n\r\n\t\tdnd.config.initial_open_state = task.$open;\r\n\t\tif (!gantt.callEvent(\"onRowDragStart\", [id, e.target || e.srcElement, e])) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t}, gantt));\r\n\r\n\tdnd.attachEvent(\"onAfterDragStart\", gantt.bind(function (obj, e) {\r\n\t\tvar el = locate(e);\r\n\t\tdnd.config.marker.innerHTML = el.outerHTML;\r\n\t\tdnd.config.id = el.getAttribute(grid.$config.item_attribute);\r\n\r\n\t\tvar store = getStore();\r\n\r\n\t\tvar task = store.getItem(dnd.config.id);\r\n\t\tdnd.config.index = store.getBranchIndex(dnd.config.id);\r\n\t\tdnd.config.parent = task.parent;\r\n\t\ttask.$open = false;\r\n\t\ttask.$transparent = true;\r\n\t\tthis.refreshData();\r\n\t}, gantt));\r\n\r\n\tdnd.lastTaskOfLevel = function (level) {\r\n\t\tvar last_item = null;\r\n\t\tvar store = getStore();\r\n\t\tvar tasks = store.getItems();\r\n\t\tfor (var i = 0, len = tasks.length; i < len; i++) {\r\n\t\t\tif (tasks[i].$level == level) {\r\n\t\t\t\tlast_item = tasks[i];\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn last_item ? last_item.id : null;\r\n\t};\r\n\tdnd._getGridPos = gantt.bind(function (e) {\r\n\t\tvar pos = domHelpers.getNodePosition(grid.$grid_data);\r\n\t\tvar store = getStore();\r\n\t\t// row offset\r\n\t\tvar x = pos.x;\r\n\t\tvar y = e.pos.y - 10;\r\n\r\n\t\tvar config = grid.$getConfig();\r\n\t\t// prevent moving row out of grid_data container\r\n\t\tif (y < pos.y) y = pos.y;\r\n\t\tvar gridHeight = store.countVisible() * config.row_height;\r\n\t\tif (y > pos.y + gridHeight - config.row_height) y = pos.y + gridHeight - config.row_height;\r\n\r\n\t\tpos.x = x;\r\n\t\tpos.y = y;\r\n\t\treturn pos;\r\n\t}, gantt);\r\n\tdnd._getTargetY = gantt.bind(function (e) {\r\n\t\tvar pos = domHelpers.getNodePosition(grid.$grid_data);\r\n\r\n\t\tvar y = e.pageY - pos.y + grid.$state.scrollTop;\r\n\t\tif (y < 0)\r\n\t\t\ty = 0;\r\n\t\treturn y;\r\n\t}, gantt);\r\n\tdnd._getTaskByY = gantt.bind(function (y, dropIndex) {\r\n\r\n\t\tvar config = grid.$getConfig(),\r\n\t\t\tstore = getStore();\r\n\r\n\t\ty = y || 0;\r\n\t\tif (config.smart_rendering) {\r\n\t\t\ty += grid.$grid_data.scrollTop;\r\n\t\t}\r\n\r\n\t\tvar index = Math.floor(y / config.row_height);\r\n\t\tindex = dropIndex < index ? index - 1 : index;\r\n\r\n\t\tif (index > store.countVisible() - 1)\r\n\t\t\treturn null;\r\n\r\n\t\treturn store.getIdByIndex(index);\r\n\t}, gantt);\r\n\tdnd.attachEvent(\"onDragMove\", gantt.bind(function (obj, e) {\r\n\t\tvar dd = dnd.config;\r\n\t\tvar pos = dnd._getGridPos(e);\r\n\r\n\t\tvar config = grid.$getConfig(),\r\n\t\t\tstore = getStore();\r\n\r\n\t\t// setting position of row\r\n\t\tdd.marker.style.left = pos.x + 10 + \"px\";\r\n\t\tdd.marker.style.top = pos.y + \"px\";\r\n\r\n\t\t// highlight row when mouseover\r\n\t\tvar item = store.getItem(dnd.config.id);\r\n\t\tvar targetY = dnd._getTargetY(e);\r\n\t\tvar el = dnd._getTaskByY(targetY, store.getIndexById(item.id));\r\n\r\n\t\tif (!store.exists(el)) {\r\n\t\t\tel = dnd.lastTaskOfLevel(config.order_branch_free ? item.$level : 0);\r\n\t\t\tif (el == dnd.config.id) {\r\n\t\t\t\tel = null;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tfunction allowedLevel(next, item) {\r\n\t\t\treturn (!(store.isChildOf(over.id, item.id)) && (next.$level == item.$level || config.order_branch_free));\r\n\t\t}\r\n\r\n\t\tif (store.exists(el)) {\r\n\t\t\tvar over = store.getItem(el);\r\n\r\n\t\t\tif (store.getIndexById(over.id) * config.row_height + config.row_height / 2 < targetY) {\r\n\t\t\t\t//hovering over bottom part of item, check can be drop to bottom\r\n\t\t\t\tvar index = store.getIndexById(over.id);\r\n\t\t\t\tvar nextId = store.getNext(over.id);//adds +1 when hovering over placeholder\r\n\t\t\t\tvar next = store.getItem(nextId);\r\n\t\t\t\tif (next) {\r\n\t\t\t\t\tif (next.id != item.id) {\r\n\t\t\t\t\t\tover = next; //there is a valid target\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse {\r\n\t\t\t\t\t\tif (config.order_branch_free) {\r\n\t\t\t\t\t\t\tif (!(store.isChildOf(item.id, over.id) && store.getChildren(over.id).length == 1))\r\n\t\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t\telse {\r\n\t\t\t\t\t\t\t\tstore.move(item.id, store.getBranchIndex(over.id) + 1, store.getParent(over.id));\r\n\t\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\telse {\r\n\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\t//we at end of the list, check and drop at the end of list\r\n\t\t\t\t\tnextId = store.getIdByIndex(index);\r\n\t\t\t\t\tnext = store.getItem(nextId);\r\n\r\n\t\t\t\t\tif (allowedLevel(next, item) && next.id != item.id) {\r\n\t\t\t\t\t\tstore.move(item.id, -1, store.getParent(next.id));\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\telse if (config.order_branch_free) {\r\n\t\t\t\tif (over.id != item.id && allowedLevel(over, item)) {\r\n\t\t\t\t\tif (!store.hasChild(over.id)) {\r\n\t\t\t\t\t\tover.$open = true;\r\n\t\t\t\t\t\tstore.move(item.id, -1, over.id);\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (store.getIndexById(over.id) || config.row_height / 3 < targetY) return;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t//if item is on different level, check the one before it\r\n\t\t\tvar index = store.getIndexById(over.id),\r\n\t\t\t\tprevId = store.getIdByIndex(index - 1);\r\n\r\n\t\t\tvar prev = store.getItem(prevId);\r\n\r\n\t\t\tvar shift = 1;\r\n\t\t\twhile ((!prev || prev.id == over.id) && index - shift >= 0) {\r\n\r\n\t\t\t\tprevId = store.getIdByIndex(index - shift);\r\n\t\t\t\tprev = store.getItem(prevId);\r\n\t\t\t\tshift++;\r\n\t\t\t}\r\n\r\n\t\t\tif (item.id == over.id) return;\r\n\t\t\t//replacing item under cursor\r\n\t\t\tif (allowedLevel(over, item) && item.id != over.id) {\r\n\t\t\t\tstore.move(item.id, 0, 0, over.id);\r\n\r\n\t\t\t} else if (over.$level == item.$level - 1 && !store.getChildren(over.id).length) {\r\n\t\t\t\tstore.move(item.id, 0, over.id);\r\n\r\n\t\t\t} else if (prev && (allowedLevel(prev, item)) && (item.id != prev.id)) {\r\n\t\t\t\tstore.move(item.id, -1, store.getParent(prev.id));\r\n\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn true;\r\n\t}, gantt));\r\n\r\n\tdnd.attachEvent(\"onDragEnd\", gantt.bind(function () {\r\n\t\tvar store = getStore();\r\n\t\tvar task = store.getItem(dnd.config.id);\r\n\t\ttask.$transparent = false;\r\n\t\ttask.$open = dnd.config.initial_open_state;\r\n\r\n\t\tif (this.callEvent(\"onBeforeRowDragEnd\", [dnd.config.id, dnd.config.parent, dnd.config.index]) === false) {\r\n\t\t\tstore.move(dnd.config.id, dnd.config.index, dnd.config.parent);\r\n\t\t\ttask.$drop_target = null;\r\n\t\t} else {\r\n\t\t\tthis.callEvent(\"onRowDragEnd\", [dnd.config.id, task.$drop_target]);\r\n\t\t}\r\n\r\n\t\tstore.refresh(task.id);\r\n\t\t//this.refreshData();\r\n\t}, gantt));\r\n}\r\n\r\nmodule.exports = {\r\n\tinit: _init_dnd\r\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// c:/www-recent/gantt/sources/core/ui/grid/tasks_grid_dnd.js\n// module id = 45\n// module chunks = 0","var utils = require(\"../../../utils/utils\"),\r\n\ttaskDnD = require(\"./tasks_dnd\"),\r\n\tlinkDnD = require(\"./links_dnd\"),\r\n\tdomHelpers = require(\"../../../utils/dom_helpers\");\r\n\r\nvar initializer = (function(){\r\n\treturn function(gantt){\r\n\t\tvar services = gantt.$services;\r\n\t\treturn {\r\n\t\t\tonCreated: function (timeline) {\r\n\t\t\t\tvar config = timeline.$config;\r\n\t\t\t\tconfig.bind = utils.defined(config.bind) ? config.bind : \"task\";\r\n\t\t\t\tconfig.bindLinks = utils.defined(config.bindLinks) ? config.bindLinks : \"link\";\r\n\r\n\t\t\t\ttimeline._linksDnD = linkDnD.createLinkDND();\r\n\t\t\t\ttimeline._tasksDnD = taskDnD.createTaskDND();\r\n\t\t\t\ttimeline._tasksDnD.extend(timeline);\r\n\r\n\t\t\t\tif(timeline.$config.id == \"timeline\") {\r\n\t\t\t\t\tthis.extendGantt(timeline);\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tonInitialized: function (timeline) {\r\n\t\t\t\tthis._attachDomEvents(gantt);\r\n\t\t\t\tthis._attachGanttEvents(gantt);\r\n\t\t\t\tthis._attachStateProvider(gantt);\r\n\r\n\t\t\t\ttimeline._tasksDnD.init(timeline, gantt);\r\n\t\t\t\ttimeline._linksDnD.init(timeline, gantt);\r\n\r\n\t\t\t\tif(timeline.$config.id == \"timeline\"){\r\n\t\t\t\t\tthis.extendDom(timeline);\r\n\t\t\t\t}\r\n\r\n\t\t\t},\r\n\t\t\tonDestroyed: function (timeline) {\r\n\t\t\t\tthis._clearGanttEvents(gantt);\r\n\t\t\t\tthis._clearDomEvents(gantt);\r\n\t\t\t\tthis._clearStateProvider(gantt);\r\n\t\t\t},\r\n\t\t\textendDom: function(timeline){\r\n\t\t\t\tgantt.$task = timeline.$task;\r\n\t\t\t\tgantt.$task_scale = timeline.$task_scale;\r\n\t\t\t\tgantt.$task_data = timeline.$task_data;\r\n\t\t\t\tgantt.$task_bg = timeline.$task_bg;\r\n\t\t\t\tgantt.$task_links = timeline.$task_links;\r\n\t\t\t\tgantt.$task_bars = timeline.$task_bars;\r\n\t\t\t},\r\n\r\n\t\t\textendGantt: function(timeline){\r\n\t\t\t\tgantt.dateFromPos = gantt.bind(timeline.dateFromPos, timeline);\r\n\t\t\t\tgantt.posFromDate = gantt.bind(timeline.posFromDate, timeline);\r\n\t\t\t\tgantt.getRowTop = gantt.bind(timeline.getRowTop, timeline);\r\n\t\t\t\tgantt.getTaskTop = gantt.bind(timeline.getItemTop, timeline);\r\n\t\t\t\tgantt.getTaskPosition = gantt.bind(timeline.getItemPosition, timeline);\r\n\t\t\t\tgantt.getTaskHeight = gantt.bind(timeline.getItemHeight, timeline);\r\n\t\t\t\tgantt.columnIndexByDate = gantt.bind(timeline.columnIndexByDate, timeline);\r\n\t\t\t\tgantt.roundTaskDates = gantt.bind(timeline.roundTaskDates, timeline);\r\n\t\t\t\tgantt.getScale = gantt.bind(timeline.getScale, timeline);\r\n\t\t\t\tgantt.getTaskNode = function (id) {\r\n\t\t\t\t\treturn timeline._taskRenderer.rendered[id];\r\n\t\t\t\t};\r\n\t\t\t\tgantt.getLinkNode = function (id) {\r\n\t\t\t\t\treturn timeline._linkRenderer.rendered[id];\r\n\t\t\t\t};\r\n\r\n\t\t\t},\r\n\r\n\t\t\t_attachDomEvent: function (event, className, handler){\r\n\t\t\t\tif(!this._events){\r\n\t\t\t\t\tthis._events = [];\r\n\t\t\t\t}\r\n\t\t\t\tvar mouseEvents = services.getService(\"mouseEvents\");\r\n\t\t\t\tvar e = {event:event, className: className, handler:handler, root:this.$task};\r\n\t\t\t\tmouseEvents.delegate(e.event, e.className, e.handler, e.root);\r\n\t\t\t\tthis._events.push(e);\r\n\t\t\t},\r\n\r\n\t\t\t_clearDomEvents: function(){\r\n\t\t\t\tvar mouseEvents = services.getService(\"mouseEvents\");\r\n\t\t\t\tfor(var i = 0; i < this._events.length; i++){\r\n\t\t\t\t\tvar e = this._events[i];\r\n\t\t\t\t\tmouseEvents.detach(e.event, e.className, e.handler, e.root);\r\n\t\t\t\t}\r\n\t\t\t\tthis._events = [];\r\n\t\t\t},\r\n\r\n\t\t\t_attachDomEvents: function(gantt){\r\n\t\t\t\tfunction _delete_link_handler(id, e) {\r\n\t\t\t\t\tif (id && this.callEvent(\"onLinkDblClick\", [id, e])) {\r\n\r\n\t\t\t\t\t\tvar link = this.getLink(id);\r\n\t\t\t\t\t\tif (this.isReadonly(link)) return;\r\n\r\n\t\t\t\t\t\tvar title = \"\";\r\n\t\t\t\t\t\tvar question = this.locale.labels.link + \" \" + this.templates.link_description(this.getLink(id)) + \" \" + this.locale.labels.confirm_link_deleting;\r\n\r\n\t\t\t\t\t\twindow.setTimeout(function () {\r\n\t\t\t\t\t\t\tgantt._dhtmlx_confirm(question, title, function () {\r\n\t\t\t\t\t\t\t\tgantt.deleteLink(id);\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t}, (this.config.touch ? 300 : 1));\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tthis._attachDomEvent(\"click\", \"gantt_task_link\", gantt.bind(function (e, trg) {\r\n\t\t\t\t\tvar id = this.locate(e, this.config.link_attribute);\r\n\t\t\t\t\tif (id) {\r\n\t\t\t\t\t\tthis.callEvent(\"onLinkClick\", [id, e]);\r\n\t\t\t\t\t}\r\n\t\t\t\t}, gantt));\r\n\r\n\t\t\t\tthis._attachDomEvent(\"click\", \"gantt_scale_cell\", gantt.bind(function (e, trg) {\r\n\t\t\t\t\tvar pos = domHelpers.getRelativeEventPosition(e, gantt.$task_data);\r\n\t\t\t\t\tvar date = gantt.dateFromPos(pos.x);\r\n\t\t\t\t\tvar coll = Math.floor(gantt.columnIndexByDate(date));\r\n\r\n\t\t\t\t\tvar coll_date = gantt.getScale().trace_x[coll];\r\n\r\n\t\t\t\t\tgantt.callEvent(\"onScaleClick\", [e, coll_date]);\r\n\t\t\t\t}, gantt));\r\n\r\n\t\t\t\tthis._attachDomEvent(\"doubleclick\", \"gantt_task_link\", gantt.bind(function (e, id, trg) {\r\n\t\t\t\t\tvar id = this.locate(e, gantt.config.link_attribute);\r\n\t\t\t\t\t_delete_link_handler.call(this, id, e);\r\n\t\t\t\t}, gantt));\r\n\r\n\t\t\t\tthis._attachDomEvent(\"doubleclick\", \"gantt_link_point\", gantt.bind(function (e, id, trg) {\r\n\t\t\t\t\tvar id = this.locate(e),\r\n\t\t\t\t\t\ttask = this.getTask(id);\r\n\r\n\t\t\t\t\tvar link = null;\r\n\t\t\t\t\tif (trg.parentNode && domHelpers.getClassName(trg.parentNode)) {\r\n\t\t\t\t\t\tif (domHelpers.getClassName(trg.parentNode).indexOf(\"_left\") > -1) {\r\n\t\t\t\t\t\t\tlink = task.$target[0];\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tlink = task.$source[0];\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (link)\r\n\t\t\t\t\t\t_delete_link_handler.call(this, link, e);\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}, gantt));\r\n\t\t\t},\r\n\r\n\t\t\t_attachGanttEvents: function(gantt){\r\n\t\t\t\tthis._clearGanttEvents(gantt);\r\n\r\n\t\t\t\tfunction refreshId(renders, oldId, newId, item) {\r\n\t\t\t\t\tfor (var i = 0; i < renders.length; i++) {\r\n\t\t\t\t\t\trenders[i].change_id(oldId, newId);\r\n\t\t\t\t\t\trenders[i].render_item(item);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tthis._onTaskIdChange = gantt.attachEvent(\"onTaskIdChange\", function (oldId, newId) {\r\n\t\t\t\t\trefreshId(gantt._getTaskLayers(), oldId, newId, gantt.getTask(newId));\r\n\t\t\t\t});\r\n\r\n\t\t\t\tif (this._onLinkIdChange)\r\n\t\t\t\t\tgantt.detachEvent(this._onLinkIdChange);\r\n\r\n\t\t\t\tthis._onLinkIdChange = gantt.attachEvent(\"onLinkIdChange\", function (oldId, newId) {\r\n\t\t\t\t\trefreshId(gantt._getLinkLayers(), oldId, newId, gantt.getLink(newId));\r\n\t\t\t\t});\r\n\t\t\t},\r\n\r\n\t\t\t_clearGanttEvents: function(gantt){\r\n\t\t\t\tif (this._onTaskIdChange)\r\n\t\t\t\t\tgantt.detachEvent(this._onTaskIdChange);\r\n\t\t\t\tif (this._onLinkIdChange)\r\n\t\t\t\t\tgantt.detachEvent(this._onLinkIdChange);\r\n\t\t\t},\r\n\r\n\t\t\t_attachStateProvider: function(){\r\n\t\t\t\tvar self = this;\r\n\t\t\t\tvar state = services.getService(\"state\");\r\n\t\t\t\tstate.registerProvider(\"tasksTimeline\", function(){\r\n\t\t\t\t\treturn {\r\n\t\t\t\t\t\tscale_unit: self._tasks ? self._tasks.unit : undefined,\r\n\t\t\t\t\t\tscale_step:  self._tasks ? self._tasks.step  : undefined\r\n\t\t\t\t\t};\r\n\t\t\t\t});\r\n\t\t\t},\r\n\r\n\t\t\t_clearStateProvider: function(){\r\n\t\t\t\tvar state = services.getService(\"state\");\r\n\t\t\t\tstate.unregisterProvider(\"tasksTimeline\");\r\n\t\t\t}\r\n\t\t};\r\n\t};\r\n\r\n})();\r\n\r\nmodule.exports = initializer;\n\n\n//////////////////\n// WEBPACK FOOTER\n// c:/www-recent/gantt/sources/core/ui/timeline/main_timeline_initializer.js\n// module id = 46\n// module chunks = 0","var domHelpers = require(\"../../../utils/dom_helpers\"),\r\n\tutils = require(\"../../../utils/utils\");\r\nvar timeout = require(\"../../../utils/timeout\");\r\n\r\nfunction createTaskDND(timeline, gantt){\r\n\tvar services = gantt.$services;\r\n\treturn {\r\n\t\tdrag: null,\r\n\t\t_events: {\r\n\t\t\tbefore_start: {},\r\n\t\t\tbefore_finish: {},\r\n\t\t\tafter_finish: {}\r\n\t\t},\r\n\t\t_handlers: {},\r\n\t\tinit: function () {\r\n\t\t\tthis.clear_drag_state();\r\n\t\t\tvar drag = gantt.config.drag_mode;\r\n\t\t\tthis.set_actions();\r\n\r\n\t\t\tvar stateService = services.getService(\"state\");\r\n\t\t\tstateService.registerProvider(\"tasksDnd\", utils.bind(function(){\r\n\t\t\t\treturn {\r\n\t\t\t\t\tdrag_id : this.drag ? this.drag.id : undefined,\r\n\t\t\t\t\tdrag_mode : this.drag ? this.drag.mode : undefined,\r\n\t\t\t\t\tdrag_from_start : this.drag ? this.drag.left : undefined\r\n\t\t\t\t};\r\n\t\t\t}, this));\r\n\r\n\t\t\tvar evs = {\r\n\t\t\t\t\"before_start\": \"onBeforeTaskDrag\",\r\n\t\t\t\t\"before_finish\": \"onBeforeTaskChanged\",\r\n\t\t\t\t\"after_finish\": \"onAfterTaskDrag\"\r\n\t\t\t};\r\n\t\t\t//for now, all drag operations will trigger the same events\r\n\t\t\tfor (var stage in this._events) {\r\n\t\t\t\tfor (var mode in drag) {\r\n\t\t\t\t\tthis._events[stage][mode] = evs[stage];\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tthis._handlers[drag.move] = this._move;\r\n\t\t\tthis._handlers[drag.resize] = this._resize;\r\n\t\t\tthis._handlers[drag.progress] = this._resize_progress;\r\n\r\n\t\t},\r\n\t\tset_actions: function () {\r\n\t\t\tvar data = timeline.$task_data;\r\n\t\t\tgantt.event(data, \"mousemove\", gantt.bind(function (e) {\r\n\t\t\t\tthis.on_mouse_move(e || event);\r\n\t\t\t}, this));\r\n\t\t\tgantt.event(data, \"mousedown\", gantt.bind(function (e) {\r\n\t\t\t\tthis.on_mouse_down(e || event);\r\n\t\t\t}, this));\r\n\t\t\tgantt.event(data, \"mouseup\", gantt.bind(function (e) {\r\n\t\t\t\tthis.on_mouse_up(e || event);\r\n\t\t\t}, this));\r\n\t\t},\r\n\r\n\t\tclear_drag_state: function () {\r\n\t\t\tthis.drag = {\r\n\t\t\t\tid: null,\r\n\t\t\t\tmode: null,\r\n\t\t\t\tpos: null,\r\n\t\t\t\tstart_x: null,\r\n\t\t\t\tstart_y: null,\r\n\t\t\t\tobj: null,\r\n\t\t\t\tleft: null\r\n\t\t\t};\r\n\t\t},\r\n\t\t_resize: function (ev, shift, drag) {\r\n\t\t\tvar cfg = timeline.$getConfig();\r\n\t\t\tvar coords_x = this._drag_task_coords(ev, drag);\r\n\t\t\tif (drag.left) {\r\n\t\t\t\tev.start_date = gantt.dateFromPos(coords_x.start + shift);\r\n\t\t\t\tif (!ev.start_date) {\r\n\t\t\t\t\tev.start_date = new Date(gantt.getState().min_date);\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tev.end_date = gantt.dateFromPos(coords_x.end + shift);\r\n\t\t\t\tif (!ev.end_date) {\r\n\t\t\t\t\tev.end_date = new Date(gantt.getState().max_date);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tif (ev.end_date - ev.start_date < cfg.min_duration) {\r\n\t\t\t\tif (drag.left)\r\n\t\t\t\t\tev.start_date = gantt.calculateEndDate({start_date: ev.end_date, duration: -1, task: ev});\r\n\t\t\t\telse\r\n\t\t\t\t\tev.end_date = gantt.calculateEndDate({start_date: ev.start_date, duration: 1, task: ev});\r\n\t\t\t}\r\n\t\t\tgantt._init_task_timing(ev);\r\n\t\t},\r\n\t\t_resize_progress: function (ev, shift, drag) {\r\n\t\t\tvar coords_x = this._drag_task_coords(ev, drag);\r\n\r\n\t\t\tvar diff = Math.max(0, drag.pos.x - coords_x.start);\r\n\t\t\tev.progress = Math.min(1, diff / (coords_x.end - coords_x.start));\r\n\t\t},\r\n\t\t_move: function (ev, shift, drag) {\r\n\t\t\tvar coords_x = this._drag_task_coords(ev, drag);\r\n\t\t\tvar new_start = gantt.dateFromPos(coords_x.start + shift),\r\n\t\t\t\tnew_end = gantt.dateFromPos(coords_x.end + shift);\r\n\t\t\tif (!new_start) {\r\n\t\t\t\tev.start_date = new Date(gantt.getState().min_date);\r\n\t\t\t\tev.end_date = gantt.dateFromPos(gantt.posFromDate(ev.start_date) + (coords_x.end - coords_x.start));\r\n\t\t\t} else if (!new_end) {\r\n\t\t\t\tev.end_date = new Date(gantt.getState().max_date);\r\n\t\t\t\tev.start_date = gantt.dateFromPos(gantt.posFromDate(ev.end_date) - (coords_x.end - coords_x.start));\r\n\t\t\t} else {\r\n\t\t\t\tev.start_date = new_start;\r\n\t\t\t\tev.end_date = new_end;\r\n\t\t\t}\r\n\t\t},\r\n\t\t_drag_task_coords: function (t, drag) {\r\n\t\t\tvar start = drag.obj_s_x = drag.obj_s_x || gantt.posFromDate(t.start_date);\r\n\t\t\tvar end = drag.obj_e_x = drag.obj_e_x || gantt.posFromDate(t.end_date);\r\n\t\t\treturn {\r\n\t\t\t\tstart: start,\r\n\t\t\t\tend: end\r\n\t\t\t};\r\n\t\t},\r\n\t\t_mouse_position_change: function (oldPos, newPos) {\r\n\t\t\tvar dx = oldPos.x - newPos.x,\r\n\t\t\t\tdy = oldPos.y - newPos.y;\r\n\t\t\treturn Math.sqrt(dx * dx + dy * dy);\r\n\t\t},\r\n\t\t_is_number: function (n) {\r\n\t\t\treturn !isNaN(parseFloat(n)) && isFinite(n);\r\n\t\t},\r\n\r\n\t\ton_mouse_move: function (e) {\r\n\t\t\tif (this.drag.start_drag) {\r\n\t\t\t\tvar pos = domHelpers.getRelativeEventPosition(e, gantt.$task_data);\r\n\r\n\t\t\t\tvar sX = this.drag.start_drag.start_x,\r\n\t\t\t\t\tsY = this.drag.start_drag.start_y;\r\n\r\n\t\t\t\tif ((Date.now() - this.drag.timestamp > 50) ||\r\n\t\t\t\t\t(this._is_number(sX) && this._is_number(sY) && this._mouse_position_change({\r\n\t\t\t\t\t\tx: sX,\r\n\t\t\t\t\t\ty: sY\r\n\t\t\t\t\t}, pos) > 20)) {\r\n\t\t\t\t\tthis._start_dnd(e);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tvar drag = this.drag;\r\n\r\n\t\t\tif (drag.mode) {\r\n\t\t\t\tif (!timeout(this, 40))//limit update frequency\r\n\t\t\t\t\treturn;\r\n\r\n\t\t\t\tthis._update_on_move(e);\r\n\r\n\t\t\t}\r\n\t\t},\r\n\t\t_update_on_move: function (e) {\r\n\t\t\tvar drag = this.drag;\r\n\r\n\t\t\tif (drag.mode) {\r\n\t\t\t\tvar pos = domHelpers.getRelativeEventPosition(e, gantt.$task_data);\r\n\t\t\t\tif (drag.pos && drag.pos.x == pos.x)\r\n\t\t\t\t\treturn;\r\n\r\n\t\t\t\tdrag.pos = pos;\r\n\r\n\t\t\t\tvar curr_date = gantt.dateFromPos(pos.x);\r\n\t\t\t\tif (!curr_date || isNaN(curr_date.getTime()))\r\n\t\t\t\t\treturn;\r\n\r\n\r\n\t\t\t\tvar shift = pos.x - drag.start_x;\r\n\t\t\t\tvar ev = gantt.getTask(drag.id);\r\n\r\n\r\n\t\t\t\tif (this._handlers[drag.mode]) {\r\n\t\t\t\t\tvar original = gantt.mixin({}, ev);\r\n\t\t\t\t\tvar copy = gantt.mixin({}, ev);\r\n\t\t\t\t\tthis._handlers[drag.mode].apply(this, [copy, shift, drag]);\r\n\t\t\t\t\tgantt.mixin(ev, copy, true);\r\n\t\t\t\t\t//gantt._update_parents(drag.id, true);\r\n\t\t\t\t\tgantt.callEvent(\"onTaskDrag\", [ev.id, drag.mode, copy, original, e]);\r\n\r\n\t\t\t\t\tgantt.mixin(ev, copy, true);\r\n\t\t\t\t\tgantt._update_parents(drag.id);\r\n\t\t\t\t\tgantt.refreshTask(drag.id);\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\ton_mouse_down: function (e, src) {\r\n\t\t\t// on Mac we do not get onmouseup event when clicking right mouse button leaving us in dnd state\r\n\t\t\t// let's ignore right mouse button then\r\n\t\t\tif (e.button == 2 && e.button !== undefined)\r\n\t\t\t\treturn;\r\n\r\n\t\t\tvar config = timeline.$getConfig();\r\n\t\t\tvar id = gantt.locate(e);\r\n\t\t\tvar task = null;\r\n\t\t\tif (gantt.isTaskExists(id)) {\r\n\t\t\t\ttask = gantt.getTask(id);\r\n\t\t\t}\r\n\r\n\t\t\tif (gantt.isReadonly(task) || this.drag.mode) return;\r\n\r\n\t\t\tthis.clear_drag_state();\r\n\r\n\t\t\tsrc = src || (e.target || e.srcElement);\r\n\r\n\t\t\tvar className = domHelpers.getClassName(src);\r\n\t\t\tif (!className || !this._get_drag_mode(className)) {\r\n\t\t\t\tif (src.parentNode)\r\n\t\t\t\t\treturn this.on_mouse_down(e, src.parentNode);\r\n\t\t\t\telse\r\n\t\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tvar drag = this._get_drag_mode(className);\r\n\r\n\t\t\tif (!drag) {\r\n\t\t\t\tif (gantt.checkEvent(\"onMouseDown\") && gantt.callEvent(\"onMouseDown\", [className.split(\" \")[0]])) {\r\n\t\t\t\t\tif (src.parentNode)\r\n\t\t\t\t\t\treturn this.on_mouse_down(e, src.parentNode);\r\n\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tif (drag.mode && drag.mode != config.drag_mode.ignore && config[\"drag_\" + drag.mode]) {\r\n\t\t\t\t\tid = gantt.locate(src);\r\n\t\t\t\t\ttask = gantt.copy(gantt.getTask(id) || {});\r\n\r\n\t\t\t\t\tif (gantt.isReadonly(task)) {\r\n\t\t\t\t\t\tthis.clear_drag_state();\r\n\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif (gantt.isSummaryTask(task) && drag.mode != config.drag_mode.progress) {//only progress drag is allowed for tasks with flexible duration\r\n\t\t\t\t\t\tthis.clear_drag_state();\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tdrag.id = id;\r\n\t\t\t\t\tvar pos = domHelpers.getRelativeEventPosition(e, gantt.$task_data);\r\n\r\n\t\t\t\t\tdrag.start_x = pos.x;\r\n\t\t\t\t\tdrag.start_y = pos.y;\r\n\t\t\t\t\tdrag.obj = task;\r\n\t\t\t\t\tthis.drag.start_drag = drag;\r\n\t\t\t\t\tthis.drag.timestamp = Date.now();\r\n\r\n\t\t\t\t} else\r\n\t\t\t\t\tthis.clear_drag_state();\r\n\t\t\t}\r\n\t\t},\r\n\t\t_fix_dnd_scale_time: function (task, drag) {\r\n\t\t\tvar config = timeline.$getConfig();\r\n\t\t\tvar unit = gantt.getScale().unit,\r\n\t\t\t\tstep = gantt.getScale().step;\r\n\t\t\tif (!config.round_dnd_dates) {\r\n\t\t\t\tunit = 'minute';\r\n\t\t\t\tstep = config.time_step;\r\n\t\t\t}\r\n\r\n\t\t\tfunction fixStart(task) {\r\n\t\t\t\tvar config = timeline.$getConfig();\r\n\t\t\t\tif (!gantt.isWorkTime(task.start_date, undefined, task))\r\n\t\t\t\t\ttask.start_date = gantt.calculateEndDate({\r\n\t\t\t\t\t\tstart_date: task.start_date,\r\n\t\t\t\t\t\tduration: -1,\r\n\t\t\t\t\t\tunit: config.duration_unit,\r\n\t\t\t\t\t\ttask: task\r\n\t\t\t\t\t});\r\n\t\t\t}\r\n\r\n\t\t\tfunction fixEnd(task) {\r\n\t\t\t\tvar config = timeline.$getConfig();\r\n\t\t\t\tif (!gantt.isWorkTime(new Date(task.end_date - 1), undefined, task))\r\n\t\t\t\t\ttask.end_date = gantt.calculateEndDate({\r\n\t\t\t\t\t\tstart_date: task.end_date,\r\n\t\t\t\t\t\tduration: 1,\r\n\t\t\t\t\t\tunit: config.duration_unit,\r\n\t\t\t\t\t\ttask: task\r\n\t\t\t\t\t});\r\n\t\t\t}\r\n\r\n\t\t\tif (drag.mode == config.drag_mode.resize) {\r\n\t\t\t\tif (drag.left) {\r\n\t\t\t\t\ttask.start_date = gantt.roundDate({date: task.start_date, unit: unit, step: step});\r\n\t\t\t\t\tfixStart(task);\r\n\t\t\t\t} else {\r\n\t\t\t\t\ttask.end_date = gantt.roundDate({date: task.end_date, unit: unit, step: step});\r\n\t\t\t\t\tfixEnd(task);\r\n\t\t\t\t}\r\n\t\t\t} else if (drag.mode == config.drag_mode.move) {\r\n\t\t\t\ttask.start_date = gantt.roundDate({date: task.start_date, unit: unit, step: step});\r\n\t\t\t\tfixStart(task);\r\n\r\n\t\t\t\ttask.end_date = gantt.calculateEndDate(task);\r\n\t\t\t}\r\n\t\t},\r\n\t\t_fix_working_times: function (task, drag) {\r\n\t\t\tvar config = timeline.$getConfig();\r\n\t\t\tvar drag = drag || {mode: config.drag_mode.move};\r\n\t\t\tif (config.work_time && config.correct_work_time) {\r\n\t\t\t\tif (drag.mode == config.drag_mode.resize) {\r\n\t\t\t\t\tif (drag.left) {\r\n\t\t\t\t\t\ttask.start_date = gantt.getClosestWorkTime({date: task.start_date, dir: 'future', task: task});\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\ttask.end_date = gantt.getClosestWorkTime({date: task.end_date, dir: 'past', task: task});\r\n\t\t\t\t\t}\r\n\t\t\t\t} else if (drag.mode == config.drag_mode.move) {\r\n\t\t\t\t\tgantt.correctTaskWorkTime(task);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\ton_mouse_up: function (e) {\r\n\r\n\t\t\tvar drag = this.drag;\r\n\t\t\tif (drag.mode && drag.id) {\r\n\t\t\t\tvar config = timeline.$getConfig();\r\n\t\t\t\t//drop\r\n\t\t\t\tvar ev = gantt.getTask(drag.id);\r\n\r\n\t\t\t\tif (config.work_time && config.correct_work_time) {\r\n\t\t\t\t\tthis._fix_working_times(ev, drag);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tthis._fix_dnd_scale_time(ev, drag);\r\n\r\n\t\t\t\tgantt._init_task_timing(ev);\r\n\r\n\t\t\t\tif (!this._fireEvent(\"before_finish\", drag.mode, [drag.id, drag.mode, gantt.copy(drag.obj), e])) {\r\n\t\t\t\t\t//drag.obj._dhx_changed = false;\r\n\t\t\t\t\tthis.clear_drag_state();\r\n\t\t\t\t\tdrag.obj._dhx_changed = false;\r\n\t\t\t\t\tgantt.mixin(ev, drag.obj, true);\r\n\r\n\t\t\t\t\tgantt.refreshTask(ev.id);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tvar drag_id = drag.id;\r\n\r\n\t\t\t\t\tgantt._init_task_timing(ev);\r\n\r\n\t\t\t\t\tthis.clear_drag_state();\r\n\t\t\t\t\tgantt.updateTask(ev.id);\r\n\t\t\t\t\tthis._fireEvent(\"after_finish\", drag.mode, [drag_id, drag.mode, e]);\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\t\t\tthis.clear_drag_state();\r\n\t\t},\r\n\t\t_get_drag_mode: function (className) {\r\n\t\t\tvar config = timeline.$getConfig();\r\n\t\t\tvar modes = config.drag_mode;\r\n\t\t\tvar classes = (className || \"\").split(\" \");\r\n\t\t\tvar classname = classes[0];\r\n\t\t\tvar drag = {mode: null, left: null};\r\n\t\t\tswitch (classname) {\r\n\t\t\t\tcase \"gantt_task_line\":\r\n\t\t\t\tcase \"gantt_task_content\":\r\n\t\t\t\t\tdrag.mode = modes.move;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase \"gantt_task_drag\":\r\n\t\t\t\t\tdrag.mode = modes.resize;\r\n\t\t\t\t\tif (classes[1] && classes[1].indexOf(\"left\", classes[1].length - \"left\".length) !== -1) {\r\n\t\t\t\t\t\tdrag.left = true;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tdrag.left = false;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase \"gantt_task_progress_drag\":\r\n\t\t\t\t\tdrag.mode = modes.progress;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase \"gantt_link_control\":\r\n\t\t\t\tcase \"gantt_link_point\":\r\n\t\t\t\t\tdrag.mode = modes.ignore;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tdefault:\r\n\t\t\t\t\tdrag = null;\r\n\t\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t\treturn drag;\r\n\r\n\t\t},\r\n\r\n\t\t_start_dnd: function (e) {\r\n\t\t\tvar drag = this.drag = this.drag.start_drag;\r\n\t\t\tdelete drag.start_drag;\r\n\r\n\t\t\tvar cfg = timeline.$getConfig();\r\n\t\t\tvar id = drag.id;\r\n\t\t\tif (!cfg[\"drag_\" + drag.mode] || !gantt.callEvent(\"onBeforeDrag\", [id, drag.mode, e]) || !this._fireEvent(\"before_start\", drag.mode, [id, drag.mode, e])) {\r\n\t\t\t\tthis.clear_drag_state();\r\n\t\t\t} else {\r\n\t\t\t\tdelete drag.start_drag;\r\n\t\t\t\tgantt.callEvent(\"onTaskDragStart\", []);\r\n\t\t\t}\r\n\r\n\t\t},\r\n\t\t_fireEvent: function (stage, mode, params) {\r\n\t\t\tgantt.assert(this._events[stage], \"Invalid stage:{\" + stage + \"}\");\r\n\r\n\t\t\tvar trigger = this._events[stage][mode];\r\n\r\n\t\t\tgantt.assert(trigger, \"Unknown after drop mode:{\" + mode + \"}\");\r\n\t\t\tgantt.assert(params, \"Invalid event arguments\");\r\n\r\n\r\n\t\t\tif (!gantt.checkEvent(trigger))\r\n\t\t\t\treturn true;\r\n\r\n\t\t\treturn gantt.callEvent(trigger, params);\r\n\t\t},\r\n\r\n\t\tround_task_dates: function(task){\r\n\t\t\tvar drag_state = this.drag;\r\n\t\t\tvar config = timeline.$getConfig();\r\n\t\t\tif (!drag_state) {\r\n\t\t\t\tdrag_state = {mode: config.drag_mode.move};\r\n\t\t\t}\r\n\t\t\tthis._fix_dnd_scale_time(task, drag_state);\r\n\t\t}\r\n\t};\r\n}\r\n\r\nfunction initTaskDND() {\r\n\tvar _tasks_dnd;\r\n\treturn {\r\n\t\textend: function(timeline){\r\n\t\t\ttimeline.roundTaskDates = function (task) {\r\n\t\t\t\t_tasks_dnd.round_task_dates(task);\r\n\t\t\t};\r\n\r\n\t\t},\r\n\t\tinit: function(timeline, gantt){\r\n\t\t\t_tasks_dnd = createTaskDND(timeline, gantt);\r\n\t\t\t// TODO: entry point for touch handlers, move touch to timeline\r\n\t\t\ttimeline._tasks_dnd = _tasks_dnd;\r\n\t\t\treturn _tasks_dnd.init(gantt);\r\n\t\t},\r\n\t\tdestroy: function(){\r\n\r\n\t\t}\r\n\t};\r\n}\r\n\r\nmodule.exports = {\r\n\tcreateTaskDND: initTaskDND\r\n};\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// c:/www-recent/gantt/sources/core/ui/timeline/tasks_dnd.js\n// module id = 47\n// module chunks = 0","var domHelpers = require(\"../../../utils/dom_helpers\");\r\n\r\nvar initLinksDND = function(timeline, gantt) {\r\n\tvar _link_landing,\r\n\t\t_link_target_task,\r\n\t\t_link_target_task_start,\r\n\t\t_link_source_task,\r\n\t\t_link_source_task_start;\r\n\r\n\r\n\tfunction getMilestoneWidth() {\r\n\t\treturn timeline.getItemHeight();\r\n\t}\r\n\r\n\tfunction getVisibleMilestoneWidth() {\r\n\t\tvar origWidth = timeline.getItemHeight();//m-s have square shape\r\n\t\treturn Math.sqrt(2 * origWidth * origWidth);\r\n\t}\r\n\r\n\tfunction getDndState(){\r\n\t\treturn {\r\n\t\t\tlink_source_id : _link_source_task,\r\n\t\t\tlink_target_id : _link_target_task,\r\n\t\t\tlink_from_start : _link_source_task_start,\r\n\t\t\tlink_to_start : _link_target_task_start,\r\n\t\t\tlink_landing_area : _link_landing\r\n\t\t};\r\n\t}\r\n\r\n\tvar services = gantt.$services;\r\n\r\n\tvar state = services.getService(\"state\");\r\n\tvar DnD = services.getService(\"dnd\");\r\n\r\n\tstate.registerProvider(\"linksDnD\", getDndState);\r\n\r\n\tvar dnd = new DnD(timeline.$task_bars, { sensitivity : 0, updates_per_second : 60 }),\r\n\t\tstart_marker = \"task_left\",\r\n\t\tend_marker = \"task_right\",\r\n\t\tlink_edge_marker = \"gantt_link_point\",\r\n\t\tlink_landing_hover_area = \"gantt_link_control\";\r\n\r\n\tdnd.attachEvent(\"onBeforeDragStart\", gantt.bind(function(obj,e) {\r\n\t\tvar target = (e.target||e.srcElement);\r\n\t\tresetDndState();\r\n\t\tif(gantt.getState().drag_id)\r\n\t\t\treturn false;\r\n\r\n\t\tif(domHelpers.locateClassName(target, link_edge_marker)){\r\n\t\t\tif(domHelpers.locateClassName(target, start_marker))\r\n\t\t\t\t_link_source_task_start = true;\r\n\r\n\t\t\tvar sid = gantt.locate(e);\r\n\t\t\t_link_source_task = sid;\r\n\r\n\t\t\tvar t = gantt.getTask(sid);\r\n\t\t\tif(gantt.isReadonly(t)){\r\n\t\t\t\tresetDndState();\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\r\n\t\t\tvar shift = 0;\r\n\t\t\tif(gantt.getTaskType(t.type) == gantt.config.types.milestone){\r\n\t\t\t\tshift = (getVisibleMilestoneWidth() - getMilestoneWidth())/2;\r\n\t\t\t}\r\n\r\n\t\t\tthis._dir_start = getLinePos(t, !!_link_source_task_start, shift);\r\n\t\t\treturn true;\r\n\t\t}else{\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t}, this));\r\n\r\n\tdnd.attachEvent(\"onAfterDragStart\", gantt.bind(function(obj,e) {\r\n\t\tif(gantt.config.touch) {\r\n\t\t\tgantt.refreshData();\r\n\t\t}\r\n\t\tupdateMarkedHtml(dnd.config.marker);\r\n\t}, this));\r\n\r\n\tfunction getLinePos(task, to_start, shift){\r\n\t\tvar taskPos = getMilestonePosition(task, function(task){ return gantt.getTaskPosition(task);});\r\n\r\n\t\tvar pos = {x: taskPos.x, y: taskPos.y};\r\n\t\tif(!to_start){\r\n\t\t\tpos.x = taskPos.xEnd;\r\n\t\t}\r\n\r\n\t\t//var pos = gantt._get_task_pos(task, !!to_start);\r\n\t\tpos.y += gantt.config.row_height/2;\r\n\r\n\t\tshift = shift || 0;\r\n\t\tpos.x += (to_start ? -1 : 1)*shift;\r\n\t\treturn pos;\r\n\t}\r\n\r\n\tfunction getMilestonePosition(task, getTaskPosition){\r\n\t\tvar pos = getTaskPosition(task);\r\n\r\n\t\tvar res = {\r\n\t\t\tx: pos.left,\r\n\t\t\ty: pos.top,\r\n\t\t\twidth: pos.width,\r\n\t\t\theight: pos.height\r\n\t\t};\r\n\t\tres.xEnd = res.x + res.width;\r\n\t\tres.yEnd = res.y + res.height;\r\n\r\n\t\tif(gantt.getTaskType(task.type) == gantt.config.types.milestone){\r\n\t\t\tvar milestoneHeight = gantt.getTaskHeight();\r\n\t\t\tvar milestoneWidth = Math.sqrt(2*milestoneHeight*milestoneHeight);\r\n\t\t\tpos.x -= milestoneWidth / 2;\r\n\t\t\tpos.xEnd += milestoneWidth / 2;\r\n\t\t\tpos.width = pos.xEnd - pos.x;\r\n\t\t}\r\n\r\n\r\n\t\treturn res;\r\n\t}\r\n\r\n\tdnd.attachEvent(\"onDragMove\", gantt.bind(function(obj,e) {\r\n\t\tvar dd = dnd.config;\r\n\t\tvar pos = dnd.getPosition(e);\r\n\t\tadvanceMarker(dd.marker, pos);\r\n\t\tvar landing = !!domHelpers.locateClassName(e, link_landing_hover_area);\r\n\r\n\t\tvar prevTarget = _link_target_task;\r\n\t\tvar prevLanding = _link_landing;\r\n\t\tvar prevToStart = _link_target_task_start;\r\n\r\n\t\tvar targ = gantt.locate(e),\r\n\t\t\tto_start = true;\r\n\t\tif(landing){\r\n\t\t\t//refreshTask\r\n\t\t\tto_start = !domHelpers.locateClassName(e, end_marker);\r\n\t\t\tlanding = !!targ;\r\n\t\t}\r\n\r\n\t\t_link_target_task = targ;\r\n\t\t_link_landing = landing;\r\n\t\t_link_target_task_start = to_start;\r\n\r\n\t\tif(landing){\r\n\t\t\tvar t = gantt.getTask(targ);\r\n\r\n\t\t\tvar node = domHelpers.locateClassName(e, link_landing_hover_area);\r\n\t\t\tvar shift = 0;\r\n\t\t\tif(node){\r\n\t\t\t\tshift = Math.floor(node.offsetWidth  / 2);\r\n\t\t\t}\r\n\r\n\t\t\tthis._dir_end = getLinePos(t, !!_link_target_task_start,shift);\r\n\t\t}else{\r\n\t\t\tthis._dir_end = domHelpers.getRelativeEventPosition(e, timeline.$task_data);\r\n\t\t}\r\n\r\n\t\tvar targetChanged = !(prevLanding == landing && prevTarget == targ && prevToStart == to_start);\r\n\t\tif(targetChanged){\r\n\t\t\tif(prevTarget)\r\n\t\t\t\tgantt.refreshTask(prevTarget, false);\r\n\t\t\tif(targ)\r\n\t\t\t\tgantt.refreshTask(targ, false);\r\n\t\t}\r\n\r\n\t\tif(targetChanged){\r\n\t\t\tupdateMarkedHtml(dd.marker);\r\n\t\t}\r\n\r\n\t\tshowDirectingLine(this._dir_start.x, this._dir_start.y, this._dir_end.x, this._dir_end.y);\r\n\r\n\t\treturn true;\r\n\t}, this));\r\n\r\n\r\n\tdnd.attachEvent(\"onDragEnd\", gantt.bind(function() {\r\n\t\tvar drag = getDndState();\r\n\r\n\t\tif(drag.link_source_id && drag.link_target_id && drag.link_source_id != drag.link_target_id){\r\n\t\t\tvar type = gantt._get_link_type(drag.link_from_start, drag.link_to_start);\r\n\r\n\t\t\tvar link = {source : drag.link_source_id, target: drag.link_target_id, type:type};\r\n\t\t\tif(link.type && gantt.isLinkAllowed(link))\r\n\t\t\t\tgantt.addLink(link);\r\n\t\t}\r\n\r\n\t\tresetDndState();\r\n\r\n\t\tif(gantt.config.touch) {\r\n\t\t\tgantt.refreshData();\r\n\t\t}\r\n\t\telse {\r\n\t\t\tif (drag.link_source_id)\r\n\t\t\t\tgantt.refreshTask(drag.link_source_id, false);\r\n\t\t\tif (drag.link_target_id)\r\n\t\t\t\tgantt.refreshTask(drag.link_target_id, false);\r\n\t\t}\r\n\t\tremoveDirectionLine();\r\n\t}, this));\r\n\r\n\tfunction updateMarkedHtml(marker){\r\n\t\tvar link = getDndState();\r\n\r\n\t\tvar css = [\"gantt_link_tooltip\"];\r\n\t\tif(link.link_source_id && link.link_target_id){\r\n\t\t\tif(gantt.isLinkAllowed(link.link_source_id, link.link_target_id, link.link_from_start, link.link_to_start)){\r\n\t\t\t\tcss.push(\"gantt_allowed_link\");\r\n\t\t\t}else{\r\n\t\t\t\tcss.push(\"gantt_invalid_link\");\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tvar className = gantt.templates.drag_link_class(link.link_source_id, link.link_from_start, link.link_target_id, link.link_to_start);\r\n\t\tif(className)\r\n\t\t\tcss.push(className);\r\n\r\n\t\tvar html = \"<div class='\"+className+ \"'>\" +\r\n\t\t\tgantt.templates.drag_link(link.link_source_id, link.link_from_start, link.link_target_id, link.link_to_start) +\r\n\t\t\t\"</div>\";\r\n\t\tmarker.innerHTML = html;\r\n\t}\r\n\r\n\tfunction advanceMarker(marker, pos){\r\n\t\tmarker.style.left = pos.x + 5 + \"px\";\r\n\t\tmarker.style.top = pos.y + 5 + \"px\";\r\n\t}\r\n\r\n\tfunction resetDndState(){\r\n\t\t_link_source_task =\r\n\t\t\t_link_source_task_start =\r\n\t\t\t\t_link_target_task = null;\r\n\t\t_link_target_task_start = true;\r\n\t}\r\n\tfunction showDirectingLine(s_x, s_y, e_x, e_y){\r\n\t\tvar div = getDirectionLine();\r\n\r\n\t\tvar link = getDndState();\r\n\r\n\t\tvar css = [\"gantt_link_direction\"];\r\n\t\tif(gantt.templates.link_direction_class){\r\n\t\t\tcss.push(gantt.templates.link_direction_class(link.link_source_id, link.link_from_start, link.link_target_id, link.link_to_start));\r\n\t\t}\r\n\r\n\t\tvar dist =Math.sqrt( (Math.pow(e_x - s_x, 2)) + (Math.pow(e_y - s_y, 2)) );\r\n\t\tdist = Math.max(0, dist - 3);\r\n\t\tif(!dist)\r\n\t\t\treturn;\r\n\r\n\t\tdiv.className = css.join(\" \");\r\n\t\tvar tan = (e_y - s_y)/(e_x - s_x),\r\n\t\t\tangle = Math.atan(tan);\r\n\r\n\t\tif(coordinateCircleQuarter(s_x, e_x, s_y, e_y) == 2){\r\n\t\t\tangle += Math.PI;\r\n\t\t}else if(coordinateCircleQuarter(s_x, e_x, s_y, e_y) == 3){\r\n\t\t\tangle -= Math.PI;\r\n\t\t}\r\n\r\n\r\n\r\n\t\tvar sin = Math.sin(angle),\r\n\t\t\tcos = Math.cos(angle),\r\n\t\t\ttop = Math.round(s_y),\r\n\t\t\tleft = Math.round(s_x);\r\n\r\n\r\n\t\tvar style = [\r\n\t\t\t\"-webkit-transform: rotate(\"+angle+\"rad)\",\r\n\t\t\t\"-moz-transform: rotate(\"+angle+\"rad)\",\r\n\t\t\t\"-ms-transform: rotate(\"+angle+\"rad)\",\r\n\t\t\t\"-o-transform: rotate(\"+angle+\"rad)\",\r\n\t\t\t\"transform: rotate(\"+angle+\"rad)\",\r\n\t\t\t\"width:\" + Math.round(dist) + \"px\"\r\n\t\t];\r\n\r\n\t\tif(window.navigator.userAgent.indexOf(\"MSIE 8.0\") != -1){\r\n\t\t\t//ms-filter breaks styles in ie9, so add it only for 8th\r\n\t\t\tstyle.push(\"-ms-filter: \\\"\" + ieTransform(sin, cos) + \"\\\"\");\r\n\r\n\t\t\tvar shiftLeft = Math.abs(Math.round(s_x - e_x)),\r\n\t\t\t\tshiftTop = Math.abs(Math.round(e_y - s_y));\r\n\t\t\t//fix rotation axis\r\n\t\t\tswitch(coordinateCircleQuarter(s_x, e_x, s_y, e_y)){\r\n\t\t\t\tcase 1:\r\n\t\t\t\t\ttop -= shiftTop;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 2:\r\n\t\t\t\t\tleft -= shiftLeft;\r\n\t\t\t\t\ttop -= shiftTop;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 3:\r\n\t\t\t\t\tleft -= shiftLeft;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tdefault:\r\n\t\t\t\t\tbreak;\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tstyle.push(\"top:\" +  top + \"px\");\r\n\t\tstyle.push(\"left:\" +  left + \"px\");\r\n\r\n\t\tdiv.style.cssText = style.join(\";\");\r\n\t}\r\n\r\n\tfunction ieTransform(sin, cos){\r\n\t\treturn \"progid:DXImageTransform.Microsoft.Matrix(\"+\r\n\t\t\t\"M11 = \"+cos+\",\"+\r\n\t\t\t\"M12 = -\"+sin+\",\"+\r\n\t\t\t\"M21 = \"+sin+\",\"+\r\n\t\t\t\"M22 = \"+cos+\",\"+\r\n\t\t\t\"SizingMethod = 'auto expand'\"+\r\n\t\t\")\";\r\n\t}\r\n\tfunction coordinateCircleQuarter(sX, eX, sY, eY){\r\n\t\tif(eX >= sX){\r\n\t\t\tif(eY <= sY){\r\n\t\t\t\treturn 1;\r\n\t\t\t}else{\r\n\t\t\t\treturn 4;\r\n\t\t\t}\r\n\t\t}else{\r\n\t\t\tif(eY <= sY){\r\n\t\t\t\treturn 2;\r\n\t\t\t}else{\r\n\t\t\t\treturn 3;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t}\r\n\tfunction getDirectionLine(){\r\n\t\tif(!dnd._direction){\r\n\t\t\tdnd._direction = document.createElement(\"div\");\r\n\t\t\ttimeline.$task_links.appendChild(dnd._direction);\r\n\t\t}\r\n\t\treturn dnd._direction;\r\n\t}\r\n\tfunction removeDirectionLine(){\r\n\t\tif(dnd._direction){\r\n\t\t\tif (dnd._direction.parentNode)\t//the event line can be detached because of data refresh\r\n\t\t\t\tdnd._direction.parentNode.removeChild(dnd._direction);\r\n\r\n\t\t\tdnd._direction = null;\r\n\t\t}\r\n\t}\r\n};\r\n\r\nmodule.exports = {\r\n\tcreateLinkDND: function(){\r\n\t\treturn {\r\n\t\t\tinit: initLinksDND\r\n\t\t};\r\n\t}\r\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// c:/www-recent/gantt/sources/core/ui/timeline/links_dnd.js\n// module id = 48\n// module chunks = 0","var initializer = (function() {\r\n\treturn function (gantt) {\r\n\t\treturn {\r\n\r\n\t\t\tgetVerticalScrollbar: function(){\r\n\t\t\t\treturn gantt.$ui.getView(\"scrollVer\");\r\n\t\t\t},\r\n\t\t\tgetHorizontalScrollbar: function(){\r\n\t\t\t\treturn gantt.$ui.getView(\"scrollHor\");\r\n\t\t\t},\r\n\r\n\t\t\tonCreated: function (layout) {\r\n\t\t\t\tvar first = true;\r\n\t\t\t\tlayout.attachEvent(\"onBeforeResize\", function(){\r\n\t\t\t\t\tvar mainTimeline = gantt.$ui.getView(\"timeline\");\r\n\t\t\t\t\tmainTimeline.$config.hidden = mainTimeline.$parent.$config.hidden = !gantt.config.show_chart;\r\n\r\n\t\t\t\t\tvar mainGrid = gantt.$ui.getView(\"grid\");\r\n\t\t\t\t\tvar showGrid = gantt.config.show_grid;\r\n\t\t\t\t\tif(first) {\r\n\t\t\t\t\t\tvar colsWidth = mainGrid._getColsTotalWidth();\r\n\t\t\t\t\t\tif(colsWidth !== false){\r\n\t\t\t\t\t\t\tgantt.config.grid_width = colsWidth;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tshowGrid = showGrid && !!gantt.config.grid_width;\r\n\t\t\t\t\t\tgantt.config.show_grid = showGrid;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tmainGrid.$config.hidden = mainGrid.$parent.$config.hidden = !showGrid;\r\n\r\n\t\t\t\t\tif(!mainGrid.$config.hidden){\r\n\t\t\t\t\t\tmainGrid.$config.width = gantt.config.grid_width;\r\n\t\t\t\t\t\tmainGrid.$parent._setContentSize(mainGrid.$config.width, mainGrid.$config.height);\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tfirst = false;\r\n\r\n\t\t\t\t});\r\n\r\n\t\t\t\tgantt._getVerticalScrollbar = this.getVerticalScrollbar;\r\n\t\t\t\tgantt._getHorizontalScrollbar = this.getHorizontalScrollbar;\r\n\r\n\t\t\t\tvar vertical = this.getVerticalScrollbar();\r\n\t\t\t\tvar horizontal = this.getHorizontalScrollbar();\r\n\t\t\t\tif(vertical){\r\n\t\t\t\t\tvertical.attachEvent(\"onScroll\", function(oldPos, newPos, dir){\r\n\t\t\t\t\t\tvar scrollState = gantt.getScrollState();\r\n\t\t\t\t\t\tgantt.callEvent(\"onGanttScroll\", [scrollState.x, oldPos, scrollState.x, newPos]);\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t\tif(horizontal){\r\n\t\t\t\t\thorizontal.attachEvent(\"onScroll\", function(oldPos, newPos, dir){\r\n\t\t\t\t\t\tvar scrollState = gantt.getScrollState();\r\n\t\t\t\t\t\tgantt.callEvent(\"onGanttScroll\", [oldPos, scrollState.y, newPos, scrollState.y]);\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\r\n\t\t\t},\r\n\t\t\tonInitialized: function (layout) {\r\n\t\t\t\tvar grid = gantt.$ui.getView(\"grid\");\r\n\t\t\t\tif(!(grid.$parent && grid.$parent.$parent && grid.$parent.$parent._xLayout)){\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tvar parent = grid.$parent.$parent;\r\n\t\t\t\tvar siblings = parent.getCells();\r\n\t\t\t\tvar next;\r\n\t\t\t\tfor(var i = 0; i < siblings.length; i++){\r\n\t\t\t\t\tif(siblings[i] === grid.$parent){\r\n\t\t\t\t\t\tnext = siblings[i + 1];\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// expose grid resize events\r\n\t\t\t\tif(next && next.$name == \"resizer\"){\r\n\t\t\t\t\tvar initialWidth;\r\n\t\t\t\t\tnext.attachEvent(\"onResizeStart\", function(prevCellWidth, nextCellWidth){\r\n\t\t\t\t\t\tinitialWidth = prevCellWidth;\r\n\t\t\t\t\t\treturn gantt.callEvent(\"onGridResizeStart\", [prevCellWidth]);\r\n\t\t\t\t\t});\r\n\t\t\t\t\tnext.attachEvent(\"onResize\", function(newBehindSize, newFrontSize){\r\n\t\t\t\t\t\treturn gantt.callEvent(\"onGridResize\", [initialWidth, newFrontSize]);\r\n\t\t\t\t\t});\r\n\t\t\t\t\tnext.attachEvent(\"onResizeEnd\", function(oldBackSize, oldFrontSize, newBackSize, newFrontSize){\r\n\r\n\t\t\t\t\t\tvar res = gantt.callEvent(\"onGridResizeEnd\", [oldBackSize, newBackSize]);\r\n\t\t\t\t\t\tif(res){\r\n\t\t\t\t\t\t\tgantt.config.grid_width = newBackSize;\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\treturn res;\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\r\n\t\t\t},\r\n\t\t\tonDestroyed: function (timeline) {\r\n\r\n\t\t\t}\r\n\t\t};\r\n\t};\r\n})();\r\n\r\nmodule.exports = initializer;\n\n\n//////////////////\n// WEBPACK FOOTER\n// c:/www-recent/gantt/sources/core/ui/main_layout_initializer.js\n// module id = 49\n// module chunks = 0","module.exports = function(gantt) {\r\n\tdelete gantt.addTaskLayer;\r\n\tdelete gantt.addLinkLayer;\r\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// c:/www-recent/gantt/sources/core/data_task_layers.gpl.js\n// module id = 50\n// module chunks = 0","var utils = require(\"../../utils/utils\");\r\nvar facadeFactory = require(\"./../facades/datastore\");\r\nvar calculateScaleRange = require(\"../gantt_data_range\");\r\nfunction initDataStores(gantt){\r\n\r\n\tvar facade = facadeFactory.create();\r\n\tutils.mixin(gantt, facade);\r\n\tvar tasksStore = gantt.createDatastore({\r\n\t\tname: \"task\",\r\n\t\ttype: \"treeDatastore\",\r\n\t\tinitItem: utils.bind(_init_task, gantt)\r\n\t});\r\n\r\n\tvar linksStore = gantt.createDatastore({\r\n\t\tname: \"link\",\r\n\t\tinitItem: utils.bind(_init_link, gantt)\r\n\t});\r\n\r\n\tvar scrollState;\r\n\ttasksStore.attachEvent(\"onBeforeRefreshAll\", function(){\r\n\t\tgantt.callEvent(\"onBeforeDataRender\", []);\r\n\t\tscrollState = gantt.getScrollState();\r\n\r\n\t\tvar order = tasksStore.getVisibleItems();\r\n\r\n\t\tfor(var i=0; i < order.length; i++){\r\n\t\t\tvar item = order[i];\r\n\t\t\titem.$index = i;\r\n\t\t\tgantt.resetProjectDates(item);\r\n\t\t}\r\n\r\n\t});\r\n\r\n\ttasksStore.attachEvent(\"onAfterRefreshAll\", function(){\r\n\t\tif(scrollState.x || scrollState.y){\r\n\t\t\tgantt.scrollTo(scrollState.x, scrollState.y);\r\n\t\t}\r\n\t\tgantt.callEvent(\"onDataRender\", []);\r\n\t});\r\n\r\n\ttasksStore.attachEvent(\"onFilterItem\", function(id, task){\r\n\t\tvar min = null, max = null;\r\n\t\tif (gantt.config.start_date && gantt.config.end_date) {\r\n\t\t\tif (gantt._isAllowedUnscheduledTask(task)) return true;\r\n\t\t\tmin = gantt.config.start_date.valueOf();\r\n\t\t\tmax = gantt.config.end_date.valueOf();\r\n\r\n\t\t\tif (+task.start_date > max || +task.end_date < +min)\r\n\t\t\t\treturn false;\r\n\t\t}\r\n\t\treturn true;\r\n\t});\r\n\r\n\ttasksStore.attachEvent(\"onIdChange\", function(oldId, newId){\r\n\t\tgantt._update_flags(oldId, newId);\r\n\t});\r\n\r\n\ttasksStore.attachEvent(\"onAfterUpdate\", function(id){\r\n\t\tgantt._update_parents(id);\r\n\t});\r\n\r\n\ttasksStore.attachEvent(\"onAfterItemMove\", function(sid, parent, tindex){\r\n\t\tvar source = gantt.getTask(sid);\r\n\r\n\t\tif(this.getNext(sid)){\r\n\t\t\tsource.$drop_target = this.getNext(sid);\r\n\t\t}else{\r\n\t\t\tvar prev = this.getPrev(sid);\r\n\t\t\tif(prev){\r\n\t\t\t\tif(prev.id == this.getParent(sid)){\r\n\t\t\t\t\tsource.$drop_target = parent;\r\n\t\t\t\t}else{\r\n\t\t\t\t\tsource.$drop_target = \"next:\" + prev;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn true;\r\n\t});\r\n\r\n\ttasksStore.attachEvent(\"onStoreUpdated\", function(id, item, action){\r\n\t\tif(action == \"delete\"){\r\n\t\t\tgantt._update_flags(id, null);\r\n\t\t}\r\n\r\n\t\tif(gantt.config.fit_tasks){\r\n\t\t\tvar oldState = gantt.getState();\r\n\t\t\tcalculateScaleRange(gantt);\r\n\t\t\tvar newState = gantt.getState();\r\n\r\n\t\t\t//this._init_tasks_range();\r\n\t\t\tif (+oldState.min_date != +newState.min_date || +oldState.max_date != +newState.max_date) {\r\n\t\t\t\tgantt.render();\r\n\r\n\t\t\t\tgantt.callEvent(\"onScaleAdjusted\", []);\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tif(action == \"add\"){\r\n\t\t\tgantt.$layout.resize();\r\n\t\t}else if(!id || action == \"move\" || action == \"delete\"){\r\n\t\t\tlinksStore.refresh();\r\n\t\t}\r\n\r\n\t\t/*if(!id || action == \"move\" || action == \"delete\"){\r\n\t\t\tlinksStore.refresh();\r\n\t\t}*/\r\n\t});\r\n\r\n\tlinksStore.attachEvent(\"onAfterAdd\", function(id, link){\r\n\t\tsync_link(link);\r\n\t});\r\n\tlinksStore.attachEvent(\"onAfterUpdate\", function(id, link){\r\n\t\tsync_links();\r\n\t});\r\n\tlinksStore.attachEvent(\"onAfterDelete\", function(id, link){\r\n\t\tsync_link_delete(link);\r\n\t});\r\n\tlinksStore.attachEvent(\"onIdChange\", function(oldId, newId){\r\n\t\tsync_link_delete(gantt.mixin({id:oldId}, gantt.$data.linksStore.getItem(newId)));\r\n\t\tsync_link(gantt.$data.linksStore.getItem(newId));\r\n\t});\r\n\r\n\tlinksStore.attachEvent(\"onFilterItem\", function(id, link){\r\n\t\tif (!gantt.config.show_links) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t\tif (!(gantt.isTaskVisible(link.source) && gantt.isTaskVisible(link.target)) ||\r\n\t\t\tgantt._isAllowedUnscheduledTask(gantt.getTask(link.source)) || gantt._isAllowedUnscheduledTask(gantt.getTask(link.target)))\r\n\t\t\treturn false;\r\n\r\n\t\treturn gantt.callEvent(\"onBeforeLinkDisplay\", [id, link]);\r\n\t});\r\n\r\n\r\n\tgantt.attachEvent(\"onAfterLinkDelete\", function(id, link) {\r\n\t\tgantt.refreshTask(link.source);\r\n\t\tgantt.refreshTask(link.target);\r\n\t});\r\n\r\n\tgantt.attachEvent(\"onParse\", sync_links);\r\n\r\n\tmapEvents({\r\n\t\tsource: linksStore,\r\n\t\ttarget: gantt,\r\n\t\tevents:{\r\n\t\t\t\"onItemLoading\":\"onLinkLoading\",\r\n\t\t\t\"onBeforeAdd\":\"onBeforeLinkAdd\",\r\n\t\t\t\"onAfterAdd\":\"onAfterLinkAdd\",\r\n\t\t\t\"onBeforeUpdate\":\"onBeforeLinkUpdate\",\r\n\t\t\t\"onAfterUpdate\":\"onAfterLinkUpdate\",\r\n\t\t\t\"onBeforeDelete\":\"onBeforeLinkDelete\",\r\n\t\t\t\"onAfterDelete\":\"onAfterLinkDelete\",\r\n\t\t\t\"onIdChange\":\"onLinkIdChange\"\r\n\t\t}\r\n\t});\r\n\r\n\tmapEvents({\r\n\t\tsource: tasksStore,\r\n\t\ttarget: gantt,\r\n\t\tevents:{\r\n\t\t\t\"onItemLoading\":\"onTaskLoading\",\r\n\t\t\t\"onBeforeAdd\":\"onBeforeTaskAdd\",\r\n\t\t\t\"onAfterAdd\":\"onAfterTaskAdd\",\r\n\t\t\t\"onBeforeUpdate\":\"onBeforeTaskUpdate\",\r\n\t\t\t\"onAfterUpdate\":\"onAfterTaskUpdate\",\r\n\t\t\t\"onBeforeDelete\":\"onBeforeTaskDelete\",\r\n\t\t\t\"onAfterDelete\":\"onAfterTaskDelete\",\r\n\t\t\t\"onIdChange\":\"onTaskIdChange\",\r\n\t\t\t\"onBeforeItemMove\":\"onBeforeItemMove\",\r\n\t\t\t\"onAfterItemMove\":\"onAfterItemMove\",\r\n\t\t\t\"onFilterItem\":\"onBeforeTaskDisplay\"\r\n\t\t}\r\n\t});\r\n\r\n\tgantt.$data = {\r\n\t\ttasksStore: tasksStore,\r\n\t\tlinksStore: linksStore\r\n\t};\r\n\r\n\tfunction sync_link(link){\r\n\t\tif(gantt.isTaskExists(link.source)){\r\n\t\t\tvar sourceTask = gantt.getTask(link.source);\r\n\t\t\tsourceTask.$source = sourceTask.$source || [];\r\n\t\t\tsourceTask.$source.push(link.id);\r\n\t\t}\r\n\t\tif(gantt.isTaskExists(link.target)){\r\n\t\t\tvar targetTask = gantt.getTask(link.target);\r\n\t\t\ttargetTask.$target = targetTask.$target || [];\r\n\t\t\ttargetTask.$target.push(link.id);\r\n\t\t}\r\n\t}\r\n\r\n\tfunction sync_link_delete(link){\r\n\t\tif(gantt.isTaskExists(link.source)){\r\n\t\t\tvar sourceTask = gantt.getTask(link.source);\r\n\t\t\tfor(var i = 0; i < sourceTask.$source.length; i++){\r\n\t\t\t\tif(sourceTask.$source[i] == link.id){\r\n\t\t\t\t\tsourceTask.$source.splice(i, 1);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\tif(gantt.isTaskExists(link.target)){\r\n\t\t\tvar targetTask = gantt.getTask(link.target);\r\n\t\t\tfor(var i = 0; i < targetTask.$target.length; i++){\r\n\t\t\t\tif(targetTask.$target[i] == link.id){\r\n\t\t\t\t\ttargetTask.$target.splice(i, 1);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tfunction sync_links() {\r\n\t\tvar task = null;\r\n\t\tvar tasks = gantt.$data.tasksStore.getItems();\r\n\r\n\t\tfor(var i = 0, len = tasks.length; i < len; i++){\r\n\t\t\ttask = tasks[i];\r\n\t\t\ttask.$source = [];\r\n\t\t\ttask.$target = [];\r\n\t\t}\r\n\r\n\t\tvar links = gantt.$data.linksStore.getItems();\r\n\t\tfor (var i = 0, len = links.length; i < len; i++) {\r\n\r\n\t\t\tvar link = links[i];\r\n\t\t\tsync_link(link);\r\n\t\t}\r\n\t}\r\n\r\n\tfunction mapEvents(conf){\r\n\t\tvar mapFrom = conf.source;\r\n\t\tvar mapTo = conf.target;\r\n\t\tfor(var i in conf.events){\r\n\t\t\t(function(sourceEvent, targetEvent){\r\n\t\t\t\tmapFrom.attachEvent(sourceEvent, function(){\r\n\t\t\t\t\treturn mapTo.callEvent(targetEvent, Array.prototype.slice.call(arguments));\r\n\t\t\t\t}, targetEvent);\r\n\t\t\t})(i, conf.events[i]);\r\n\t\t}\r\n\t}\r\n\r\n\tfunction _init_task(task) {\r\n\t\tif (!this.defined(task.id))\r\n\t\t\ttask.id = this.uid();\r\n\r\n\t\tif (task.start_date)\r\n\t\t\ttask.start_date = gantt.date.parseDate(task.start_date, \"xml_date\");\r\n\t\tif (task.end_date)\r\n\t\t\ttask.end_date = gantt.date.parseDate(task.end_date, \"xml_date\");\r\n\r\n\r\n\t\tvar duration = null;\r\n\t\tif (task.duration || task.duration === 0) {\r\n\t\t\ttask.duration = duration = task.duration * 1;\r\n\t\t}\r\n\r\n\t\tif (duration) {\r\n\t\t\tif (task.start_date && !task.end_date) {\r\n\t\t\t\ttask.end_date = this.calculateEndDate(task);\r\n\t\t\t} else if (!task.start_date && task.end_date) {\r\n\t\t\t\ttask.start_date = this.calculateEndDate({\r\n\t\t\t\t\tstart_date: task.end_date,\r\n\t\t\t\t\tduration: -task.duration,\r\n\t\t\t\t\ttask: task\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t}\r\n\r\n\r\n\t\tif (this._isAllowedUnscheduledTask(task)) {\r\n\t\t\tthis._set_default_task_timing(task);\r\n\t\t}\r\n\t\tthis._init_task_timing(task);\r\n\t\tif (task.start_date && task.end_date)\r\n\t\t\tthis.correctTaskWorkTime(task);\r\n\r\n\t\ttask.$source = [];\r\n\t\ttask.$target = [];\r\n\t\tif (task.parent === undefined) {\r\n\t\t\tthis.setParent(task, this.config.root_id);\r\n\t\t}\r\n\r\n\t\tif (!this.defined(task.$open)) {\r\n\t\t\ttask.$open = this.defined(task.open) ? task.open : this.config.open_tree_initially;\r\n\t\t}\r\n\t\ttask.$level = this.calculateTaskLevel(task);\r\n\t\treturn task;\r\n\t}\r\n\r\n\tfunction _init_link(link) {\r\n\t\tif (!this.defined(link.id))\r\n\t\t\tlink.id = this.uid();\r\n\t\treturn link;\r\n\t}\r\n}\r\n\r\n\r\nmodule.exports = initDataStores;\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// c:/www-recent/gantt/sources/core/datastore/datastore_hooks.js\n// module id = 51\n// module chunks = 0","var utils = require(\"../../utils/utils\");\r\nvar createTasksFacade = require(\"./datastore_tasks\"),\r\n\tcreateLinksFacade = require(\"./datastore_links\"),\r\n\tDataStore = require(\"../datastore/datastore\"),\r\n\tTreeDataStore = require(\"../datastore/treedatastore\");\r\nvar datastoreRender = require(\"../datastore/datastore_render\");\r\n\r\nfunction getDatastores(){\r\n\tvar storeNames = this.$services.getService(\"datastores\");\r\n\tvar res = [];\r\n\tfor(var i = 0; i < storeNames.length; i++){\r\n\t\tres.push(this.getDatastore(storeNames[i]));\r\n\t}\r\n\treturn res;\r\n}\r\n\r\nvar createDatastoreFacade = function(){\r\n\treturn {\r\n\tcreateDatastore: function(config){\r\n\r\n\t\tvar $StoreType = (config.type || \"\").toLowerCase() == \"treedatastore\" ? TreeDataStore : DataStore;\r\n\r\n\t\tvar store = new $StoreType({\r\n\t\t\tinitItem: config.initItem\r\n\t\t});\r\n\r\n\t\tif(config.name){\r\n\r\n\t\t\tthis.$services.setService(\"datastore:\" + config.name, function(){return store;});\r\n\t\t\tvar storeList = this.$services.getService(\"datastores\");\r\n\t\t\tif(!storeList){\r\n\t\t\t\tstoreList = [];\r\n\t\t\t\tthis.$services.setService(\"datastores\", function(){return storeList;});\r\n\t\t\t}\r\n\t\t\tstoreList.push(config.name);\r\n\r\n\t\t\tdatastoreRender.bindDataStore(config.name, this);\r\n\t\t}\r\n\r\n\t\treturn store;\r\n\t},\r\n\tgetDatastore: function(name){\r\n\t\treturn this.$services.getService(\"datastore:\" + name);\r\n\t},\r\n\r\n\trefreshData: function () {\r\n\t\tvar stores = getDatastores.call(this);\r\n\t\tfor(var i = 0; i < stores.length; i++){\r\n\t\t\tstores[i].refresh();\r\n\t\t}\r\n\t},\r\n\r\n\tisChildOf: function(childId, parentId){\r\n\t\treturn this.$data.tasksStore.isChildOf(childId, parentId);\r\n\t},\r\n\r\n\trefreshTask: function (taskId, refresh_links) {\r\n\t\tvar task = this.getTask(taskId);\r\n\t\tif (task && this.isTaskVisible(taskId)) {\r\n\t\t\tthis.$data.tasksStore.refresh(taskId);\r\n\r\n\t\t\tif (refresh_links !== undefined && !refresh_links)\r\n\t\t\t\treturn;\r\n\t\t\tfor (var i = 0; i < task.$source.length; i++) {\r\n\t\t\t\tthis.refreshLink(task.$source[i]);\r\n\t\t\t}\r\n\t\t\tfor (var i = 0; i < task.$target.length; i++) {\r\n\t\t\t\tthis.refreshLink(task.$target[i]);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t},\r\n\trefreshLink: function (linkId) {\r\n\t\tthis.$data.linksStore.refresh(linkId);\r\n\t},\r\n\r\n\tsilent: function(code){\r\n\t\tvar gantt = this;\r\n\t\tgantt.$data.tasksStore.silent(function(){\r\n\t\t\tgantt.$data.linksStore.silent(function(){\r\n\t\t\t\tcode();\r\n\t\t\t});\r\n\t\t});\r\n\t},\r\n\tsort: function (field, desc, parent, silent) {\r\n\t\tvar render = !silent;//4th argument to cancel redraw after sorting\r\n\r\n\t\tif (!this.isTaskExists(parent)) {\r\n\t\t\tparent = this.config.root_id;\r\n\t\t}\r\n\r\n\t\tif (!field) field = \"order\";\r\n\t\tvar criteria = (typeof(field) == \"string\") ? (function (a, b) {\r\n\t\t\tif (a[field] == b[field]) {\r\n\t\t\t\treturn 0;\r\n\t\t\t}\r\n\r\n\t\t\tvar result = a[field] > b[field];\r\n\t\t\treturn result ? 1 : -1;\r\n\t\t}) : field;\r\n\r\n\t\tif (desc) {\r\n\t\t\tvar original_criteria = criteria;\r\n\t\t\tcriteria = function (a, b) {\r\n\t\t\t\treturn original_criteria(b, a);\r\n\t\t\t};\r\n\t\t}\r\n\r\n\t\tvar els = this.getChildren(parent);\r\n\t\tif (els) {\r\n\t\t\tvar temp = [];\r\n\t\t\tfor (var i = els.length - 1; i >= 0; i--)\r\n\t\t\t\ttemp[i] = this.$data.tasksStore.getItem(els[i]);\r\n\r\n\t\t\ttemp.sort(criteria);\r\n\r\n\t\t\tfor (var i = 0; i < temp.length; i++) {\r\n\t\t\t\tels[i] = temp[i].id;\r\n\t\t\t\tthis.sort(field, desc, els[i], true);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif (render) {\r\n\t\t\tthis.render();\r\n\t\t}\r\n\t},\r\n\tclearAll: function () {\r\n\t\tvar stores = getDatastores.call(this);\r\n\t\tfor(var i = 0; i < stores.length; i++){\r\n\t\t\tstores[i].clearAll();\r\n\t\t}\r\n\r\n\t\tthis._update_flags();\r\n\t\tthis.userdata = {};\r\n\t\tthis.callEvent(\"onClear\", []);\r\n\t\tthis.refreshData();\r\n\t},\r\n\t_clear_data: function () {\r\n\t\tthis.$data.tasksStore.clearAll();\r\n\t\tthis.$data.linksStore.clearAll();\r\n\t\tthis._update_flags();\r\n\t\tthis.userdata = {};\r\n\t},\r\n\r\n\t_has_children: function (id) {\r\n\t\treturn this.getChildren(id).length > 0;\r\n\t}\r\n};\r\n};\r\n\r\nfunction createFacade(){\r\n\tvar res = utils.mixin({}, createDatastoreFacade());\r\n\tutils.mixin(res, createTasksFacade());\r\n\tutils.mixin(res, createLinksFacade());\r\n\treturn res;\r\n}\r\n\r\n\r\n\r\n\r\nmodule.exports = {create: createFacade};\n\n\n//////////////////\n// WEBPACK FOOTER\n// c:/www-recent/gantt/sources/core/facades/datastore.js\n// module id = 52\n// module chunks = 0","var utils = require(\"../../utils/utils\");\r\n\r\nvar createTasksDatastoreFacade = function(){\r\n\treturn {\r\n\tgetTask: function (id) {\r\n\t\tthis.assert(id, \"Invalid argument for gantt.getTask\");\r\n\t\tvar task = this.$data.tasksStore.getItem(id);\r\n\t\tthis.assert(task, \"Task not found id=\" + id);\r\n\t\treturn task;\r\n\t},\r\n\tgetTaskByTime: function (from, to) {\r\n\t\tvar p = this.$data.tasksStore.getItems();\r\n\r\n\t\tvar res = [];\r\n\r\n\t\tif (!(from || to)) {\r\n\t\t\tres = p;\r\n\t\t} else {\r\n\t\t\tfrom = +from || -Infinity;\r\n\t\t\tto = +to || Infinity;\r\n\t\t\tfor (var t = 0; t < p.length; t++){\r\n\t\t\t\tvar task = p[t];\r\n\t\t\t\tif (+task.start_date < to && +task.end_date > from)\r\n\t\t\t\t\tres.push(task);\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn res;\r\n\t},\r\n\tisTaskExists: function (id) {\r\n\t\treturn this.$data.tasksStore.exists(id);\r\n\t},\r\n\tupdateTask: function (id, item) {\r\n\t\tif (!utils.defined(item)) item = this.getTask(id);\r\n\t\tthis.$data.tasksStore.updateItem(id, item);\r\n\t\tthis.refreshTask(id);\r\n\t},\r\n\taddTask: function (item, parent, index) {\r\n\t\tif (!utils.defined(item.id))\r\n\t\t\titem.id = utils.uid();\r\n\r\n\t\tif (!utils.defined(parent)) parent = this.getParent(item) || 0;\r\n\t\tif (!this.isTaskExists(parent)) parent = 0;\r\n\t\tthis.setParent(item, parent);\r\n\r\n\t\treturn this.$data.tasksStore.addItem(item, index, parent);\r\n\t},\r\n\tdeleteTask: function (id) {\r\n\t\treturn this.$data.tasksStore.removeItem(id);\r\n\t},\r\n\tgetTaskCount: function () {\r\n\t\treturn this.$data.tasksStore.count();\r\n\t},\r\n\tgetVisibleTaskCount: function () {\r\n\t\treturn this.$data.tasksStore.countVisible();\r\n\t},\r\n\tgetTaskIndex: function (id) {\r\n\t\treturn this.$data.tasksStore.getBranchIndex(id);\r\n\t},\r\n\tgetGlobalTaskIndex: function (id) {\r\n\t\tthis.assert(id, \"Invalid argument\");\r\n\t\treturn this.$data.tasksStore.getIndexById(id);\r\n\t},\r\n\teachTask: function (code, parent, master) {\r\n\t\treturn this.$data.tasksStore.eachItem(utils.bind(code, master||this), parent);\r\n\t},\r\n\teachParent: function (callback, startTask, master) {\r\n\t\treturn this.$data.tasksStore.eachParent(utils.bind(callback, master || this), startTask);\r\n\t},\r\n\tchangeTaskId: function (oldid, newid) {\r\n\t\tthis.$data.tasksStore.changeId(oldid, newid);\r\n\t\tvar task = this.$data.tasksStore.getItem(newid);\r\n\r\n\t\tvar links = [];\r\n\r\n\t\tif (task.$source) {\r\n\t\t\tlinks = links.concat(task.$source);\r\n\t\t}\r\n\t\tif (task.$target) {\r\n\t\t\tlinks = links.concat(task.$target);\r\n\t\t}\r\n\r\n\t\tfor (var i = 0; i < links.length; i++) {\r\n\t\t\tvar link = this.getLink(links[i]);\r\n\t\t\tif (link.source == oldid) {\r\n\t\t\t\tlink.source = newid;\r\n\t\t\t}\r\n\t\t\tif (link.target == oldid) {\r\n\t\t\t\tlink.target = newid;\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\tcalculateTaskLevel: function (item) {\r\n\t\treturn this.$data.tasksStore.calculateItemLevel(item);\r\n\t},\r\n\tgetNext: function (id) {\r\n\t\treturn this.$data.tasksStore.getNext(id);\r\n\t},\r\n\tgetPrev: function (id) {\r\n\t\treturn this.$data.tasksStore.getPrev(id);\r\n\t},\r\n\tgetParent: function (id) {\r\n\t\treturn this.$data.tasksStore.getParent(id);\r\n\t},\r\n\tsetParent: function (task, new_pid) {\r\n\t\treturn this.$data.tasksStore.setParent(task, new_pid);\r\n\t},\r\n\tgetSiblings: function (id) {\r\n\t\treturn this.$data.tasksStore.getChildren(id);\r\n\t},\r\n\tgetNextSibling: function (id) {\r\n\t\treturn this.$data.tasksStore.getNextSibling(id);\r\n\t},\r\n\tgetPrevSibling: function (id) {\r\n\t\treturn this.$data.tasksStore.getPrevSibling(id);\r\n\t},\r\n\tgetTaskByIndex: function(index){\r\n\t\tvar id = this.$data.tasksStore.getIdByIndex(index);\r\n\t\tif(this.isTaskExists(id)){\r\n\t\t\treturn this.getTask(id);\r\n\t\t}else{\r\n\t\t\treturn null;\r\n\t\t}\r\n\t},\r\n\tgetChildren: function (id) {\r\n\t\treturn this.$data.tasksStore.getChildren(id);\r\n\t},\r\n\thasChild: function (id) {\r\n\t\treturn this.$data.tasksStore.hasChild(id);\r\n\t},\r\n\topen: function (id) {\r\n\t\tgantt._set_item_state(id, true);\r\n\t\tthis.callEvent(\"onTaskOpened\", [id]);\r\n\t},\r\n\tclose: function (id) {\r\n\t\tgantt._set_item_state(id, false);\r\n\t\tthis.callEvent(\"onTaskClosed\", [id]);\r\n\t},\r\n\t_set_item_state:function (id, state) {\r\n\t\tif(this.isTaskExists(id)){\r\n\t\t\tthis.getTask(id).$open = !!state;\r\n\t\t\tgantt._refresh_on_toggle_element(id);\r\n\t\t}\r\n\t},\r\n\t_refresh_on_toggle_element: function (id) {\r\n\t\tthis.render();\r\n\t},\r\n\tmoveTask: function (sid, tindex, parent) {\r\n\t\tthis.$data.tasksStore.move.apply(this.$data.tasksStore, arguments);\r\n\t}\r\n};\r\n};\r\n\r\nmodule.exports = createTasksDatastoreFacade;\r\n\r\n\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// c:/www-recent/gantt/sources/core/facades/datastore_tasks.js\n// module id = 53\n// module chunks = 0","var utils = require(\"../../utils/utils\");\r\n\r\n\r\nvar createLinksStoreFacade = function(){\r\n\treturn {\r\n\tgetLinkCount: function () {\r\n\t\treturn this.$data.linksStore.count();\r\n\t},\r\n\r\n\tgetLink : function (id) {\r\n\t\treturn this.$data.linksStore.getItem(id);\r\n\t},\r\n\r\n\tgetLinks : function () {\r\n\t\treturn this.$data.linksStore.getIndexRange();\r\n\t},\r\n\r\n\tisLinkExists : function (id) {\r\n\t\treturn this.$data.linksStore.exists(id);\r\n\t},\r\n\r\n\taddLink : function (link) {\r\n\t\treturn this.$data.linksStore.addItem(link);\r\n\t},\r\n\r\n\tupdateLink : function (id, data) {\r\n\t\tif (!utils.defined(data))\r\n\t\t\tdata = this.getLink(id);\r\n\t\tthis.$data.linksStore.updateItem(id, data);\r\n\t},\r\n\r\n\tdeleteLink : function (id) {\r\n\t\treturn this.$data.linksStore.removeItem(id);\r\n\t},\r\n\r\n\tchangeLinkId : function (oldid, newid) {\r\n\t\treturn this.$data.linksStore.changeId(oldid, newid);\r\n\t}\r\n};\r\n};\r\n\r\nmodule.exports = createLinksStoreFacade;\n\n\n//////////////////\n// WEBPACK FOOTER\n// c:/www-recent/gantt/sources/core/facades/datastore_links.js\n// module id = 54\n// module chunks = 0","var powerArray = require(\"./power_array\");\r\nvar utils = require(\"../../utils/utils\");\r\nvar eventable = require(\"../../utils/eventable\");\r\nvar DataStore = require(\"./datastore\");\r\n\r\nvar TreeDataStore = function(config){\r\n\tthis._branches = {};\r\n\r\n\tthis.pull = {};\r\n\tthis.$initItem = config.initItem;\r\n\tthis.$parentProperty = config.parentProperty || \"parent\";\r\n\tthis.$rootId = config.rootId || 0;\r\n\r\n\tthis.visibleOrder = powerArray.$create();\r\n\tthis.fullOrder = powerArray.$create();\r\n\tthis._searchVisibleOrder = {};\r\n\tthis._skip_refresh = false;\r\n\tthis._filterRule = null;\r\n\teventable(this);\r\n\r\n\tthis.attachEvent(\"onFilterItem\", function(id, item){\r\n\t\tvar open = true;\r\n\t\tthis.eachParent(function(parent){\r\n\t\t\topen = open && parent.$open;\r\n\t\t}, item);\r\n\t\treturn !!open;\r\n\t});\r\n\r\n\treturn this;\r\n};\r\n\r\nTreeDataStore.prototype = utils.mixin({\r\n\r\n\t\t_buildTree: function(data){\r\n\t\t\tvar item = null;\r\n\t\t\tfor (var i = 0, len = data.length; i < len; i++){\r\n\t\t\t\titem = data[i];\r\n\t\t\t\tthis.setParent(item, this.getParent(item) || this.$rootId);\r\n\t\t\t}\r\n\r\n\t\t\t// calculating $level for each item\r\n\t\t\tfor (var i = 0, len = data.length; i < len; i++){\r\n\t\t\t\titem = data[i];\r\n\t\t\t\tthis._add_branch(item);\r\n\t\t\t\titem.$level = this.calculateItemLevel(item);\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\tparse: function(data){\r\n\t\t\tthis.callEvent(\"onBeforeParse\", [data]);\r\n\t\t\tvar loaded = this._parseInner(data);\r\n\t\t\tthis._buildTree(loaded);\r\n\t\t\tthis.filter();\r\n\t\t\tthis.callEvent(\"onParse\", [loaded]);\r\n\t\t},\r\n\r\n\t\t_addItemInner: function(item, index, order){\r\n\r\n\t\t\tvar parent = this.getParent(item);\r\n\r\n\t\t\tif(!utils.defined(parent)){\r\n\t\t\t\tparent = this.$rootId;\r\n\t\t\t\tthis.setParent(item, parent);\r\n\t\t\t}\r\n\r\n\t\t\tvar parentIndex = this.getIndexById(parent);\r\n\t\t\tvar targetIndex = parentIndex + Math.min(Math.max(index, 0), this.visibleOrder.length);\r\n\r\n\t\t\tDataStore.prototype._addItemInner.call(this, item, targetIndex);\r\n\t\t\tthis.setParent(item, parent);\r\n\r\n\t\t\tthis._add_branch(item, index);\r\n\t\t},\r\n\t\t_changeIdInner: function(oldId, newId){\r\n\r\n\t\t\tvar children = this.getChildren(newId);\r\n\t\t\tDataStore.prototype._changeIdInner.call(this, oldId, newId);\r\n\r\n\t\t\tvar parent = this.getParent(newId);\r\n\r\n\t\t\tthis._replace_branch_child(parent, oldId, newId);\r\n\t\t\tfor(var i = 0; i < children.length; i++){\r\n\t\t\t\tthis.setParent(this.getItem[children[i]], newId);\r\n\t\t\t}\r\n\t\t},\r\n\t\t_removeItemInner: function(id){\r\n\r\n\t\t\tvar items = [];\r\n\t\t\tthis.eachItem(function(child){\r\n\t\t\t\titems.push(child);\r\n\t\t\t}, id);\r\n\r\n\t\t\titems.push(this.getItem(id));\r\n\r\n\t\t\tfor(var i = 0; i < items.length; i++){\r\n\r\n\t\t\t\tthis._move_branch(items[i], this.getParent(items[i]), null);\r\n\t\t\t\tDataStore.prototype._removeItemInner.call(this, items[i].id);\r\n\t\t\t\tthis._move_branch(items[i], this.getParent(items[i].id), null);\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\tmove: function(sid, tindex, parent){\r\n\t\t\t//target id as 4th parameter\r\n\t\t\tvar id = arguments[3];\r\n\t\t\tif (id) {\r\n\t\t\t\tif (id === sid) return;\r\n\r\n\t\t\t\tparent = this.getParent(id);\r\n\t\t\t\ttindex = this.getBranchIndex(id);\r\n\t\t\t}\r\n\t\t\tif(sid == parent){\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tparent = parent || this.$rootId;\r\n\t\t\tvar source = this.getItem(sid);\r\n\t\t\tvar source_pid = this.getParent(source.id);\r\n\t\t\tvar sbranch = this.getChildren(this.getParent(source.id));\r\n\r\n\t\t\tvar tbranch = this.getChildren(parent);\r\n\t\t\tif (tindex == -1)\r\n\t\t\t\ttindex = tbranch.length + 1;\r\n\t\t\tif (source_pid == parent) {\r\n\t\t\t\tvar sindex = this.getBranchIndex(sid);\r\n\t\t\t\tif (sindex == tindex) return;\r\n\t\t\t}\r\n\r\n\t\t\tif(this.callEvent(\"onBeforeItemMove\", [sid, parent, tindex]) === false)\r\n\t\t\t\treturn;\r\n\r\n\t\t\tthis._replace_branch_child(source_pid, sid);\r\n\t\t\ttbranch = this.getChildren(parent);\r\n\r\n\t\t\tvar tid = tbranch[tindex];\r\n\t\t\tif (!tid) //adding as last element\r\n\t\t\t\ttbranch.push(sid);\r\n\t\t\telse\r\n\t\t\t\ttbranch = tbranch.slice(0, tindex).concat([ sid ]).concat(tbranch.slice(tindex));\r\n\r\n\t\t\tthis.setParent(source, parent);\r\n\t\t\tthis._branches[parent] = tbranch;\r\n\r\n\t\t\tvar diff = this.calculateItemLevel(source) - source.$level;\r\n\t\t\tsource.$level += diff;\r\n\t\t\tthis.eachItem(function(item){\r\n\t\t\t\titem.$level += diff;\r\n\t\t\t}, source.id, this);\r\n\r\n\r\n\t\t\tthis._moveInner(this.getIndexById(sid), this.getIndexById(parent) + tindex);\r\n\r\n\t\t\tif(!this.callEvent(\"onAfterItemMove\", [sid, parent, tindex]))\r\n\t\t\t\treturn;\r\n\t\t\tthis.refresh();\r\n\t\t},\r\n\r\n\t\tgetBranchIndex: function(id){\r\n\t\t\tvar branch = this.getChildren(this.getParent(id));\r\n\t\t\tfor (var i = 0; i < branch.length; i++)\r\n\t\t\t\tif (branch[i] == id)\r\n\t\t\t\t\treturn i;\r\n\r\n\t\t\treturn -1;\r\n\t\t},\r\n\t\thasChild: function(id){\r\n\t\t\treturn (utils.defined(this._branches[id]) && this._branches[id].length);\r\n\t\t},\r\n\t\tgetChildren: function(id){\r\n\t\t\treturn utils.defined(this._branches[id]) ? this._branches[id] : powerArray.$create();\r\n\t\t},\r\n\r\n\t\tisChildOf: function(childId, parentId){\r\n\t\t\tif (!this.exists(childId))\r\n\t\t\t\treturn false;\r\n\t\t\tif (parentId === this.$rootId)\r\n\t\t\t\treturn true;\r\n\r\n\t\t\tvar item = this.getItem(childId);\r\n\t\t\tvar pid = this.getParent(childId);\r\n\r\n\t\t\twhile (item && this.exists(pid)) {\r\n\t\t\t\titem = this.getItem(pid);\r\n\r\n\t\t\t\tif (item && item.id == parentId)\r\n\t\t\t\t\treturn true;\r\n\t\t\t\tpid = this.getParent(item);\r\n\t\t\t}\r\n\t\t\treturn false;\r\n\t\t},\r\n\r\n\t\tgetSiblings: function(id){\r\n\t\t\tif(!this.exists(id)){\r\n\t\t\t\treturn powerArray.$create();\r\n\t\t\t}\r\n\t\t\tvar parent = this.getParent(id);\r\n\t\t\treturn this.getChildren(parent);\r\n\r\n\t\t},\r\n\t\tgetNextSibling: function(id){\r\n\t\t\tvar siblings = this.getSiblings(id);\r\n\t\t\tfor(var i= 0, len = siblings.length; i < len; i++){\r\n\t\t\t\tif(siblings[i] == id)\r\n\t\t\t\t\treturn siblings[i+1] || null;\r\n\t\t\t}\r\n\t\t\treturn null;\r\n\t\t},\r\n\t\tgetPrevSibling: function(id){\r\n\t\t\tvar siblings = this.getSiblings(id);\r\n\t\t\tfor(var i= 0, len = siblings.length; i < len; i++){\r\n\t\t\t\tif(siblings[i] == id)\r\n\t\t\t\t\treturn siblings[i-1] || null;\r\n\t\t\t}\r\n\t\t\treturn null;\r\n\t\t},\r\n\t\tgetParent: function(id){\r\n\t\t\tvar item = null;\r\n\t\t\tif(id.id !== undefined){\r\n\t\t\t\titem = id;\r\n\t\t\t}else{\r\n\t\t\t\titem = this.getItem(id);\r\n\t\t\t}\r\n\r\n\t\t\tvar parent = this.$rootId;\r\n\t\t\tif(item){\r\n\t\t\t\tparent = item[this.$parentProperty];\r\n\t\t\t}\r\n\t\t\treturn parent;\r\n\r\n\t\t},\r\n\r\n\t\tclearAll: function(){\r\n\t\t\tthis._branches = {};\r\n\t\t\tDataStore.prototype.clearAll.call(this);\r\n\t\t},\r\n\r\n\t\tcalculateItemLevel: function(item){\r\n\t\t\tvar level = 0;\r\n\t\t\tthis.eachParent(function(){\r\n\t\t\t\tlevel++;\r\n\t\t\t}, item);\r\n\t\t\treturn level;\r\n\t\t},\r\n\t\tsetParent: function(item, new_pid){\r\n\t\t\titem[this.$parentProperty] = new_pid;\r\n\t\t},\r\n\t\teachItem: function(code, parent){\r\n\t\t\tparent = parent || this.$rootId;\r\n\r\n\r\n\t\t\tvar branch = this.getChildren(parent);\r\n\t\t\tif (branch)\r\n\t\t\t\tfor (var i=0; i<branch.length; i++){\r\n\t\t\t\t\tvar item = this.pull[branch[i]];\r\n\t\t\t\t\tcode.call(this, item);\r\n\t\t\t\t\tif (this.hasChild(item.id))\r\n\t\t\t\t\t\tthis.eachItem(code, item.id);\r\n\t\t\t\t}\r\n\t\t},\r\n\t\teachParent: function(code, startItem){\r\n\t\t\tvar item = startItem;\r\n\t\t\twhile (this.getParent(item)) {\r\n\t\t\t\tif (!this.exists(this.getParent(item))) break;\r\n\t\t\t\titem = this.getItem(this.getParent(item));\r\n\t\t\t\tcode.call(this, item);\r\n\t\t\t}\r\n\t\t},\r\n\t\t_add_branch: function(item, index){\r\n\t\t\tvar pid = this.getParent(item);\r\n\t\t\tif (!this.hasChild(pid))\r\n\t\t\t\tthis._branches[pid] = powerArray.$create();\r\n\t\t\tvar branch = this.getChildren(pid);\r\n\t\t\tvar added_already = false;\r\n\t\t\tfor(var i = 0, length = branch.length; i < length; i++){\r\n\t\t\t\tif(branch[i] == item.id){\r\n\t\t\t\t\tadded_already = true;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif(!added_already){\r\n\t\t\t\tif(index*1 == index){\r\n\r\n\t\t\t\t\tbranch.splice(index, 0, item.id);\r\n\t\t\t\t}else{\r\n\t\t\t\t\tbranch.push(item.id);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\t_move_branch: function(item, old_parent, new_parent){\r\n\t\t\tthis.setParent(item, new_parent);\r\n\t\t\t//this._sync_parent(task);\r\n\t\t\tthis._replace_branch_child(old_parent, item.id);\r\n\t\t\tif(this.exists(new_parent) || new_parent == this.$rootId){\r\n\r\n\t\t\t\tthis._add_branch(item);\r\n\t\t\t}else{\r\n\t\t\t\tdelete this._branches[item.id];\r\n\t\t\t}\r\n\t\t\titem.$level =  this.calculateItemLevel(item);\r\n\t\t\tthis.eachItem(function(child){\r\n\t\t\t\tchild.$level = this.calculateItemLevel(child);\r\n\t\t\t}, item.id);\r\n\t\t},\r\n\r\n\t\t_replace_branch_child: function(node, old_id, new_id){\r\n\t\t\tvar branch = this.getChildren(node);\r\n\t\t\tif (branch){\r\n\t\t\t\tvar newbranch = powerArray.$create();\r\n\t\t\t\tfor (var i=0; i<branch.length; i++){\r\n\t\t\t\t\tif (branch[i] != old_id)\r\n\t\t\t\t\t\tnewbranch.push(branch[i]);\r\n\t\t\t\t\telse if (new_id)\r\n\t\t\t\t\t\tnewbranch.push(new_id);\r\n\t\t\t\t}\r\n\t\t\t\tthis._branches[node] = newbranch;\r\n\t\t\t}\r\n\r\n\t\t}\r\n\t},\r\n\tDataStore.prototype\r\n);\r\n\r\nmodule.exports = TreeDataStore;\n\n\n//////////////////\n// WEBPACK FOOTER\n// c:/www-recent/gantt/sources/core/datastore/treedatastore.js\n// module id = 55\n// module chunks = 0","var storeRenderCreator = function(name, gantt){\r\n\tvar store = gantt.getDatastore(name);\r\n\r\n\tvar itemRepainter = {\r\n\t\trenderItem: function(id, renderer){\r\n\r\n\t\t\tvar renders = renderer.getLayers();\r\n\r\n\t\t\tvar item = store.getItem(id);\r\n\t\t\tif(item && store.isVisible(id)) {\r\n\t\t\t\tfor (var i = 0; i < renders.length; i++)\r\n\t\t\t\t\trenders[i].render_item(item);\r\n\t\t\t}\r\n\t\t},\r\n\t\trenderItems: function(renderer){\r\n\t\t\tvar renderers = renderer.getLayers();\r\n\t\t\tfor (var i = 0; i < renderers.length; i++) {\r\n\t\t\t\trenderers[i].clear();\r\n\t\t\t}\r\n\r\n\t\t\tvar data = store.getVisibleItems();\r\n\r\n\t\t\tfor (var i = 0; i < renderers.length; i++) {\r\n\t\t\t\trenderers[i].render_items(data);\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\r\n\tstore.attachEvent(\"onStoreUpdated\", function(id, item, action){\r\n\t\tvar renderer = gantt.$services.getService(\"layers\").getDataRender(name);\r\n\r\n\t\tif(renderer){\r\n\t\t\tif(!id || action == \"move\" || action == \"delete\"){\r\n\t\t\t\tstore.callEvent(\"onBeforeRefreshAll\", []);\r\n\t\t\t\titemRepainter.renderItems(renderer);\r\n\t\t\t\tstore.callEvent(\"onAfterRefreshAll\", []);\r\n\t\t\t}else{\r\n\t\t\t\tstore.callEvent(\"onBeforeRefreshItem\", [id]);\r\n\t\t\t\titemRepainter.renderItem(id, renderer);\r\n\t\t\t\tstore.callEvent(\"onAfterRefreshItem\", [id]);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t});\r\n};\r\n\r\nmodule.exports = {\r\n\tbindDataStore: storeRenderCreator\r\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// c:/www-recent/gantt/sources/core/datastore/datastore_render.js\n// module id = 56\n// module chunks = 0","var liveUpdateHooks = require(\"./live_update_hooks\");\r\n\r\nfunction addDataProcessorHooks(gantt) {\r\n\r\n\tgantt.dataProcessor = require(\"./dataprocessor\");\r\n\r\n\tgantt._dp_init = function(dp) {\r\n\t\tdp.setTransactionMode(\"POST\", true);\r\n\t\tdp.serverProcessor += (dp.serverProcessor.indexOf(\"?\") != -1 ? \"&\" : \"?\") + \"editing=true\";\r\n\t\tdp._serverProcessor = dp.serverProcessor;\r\n\t\tdp.$gantt = this;\r\n\t\tdp.styles = {\r\n\t\t\tupdated:\"gantt_updated\",\r\n\t\t\torder:\"gantt_updated\",\r\n\t\t\tinserted:\"gantt_inserted\",\r\n\t\t\tdeleted:\"gantt_deleted\",\r\n\t\t\tinvalid:\"gantt_invalid\",\r\n\t\t\terror:\"gantt_error\",\r\n\t\t\tclear:\"\"\r\n\t\t};\r\n\r\n\t\tdp._methods=[\"_row_style\",\"setCellTextStyle\",\"_change_id\",\"_delete_task\"];\r\n\r\n\t\tdp.setGanttMode = function(mode){\r\n\t\t\tvar modes = dp.modes || {};\r\n\t\t\tif(dp._ganttMode){\r\n\t\t\t\tmodes[dp._ganttMode] = {\r\n\t\t\t\t\t_in_progress : dp._in_progress,\r\n\t\t\t\t\t_invalid : dp._invalid,\r\n\t\t\t\t\tupdatedRows : dp.updatedRows\r\n\t\t\t\t};\r\n\t\t\t}\r\n\r\n\t\t\tvar newState = modes[mode];\r\n\t\t\tif(!newState){\r\n\t\t\t\tnewState = modes[mode] = {\r\n\t\t\t\t\t_in_progress : {},\r\n\t\t\t\t\t_invalid : {},\r\n\t\t\t\t\tupdatedRows : []\r\n\t\t\t\t};\r\n\t\t\t}\r\n\t\t\tdp._in_progress = newState._in_progress;\r\n\t\t\tdp._invalid = newState._invalid;\r\n\t\t\tdp.updatedRows = newState.updatedRows;\r\n\t\t\tdp.modes = modes;\r\n\t\t\tdp._ganttMode = mode;\r\n\t\t};\r\n\r\n\t\tthis._sendTaskOrder = function(id, item){\r\n\t\t\tif(item.$drop_target){\r\n\t\t\t\tdp.setGanttMode(\"tasks\");\r\n\t\t\t\tthis.getTask(id).target = item.$drop_target;\r\n\t\t\t\tdp.setUpdated(id, true,\"order\");\r\n\t\t\t\tdelete this.getTask(id).$drop_target;\r\n\t\t\t}\r\n\t\t};\r\n\t\tthis.attachEvent(\"onAfterTaskAdd\", function(id, item) {\r\n\t\t\tdp.setGanttMode(\"tasks\");\r\n\t\t\tdp.setUpdated(id,true,\"inserted\");\r\n\t\t});\r\n\t\tthis.attachEvent(\"onAfterTaskUpdate\", function(id, item) {\r\n\t\t\tdp.setGanttMode(\"tasks\");\r\n\t\t\tdp.setUpdated(id,true);\r\n\r\n\t\t\tgantt._sendTaskOrder(id, item);\r\n\t\t});\r\n\r\n\t\tfunction clientSideDelete(id){\r\n\t\t\tvar updated = dp.updatedRows.slice();\r\n\t\t\tvar clientOnly = false;\r\n\r\n\t\t\tfor(var i = 0; i < updated.length && !dp._in_progress[id]; i++){\r\n\t\t\t\tif(updated[i] == id ){\r\n\t\t\t\t\tif(gantt.getUserData(id, \"!nativeeditor_status\") == \"inserted\"){\r\n\t\t\t\t\t\tclientOnly = true;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tdp.setUpdated(id,false);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn clientOnly;\r\n\t\t}\r\n\r\n\t\tthis.attachEvent(\"onAfterTaskDelete\", function(id, item) {\r\n\t\t\tdp.setGanttMode(\"tasks\");\r\n\r\n\t\t\t// not send delete request if item is not inserted into the db - just remove it from the client\r\n\t\t\tvar needDbDelete = !clientSideDelete(id);\r\n\t\t\tif(!needDbDelete)\r\n\t\t\t\treturn;\r\n\r\n\t\t\tdp.setUpdated(id,true,\"deleted\");\r\n\r\n\t\t\tif(dp.updateMode != 'off' && !dp._tSend){\r\n\t\t\t\tdp.sendAllData();\r\n\t\t\t}\r\n\r\n\t\t});\r\n\r\n\t\tthis.attachEvent(\"onAfterLinkUpdate\", function(id, item) {\r\n\t\t\tdp.setGanttMode(\"links\");\r\n\t\t\tdp.setUpdated(id, true);\r\n\t\t});\r\n\t\tthis.attachEvent(\"onAfterLinkAdd\", function(id, item) {\r\n\t\t\tdp.setGanttMode(\"links\");\r\n\t\t\tdp.setUpdated(id, true,\"inserted\");\r\n\t\t});\r\n\t\tthis.attachEvent(\"onAfterLinkDelete\", function(id, item) {\r\n\t\t\tdp.setGanttMode(\"links\");\r\n\r\n\t\t\tvar needDbDelete = !clientSideDelete(id);\r\n\t\t\tif(!needDbDelete)\r\n\t\t\t\treturn;\r\n\r\n\t\t\tdp.setUpdated(id, true,\"deleted\");\r\n\t\t});\r\n\t\tthis.attachEvent(\"onRowDragEnd\", function(id, target) {\r\n\t\t\tgantt._sendTaskOrder(id, gantt.getTask(id));\r\n\t\t});\r\n\r\n\r\n\t\tfunction getTaskLinks(task){\r\n\t\t\tvar links = [];\r\n\r\n\t\t\tif (task.$source) {\r\n\t\t\t\tlinks = links.concat(task.$source);\r\n\t\t\t}\r\n\t\t\tif (task.$target) {\r\n\t\t\t\tlinks = links.concat(task.$target);\r\n\t\t\t}\r\n\r\n\t\t\treturn links;\r\n\t\t}\r\n\r\n\t\tvar tasks = null,\r\n\t\t\tlinks = null;\r\n\t\tthis.attachEvent(\"onTaskIdChange\",function(oldId, newId){\r\n\t\t\tif(!dp._waitMode) return;\r\n\r\n\t\t\tvar children = gantt.getChildren(newId);\r\n\t\t\tif(children.length) {\r\n\t\t\t\ttasks = tasks || {};\r\n\r\n\t\t\t\tfor (var i = 0; i < children.length; i++) {\r\n\t\t\t\t\tvar ch = this.getTask(children[i]);\r\n\t\t\t\t\ttasks[ch.id] = ch;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tvar item = this.getTask(newId),\r\n\t\t\t\titemLinks = getTaskLinks(item);\r\n\r\n\t\t\tif(itemLinks.length) {\r\n\t\t\t\tlinks = links || {};\r\n\r\n\t\t\t\tfor (var i = 0; i < itemLinks.length; i++) {\r\n\t\t\t\t\tvar link = this.getLink(itemLinks[i]);\r\n\t\t\t\t\tlinks[link.id] = link;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\tdp.attachEvent(\"onAfterUpdateFinish\", function(){\r\n\t\t\tif(tasks || links){\r\n\t\t\t\tgantt.batchUpdate(function(){\r\n\t\t\t\t\tfor(var id in tasks){\r\n\t\t\t\t\t\tgantt.updateTask(tasks[id].id);\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tfor(var id in links){\r\n\t\t\t\t\t\tgantt.updateLink(links[id].id);\r\n\t\t\t\t\t}\r\n\t\t\t\t\ttasks = null;\r\n\t\t\t\t\tlinks = null;\r\n\t\t\t\t});\r\n\t\t\t\tif(tasks) {\r\n\t\t\t\t\tgantt._dp.setGanttMode(\"tasks\");\r\n\t\t\t\t}else{\r\n\t\t\t\t\tgantt._dp.setGanttMode(\"links\");\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\tdp.attachEvent(\"onBeforeDataSending\", function() {\r\n\t\t\tvar url = this._serverProcessor;\r\n\t\t\tif(this._tMode == \"REST\"){\r\n\t\t\t\tvar mode = this._ganttMode.substr(0, this._ganttMode.length - 1);// links, tasks -> /link/id, /task/id\r\n\r\n\t\t\t\turl = url.substring(0, url.indexOf(\"?\") > -1 ? url.indexOf(\"?\") : url.length);\r\n\t\t\t\t//editing=true&\r\n\t\t\t\tthis.serverProcessor = url + (url.slice(-1) == \"/\" ? \"\" : \"/\") + mode;\r\n\t\t\t}else{\r\n\t\t\t\tthis.serverProcessor = url + gantt.ajax.urlSeparator(url) + \"gantt_mode=\" + this._ganttMode;\r\n\t\t\t}\r\n\r\n\t\t\treturn true;\r\n\t\t});\r\n\r\n\t\tliveUpdateHooks(gantt, dp);\r\n\r\n\t\tvar afterUpdate = dp.afterUpdate;\r\n\t\tdp.afterUpdate = function(){\r\n\t\t\tvar xml;\r\n\t\t\tif(arguments.length == 3){\r\n\t\t\t\txml = arguments[1];\r\n\t\t\t}else{\r\n\t\t\t\t// old dataprocessor\r\n\t\t\t\txml = arguments[4];\r\n\t\t\t}\r\n\t\t\tvar mode = dp._ganttMode;\r\n\t\t\tvar reqUrl = xml.filePath;\r\n\r\n\t\t\tif(this._tMode != \"REST\"){\r\n\t\t\t\tif (reqUrl.indexOf(\"gantt_mode=links\") != -1) {\r\n\t\t\t\t\tmode = \"links\";\r\n\t\t\t\t}else{\r\n\t\t\t\t\tmode = \"tasks\";\r\n\t\t\t\t}\r\n\t\t\t}else{\r\n\t\t\t\tif(reqUrl.indexOf(\"/link\") > reqUrl.indexOf(\"/task\")){\r\n\t\t\t\t\tmode = \"links\";\r\n\t\t\t\t}else{\r\n\t\t\t\t\tmode = \"tasks\";\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tdp.setGanttMode(mode);\r\n\r\n\t\t\tvar res = afterUpdate.apply(dp, arguments);\r\n\t\t\tdp.setGanttMode(mode);\r\n\t\t\treturn res;\r\n\t\t};\r\n\r\n\t\tdp._getRowData=gantt.bind(function(id, pref) {\r\n\t\t\tvar task;\r\n\t\t\tif (dp._ganttMode == \"tasks\")\r\n\t\t\t\ttask = this.isTaskExists(id) ? this.getTask(id) : { id: id };\r\n\t\t\telse\r\n\t\t\t\ttask = this.isLinkExists(id) ? this.getLink(id) : { id: id };\r\n\r\n\t\t\ttask = gantt.copy(task);\r\n\r\n\t\t\tvar data = {};\r\n\t\t\tfor (var key in task) {\r\n\t\t\t\tif (key.substr(0, 1) == \"$\") continue;\r\n\t\t\t\tvar value = task[key];\r\n\t\t\t\tif (value instanceof Date)\r\n\t\t\t\t\tdata[key] = this.templates.xml_format(value);\r\n\t\t\t\telse if(value === null)\r\n\t\t\t\t\tdata[key] = \"\";\r\n\t\t\t\telse\r\n\t\t\t\t\tdata[key] = value;\r\n\t\t\t}\r\n\r\n\t\t\tvar taskTiming = this._get_task_timing_mode(task);\r\n\t\t\tif(taskTiming.$no_start){\r\n\t\t\t\ttask.start_date = \"\";\r\n\t\t\t\ttask.duration = \"\";\r\n\t\t\t}\r\n\t\t\tif(taskTiming.$no_end){\r\n\t\t\t\ttask.end_date = \"\";\r\n\t\t\t\ttask.duration = \"\";\r\n\t\t\t}\r\n\t\t\tdata[dp.action_param] = this.getUserData(id, dp.action_param);\r\n\t\t\treturn data;\r\n\t\t}, this);\r\n\r\n\t\tthis._change_id = gantt.bind(function(oldid, newid) {\r\n\t\t\tif (dp._ganttMode != \"tasks\")\r\n\t\t\t\tthis.changeLinkId(oldid, newid);\r\n\t\t\telse\r\n\t\t\t\tthis.changeTaskId(oldid, newid);\r\n\t\t}, this);\r\n\r\n\t\tthis._row_style = function(row_id, classname){\r\n\t\t\tif (dp._ganttMode != \"tasks\") return;\r\n\t\t\tif(!gantt.isTaskExists(row_id))\r\n\t\t\t\treturn;\r\n\r\n\t\t\tvar task = gantt.getTask(row_id);\r\n\t\t\ttask.$dataprocessor_class = classname;\r\n\t\t\tgantt.refreshTask(row_id);\r\n\t\t};\r\n\r\n\t\t// fake method for dataprocessor\r\n\t\tthis._delete_task = function(row_id, node){};\r\n\r\n\t\tthis._dp = dp;\r\n\t};\r\n\r\n\r\n\tgantt.getUserData = function(id, name) {\r\n\t\tif (!this.userdata) this.userdata = {};\r\n\t\tif (this.userdata[id] && this.userdata[id][name]) return this.userdata[id][name];\r\n\t\treturn \"\";\r\n\t};\r\n\tgantt.setUserData = function(id, name, value) {\r\n\t\tif (!this.userdata) this.userdata = {};\r\n\t\tif (!this.userdata[id]) this.userdata[id] = {};\r\n\t\tthis.userdata[id][name] = value;\r\n\t};\r\n}\r\n\r\nmodule.exports = addDataProcessorHooks;\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// c:/www-recent/gantt/sources/core/dataprocessor/hooks.js\n// module id = 57\n// module chunks = 0","var utils = require (\"../../utils/utils\");\r\n\r\nfunction updateCallback(upd, id) {\r\n\tvar data = upd.data || this.xml._xmlNodeToJSON(upd.firstChild);\r\n\tif(!gantt.isTaskExists(id))\r\n\t\treturn;\r\n\tvar objData = this.getTask(id);\r\n\tfor(var key in data) {\r\n\t\tvar property = data[key];\r\n\t\tswitch(key) {\r\n\t\t\tcase \"id\":\r\n\t\t\t\tcontinue;\r\n\t\t\tcase \"start_date\":\r\n\t\t\tcase \"end_date\":\r\n\t\t\t\tproperty = this.templates.xml_date(property);\r\n\t\t\t\tbreak;\r\n\t\t\tcase \"duration\":\r\n\t\t\t\tobjData.end_date = this.calculateEndDate({start_date: objData.start_date, duration: property, task:objData});\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\t\tobjData[key] = property;\r\n\t}\r\n\tthis.updateTask(id);\r\n\tthis.refreshData();\r\n}\r\n\r\nfunction insertCallback(upd, id, parent, mode) {\r\n\tvar data = upd.data || this.xml._xmlNodeToJSON(upd.firstChild),\r\n\t\tmethods = {\r\n\t\t\tadd: this.addTask,\r\n\t\t\tisExist: this.isTaskExists\r\n\t\t};\r\n\tif(mode == \"links\") {\r\n\t\tmethods.add = this.addLink;\r\n\t\tmethods.isExist = this.isLinkExists;\r\n\t}\r\n\tif(methods.isExist.call(gantt, id))\r\n\t\treturn;\r\n\tdata.id = id;\r\n\tmethods.add.call(gantt, data);\r\n}\r\n\r\nfunction deleteCallback(upd, id, parent, mode) {\r\n\tvar methods = {\r\n\t\t\"delete\": this.deleteTask,\r\n\t\t\"isExist\": this.isTaskExists\r\n\t};\r\n\tif(mode == \"links\") {\r\n\t\tmethods[\"delete\"] = this.deleteLink;\r\n\t\tmethods.isExist = this.isLinkExists;\r\n\t}\r\n\tif(methods.isExist.call(this, id))\r\n\t\tmethods[\"delete\"].call(this, id);\r\n}\r\n\r\nfunction patchDataProcessor(gantt, dataprocessor){\r\n\tdataprocessor.attachEvent(\"insertCallback\", utils.bind(insertCallback, gantt));\r\n\tdataprocessor.attachEvent(\"updateCallback\",  utils.bind(deleteCallback, gantt));\r\n\tdataprocessor.attachEvent(\"deleteCallback\",  utils.bind(deleteCallback, gantt));\r\n}\r\n\r\nmodule.exports = patchDataProcessor;\n\n\n//////////////////\n// WEBPACK FOOTER\n// c:/www-recent/gantt/sources/core/dataprocessor/live_update_hooks.js\n// module id = 58\n// module chunks = 0","var utils = require(\"../../utils/utils\");\r\nvar eventable = require(\"../../utils/eventable\");\r\n\r\n/**\r\n\t* \t@desc: constructor, data processor object \r\n\t*\t@param: serverProcessorURL - url used for update\r\n\t*\t@type: public\r\n\t*/\r\nvar dataProcessor = function(serverProcessorURL){\r\n    this.serverProcessor = serverProcessorURL;\r\n    this.action_param=\"!nativeeditor_status\";\r\n    \r\n\tthis.object = null;\r\n\tthis.updatedRows = []; //ids of updated rows\r\n\t\r\n\tthis.autoUpdate = true;\r\n\tthis.updateMode = \"cell\";\r\n\tthis._tMode=\"GET\"; \r\n\tthis._headers = null;\r\n\tthis._payload = null;\r\n\tthis.post_delim = \"_\";\r\n\t\r\n    this._waitMode=0;\r\n    this._in_progress={};//?\r\n    this._invalid={};\r\n    this.mandatoryFields=[];\r\n    this.messages=[];\r\n    \r\n    this.styles={\r\n    \tupdated:\"font-weight:bold;\",\r\n    \tinserted:\"font-weight:bold;\",\r\n    \tdeleted:\"text-decoration : line-through;\",\r\n    \tinvalid:\"background-color:FFE0E0;\",\r\n    \tinvalid_cell:\"border-bottom:2px solid red;\",\r\n    \terror:\"color:red;\",\r\n    \tclear:\"font-weight:normal;text-decoration:none;\"\r\n    };\r\n    \r\n    this.enableUTFencoding(true);\r\n\teventable(this);\r\n\r\n    return this;\r\n};\r\n\r\ndataProcessor.prototype={\r\n\tsetTransactionMode:function(mode,total){\r\n\t\tif (typeof mode == \"object\"){\r\n\t\t\tthis._tMode = mode.mode || this._tMode;\r\n\r\n\t\t\tif(utils.defined(mode.headers)){\r\n\t\t\t\tthis._headers = mode.headers;\r\n\t\t\t}\r\n\r\n\t\t\tif(utils.defined(mode.payload)){\r\n\t\t\t\tthis._payload = mode.payload;\r\n\t\t\t}\r\n\t\t\t\r\n\t\t} else {\r\n     \t    this._tMode=mode;\r\n\t\t\tthis._tSend=total;\r\n\t\t}\r\n\r\n\t\tif (this._tMode == \"REST\"){\r\n\t\t\tthis._tSend = false;\r\n\t\t\tthis._endnm = true;\r\n\t\t}\r\n\r\n\t\tif (this._tMode == \"JSON\"){\r\n\t\t\tthis._tSend = false;\r\n\t\t\tthis._endnm = true;\r\n\t\t\tthis._headers = this._headers || {};\r\n\t\t\tthis._headers[\"Content-type\"] = \"application/json\";\r\n\t\t}\r\n    },\r\n    escape:function(data){\r\n    \tif (this._utf)\r\n    \t\treturn encodeURIComponent(data);\r\n    \telse\r\n        \treturn escape(data);\r\n\t},\r\n    /**\r\n\t* \t@desc: allows to set escaping mode\r\n\t*\t@param: true - utf based escaping, simple - use current page encoding\r\n\t*\t@type: public\r\n\t*/\t\r\n\tenableUTFencoding:function(mode){\r\n        this._utf=!!mode;\r\n    },\r\n    /**\r\n\t* \t@desc: allows to define, which column may trigger update\r\n\t*\t@param: val - array or list of true/false values\r\n\t*\t@type: public\r\n\t*/\r\n\tsetDataColumns:function(val){\r\n\t\tthis._columns=(typeof val == \"string\")?val.split(\",\"):val;\r\n    },\r\n    /**\r\n\t* \t@desc: get state of updating\r\n\t*\t@returns:   true - all in sync with server, false - some items not updated yet.\r\n\t*\t@type: public\r\n\t*/\r\n\tgetSyncState:function(){\r\n\t\treturn !this.updatedRows.length;\r\n\t},\r\n\t/**\r\n\t* \t@desc: enable/disable named field for data syncing, will use column ids for grid\r\n\t*\t@param:   mode - true/false\r\n\t*\t@type: public\r\n\t*/\r\n\tenableDataNames:function(mode){\r\n\t\tthis._endnm= !!mode;\r\n\t},\r\n\t/**\r\n\t* \t@desc: enable/disable mode , when only changed fields and row id send to the server side, instead of all fields in default mode\r\n\t*\t@param:   mode - true/false\r\n\t*\t@type: public\r\n\t*/\r\n\tenablePartialDataSend:function(mode){\r\n\t\tthis._changed= !!mode;\r\n\t},\r\n\t/**\r\n\t* \t@desc: set if rows should be send to server automaticaly\r\n\t*\t@param: mode - \"row\" - based on row selection changed, \"cell\" - based on cell editing finished, \"off\" - manual data sending\r\n\t*\t@type: public\r\n\t*/\r\n\tsetUpdateMode:function(mode,dnd){\r\n\t\tthis.autoUpdate = (mode==\"cell\");\r\n\t\tthis.updateMode = mode;\r\n\t\tthis.dnd=dnd;\r\n\t},\r\n\tignore:function(code,master){\r\n\t\tthis._silent_mode=true;\r\n\t\tcode.call(master||window);\r\n\t\tthis._silent_mode=false;\r\n\t},\r\n\t/**\r\n\t* \t@desc: mark row as updated/normal. check mandatory fields,initiate autoupdate (if turned on)\r\n\t*\t@param: rowId - id of row to set update-status for\r\n\t*\t@param: state - true for \"updated\", false for \"not updated\"\r\n\t*\t@param: mode - update mode name\r\n\t*\t@type: public\r\n\t*/\r\n\tsetUpdated:function(rowId,state,mode){\r\n\t\tif (this._silent_mode) return;\r\n\t\tvar ind=this.findRow(rowId);\r\n\t\t\r\n\t\tmode=mode||\"updated\";\r\n\t\tvar existing = this.obj.getUserData(rowId,this.action_param);\r\n\t\tif (existing && mode == \"updated\") mode=existing;\r\n\t\tif (state){\r\n\t\t\tthis.set_invalid(rowId,false); //clear previous error flag\r\n\t\t\tthis.updatedRows[ind]=rowId;\r\n\t\t\tthis.obj.setUserData(rowId,this.action_param,mode);\r\n\t\t\tif (this._in_progress[rowId]) \r\n\t\t\t\tthis._in_progress[rowId]=\"wait\";\r\n\t\t} else{\r\n\t\t\tif (!this.is_invalid(rowId)){\r\n\t\t\t\tthis.updatedRows.splice(ind,1);\r\n\t\t\t\tthis.obj.setUserData(rowId,this.action_param,\"\");\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t//clear changed flag\r\n\t\tif (!state)\r\n\t\t\tthis._clearUpdateFlag(rowId);\r\n     \t\t\t\r\n\t\tthis.markRow(rowId,state,mode);\r\n\t\tif (state && this.autoUpdate) this.sendData(rowId);\r\n\t},\r\n\t_clearUpdateFlag:function(id){},\r\n\tmarkRow:function(id,state,mode){ \r\n\t\tvar str=\"\";\r\n\t\tvar invalid=this.is_invalid(id);\r\n\t\tif (invalid){\r\n        \tstr=this.styles[invalid];\r\n        \tstate=true;\r\n    \t}\r\n\t\tif (this.callEvent(\"onRowMark\",[id,state,mode,invalid])){\r\n\t\t\t//default logic\r\n\t\t\tstr=this.styles[state?mode:\"clear\"]+str;\r\n\t\t\t\r\n        \tthis.obj[this._methods[0]](id,str);\r\n\r\n\t\t\tif (invalid && invalid.details){\r\n\t\t\t\tstr+=this.styles[invalid+\"_cell\"];\r\n\t\t\t\tfor (var i=0; i < invalid.details.length; i++)\r\n\t\t\t\t\tif (invalid.details[i])\r\n        \t\t\t\tthis.obj[this._methods[1]](id,i,str);\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\tgetState:function(id){\r\n\t\treturn this.obj.getUserData(id,this.action_param);\r\n\t},\r\n\tis_invalid:function(id){\r\n\t\treturn this._invalid[id];\r\n\t},\r\n\tset_invalid:function(id,mode,details){ \r\n\t\tif (details) mode={value:mode, details:details, toString:function(){ return this.value.toString(); }};\r\n\t\tthis._invalid[id]=mode;\r\n\t},\r\n\t/**\r\n\t* \t@desc: check mandatory fields and varify values of cells, initiate update (if specified)\r\n\t*\t@param: rowId - id of row to set update-status for\r\n\t*\t@type: public\r\n\t*/\r\n\tcheckBeforeUpdate:function(rowId){ \r\n\t\treturn true;\r\n\t},\r\n\t/**\r\n\t* \t@desc: send row(s) values to server\r\n\t*\t@param: rowId - id of row which data to send. If not specified, then all \"updated\" rows will be send\r\n\t*\t@type: public\r\n\t*/\r\n\tsendData:function(rowId){\r\n\t\tif (this._waitMode && (this.obj.mytype==\"tree\" || this.obj._h2)) return;\r\n\t\tif (this.obj.editStop) this.obj.editStop();\r\n\t\r\n\t\t\r\n\t\tif(typeof rowId == \"undefined\" || this._tSend) return this.sendAllData();\r\n\t\tif (this._in_progress[rowId]) return false;\r\n\t\t\r\n\t\tthis.messages=[];\r\n\t\tif (!this.checkBeforeUpdate(rowId) && this.callEvent(\"onValidationError\",[rowId,this.messages])) return false;\r\n\t\tthis._beforeSendData(this._getRowData(rowId),rowId);\r\n    },\r\n    _beforeSendData:function(data,rowId){\r\n    \tif (!this.callEvent(\"onBeforeUpdate\",[rowId,this.getState(rowId),data])) return false;\t\r\n\t\tthis._sendData(data,rowId);\r\n    },\r\n    serialize:function(data, id){\r\n    \tif (typeof data == \"string\")\r\n    \t\treturn data;\r\n    \tif (typeof id != \"undefined\")\r\n    \t\treturn this.serialize_one(data,\"\");\r\n    \telse{\r\n    \t\tvar stack = [];\r\n    \t\tvar keys = [];\r\n    \t\tfor (var key in data)\r\n    \t\t\tif (data.hasOwnProperty(key)){\r\n    \t\t\t\tstack.push(this.serialize_one(data[key],key+this.post_delim));\r\n    \t\t\t\tkeys.push(key);\r\n\t\t\t\t}\r\n    \t\tstack.push(\"ids=\"+this.escape(keys.join(\",\")));\r\n    \t\tif (this.$gantt.security_key)\r\n\t\t\t\tstack.push(\"dhx_security=\"+this.$gantt.security_key);\r\n    \t\treturn stack.join(\"&\");\r\n    \t}\r\n    },\r\n    serialize_one:function(data, pref){\r\n    \tif (typeof data == \"string\")\r\n    \t\treturn data;\r\n    \tvar stack = [];\r\n    \tfor (var key in data)\r\n    \t\tif (data.hasOwnProperty(key)){\r\n    \t\t\tif ((key == \"id\" || key == this.action_param) && this._tMode == \"REST\") continue;\r\n    \t\t\tstack.push(this.escape((pref||\"\")+key)+\"=\"+this.escape(data[key]));\r\n    \t\t}\r\n\t\treturn stack.join(\"&\");\r\n    },\r\n\t_applyPayload:function(url){\r\n\t\tvar ajax = this.$gantt.ajax;\r\n\t\tif (this._payload)\r\n\t\t\tfor (var key in this._payload)\r\n\t\t\t\turl = url + ajax.urlSeparator(url) + this.escape(key) + \"=\" + this.escape(this._payload[key]);\r\n\t\treturn url;\r\n\t},\r\n    _sendData:function(a1,rowId){\r\n    \tif (!a1) return; //nothing to send\r\n\t\tif (!this.callEvent(\"onBeforeDataSending\",rowId?[rowId,this.getState(rowId),a1]:[null, null, a1])) return false;\t\t\t\t\r\n\t\t\r\n    \tif (rowId)\r\n\t\t\tthis._in_progress[rowId]=(new Date()).valueOf();\r\n\r\n\t\tvar that = this;\r\n\t\tvar back = function(xml){\r\n\t\t\tvar ids = [];\r\n\t\t\tif (rowId)\r\n\t\t\t\tids.push(rowId);\r\n\t\t\telse if (a1)\r\n\t\t\t\tfor (var key in a1)\r\n\t\t\t\t\tids.push(key);\r\n\r\n\t\t\treturn that.afterUpdate(that,xml,ids);\r\n\t\t};\r\n\t\tvar ajax = this.$gantt.ajax;\r\n\r\n\t\tvar a3 = this.serverProcessor+(this._user?(ajax.urlSeparator(this.serverProcessor)+[\"dhx_user=\"+this._user,\"dhx_version=\"+this.obj.getUserData(0,\"version\")].join(\"&\")):\"\");\r\n\t\tvar a4 = this._applyPayload(a3);\r\n\r\n\t\tif (this._tMode==\"GET\") {\r\n\t\t\tajax.query({\r\n\t\t\t\turl: a4 + ajax.urlSeparator(a4) + this.serialize(a1, rowId),\r\n\t\t\t\tmethod: \"GET\",\r\n\t\t\t\tcallback: back,\r\n\t\t\t\theaders: this._headers\r\n\t\t\t});\r\n\t\t} else if (this._tMode == \"POST\") {\r\n\t\t\tajax.query({\r\n\t\t\t\turl: a4,\r\n\t\t\t\tmethod: \"POST\",\r\n\t\t\t\theaders: this._headers,\r\n\t\t\t\tdata: this.serialize(a1, rowId),\r\n\t\t\t\tcallback: back\r\n\t\t\t});\r\n\t\t} else if (this._tMode == \"JSON\"){\r\n\t\t\tvar action = a1[this.action_param];\r\n\t\t\tvar data = {};\r\n\t\t\tfor (var key in a1) data[key] = a1[key];\r\n\t\t\tdelete data[this.action_param];\r\n\t\t\tdelete data.id;\r\n\t\t\tdelete data.gr_id;\r\n\r\n\t\t\tajax.query({\r\n\t\t\t\turl:a4,\r\n\t\t\t\tmethod:\"POST\",\r\n\t\t\t\theaders:this._headers,\r\n\t\t\t\tcallback:back,\r\n\t\t\t\tdata:JSON.stringify({\r\n\t\t\t\t\tid: rowId,\r\n\t\t\t\t\taction: action,\r\n\t\t\t\t\tdata: data\r\n\t\t\t\t})\r\n\t\t\t});\r\n\t\t}\r\n        else if (this._tMode == \"REST\"){\r\n        \tvar state = this.getState(rowId);\r\n        \tvar url = a3.replace(/(\\&|\\?)editing\\=true/,\"\");\r\n        \tvar data = \"\";\r\n        \tvar method = \"post\";\r\n\r\n        \tif (state == \"inserted\"){\r\n        \t\tdata = this.serialize(a1, rowId);\r\n        \t} else if (state == \"deleted\"){\r\n        \t\tmethod = \"DELETE\";\r\n        \t\turl = url + (url.slice(-1) == \"/\" ? \"\" : \"/\") + rowId;\r\n        \t} else {\r\n        \t\tmethod = \"PUT\";\r\n        \t\tdata = this.serialize(a1, rowId);\r\n        \t\turl = url + (url.slice(-1) == \"/\" ? \"\" : \"/\") + rowId;\r\n        \t}\r\n\r\n\r\n        \turl = this._applyPayload(url);\r\n        \tajax.query({\r\n        \t\turl:url,\r\n        \t\tmethod:method,\r\n        \t\theaders:this._headers,\r\n        \t\tdata:data,\r\n        \t\tcallback:back\r\n        \t});\r\n        }\r\n\r\n\t\tthis._waitMode++;\r\n    },\r\n\tsendAllData:function(){\r\n\t\tif (!this.updatedRows.length) return;\t\t\t\r\n\r\n\t\tthis.messages=[]; var valid=true;\r\n\t\tfor (var i=0; i<this.updatedRows.length; i++)\r\n\t\t\tvalid&=this.checkBeforeUpdate(this.updatedRows[i]);\r\n\t\tif (!valid && !this.callEvent(\"onValidationError\",[\"\",this.messages])) return false;\r\n\t\r\n\t\tif (this._tSend) \r\n\t\t\tthis._sendData(this._getAllData());\r\n\t\telse\r\n\t\t\tfor (var i=0; i<this.updatedRows.length; i++)\r\n\t\t\t\tif (!this._in_progress[this.updatedRows[i]]){\r\n\t\t\t\t\tif (this.is_invalid(this.updatedRows[i])) continue;\r\n\t\t\t\t\tthis._beforeSendData(this._getRowData(this.updatedRows[i]),this.updatedRows[i]);\r\n\t\t\t\t\tif (this._waitMode && (this.obj.mytype==\"tree\" || this.obj._h2)) return; //block send all for tree\r\n\t\t\t\t}\r\n\t},\r\n\r\n\t_getAllData:function(rowId){\r\n\t\tvar out={};\r\n\t\tvar has_one = false;\r\n\t\tfor(var i=0;i<this.updatedRows.length;i++){\r\n\t\t\tvar id=this.updatedRows[i];\r\n\t\t\tif (this._in_progress[id] || this.is_invalid(id)) continue;\r\n\t\t\tvar row = this._getRowData(id);\r\n\t\t\tif (!this.callEvent(\"onBeforeUpdate\",[id,this.getState(id), row])) continue;\r\n\t\t\tout[id]=row;\r\n\t\t\thas_one = true;\r\n\t\t\tthis._in_progress[id]=(new Date()).valueOf();\r\n\t\t}\r\n\t\treturn has_one?out:null;\r\n\t},\r\n\t\r\n\t\r\n\t/**\r\n\t* \t@desc: specify column which value should be varified before sending to server\r\n\t*\t@param: ind - column index (0 based)\r\n\t*\t@param: verifFunction - function (object) which should verify cell value (if not specified, then value will be compared to empty string). Two arguments will be passed into it: value and column name\r\n\t*\t@type: public\r\n\t*/\r\n\tsetVerificator:function(ind,verifFunction){\r\n\t\tthis.mandatoryFields[ind] = verifFunction||(function(value){return (value!==\"\");});\r\n\t},\r\n\t/**\r\n\t* \t@desc: remove column from list of those which should be verified\r\n\t*\t@param: ind - column Index (0 based)\r\n\t*\t@type: public\r\n\t*/\r\n\tclearVerificator:function(ind){\r\n\t\tthis.mandatoryFields[ind] = false;\r\n\t},\r\n\t\r\n\t\r\n\t\r\n\t\r\n\t\r\n\tfindRow:function(pattern){\r\n\t\tvar i=0;\r\n    \tfor(i=0;i<this.updatedRows.length;i++)\r\n\t\t    if(pattern==this.updatedRows[i]) break;\r\n\t    return i;\r\n    },\r\n\r\n   \r\n\t\r\n\r\n\r\n    \r\n\r\n\r\n\r\n\r\n\r\n\t/**\r\n\t* \t@desc: define custom actions\r\n\t*\t@param: name - name of action, same as value of action attribute\r\n\t*\t@param: handler - custom function, which receives a XMl response content for action\r\n\t*\t@type: private\r\n\t*/\r\n\tdefineAction:function(name,handler){\r\n        if (!this._uActions) this._uActions=[];\r\n            this._uActions[name]=handler;\r\n\t},\r\n\r\n\r\n\r\n\r\n\t/**\r\n*     @desc: used in combination with setOnBeforeUpdateHandler to create custom client-server transport system\r\n*     @param: sid - id of item before update\r\n*     @param: tid - id of item after up0ate\r\n*     @param: action - action name\r\n*     @type: public\r\n*     @topic: 0\r\n*/\r\n\tafterUpdateCallback:function(sid, tid, action, btag) {\r\n\t\tvar marker = sid;\r\n\t\tvar correct=(action!=\"error\" && action!=\"invalid\");\r\n\t\tif (!correct) this.set_invalid(sid,action);\r\n\t\tif ((this._uActions)&&(this._uActions[action])&&(!this._uActions[action](btag)))\r\n\t\t\treturn (delete this._in_progress[marker]);\r\n\r\n\t\tif (this._in_progress[marker]!=\"wait\")\r\n\t\t\tthis.setUpdated(sid, false);\r\n\r\n\t\tvar soid = sid;\r\n\r\n\t\tswitch (action) {\r\n\t\t\tcase \"inserted\":\r\n\t\t\tcase \"insert\":\r\n\t\t\t\tif (tid != sid) {\r\n\t\t\t\t\tthis.setUpdated(sid,false);\r\n\t\t\t\t\tthis.obj[this._methods[2]](sid, tid);\r\n\t\t\t\t\tsid = tid;\r\n\t\t\t\t}\r\n\t\t\t\tbreak;\r\n\t\t\tcase \"delete\":\r\n\t\t\tcase \"deleted\":\r\n\t\t\t\tthis.obj.setUserData(sid, this.action_param, \"true_deleted\");\r\n\t\t\t\tthis.obj[this._methods[3]](sid);\r\n\t\t\t\tdelete this._in_progress[marker];\r\n\t\t\t\treturn this.callEvent(\"onAfterUpdate\", [sid, action, tid, btag]);\r\n\t\t}\r\n\r\n\t\tif (this._in_progress[marker]!=\"wait\"){\r\n\t\t\tif (correct) this.obj.setUserData(sid, this.action_param,'');\r\n\t\t\tdelete this._in_progress[marker];\r\n\t\t} else {\r\n\t\t\tdelete this._in_progress[marker];\r\n\t\t\tthis.setUpdated(tid,true,this.obj.getUserData(sid,this.action_param));\r\n\t\t}\r\n\r\n\t\tthis.callEvent(\"onAfterUpdate\", [soid, action, tid, btag]);\r\n\t},\r\n\r\n\t/**\r\n\t* \t@desc: response from server\r\n\t*\t@param: xml - XMLLoader object with response XML\r\n\t*\t@type: private\r\n\t*/\r\n\tafterUpdate:function(that,xml,id){\r\n\t\tvar ajax = this.$gantt.ajax;\r\n\t\t//try to use json first\r\n\t\tif (window.JSON){\r\n\t\t\tvar tag;\r\n\r\n\t\t\ttry{\r\n\t\t\t\ttag = JSON.parse(xml.xmlDoc.responseText);\r\n\t\t\t} catch(e){\r\n\r\n\t\t\t\t// empty response also can be processed by json handler\r\n\t\t\t\tif(!xml.xmlDoc.responseText.length){\r\n\t\t\t\t\ttag = {};\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tif(tag){\r\n\t\t\t\tvar action = tag.action || this.getState(id) || \"updated\";\r\n\t\t\t\tvar sid = tag.sid || id[0];\r\n\t\t\t\tvar tid = tag.tid || id[0];\r\n\t\t\t\tthat.afterUpdateCallback(sid, tid, action, tag);\r\n\t\t\t\tthat.finalizeUpdate();\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t}\r\n\t\t//xml response\r\n\t\tvar top = ajax.xmltop(\"data\", xml.xmlDoc); //fix incorrect content type in IE\r\n\t\tif (!top) return this.cleanUpdate(id);\r\n\t\tvar atag=ajax.xpath(\"//data/action\", top);\r\n\t\tif (!atag.length) return this.cleanUpdate(id);\r\n\r\n\t\tfor (var i=0; i<atag.length; i++){\r\n        \tvar btag=atag[i];\r\n\t\t\tvar action = btag.getAttribute(\"type\");\r\n\t\t\tvar sid = btag.getAttribute(\"sid\");\r\n\t\t\tvar tid = btag.getAttribute(\"tid\");\r\n\t\t\t\r\n\t\t\tthat.afterUpdateCallback(sid,tid,action,btag);\r\n\t\t}\r\n\t\tthat.finalizeUpdate();\r\n\t},\r\n\tcleanUpdate:function(id){\r\n\t\tif (id)\r\n\t\t\tfor (var i = 0; i < id.length; i++)\r\n\t\t\t\tdelete this._in_progress[id[i]];\r\n\t},\r\n\tfinalizeUpdate:function(){\r\n\t\tif (this._waitMode) this._waitMode--;\r\n\t\t\r\n\t\tif ((this.obj.mytype==\"tree\" || this.obj._h2) && this.updatedRows.length) \r\n\t\t\tthis.sendData();\r\n\t\tthis.callEvent(\"onAfterUpdateFinish\",[]);\r\n\t\tif (!this.updatedRows.length)\r\n\t\t\tthis.callEvent(\"onFullSync\",[]);\r\n\t},\r\n\r\n\r\n\r\n\r\n\t\r\n\t/**\r\n\t* \t@desc: initializes data-processor\r\n\t*\t@param: anObj - dhtmlxGrid object to attach this data-processor to\r\n\t*\t@type: public\r\n\t*/\r\n\tinit:function(anObj){\r\n\t\tthis.obj = anObj;\r\n\t\tif (this.obj._dp_init) \r\n\t\t\tthis.obj._dp_init(this);\r\n\t},\r\n\t\r\n\t\r\n\tsetOnAfterUpdate:function(ev){\r\n\t\tthis.attachEvent(\"onAfterUpdate\",ev);\r\n\t},\r\n\tenableDebug:function(mode){\r\n\t},\r\n\tsetOnBeforeUpdateHandler:function(func){  \r\n\t\tthis.attachEvent(\"onBeforeDataSending\",func);\r\n\t},\r\n\r\n\r\n\r\n\t/* starts autoupdate mode\r\n\t\t@param interval\r\n\t\t\ttime interval for sending update requests\r\n\t*/\r\n\tsetAutoUpdate: function(interval, user) {\r\n\t\tinterval = interval || 2000;\r\n\t\t\r\n\t\tthis._user = user || (new Date()).valueOf();\r\n\t\tthis._need_update = false;\r\n\t\t//this._loader = null;\r\n\t\tthis._update_busy = false;\r\n\t\t\r\n\t\tthis.attachEvent(\"onAfterUpdate\",function(sid,action,tid,xml_node){\r\n\t\t\tthis.afterAutoUpdate(sid, action, tid, xml_node);\r\n\t\t});\r\n\t\tthis.attachEvent(\"onFullSync\",function(){\r\n\t\t\tthis.fullSync();\r\n\t\t});\r\n\t\t\r\n\t\tvar self = this;\r\n\t\twindow.setInterval(function(){\r\n\t\t\tself.loadUpdate();\r\n\t\t}, interval);\r\n\t},\r\n\r\n\r\n\t/* process updating request answer\r\n\t\tif status == collision version is depricated\r\n\t\tset flag for autoupdating immidiatly\r\n\t*/\r\n\tafterAutoUpdate: function(sid, action, tid, xml_node) {\r\n\t\tif (action == 'collision') {\r\n\t\t\tthis._need_update = true;\r\n\t\t\treturn false;\r\n\t\t} else {\r\n\t\t\treturn true;\r\n\t\t}\r\n\t},\r\n\r\n\r\n\t/* callback function for onFillSync event\r\n\t\tcall update function if it's need\r\n\t*/\r\n\tfullSync: function() {\r\n\t\tif (this._need_update) {\r\n\t\t\tthis._need_update = false;\r\n\t\t\tthis.loadUpdate();\r\n\t\t}\r\n\t\treturn true;\r\n\t},\r\n\r\n\r\n\t/* sends query to the server and call callback function\r\n\t*/\r\n\tgetUpdates: function(url,callback){\r\n\t\tvar ajax = this.$gantt.ajax;\r\n\t\tif (this._update_busy) \r\n\t\t\treturn false;\r\n\t\telse\r\n\t\t\tthis._update_busy = true;\r\n\t\t\r\n\t\t//this._loader = this._loader || new dtmlXMLLoaderObject(true);\r\n\t\t\r\n\t\t//this._loader.async=true;\r\n\t\t//this._loader.waitCall=callback;\r\n\t\t//this._loader.loadXML(url);\r\n\t\tajax.get(url, callback);\r\n\r\n\t},\r\n\r\n\r\n\t/* returns xml node value\r\n\t\t@param node\r\n\t\t\txml node\r\n\t*/\r\n\t_v: function(node) {\r\n\t\tif (node.firstChild) return node.firstChild.nodeValue;\r\n\t\treturn \"\";\r\n\t},\r\n\r\n\r\n\t/* returns values array of xml nodes array\r\n\t\t@param arr\r\n\t\t\tarray of xml nodes\r\n\t*/\r\n\t_a: function(arr) {\r\n\t\tvar res = [];\r\n\t\tfor (var i=0; i < arr.length; i++) {\r\n\t\t\tres[i]=this._v(arr[i]);\r\n\t\t}\r\n\t\treturn res;\r\n\t},\r\n\r\n\r\n\t/* loads updates and processes them\r\n\t*/\r\n\tloadUpdate: function(){\r\n\t\tvar ajax = this.$gantt.ajax;\r\n\t\tvar self = this;\r\n\t\tvar version = this.obj.getUserData(0,\"version\");\r\n\t\tvar url = this.serverProcessor+ajax.urlSeparator(this.serverProcessor)+[\"dhx_user=\"+this._user,\"dhx_version=\"+version].join(\"&\");\r\n\t\turl = url.replace(\"editing=true&\",\"\");\r\n\t\tthis.getUpdates(url, function(xml){\r\n\t\t\tvar vers = ajax.xpath(\"//userdata\", xml);\r\n\t\t\tself.obj.setUserData(0,\"version\",self._v(vers[0]));\r\n\t\t\t\r\n\t\t\tvar upds = ajax.xpath(\"//update\", xml);\r\n\t\t\tif (upds.length){\r\n\t\t\t\tself._silent_mode = true;\r\n\t\t\t\t\r\n\t\t\t\tfor (var i=0; i<upds.length; i++) {\r\n\t\t\t\t\tvar status = upds[i].getAttribute('status');\r\n\t\t\t\t\tvar id = upds[i].getAttribute('id');\r\n\t\t\t\t\tvar parent = upds[i].getAttribute('parent');\r\n\t\t\t\t\tswitch (status) {\r\n\t\t\t\t\t\tcase 'inserted':\r\n\t\t\t\t\t\t\tself.callEvent(\"insertCallback\",[upds[i], id, parent]);\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\tcase 'updated':\r\n\t\t\t\t\t\t\tself.callEvent(\"updateCallback\",[upds[i], id, parent]);\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\tcase 'deleted':\r\n\t\t\t\t\t\t\tself.callEvent(\"deleteCallback\",[upds[i], id, parent]);\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tself._silent_mode = false;\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tself._update_busy = false;\r\n\t\t\tself = null;\r\n\t\t});\r\n\t}\r\n\r\n};\r\n\r\nmodule.exports = dataProcessor;\n\n\n//////////////////\n// WEBPACK FOOTER\n// c:/www-recent/gantt/sources/core/dataprocessor/dataprocessor.js\n// module id = 59\n// module chunks = 0","module.exports = function(gantt){\r\n\tvar modules = [\r\n\t\trequire(\"./autoscroll\"),\r\n\t\trequire(\"./batch_update\"),\r\n\t\trequire(\"./wbs\"),\r\n\t\trequire(\"./jquery_hooks\"),\r\n\t\trequire(\"./dhtmlx_hooks\")\r\n\t];\r\n\r\n\tfor(var i = 0; i < modules.length; i++){\r\n\t\tif(modules[i])\r\n\t\t\tmodules[i](gantt);\r\n\t}\r\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// c:/www-recent/gantt/sources/core/plugins/index.js\n// module id = 60\n// module chunks = 0","var domHelpers = require(\"../../utils/dom_helpers\");\r\n\r\nmodule.exports = function(gantt){\r\n\r\n\tvar scrollRange = 50,\r\n\t\tscrollStep = 30,\r\n\t\tscrollDelay = 10,\r\n\t\tscrollSpeed = 50;\r\n\r\n\tvar interval = null,\r\n\t\tisMove = false,\r\n\t\tdelayTimeout = null,\r\n\t\tbox = {},\r\n\t\tstartPos = {\r\n\t\t\tstarted: false\r\n\t\t},\r\n\t\teventPos = {};\r\n\r\n\tfunction isScrollState() {\r\n\t\tvar dragMarker = !!document.querySelector(\".gantt_drag_marker\");\r\n\t\tvar isResize = !!document.querySelector(\".gantt_drag_marker.gantt_grid_resize_area\");\r\n\t\tvar isLink = !!document.querySelector(\".gantt_link_direction\");\r\n\t\tisMove = dragMarker && !isResize && !isLink;\r\n\t\treturn !((!gantt.getState().drag_mode && !dragMarker) || isResize);\r\n\t}\r\n\r\n\tfunction defineDelayTimeout(state) {\r\n\t\tif (delayTimeout) {\r\n\t\t\tclearTimeout(delayTimeout);\r\n\t\t\tdelayTimeout = null;\r\n\t\t}\r\n\t\tif (state) {\r\n\t\t\tvar speed = gantt.config.autoscroll_speed;\r\n\t\t\tif (speed && speed < 10) // limit speed value to 10 \r\n\t\t\t\tspeed = 10;\r\n\r\n\t\t\tdelayTimeout = setTimeout(function() {\r\n\t\t\t\tinterval = setInterval(tick, speed || scrollSpeed);\r\n\t\t\t\tbox = domHelpers.getNodePosition(gantt.$task);\r\n\t\t\t}, gantt.config.autoscroll_delay || scrollDelay);\r\n\t\t}\r\n\t}\r\n\r\n\tfunction defineScrollInterval(state) {\r\n\t\tif (state) {\r\n\t\t\tdefineDelayTimeout(true);\r\n\t\t\tif (!startPos.started) {\r\n\t\t\t\tstartPos.x = eventPos.x;\r\n\t\t\t\tstartPos.y = eventPos.y;\r\n\t\t\t\tstartPos.started = true;\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tif (interval) {\r\n\t\t\t\tclearInterval(interval);\r\n\t\t\t\tinterval = null;\r\n\t\t\t}\r\n\t\t\tdefineDelayTimeout(false);\r\n\t\t\tstartPos.started = false;\r\n\t\t}\r\n\t}\r\n\r\n\tfunction autoscrollInterval(event) {\r\n\r\n\t\tvar isScroll = isScrollState();\r\n\r\n\t\tif ((interval || delayTimeout) && !isScroll) { \r\n\t\t\tdefineScrollInterval(false);\r\n\t\t}\r\n\r\n\t\tif (!gantt.config.autoscroll || !isScroll) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t\teventPos = {\r\n\t\t\tx: event.clientX,\r\n\t\t\ty: event.clientY\r\n\t\t};\r\n\r\n\t\tif (!interval && isScroll) {\r\n\t\t\tdefineScrollInterval(true);\r\n\t\t}\r\n\t}\r\n\r\n\tfunction tick() {\r\n\r\n\t\tif (!isScrollState()) {\r\n\t\t\tdefineScrollInterval(false);\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t\tvar box = domHelpers.getNodePosition(gantt.$task);\r\n\t\tvar posX = eventPos.x - box.x; \r\n\t\tvar posY = eventPos.y - box.y;\r\n\r\n\t\tvar scrollLeft = isMove ? 0 : need_scroll(posX, box.width, startPos.x - box.x);\r\n\t\tvar scrollTop = need_scroll(posY, box.height, startPos.y - box.y);\r\n\r\n\t\tvar scrollState = gantt.getScrollState();\r\n\r\n\t\tvar currentScrollTop = scrollState.y,\r\n\t\t\tscrollOuterHeight = scrollState.inner_height,\r\n\t\t\tscrollInnerHeight = scrollState.height,\r\n\t\t\tcurrentScrollLeft = scrollState.x,\r\n\t\t\tscrollOuterWidth = scrollState.inner_width,\r\n\t\t\tscrollInnerWidth = scrollState.width;\r\n\r\n\t\t// do scrolling only if we have scrollable area to do so\r\n\t\tif (scrollTop && !scrollOuterHeight) {\r\n\t\t\tscrollTop = 0;\r\n\t\t} else if (scrollTop < 0 && !currentScrollTop) {\r\n\t\t\tscrollTop = 0;\r\n\t\t} else if (scrollTop > 0 && currentScrollTop + scrollOuterHeight >= scrollInnerHeight + 2) {\r\n\t\t\tscrollTop = 0;\r\n\t\t}\r\n\r\n\t\tif (scrollLeft && !scrollOuterWidth) {\r\n\t\t\tscrollLeft = 0;\r\n\t\t} else if (scrollLeft < 0 && !currentScrollLeft) {\r\n\t\t\tscrollLeft = 0;\r\n\t\t} else if (scrollLeft > 0 && currentScrollLeft + scrollOuterWidth >= scrollInnerWidth) {\r\n\t\t\tscrollLeft = 0;\r\n\t\t}\r\n\r\n\t\tvar step = gantt.config.autoscroll_step;\r\n\r\n\t\tif (step && step < 2) // limit step value to 2\r\n\t\t\tstep = 2;\r\n\r\n\t\tscrollLeft = scrollLeft * (step || scrollStep);\r\n\t\tscrollTop = scrollTop * (step || scrollStep);\r\n\r\n\t\tif (scrollLeft || scrollTop) {\r\n\t\t\tscroll(scrollLeft, scrollTop);\r\n\t\t} \r\n\r\n\t}\r\n\r\n\tfunction need_scroll(pos, boxSize, startCoord) {\r\n\t\tif ((pos - scrollRange < 0) && (pos < startCoord))\r\n\t\t\treturn -1;\r\n\t\telse if ((pos > boxSize - scrollRange) && (pos > startCoord))\r\n\t\t\treturn 1;\r\n\t\treturn 0;\r\n\t}\r\n\r\n\tfunction scroll(left, top) {\r\n\t\tvar scrollState = gantt.getScrollState();\r\n\r\n\t\tvar scrollLeft = null,\r\n\t\t\tscrollTop = null;\r\n\r\n\t\tif (left) {\r\n\t\t\tscrollLeft = scrollState.x + left;\r\n\t\t\tscrollLeft = Math.min(scrollState.width, scrollLeft);\r\n\t\t\tscrollLeft = Math.max(0, scrollLeft);\r\n\t\t}\r\n\r\n\t\tif (top) {\r\n\t\t\tscrollTop = scrollState.y + top;\r\n\t\t\tscrollTop = Math.min(scrollState.height, scrollTop);\r\n\t\t\tscrollTop = Math.max(0, scrollTop);\r\n\t\t}\r\n\r\n\t\tgantt.scrollTo(scrollLeft, scrollTop);\r\n\t}\r\n\r\n\tgantt.attachEvent(\"onGanttReady\", function() {\r\n\t\tgantt.eventRemove(document.body, \"mousemove\", autoscrollInterval);\r\n\t\tgantt.event(document.body, \"mousemove\", autoscrollInterval);\r\n\t});\r\n\r\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// c:/www-recent/gantt/sources/core/plugins/autoscroll.js\n// module id = 61\n// module chunks = 0","function createMethod(){\r\n\tvar methods = {};\r\n\tvar isActive = false;\r\n\tfunction disableMethod(methodName, dummyMethod){\r\n\t\tdummyMethod = typeof dummyMethod == \"function\" ? dummyMethod : function(){};\r\n\r\n\t\tif(!methods[methodName]){\r\n\t\t\tmethods[methodName] = this[methodName];\r\n\t\t\tthis[methodName] = dummyMethod;\r\n\t\t}\r\n\t}\r\n\tfunction restoreMethod(methodName){\r\n\t\tif(methods[methodName]){\r\n\t\t\tthis[methodName] = methods[methodName];\r\n\t\t\tmethods[methodName] = null;\r\n\t\t}\r\n\t}\r\n\tfunction disableMethods(methodsHash){\r\n\t\tfor(var i in methodsHash){\r\n\t\t\tdisableMethod.call(this, i, methodsHash[i]);\r\n\t\t}\r\n\t}\r\n\t function restoreMethods(){\r\n\t\tfor(var i in methods){\r\n\t\t\trestoreMethod.call(this, i);\r\n\t\t}\r\n\t}\r\n\r\n\tfunction batchUpdatePayload(callback){\r\n\t\ttry{\r\n\t\t\tcallback();\r\n\t\t}catch(e){\r\n\t\t\twindow.console.error(e);\r\n\t\t}\r\n\t}\r\n\r\n\treturn function batchUpdate(callback, noRedraw) {\r\n\t\tif(isActive){\r\n\t\t\t// batch mode is already active\r\n\t\t\tbatchUpdatePayload(callback);\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tvar call_dp = (this._dp && this._dp.updateMode != \"off\");\r\n\t\tvar dp_mode;\r\n\t\tif (call_dp){\r\n\t\t\tdp_mode = this._dp.updateMode;\r\n\t\t\tthis._dp.setUpdateMode(\"off\");\r\n\t\t}\r\n\r\n\t\t// temporary disable some methods while updating multiple tasks\r\n\t\tvar resetProjects = {};\r\n\t\tvar methods = {\r\n\t\t\t\"render\":true,\r\n\t\t\t\"refreshData\":true,\r\n\t\t\t\"refreshTask\":true,\r\n\t\t\t\"refreshLink\":true,\r\n\t\t\t\"resetProjectDates\":function(task){\r\n\t\t\t\tresetProjects[task.id] = task;\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\tdisableMethods.call(this, methods);\r\n\r\n\t\tisActive = true;\r\n\t\tthis.callEvent(\"onBeforeBatchUpdate\", []);\r\n\r\n\t\tbatchUpdatePayload(callback);\r\n\r\n\t\tthis.callEvent(\"onAfterBatchUpdate\", []);\r\n\r\n\t\trestoreMethods.call(this);\r\n\r\n\t\t// do required updates after changes applied\r\n\t\tfor(var i in resetProjects){\r\n\t\t\tthis.resetProjectDates(resetProjects[i]);\r\n\t\t}\r\n\r\n\t\tisActive = false;\r\n\r\n\t\tif(!noRedraw){\r\n\t\t\tthis.render();\r\n\t\t}\r\n\r\n\t\tif (call_dp) {\r\n\t\t\tthis._dp.setUpdateMode(dp_mode);\r\n\t\t\tthis._dp.setGanttMode(\"tasks\");\r\n\t\t\tthis._dp.sendData();\r\n\t\t\tthis._dp.setGanttMode(\"links\");\r\n\t\t\tthis._dp.sendData();\r\n\t\t}\r\n\t};\r\n}\r\n\r\nmodule.exports = function(gantt){\r\n\tgantt.batchUpdate = createMethod();\r\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// c:/www-recent/gantt/sources/core/plugins/batch_update.js\n// module id = 62\n// module chunks = 0","var createWbs = (function(gantt){\r\n\treturn {\r\n\t_needRecalc: true,\r\n\treset: function(){\r\n\t\tthis._needRecalc = true;\r\n\t},\r\n\t_isRecalcNeeded: function(){\r\n\t\treturn (!this._isGroupSort() && this._needRecalc);\r\n\t},\r\n\t_isGroupSort: function() {\r\n\t\treturn !!(gantt._groups && gantt._groups.is_active());\r\n\t},\r\n\t_getWBSCode: function(task) {\r\n\t\tif(!task) return \"\";\r\n\r\n\t\tif(this._isRecalcNeeded()){\r\n\t\t\tthis._calcWBS();\r\n\t\t}\r\n\r\n\t\tif(task.$virtual) return \"\";\r\n\t\tif(this._isGroupSort()) return task.$wbs || \"\";\r\n\r\n\t\tif(!task.$wbs) {\r\n\t\t\tthis.reset();\r\n\t\t\tthis._calcWBS();\r\n\t\t}\r\n\t\treturn task.$wbs;\r\n\t},\r\n\t_setWBSCode: function(task, value) {\r\n\t\ttask.$wbs = value;\r\n\t},\r\n\tgetWBSCode: function(task) {\r\n\t\treturn this._getWBSCode(task);\r\n\t},\r\n\t_calcWBS: function() {\r\n\t\tif(!this._isRecalcNeeded()) return;\r\n\r\n\t\tvar _isFirst = true;\r\n\t\tgantt.eachTask(function(ch) {\r\n\t\t\tif(_isFirst) {\r\n\t\t\t\t_isFirst = false;\r\n\t\t\t\tthis._setWBSCode(ch, \"1\");\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tvar _prevSibling = gantt.getPrevSibling(ch.id);\r\n\t\t\tif (_prevSibling !== null) {\r\n\t\t\t\tvar _wbs = gantt.getTask(_prevSibling).$wbs;\r\n\t\t\t\tif(_wbs) {\r\n\t\t\t\t\t_wbs = _wbs.split(\".\");\r\n\t\t\t\t\t_wbs[_wbs.length-1]++;\r\n\t\t\t\t\tthis._setWBSCode(ch, _wbs.join(\".\"));\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tvar _parent = gantt.getParent(ch.id);\r\n\t\t\t\tthis._setWBSCode(ch, gantt.getTask(_parent).$wbs + \".1\");\r\n\t\t\t}\r\n\t\t}, gantt.config.root_id, this);\r\n\r\n\t\tthis._needRecalc = false;\r\n\t}\r\n};\r\n});\r\n\r\nmodule.exports = function(gantt){\r\n\tvar wbs = createWbs(gantt);\r\n\tgantt.getWBSCode = function getWBSCode(task) {\r\n\t\treturn wbs.getWBSCode(task);\r\n\t};\r\n\r\n\tgantt.attachEvent(\"onAfterTaskMove\", function() {\r\n\t\twbs.reset();\r\n\t\treturn true;\r\n\t});\r\n\r\n\tgantt.attachEvent(\"onBeforeParse\", function() {\r\n\t\twbs.reset();\r\n\t\treturn true;\r\n\t});\r\n\r\n\tgantt.attachEvent(\"onAfterTaskDelete\", function() {\r\n\t\twbs.reset();\r\n\t\treturn true;\r\n\t});\r\n\r\n\tgantt.attachEvent(\"onAfterTaskAdd\", function() {\r\n\t\twbs.reset();\r\n\t\treturn true;\r\n\t});\r\n};\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// c:/www-recent/gantt/sources/core/plugins/wbs.js\n// module id = 63\n// module chunks = 0","if (window.jQuery){\r\n\r\n\t(function( $ ){\r\n\r\n\t\tvar methods = [];\r\n\t\t$.fn.dhx_gantt = function(config){\r\n\t\t\tconfig = config || {};\r\n\t\t\tif (typeof(config) === 'string') {\r\n\t\t\t\tif (methods[config] ) {\r\n\t\t\t\t\treturn methods[config].apply(this, []);\r\n\t\t\t\t}else {\r\n\t\t\t\t\t$.error('Method ' +  config + ' does not exist on jQuery.dhx_gantt');\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tvar views = [];\r\n\t\t\t\tthis.each(function() {\r\n\t\t\t\t\tif (this && this.getAttribute){\r\n\t\t\t\t\t\tif (!this.gantt && !(window.gantt.$root == this)){\r\n\r\n\t\t\t\t\t\t\tvar newgantt = (window.gantt.$container && window.Gantt) ? window.Gantt.getGanttInstance():window.gantt;\r\n\t\t\t\t\t\t\tfor (var key in config)\r\n\t\t\t\t\t\t\t\tif (key!=\"data\")\r\n\t\t\t\t\t\t\t\t\tnewgantt.config[key] = config[key];\r\n\r\n\t\t\t\t\t\t\tnewgantt.init(this);\r\n\t\t\t\t\t\t\tif (config.data)\r\n\t\t\t\t\t\t\t\tnewgantt.parse(config.data);\r\n\r\n\t\t\t\t\t\t\tviews.push(newgantt);\r\n\t\t\t\t\t\t} else\r\n\t\t\t\t\t\t\tviews.push(typeof this.gantt == \"object\" ? this.gantt : window.gantt);\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\r\n\r\n\t\t\t\tif (views.length === 1) return views[0];\r\n\t\t\t\treturn views;\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t})(jQuery);\r\n\r\n}\r\n\r\n\r\nmodule.exports = null;\n\n\n//////////////////\n// WEBPACK FOOTER\n// c:/www-recent/gantt/sources/core/plugins/jquery_hooks.js\n// module id = 64\n// module chunks = 0","if (window.dhtmlx){\r\n\r\n\tif (!dhtmlx.attaches)\r\n\t\tdhtmlx.attaches = {};\r\n\r\n\tdhtmlx.attaches.attachGantt=function(start, end, gantt){\r\n\t\tvar obj = document.createElement(\"DIV\");\r\n\r\n\t\tgantt = gantt || window.gantt;\r\n\r\n\t\tobj.id = \"gantt_\"+ gantt.uid();\r\n\t\tobj.style.width = \"100%\";\r\n\t\tobj.style.height = \"100%\";\r\n\t\tobj.cmp = \"grid\";\r\n\r\n\t\tdocument.body.appendChild(obj);\r\n\t\tthis.attachObject(obj.id);\r\n\t\tthis.dataType = \"gantt\";\r\n\t\tthis.dataObj = gantt;\r\n\r\n\t\tvar that = this.vs[this.av];\r\n\t\tthat.grid = gantt;\r\n\r\n\t\tgantt.init(obj.id, start, end);\r\n\t\tobj.firstChild.style.border = \"none\";\r\n\r\n\t\tthat.gridId = obj.id;\r\n\t\tthat.gridObj = obj;\r\n\r\n\t\tvar method_name=\"_viewRestore\";\r\n\t\treturn this.vs[this[method_name]()].grid;\r\n\t};\r\n\r\n}\r\nif (typeof(window.dhtmlXCellObject) != \"undefined\") {\r\n\r\n\tdhtmlXCellObject.prototype.attachGantt=function(start, end, gantt){\r\n\t\tgantt = gantt || window.gantt;\r\n\r\n\t\tvar obj = document.createElement(\"DIV\");\r\n\t\tobj.id = \"gantt_\"+gantt.uid();\r\n\t\tobj.style.width = \"100%\";\r\n\t\tobj.style.height = \"100%\";\r\n\t\tobj.cmp = \"grid\";\r\n\r\n\t\tdocument.body.appendChild(obj);\r\n\t\tthis.attachObject(obj.id);\r\n\r\n\t\tthis.dataType = \"gantt\";\r\n\t\tthis.dataObj = gantt;\r\n\r\n\t\tgantt.init(obj.id, start, end);\r\n\t\tobj.firstChild.style.border = \"none\";\r\n\t\tvar method_name=\"_viewRestore\";\r\n\t\tobj = null;\r\n\t\tthis.callEvent(\"_onContentAttach\",[]);\r\n\r\n\t\treturn this.dataObj;\r\n\t};\r\n}\r\n\r\nmodule.exports = null;\n\n\n//////////////////\n// WEBPACK FOOTER\n// c:/www-recent/gantt/sources/core/plugins/dhtmlx_hooks.js\n// module id = 65\n// module chunks = 0","module.exports = function(gantt) {\r\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// c:/www-recent/gantt/sources/core/dynamic_loading.gpl.js\n// module id = 66\n// module chunks = 0","module.exports = function(gantt) {\r\n\tgantt.getGridColumn = function (name) {\r\n\t\tvar columns = gantt.config.columns;\r\n\r\n\t\tfor (var i = 0; i < columns.length; i++) {\r\n\t\t\tif (columns[i].name == name)\r\n\t\t\t\treturn columns[i];\r\n\t\t}\r\n\r\n\t\treturn null;\r\n\t};\r\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// c:/www-recent/gantt/sources/core/grid_column_api.gpl.js\n// module id = 67\n// module chunks = 0","module.exports = function(gantt){\r\n\r\n\tvar htmlTags = new RegExp(\"<(?:.|\\n)*?>\", \"gm\");\r\n\tvar extraSpaces = new RegExp(\" +\", \"gm\");\r\n\r\n\tfunction stripHTMLLite(htmlText){\r\n\t\treturn (htmlText + \"\")\r\n\t\t\t.replace(htmlTags, \" \").\r\n\t\t\treplace(extraSpaces, \" \");\r\n\t}\r\n\r\n\tvar singleQuotes = new RegExp(\"'\", \"gm\");\r\n\tfunction escapeQuotes(text){\r\n\t\treturn (text + \"\").replace(singleQuotes, \"&#39;\");\r\n\t}\r\n\r\n\tgantt._waiAria = {\r\n\t\tgetAttributeString: function(attr){\r\n\t\t\tvar attributes = [\" \"];\r\n\t\t\tfor(var i in attr){\r\n\t\t\t\tvar text = escapeQuotes(stripHTMLLite(attr[i]));\r\n\t\t\t\tattributes.push(i + \"='\" + text + \"'\");\r\n\t\t\t}\r\n\t\t\tattributes.push(\" \");\r\n\t\t\treturn attributes.join(\" \");\r\n\r\n\t\t},\r\n\r\n\t\tgetTimelineCellAttr:function(dateString){\r\n\r\n\t\t\treturn gantt._waiAria.getAttributeString({\"aria-label\": dateString});\r\n\t\t},\r\n\r\n\r\n\t\t_taskCommonAttr: function(task, div){\r\n\r\n\t\t\tif(!(task.start_date && task.end_date))\r\n\t\t\t\treturn;\r\n\r\n\t\t\tdiv.setAttribute(\"aria-label\", stripHTMLLite(gantt.templates.tooltip_text(task.start_date, task.end_date, task)));\r\n\r\n\t\t\tif(gantt.isReadonly(task)){\r\n\t\t\t\tdiv.setAttribute(\"aria-readonly\", true);\r\n\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif(task.$dataprocessor_class){\r\n\t\t\t\tdiv.setAttribute(\"aria-busy\", true);\r\n\t\t\t}\r\n\r\n\r\n\t\t\tdiv.setAttribute(\"aria-selected\",\r\n\t\t\t\t(gantt.getState().selected_task == task.id || (gantt.isSelectedTask && gantt.isSelectedTask(task.id))) ? \"true\" : \"false\");\r\n\t\t},\r\n\r\n\t\tsetTaskBarAttr: function(task, div){\r\n\t\t\tthis._taskCommonAttr(task, div);\r\n\r\n\t\t\tif(!gantt.isReadonly(task) && gantt.config.drag_move){\r\n\t\t\t\tif(task.id != gantt.getState().drag_id){\r\n\t\t\t\t\tdiv.setAttribute(\"aria-grabbed\", false);\r\n\t\t\t\t}else{\r\n\t\t\t\t\tdiv.setAttribute(\"aria-grabbed\", true);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\ttaskRowAttr: function(task, div){\r\n\r\n\t\t\tthis._taskCommonAttr(task, div);\r\n\r\n\t\t\tif(!gantt.isReadonly(task) && gantt.config.order_branch){\r\n\t\t\t\tdiv.setAttribute(\"aria-grabbed\", false);\r\n\t\t\t}\r\n\r\n\t\t\tdiv.setAttribute(\"role\", \"row\");\r\n\r\n\t\t\tdiv.setAttribute(\"aria-level\", task.$level);\r\n\r\n\t\t\tif(gantt.hasChild(task.id)){\r\n\t\t\t\tdiv.setAttribute(\"aria-expanded\", task.$open ? \"true\" : \"false\");\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\tlinkAttr: function(link, div){\r\n\r\n\t\t\tvar linkTypes = gantt.config.links;\r\n\r\n\t\t\tvar toStart = link.type == linkTypes.finish_to_start || link.type == linkTypes.start_to_start;\r\n\t\t\tvar fromStart = link.type == linkTypes.start_to_start || link.type == linkTypes.start_to_finish;\r\n\r\n\t\t\tvar content = gantt.locale.labels.link + \" \" +  gantt.templates.drag_link(link.source, fromStart, link.target, toStart);\r\n\r\n\t\t\tdiv.setAttribute(\"aria-label\", stripHTMLLite(content));\r\n\t\t\tif(gantt.isReadonly(link)){\r\n\t\t\t\tdiv.setAttribute(\"aria-readonly\", true);\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\tgridSeparatorAttr: function(div){\r\n\t\t\tdiv.setAttribute(\"role\", \"separator\");\r\n\t\t},\r\n\r\n\t\tlightboxHiddenAttr: function(div){\r\n\t\t\tdiv.setAttribute(\"aria-hidden\", \"true\");\r\n\t\t},\r\n\r\n\t\tlightboxVisibleAttr: function(div){\r\n\t\t\tdiv.setAttribute(\"aria-hidden\", \"false\");\r\n\t\t},\r\n\r\n\t\tlightboxAttr: function(div){\r\n\t\t\tdiv.setAttribute(\"role\", \"dialog\");\r\n\t\t\tdiv.setAttribute(\"aria-hidden\", \"true\");\r\n\t\t\tdiv.firstChild.setAttribute(\"role\", \"heading\");\r\n\t\t},\r\n\r\n\t\tlightboxButtonAttrString:function(buttonName){\r\n\t\t\treturn this.getAttributeString({\"role\":\"button\", \"aria-label\":gantt.locale.labels[buttonName], \"tabindex\":\"0\"});\r\n\t\t},\r\n\r\n\t\tlightboxHeader: function(div, headerText){\r\n\t\t\tdiv.setAttribute(\"aria-label\", headerText);\r\n\t\t},\r\n\r\n\t\tlightboxSelectAttrString: function(time_option){\r\n\t\t\tvar label = \"\";\r\n\r\n\t\t\tswitch (time_option) {\r\n\t\t\t\tcase \"%Y\":\r\n\t\t\t\t\tlabel = gantt.locale.labels.years;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase \"%m\":\r\n\t\t\t\t\tlabel = gantt.locale.labels.months;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase \"%d\":\r\n\t\t\t\t\tlabel = gantt.locale.labels.days;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase \"%H:%i\":\r\n\t\t\t\t\tlabel = gantt.locale.labels.hours + gantt.locale.labels.minutes;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tdefault:\r\n\t\t\t\t\tbreak;\r\n\t\t\t}\r\n\r\n\t\t\treturn gantt._waiAria.getAttributeString({\"aria-label\": label});\r\n\t\t},\r\n\r\n\t\tlightboxDurationInputAttrString: function(section){\r\n\t\t\treturn this.getAttributeString({\"aria-label\": gantt.locale.labels.column_duration, \"aria-valuemin\": \"0\"});\r\n\t\t},\r\n\r\n\t\tgridAttrString: function(){\r\n\t\t\treturn [\" role='treegrid'\", gantt.config.multiselect ? \"aria-multiselectable='true'\" : \"aria-multiselectable='false'\", \" \"].join(\" \");\r\n\t\t},\r\n\r\n\r\n\t\tgridScaleRowAttrString: function(){\r\n\t\t\treturn \"role='row'\";\r\n\t\t},\r\n\r\n\t\tgridScaleCellAttrString: function(column, label){\r\n\t\t\tvar attrs = \"\";\r\n\t\t\tif(column.name == \"add\"){\r\n\t\t\t\tattrs = this.getAttributeString({\"role\":\"button\", \"aria-label\": gantt.locale.labels.new_task});\r\n\t\t\t}else{\r\n\r\n\t\t\t\tvar attributes = {\r\n\t\t\t\t\t\"role\":\"columnheader\",\r\n\t\t\t\t\t\"aria-label\": label\r\n\t\t\t\t};\r\n\r\n\t\t\t\tif(gantt._sort && gantt._sort.name == column.name){\r\n\t\t\t\t\tif(gantt._sort.direction == \"asc\"){\r\n\t\t\t\t\t\tattributes[\"aria-sort\"] = \"ascending\";\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\tattributes[\"aria-sort\"] = \"descending\";\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tattrs = this.getAttributeString(attributes);\r\n\t\t\t}\r\n\t\t\treturn attrs;\r\n\t\t},\r\n\r\n\t\tgridDataAttrString: function(){\r\n\t\t\treturn \"role='rowgroup'\";\r\n\t\t},\r\n\r\n\t\tgridCellAttrString: function(column, textValue){\r\n\t\t\treturn this.getAttributeString({\"role\":\"gridcell\", \"aria-label\": textValue});\r\n\t\t},\r\n\r\n\t\tgridAddButtonAttrString: function(column){\r\n\t\t\treturn this.getAttributeString({\"role\":\"button\", \"aria-label\": gantt.locale.labels.new_task});\r\n\t\t},\r\n\r\n\t\tmessageButtonAttrString: function(buttonLabel){\r\n\t\t\treturn \"tabindex='0' role='button' aria-label='\"+buttonLabel+\"'\";\r\n\t\t},\r\n\r\n\t\tmessageInfoAttr: function(div){\r\n\t\t\tdiv.setAttribute(\"role\", \"alert\");\r\n\t\t\t//div.setAttribute(\"tabindex\", \"-1\");\r\n\t\t},\r\n\r\n\t\tmessageModalAttr: function(div, uid){\r\n\t\t\tdiv.setAttribute(\"role\", \"dialog\");\r\n\t\t\tif(uid){\r\n\t\t\t\tdiv.setAttribute(\"aria-labelledby\", uid);\r\n\t\t\t}\r\n\r\n\t\t//\tdiv.setAttribute(\"tabindex\", \"-1\");\r\n\t\t},\r\n\r\n\t\tquickInfoAttr: function(div){\r\n\t\t\tdiv.setAttribute(\"role\", \"dialog\");\r\n\t\t},\r\n\r\n\t\tquickInfoHeaderAttrString: function(){\r\n\t\t\treturn \" role='heading' \";\r\n\t\t},\r\n\r\n\t\tquickInfoHeader: function(div, header){\r\n\t\t\tdiv.setAttribute(\"aria-label\", header);\r\n\t\t},\r\n\r\n\t\tquickInfoButtonAttrString: function(label){\r\n\t\t\treturn gantt._waiAria.getAttributeString({\"role\":\"button\", \"aria-label\":label, \"tabindex\":\"0\"});\r\n\t\t},\r\n\r\n\t\ttooltipAttr: function(div){\r\n\t\t\tdiv.setAttribute(\"role\", \"tooltip\");\r\n\t\t},\r\n\r\n\t\ttooltipVisibleAttr: function(div){\r\n\t\t\tdiv.setAttribute(\"aria-hidden\", \"false\");\r\n\t\t},\r\n\r\n\t\ttooltipHiddenAttr: function(div){\r\n\t\t\tdiv.setAttribute(\"aria-hidden\", \"true\");\r\n\t\t}\r\n\t};\r\n\r\n\tfunction isDisabled(){\r\n\t\treturn !gantt.config.wai_aria_attributes;\r\n\t}\r\n\r\n\tfor(var i in gantt._waiAria){\r\n\t\tgantt._waiAria[i] = (function(payload){\r\n\t\t\treturn function(){\r\n\t\t\t\tif(isDisabled()){\r\n\t\t\t\t\treturn \"\";\r\n\t\t\t\t}\r\n\t\t\t\treturn payload.apply(this, arguments);\r\n\t\t\t};\r\n\t\t})(gantt._waiAria[i]);\r\n\t}\r\n\r\n\r\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// c:/www-recent/gantt/sources/core/wai_aria.js\n// module id = 68\n// module chunks = 0","module.exports = function(gantt) {\r\n\tgantt._is_chart_visible = function () {\r\n\t\treturn !!this.config.show_chart;\r\n\t};\r\n\r\n\r\n\r\n\tgantt._get_links_data = function () {\r\n\t\treturn this.$data.linksStore.getVisibleItems();\r\n\t};\r\n\r\n\r\n\r\n\r\n\tgantt.isReadonly = function (item) {\r\n\t\tif (item && item[this.config.editable_property]) {\r\n\t\t\treturn false;\r\n\t\t} else {\r\n\t\t\treturn (item && item[this.config.readonly_property]) || this.config.readonly;\r\n\t\t}\r\n\t};\r\n\r\n\tgantt._get_line = function (step) {\r\n\t\tvar steps = {\r\n\t\t\t\"second\": 1,\r\n\t\t\t\"minute\": 60,\r\n\t\t\t\"hour\": 60 * 60,\r\n\t\t\t\"day\": 60 * 60 * 24,\r\n\t\t\t\"week\": 60 * 60 * 24 * 7,\r\n\t\t\t\"month\": 60 * 60 * 24 * 30,\r\n\t\t\t\"quarter\": 60 * 60 * 24 * 30 * 3,\r\n\t\t\t\"year\": 60 * 60 * 24 * 365\r\n\t\t};\r\n\t\treturn steps[step] || steps.hour;\r\n\t};\r\n\r\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// c:/www-recent/gantt/sources/core/tasks.js\n// module id = 69\n// module chunks = 0","var utils = require(\"../utils/utils\");\r\n\r\nmodule.exports = function(gantt) {\r\n\r\n\tgantt.load = function (url, type, callback) {\r\n\t\tthis._load_url = url;\r\n\t\tthis.assert(arguments.length, \"Invalid load arguments\");\r\n\r\n\t\tvar tp = 'json', cl = null;\r\n\t\tif (arguments.length >= 3) {\r\n\t\t\ttp = type;\r\n\t\t\tcl = callback;\r\n\t\t} else {\r\n\t\t\tif (typeof arguments[1] == \"string\")\r\n\t\t\t\ttp = arguments[1];\r\n\t\t\telse if (typeof arguments[1] == \"function\")\r\n\t\t\t\tcl = arguments[1];\r\n\t\t}\r\n\r\n\t\tthis._load_type = tp;\r\n\r\n\t\tthis.callEvent(\"onLoadStart\", [url, tp]);\r\n\r\n\t\tthis.ajax.get(url, gantt.bind(function (l) {\r\n\t\t\tthis.on_load(l, tp);\r\n\t\t\tthis.callEvent(\"onLoadEnd\", [url, tp]);\r\n\t\t\tif (typeof cl == \"function\")\r\n\t\t\t\tcl.call(this);\r\n\t\t}, this));\r\n\t};\r\n\tgantt.parse = function (data, type) {\r\n\t\tthis.on_load({xmlDoc: {responseText: data}}, type);\r\n\t};\r\n\r\n\tgantt.serialize = function (type) {\r\n\t\ttype = type || \"json\";\r\n\t\treturn this[type].serialize();\r\n\t};\r\n\r\n\t/*\r\n\ttasks and relations\r\n\t{\r\n\tdata:[\r\n\t\t{\r\n\t\t\t\"id\":\"string\",\r\n\t\t\t\"text\":\"...\",\r\n\t\t\t\"start_date\":\"Date or string\",\r\n\t\t\t\"end_date\":\"Date or string\",\r\n\t\t\t\"duration\":\"number\",\r\n\t\t\t\"progress\":\"0..1\",\r\n\t\t\t\"parent_id\":\"string\",\r\n\t\t\t\"order\":\"number\"\r\n\t\t},...],\r\n\tlinks:[\r\n\t\t{\r\n\t\t\tid:\"string\",\r\n\t\t\tsource:\"string\",\r\n\t\t\ttarget:\"string\",\r\n\t\t\ttype:\"string\"\r\n\t\t},...],\r\n\tcollections:{\r\n\t\t\tcollectionName:[\r\n\t\t\t\t{key:, label:, optional:...},...\r\n\t\t\t],...\r\n\t\t}\r\n\t}\r\n\r\n\t* */\r\n\r\n\tgantt.on_load = function (resp, type) {\r\n\t\tthis.callEvent(\"onBeforeParse\", []);\r\n\t\tif (!type)\r\n\t\t\ttype = \"json\";\r\n\t\tthis.assert(this[type], \"Invalid data type:'\" + type + \"'\");\r\n\r\n\t\tvar raw = resp.xmlDoc.responseText;\r\n\r\n\t\tvar data = this[type].parse(raw, resp);\r\n\t\tthis._process_loading(data);\r\n\t};\r\n\r\n\tgantt._process_loading = function (data) {\r\n\t\tif(data.collections)\r\n\t\t\tthis._load_collections(data.collections);\r\n\r\n\t\tthis.$data.tasksStore.parse(data.data);\r\n\t\tvar links = data.links || (data.collections ? data.collections.links : []);\r\n\t\tthis.$data.linksStore.parse(links);\r\n\r\n\t\t//this._sync_links();\r\n\t\tthis.callEvent(\"onParse\", []);\r\n\t\tthis.render();\r\n\t\tif(this.config.initial_scroll){\r\n\t\t\tvar firstTask = this.getTaskByIndex(0);\r\n\t\t\tvar id = firstTask ? firstTask.id : this.config.root_id;\r\n\t\t\tif(id)\r\n\t\t\t\tthis.showTask(id);\r\n\t\t}\r\n\t};\r\n\r\n\r\n\tgantt._load_collections = function (collections) {\r\n\t\tvar collections_loaded = false;\r\n\t\tfor (var key in collections) {\r\n\t\t\tif (collections.hasOwnProperty(key)) {\r\n\t\t\t\tcollections_loaded = true;\r\n\t\t\t\tvar collection = collections[key];\r\n\t\t\t\tvar arr = this.serverList[key];\r\n\t\t\t\tif (!arr) continue;\r\n\t\t\t\tarr.splice(0, arr.length); //clear old options\r\n\t\t\t\tfor (var j = 0; j < collection.length; j++) {\r\n\t\t\t\t\tvar option = collection[j];\r\n\t\t\t\t\tvar obj = this.copy(option);\r\n\t\t\t\t\tobj.key = obj.value;// resulting option object\r\n\r\n\t\t\t\t\tfor (var option_key in option) {\r\n\t\t\t\t\t\tif (option.hasOwnProperty(option_key)) {\r\n\t\t\t\t\t\t\tif (option_key == \"value\" || option_key == \"label\")\r\n\t\t\t\t\t\t\t\tcontinue;\r\n\t\t\t\t\t\t\tobj[option_key] = option[option_key]; // obj['value'] = option['value']\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tarr.push(obj);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (collections_loaded)\r\n\t\t\tthis.callEvent(\"onOptionsLoad\", []);\r\n\t};\r\n\r\n\tgantt.attachEvent(\"onBeforeTaskDisplay\", function (id, task) {\r\n\t\treturn !task.$ignore;\r\n\t});\r\n\r\n\tgantt.json = {\r\n\t\tparse: function (data) {\r\n\t\t\tgantt.assert(data, \"Invalid data\");\r\n\r\n\t\t\tif (typeof data == \"string\") {\r\n\t\t\t\tif (window.JSON)\r\n\t\t\t\t\tdata = JSON.parse(data);\r\n\t\t\t\telse {\r\n\t\t\t\t\tgantt.assert(false, \"JSON is not supported\");\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tif (data.dhx_security)\r\n\t\t\t\tgantt.security_key = data.dhx_security;\r\n\t\t\treturn data;\r\n\t\t},\r\n\t\tserializeTask: function (task) {\r\n\t\t\treturn this._copyObject(task);\r\n\t\t},\r\n\t\tserializeLink: function (link) {\r\n\t\t\treturn this._copyLink(link);\r\n\t\t},\r\n\t\t_copyLink: function (obj) {\r\n\t\t\tvar copy = {};\r\n\t\t\tfor (var key in obj)\r\n\t\t\t\tcopy[key] = obj[key];\r\n\t\t\treturn copy;\r\n\t\t},\r\n\t\t_copyObject: function (obj) {\r\n\t\t\tvar copy = {};\r\n\t\t\tfor (var key in obj) {\r\n\t\t\t\tif (key.charAt(0) == \"$\")\r\n\t\t\t\t\tcontinue;\r\n\t\t\t\tcopy[key] = obj[key];\r\n\r\n\t\t\t\tif (copy[key] instanceof Date) {\r\n\t\t\t\t\tcopy[key] = gantt.templates.xml_format(copy[key]);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn copy;\r\n\t\t},\r\n\t\tserialize: function () {\r\n\t\t\tvar tasks = [];\r\n\t\t\tvar links = [];\r\n\r\n\t\t\tgantt.eachTask(function (obj) {\r\n\t\t\t\tgantt.resetProjectDates(obj);\r\n\t\t\t\ttasks.push(this.serializeTask(obj));\r\n\t\t\t}, gantt.config.root_id, this);\r\n\r\n\t\t\tvar rawLinks = gantt.getLinks();\r\n\t\t\tfor (var i = 0; i < rawLinks.length; i++) {\r\n\t\t\t\tlinks.push(this.serializeLink(rawLinks[i]));\r\n\t\t\t}\r\n\r\n\t\t\treturn {\r\n\t\t\t\tdata: tasks,\r\n\t\t\t\tlinks: links\r\n\t\t\t};\r\n\t\t}\r\n\t};\r\n\r\n\t/*\r\n\t<data>\r\n\t\t<task id:\"some\" parent_id=\"0\" progress=\"0.5\">\r\n\t\t\t<text>My task 1</text>\r\n\t\t\t<start_date>16.08.2013</start_date>\r\n\t\t\t<end_date>22.08.2013</end_date>\r\n\t\t</task>\r\n\t\t<coll_options>\r\n\t\t\t<links>\r\n\t\t\t\t<link source='a1' target='b2' type='c3' />\r\n\t\t\t</links>\r\n\t\t</coll_options>\r\n\t</data>\r\n\t*/\r\n\r\n\tgantt.xml = {\r\n\t\t_xmlNodeToJSON: function (node, attrs_only) {\r\n\t\t\tvar t = {};\r\n\t\t\tfor (var i = 0; i < node.attributes.length; i++)\r\n\t\t\t\tt[node.attributes[i].name] = node.attributes[i].value;\r\n\r\n\t\t\tif (!attrs_only) {\r\n\t\t\t\tfor (var i = 0; i < node.childNodes.length; i++) {\r\n\t\t\t\t\tvar child = node.childNodes[i];\r\n\t\t\t\t\tif (child.nodeType == 1)\r\n\t\t\t\t\t\tt[child.tagName] = child.firstChild ? child.firstChild.nodeValue : \"\";\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (!t.text) t.text = node.firstChild ? node.firstChild.nodeValue : \"\";\r\n\t\t\t}\r\n\r\n\t\t\treturn t;\r\n\t\t},\r\n\t\t_getCollections: function (loader) {\r\n\t\t\tvar collection = {};\r\n\t\t\tvar opts = gantt.ajax.xpath(\"//coll_options\", loader);\r\n\t\t\tfor (var i = 0; i < opts.length; i++) {\r\n\t\t\t\tvar bind = opts[i].getAttribute(\"for\");\r\n\t\t\t\tvar arr = collection[bind] = [];\r\n\t\t\t\tvar itms = gantt.ajax.xpath(\".//item\", opts[i]);\r\n\t\t\t\tfor (var j = 0; j < itms.length; j++) {\r\n\t\t\t\t\tvar itm = itms[j];\r\n\t\t\t\t\tvar attrs = itm.attributes;\r\n\t\t\t\t\tvar obj = {key: itms[j].getAttribute(\"value\"), label: itms[j].getAttribute(\"label\")};\r\n\t\t\t\t\tfor (var k = 0; k < attrs.length; k++) {\r\n\t\t\t\t\t\tvar attr = attrs[k];\r\n\t\t\t\t\t\tif (attr.nodeName == \"value\" || attr.nodeName == \"label\")\r\n\t\t\t\t\t\t\tcontinue;\r\n\t\t\t\t\t\tobj[attr.nodeName] = attr.nodeValue;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tarr.push(obj);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn collection;\r\n\t\t},\r\n\t\t_getXML: function (text, loader, toptag) {\r\n\t\t\ttoptag = toptag || \"data\";\r\n\t\t\tif (!loader.getXMLTopNode) {\r\n\t\t\t\tloader = gantt.ajax.parse(loader);\r\n\t\t\t}\r\n\r\n\t\t\tvar xml = gantt.ajax.xmltop(toptag, loader.xmlDoc);\r\n\t\t\tif (xml.tagName != toptag) throw \"Invalid XML data\";\r\n\r\n\t\t\tvar skey = xml.getAttribute(\"dhx_security\");\r\n\t\t\tif (skey)\r\n\t\t\t\tgantt.security_key = skey;\r\n\r\n\t\t\treturn xml;\r\n\t\t},\r\n\t\tparse: function (text, loader) {\r\n\t\t\tloader = this._getXML(text, loader);\r\n\t\t\tvar data = {};\r\n\r\n\t\t\tvar evs = data.data = [];\r\n\t\t\tvar xml = gantt.ajax.xpath(\"//task\", loader);\r\n\r\n\t\t\tfor (var i = 0; i < xml.length; i++)\r\n\t\t\t\tevs[i] = this._xmlNodeToJSON(xml[i]);\r\n\r\n\t\t\tdata.collections = this._getCollections(loader);\r\n\t\t\treturn data;\r\n\t\t},\r\n\t\t_copyLink: function (obj) {\r\n\t\t\treturn \"<item id='\" + obj.id + \"' source='\" + obj.source + \"' target='\" + obj.target + \"' type='\" + obj.type + \"' />\";\r\n\t\t},\r\n\t\t_copyObject: function (obj) {\r\n\t\t\treturn \"<task id='\" + obj.id + \"' parent='\" + (obj.parent || \"\") + \"' start_date='\" + obj.start_date + \"' duration='\" + obj.duration + \"' open='\" + (!!obj.open) + \"' progress='\" + obj.progress + \"' end_date='\" + obj.end_date + \"'><![CDATA[\" + obj.text + \"]]></task>\";\r\n\t\t},\r\n\t\tserialize: function () {\r\n\t\t\tvar tasks = [];\r\n\t\t\tvar links = [];\r\n\r\n\t\t\tvar json = gantt.json.serialize();\r\n\t\t\tfor (var i = 0, len = json.data.length; i < len; i++) {\r\n\t\t\t\ttasks.push(this._copyObject(json.data[i]));\r\n\t\t\t}\r\n\t\t\tfor (var i = 0, len = json.links.length; i < len; i++) {\r\n\t\t\t\tlinks.push(this._copyLink(json.links[i]));\r\n\t\t\t}\r\n\t\t\treturn \"<data>\" + tasks.join(\"\") + \"<coll_options for='links'>\" + links.join(\"\") + \"</coll_options></data>\";\r\n\t\t}\r\n\t};\r\n\r\n\r\n\tgantt.oldxml = {\r\n\t\tparse: function (text, loader) {\r\n\t\t\tloader = gantt.xml._getXML(text, loader, \"projects\");\r\n\t\t\tvar data = {collections: {links: []}};\r\n\r\n\t\t\tvar evs = data.data = [];\r\n\t\t\tvar xml = gantt.ajax.xpath(\"//task\", loader);\r\n\r\n\t\t\tfor (var i = 0; i < xml.length; i++) {\r\n\t\t\t\tevs[i] = gantt.xml._xmlNodeToJSON(xml[i]);\r\n\t\t\t\tvar parent = xml[i].parentNode;\r\n\r\n\t\t\t\tif (parent.tagName == \"project\")\r\n\t\t\t\t\tevs[i].parent = \"project-\" + parent.getAttribute(\"id\");\r\n\t\t\t\telse\r\n\t\t\t\t\tevs[i].parent = parent.parentNode.getAttribute(\"id\");\r\n\t\t\t}\r\n\r\n\t\t\txml = gantt.ajax.xpath(\"//project\", loader);\r\n\t\t\tfor (var i = 0; i < xml.length; i++) {\r\n\t\t\t\tvar ev = gantt.xml._xmlNodeToJSON(xml[i], true);\r\n\t\t\t\tev.id = \"project-\" + ev.id;\r\n\t\t\t\tevs.push(ev);\r\n\t\t\t}\r\n\r\n\t\t\tfor (var i = 0; i < evs.length; i++) {\r\n\t\t\t\tvar ev = evs[i];\r\n\t\t\t\tev.start_date = ev.startdate || ev.est;\r\n\t\t\t\tev.end_date = ev.enddate;\r\n\t\t\t\tev.text = ev.name;\r\n\t\t\t\tev.duration = ev.duration / 8;\r\n\t\t\t\tev.open = 1;\r\n\t\t\t\tif (!ev.duration && !ev.end_date) ev.duration = 1;\r\n\t\t\t\tif (ev.predecessortasks)\r\n\t\t\t\t\tdata.collections.links.push({\r\n\t\t\t\t\t\ttarget: ev.id,\r\n\t\t\t\t\t\tsource: ev.predecessortasks,\r\n\t\t\t\t\t\ttype: gantt.config.links.finish_to_start\r\n\t\t\t\t\t});\r\n\t\t\t}\r\n\r\n\t\t\treturn data;\r\n\t\t},\r\n\t\tserialize: function () {\r\n\t\t\tgantt.message(\"Serialization to 'old XML' is not implemented\");\r\n\t\t}\r\n\t};\r\n\r\n\tgantt.serverList = function (name, array) {\r\n\t\tif (array) {\r\n\t\t\tthis.serverList[name] = array.slice(0);\r\n\t\t} else if (!this.serverList[name]) {\r\n\t\t\tthis.serverList[name] = [];\r\n\t\t}\r\n\t\treturn this.serverList[name];\r\n\t};\r\n\r\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// c:/www-recent/gantt/sources/core/load.js\n// module id = 70\n// module chunks = 0","var CalendarManager = require(\"./calendar_manager\"),\r\n\tTimeCalculator = require(\"./time_calculator\"),\r\n\tworktimeFacadeFactory = require(\"../facades/worktime_calendars\"),\r\n\tutils = require(\"../../utils/utils\");\r\n\r\nmodule.exports = function (gantt) {\r\n\tvar manager = new CalendarManager(gantt),\r\n\ttimeCalculator = new TimeCalculator(manager);\r\n\tvar facade = worktimeFacadeFactory.create(manager, timeCalculator);\r\n\tutils.mixin(gantt, facade);\r\n};\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// c:/www-recent/gantt/sources/core/worktime/work_time.js\n// module id = 71\n// module chunks = 0","var utils = require(\"../../utils/utils\");\r\nvar createArgumentsHelper = require(\"./calendar_arguments_helper\");\r\nvar CalendarWorktimeStrategy = require(\"./strategy/calendar_strategy\");\r\n\r\nfunction CalendarManager (gantt){\r\n\tthis.$gantt = gantt;\r\n\tthis._calendars = {};\r\n}\r\n\r\nCalendarManager.prototype = {\r\n\t_calendars: {},\r\n\t_getDayHoursForMultiple: function (calendars, date) {\r\n\t\tvar units = [],\r\n\t\t\ttick = true,\r\n\t\t\tcurrPos = 0,\r\n\t\t\tis_work_hour = false,\r\n\t\t\tstart = this.$gantt.date.day_start(new Date(date));\r\n\t\tfor (var hour = 0; hour < 24; hour++) {\r\n\t\t\tis_work_hour = calendars.reduce(function (acc, calendar) {\r\n\t\t\t\treturn acc && calendar._is_work_hour(start);\r\n\t\t\t}, true);\r\n\t\t\tif (is_work_hour) {\r\n\t\t\t\tif (tick) {\r\n\t\t\t\t\tunits[currPos] = hour;\r\n\t\t\t\t\tunits[currPos + 1] = (hour + 1);\r\n\t\t\t\t\tcurrPos += 2;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tunits[currPos - 1] += 1;\r\n\t\t\t\t}\r\n\t\t\t\ttick = false;\r\n\t\t\t} else if (!tick) {\r\n\t\t\t\ttick = true;\r\n\t\t\t}\r\n\t\t\tstart = this.$gantt.date.add(start, 1, \"hour\");\r\n\t\t}\r\n\t\tif (!units.length)\r\n\t\t\tunits = false;\r\n\t\treturn units;\r\n\t},\r\n\tmergeCalendars: function () {\r\n\t\tvar newCalendar = this.createCalendar(),\r\n\t\t\tday,\r\n\t\t\tunits = [];\r\n\t\tvar calendars = Array.prototype.slice.call(arguments, 0);\r\n\t\tnewCalendar.worktime.hours = [0, 24];\r\n\t\tnewCalendar.worktime.dates = {};\r\n\t\tvar start = this.$gantt.date.day_start(new Date(259200000)); // 1970 day=0\r\n\t\tfor (day = 0; day < 7; day++) {\r\n\t\t\tunits = this._getDayHoursForMultiple(calendars, start);\r\n\t\t\tnewCalendar.worktime.dates[day] = units;\r\n\t\t\tstart = this.$gantt.date.add(start, 1, \"day\");\r\n\t\t}\r\n\t\tfor (var i = 0; i < calendars.length; i++) {\r\n\t\t\tfor (var value in calendars[i].worktime.dates) if (+value > 10000) {\r\n\t\t\t\tunits = this._getDayHoursForMultiple(calendars, new Date(+value));\r\n\t\t\t\tnewCalendar.worktime.dates[value] = units;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn newCalendar;\r\n\t},\r\n\r\n\t_convertWorktimeSettings: function (settings) {\r\n\t\tvar days = settings.days;\r\n\t\tif (days) {\r\n\t\t\tsettings.dates = settings.dates || {};\r\n\t\t\tfor (var i = 0; i < days.length; i++) {\r\n\t\t\t\tsettings.dates[i] = days[i];\r\n\t\t\t\tif (!(days[i] instanceof Array)) {\r\n\t\t\t\t\tsettings.dates[i] = !!days[i];\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tdelete settings.days;\r\n\t\t}\r\n\t\treturn settings;\r\n\t},\r\n\r\n\tcreateCalendar: function (parentCalendar) {\r\n\t\tvar settings;\r\n\r\n\t\tif (!parentCalendar) {\r\n\t\t\tparentCalendar = {};\r\n\t\t}\r\n\r\n\t\tif (parentCalendar.worktime) {\r\n\t\t\tsettings = utils.copy(parentCalendar.worktime);\r\n\t\t} else {\r\n\t\t\tsettings = utils.copy(parentCalendar);\r\n\t\t}\r\n\r\n\t\tvar defaults = utils.copy(this.defaults.fulltime.worktime);\r\n\t\tutils.mixin(settings, defaults);\r\n\r\n\t\tvar id = utils.uid();\r\n\t\tvar calendar = {\r\n\t\t\tid: id + \"\",\r\n\t\t\tworktime: this._convertWorktimeSettings(settings)\r\n\t\t};\r\n\r\n\t\tvar apiCore = new CalendarWorktimeStrategy(this.$gantt, createArgumentsHelper(this.$gantt));\r\n\t\tutils.mixin(apiCore, calendar);\r\n\r\n\t\t// validate/check if empty calendar\r\n\t\tif (!apiCore._tryChangeCalendarSettings(function () {\r\n\t\t\t})) {\r\n\t\t\treturn null;\r\n\t\t} else {\r\n\t\t\treturn apiCore;\r\n\t\t}\r\n\t},\r\n\r\n\tgetCalendar: function (id) {\r\n\t\tid = id || \"global\";\r\n\t\tthis.createDefaultCalendars();\r\n\t\treturn this._calendars[id];\r\n\t},\r\n\r\n\tgetCalendars: function () {\r\n\t\tvar res = [];\r\n\t\tfor (var i in this._calendars) {\r\n\t\t\tres.push(this.getCalendar(i));\r\n\t\t}\r\n\t\treturn res;\r\n\t},\r\n\r\n\tgetTaskCalendar: function (task) {\r\n\t\tvar config = this.$gantt.$services.config();\r\n\t\tif (!task) {\r\n\t\t\treturn this.getCalendar();\r\n\t\t} else if (task[config.calendar_property]) {\r\n\t\t\treturn this.getCalendar(task[config.calendar_property]);\r\n\t\t} else if (config.resource_calendars) {\r\n\r\n\t\t\tfor (var field in config.resource_calendars) {\r\n\t\t\t\tvar resource = config.resource_calendars[field];\r\n\t\t\t\tif (task[field]) {\r\n\t\t\t\t\tvar calendarId = resource[task[field]];\r\n\t\t\t\t\tif (calendarId) {\r\n\t\t\t\t\t\treturn this.getCalendar(calendarId);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn this.getCalendar();\r\n\t},\r\n\r\n\taddCalendar: function (calendar) { // puts new calendar to Global Storage - gantt.calendarManager._calendars {}\r\n\t\tif (!(calendar instanceof CalendarWorktimeStrategy)) {\r\n\t\t\tvar id = calendar.id;\r\n\t\t\tcalendar = this.createCalendar(calendar);\r\n\t\t\tcalendar.id = id;\r\n\t\t}\r\n\t\tvar config = this.$gantt.$services.config();\r\n\r\n\t\tcalendar.id = calendar.id || utils.uid();\r\n\t\tthis._calendars[calendar.id] = calendar;\r\n\t\tif (!config.worktimes)\r\n\t\t\tconfig.worktimes = {};\r\n\t\tconfig.worktimes[calendar.id] = calendar.worktime;\r\n\t\treturn calendar.id;\r\n\t},\r\n\r\n\tdeleteCalendar: function (calendar) {\r\n\t\tvar config = this.$gantt.$services.config();\r\n\t\tif (!calendar) return false;\r\n\t\tif (this._calendars[calendar]) {\r\n\t\t\tdelete this._calendars[calendar];\r\n\t\t\tif (config.worktimes && config.worktimes[calendar])\r\n\t\t\t\tdelete config.worktimes[calendar];\r\n\t\t\treturn true;\r\n\t\t} else {\r\n\t\t\treturn false;\r\n\t\t}\t},\r\n\r\n\trestoreConfigCalendars: function (configs) {\r\n\t\tfor (var i in configs) {\r\n\t\t\tif (this._calendars[i])\r\n\t\t\t\tcontinue;\r\n\r\n\t\t\tvar settings = configs[i];\r\n\t\t\tvar calendar = this.createCalendar(settings);\r\n\t\t\tcalendar.id = i;\r\n\t\t\tthis.addCalendar(calendar);\r\n\t\t}\r\n\t},\r\n\r\n\tdefaults: {\r\n\t\tglobal: {\r\n\t\t\tid: \"global\",\r\n\t\t\tworktime: {\r\n\t\t\t\thours: [8, 17],\r\n\t\t\t\tdays: [0, 1, 1, 1, 1, 1, 0]\r\n\t\t\t}\r\n\t\t},\r\n\t\tfulltime: {\r\n\t\t\tid: \"fulltime\",\r\n\t\t\tworktime: {\r\n\t\t\t\thours: [0, 24],\r\n\t\t\t\tdays: [1, 1, 1, 1, 1, 1, 1]\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\r\n\tcreateDefaultCalendars: function () {\r\n\t\tvar config = this.$gantt.$services.config();\r\n\t\tthis.restoreConfigCalendars(this.defaults);\r\n\t\tthis.restoreConfigCalendars(config.worktimes);\r\n\t}\r\n};\r\n\r\nmodule.exports = CalendarManager;\n\n\n//////////////////\n// WEBPACK FOOTER\n// c:/www-recent/gantt/sources/core/worktime/calendar_manager.js\n// module id = 72\n// module chunks = 0","var Cache = require(\"./calendar_workunit_cache\"),\r\n\tutils = require(\"../../../utils/utils\");\r\n\r\nfunction CalendarWorkTimeStrategy(gantt, argumentsHelper){\r\n\tthis.argumentsHelper = argumentsHelper;\r\n\tthis.$gantt = gantt;\r\n\tthis._workingUnitsCache = new Cache();\r\n}\r\n\r\nCalendarWorkTimeStrategy.prototype = {\r\n\tunits: [\r\n\t\t\"year\",\r\n\t\t\"month\",\r\n\t\t\"week\",\r\n\t\t\"day\",\r\n\t\t\"hour\",\r\n\t\t\"minute\"\r\n\t],\r\n\t// cache previously calculated worktime\r\n\t_getUnitOrder: function (unit) {\r\n\t\tfor (var i = 0, len = this.units.length; i < len; i++) {\r\n\t\t\tif (this.units[i] == unit)\r\n\t\t\t\treturn i;\r\n\t\t}\r\n\t},\r\n\t_timestamp: function (settings) {\r\n\r\n\t\tvar timestamp = null;\r\n\t\tif ((settings.day || settings.day === 0)) {\r\n\t\t\ttimestamp = settings.day;\r\n\t\t} else if (settings.date) {\r\n\t\t\t// store worktime datestamp in utc so it could be recognized in different timezones (e.g. opened locally and sent to the export service in different timezone)\r\n\t\t\ttimestamp = Date.UTC(settings.date.getFullYear(), settings.date.getMonth(), settings.date.getDate());\r\n\t\t}\r\n\t\treturn timestamp;\r\n\t},\r\n\t_checkIfWorkingUnit: function (date, unit, order) {\r\n\t\tif (order === undefined) {\r\n\t\t\torder = this._getUnitOrder(unit);\r\n\t\t}\r\n\r\n\t\t// disable worktime check for custom time units\r\n\t\tif (order === undefined) {\r\n\t\t\treturn true;\r\n\t\t}\r\n\t\tif (order) {\r\n\t\t\t//check if bigger time unit is a work time (hour < day < month...)\r\n\t\t\t//i.e. don't check particular hour if the whole day is marked as not working\r\n\t\t\tif (!this._isWorkTime(date, this.units[order - 1], order - 1))\r\n\t\t\t\treturn false;\r\n\t\t}\r\n\t\tif (!this[\"_is_work_\" + unit])\r\n\t\t\treturn true;\r\n\t\treturn this[\"_is_work_\" + unit](date);\r\n\t},\r\n\t//checkings for particular time units\r\n\t//methods for month-year-week can be defined, otherwise always return 'true'\r\n\t_is_work_day: function (date) {\r\n\t\tvar val = this._getWorkHours(date);\r\n\r\n\t\tif (val instanceof Array) {\r\n\t\t\treturn val.length > 0;\r\n\t\t}\r\n\t\treturn false;\r\n\t},\r\n\t_is_work_hour: function (date) {\r\n\t\tvar hours = this._getWorkHours(date); // [7,12] or []\r\n\t\tvar hour = date.getHours();\r\n\t\tfor (var i = 0; i < hours.length; i += 2) {\r\n\t\t\tif (hours[i + 1] === undefined) {\r\n\t\t\t\treturn hours[i] == hour;\r\n\t\t\t} else {\r\n\t\t\t\tif (hour >= hours[i] && hour < hours[i + 1])\r\n\t\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn false;\r\n\t},\r\n\t_internDatesPull: {},\r\n\t_nextDate: function (start, unit, step) {\r\n\t\tvar dateHelper = this.$gantt.date;\r\n\t\treturn dateHelper.add(start, step, unit);\r\n\r\n\t\t/*var start_value = +start,\r\n\t\t\tkey = unit + \"_\" + step;\r\n\t\tvar interned = this._internDatesPull[key];\r\n\t\tif(!interned){\r\n\t\t\tinterned = this._internDatesPull[key] = {};\r\n\t\t}\r\n\t\tvar calculated;\r\n\t\tif(!interned[start_value]){\r\n\t\t\tinterned[start_value] = calculated = dateHelper.add(start, step, unit);\r\n\t\t\t//interned[start_value] = dateHelper.add(start, step, unit);\r\n\t\t}\r\n\t\treturn calculated || interned[start_value];*/\r\n\t},\r\n\t_getWorkUnitsBetweenGeneric: function (from, to, unit, step) {\r\n\t\tvar dateHelper = this.$gantt.date;\r\n\t\tvar start = new Date(from),\r\n\t\t\tend = new Date(to);\r\n\t\tstep = step || 1;\r\n\t\tvar units = 0;\r\n\r\n\r\n\t\tvar next = null;\r\n\t\tvar stepStart,\r\n\t\t\tstepEnd;\r\n\r\n\t\t// calculating decimal durations, i.e. 2016-09-20 00:05:00 - 2016-09-20 01:00:00 ~ 0.95 instead of 1\r\n\t\t// and also  2016-09-20 00:00:00 - 2016-09-20 00:05:00 ~ 0.05 instead of 1\r\n\t\t// durations must be rounded later\r\n\t\tvar checkFirst = false;\r\n\t\tstepStart = dateHelper[unit + \"_start\"](new Date(start));\r\n\t\tif (stepStart.valueOf() != start.valueOf()) {\r\n\t\t\tcheckFirst = true;\r\n\t\t}\r\n\t\tvar checkLast = false;\r\n\t\tstepEnd = dateHelper[unit + \"_start\"](new Date(to));\r\n\t\tif (stepEnd.valueOf() != to.valueOf()) {\r\n\t\t\tcheckLast = true;\r\n\t\t}\r\n\r\n\t\tvar isLastStep = false;\r\n\t\twhile (start.valueOf() < end.valueOf()) {\r\n\t\t\tnext = this._nextDate(start, unit, step);\r\n\t\t\tisLastStep = (next.valueOf() > end.valueOf());\r\n\r\n\t\t\tif (this._isWorkTime(start, unit)) {\r\n\t\t\t\tif (checkFirst || (checkLast && isLastStep)) {\r\n\t\t\t\t\tstepStart = dateHelper[unit + \"_start\"](new Date(start));\r\n\t\t\t\t\tstepEnd = dateHelper.add(stepStart, step, unit);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (checkFirst) {\r\n\t\t\t\t\tcheckFirst = false;\r\n\t\t\t\t\tnext = this._nextDate(stepStart, unit, step);\r\n\t\t\t\t\tunits += ((stepEnd.valueOf() - start.valueOf()) / (stepEnd.valueOf() - stepStart.valueOf()));\r\n\t\t\t\t} else if (checkLast && isLastStep) {\r\n\t\t\t\t\tcheckLast = false;\r\n\t\t\t\t\tunits += ((end.valueOf() - start.valueOf()) / (stepEnd.valueOf() - stepStart.valueOf()));\r\n\r\n\t\t\t\t} else {\r\n\t\t\t\t\tunits++;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tstart = next;\r\n\t\t}\r\n\t\treturn units;\r\n\t},\r\n\t_getHoursPerDay: function (date) {\r\n\t\tvar hours = this._getWorkHours(date);\r\n\t\tvar res = 0;\r\n\t\tfor (var i = 0; i < hours.length; i += 2) {\r\n\t\t\tres += ((hours[i + 1] - hours[i]) || 0);\r\n\t\t}\r\n\t\treturn res;\r\n\t},\r\n\t_getWorkHoursForRange: function (from, to) {\r\n\t\tvar hours = 0;\r\n\t\tvar start = new Date(from),\r\n\t\t\tend = new Date(to);\r\n\r\n\t\twhile (start.valueOf() < end.valueOf()) {\r\n\t\t\tif (this._isWorkTime(start, \"day\"))\r\n\t\t\t\thours += this._getHoursPerDay(start);\r\n\t\t\tstart = this._nextDate(start, \"day\", 1);\r\n\t\t}\r\n\t\treturn hours;\r\n\t},\r\n\t_getWorkUnitsBetweenHours: function (from, to, unit, step) {\r\n\t\tvar start = new Date(from),\r\n\t\t\tend = new Date(to);\r\n\t\tstep = step || 1;\r\n\r\n\t\tvar firstDayStart = new Date(start);\r\n\t\tvar firstDayEnd = this.$gantt.date.add(this.$gantt.date.day_start(new Date(start)), 1, \"day\");\r\n\r\n\t\tif (end.valueOf() <= firstDayEnd.valueOf()) {\r\n\t\t\treturn this._getWorkUnitsBetweenGeneric(from, to, unit, step);\r\n\t\t} else {\r\n\r\n\t\t\tvar lastDayStart = this.$gantt.date.day_start(new Date(end));\r\n\t\t\tvar lastDayEnd = end;\r\n\r\n\t\t\tvar startPart = this._getWorkUnitsBetweenGeneric(firstDayStart, firstDayEnd, unit, step);\r\n\t\t\tvar endPart = this._getWorkUnitsBetweenGeneric(lastDayStart, lastDayEnd, unit, step);\r\n\r\n\t\t\tvar hourRange = this._getWorkHoursForRange(firstDayEnd, lastDayStart);\r\n\t\t\thourRange = ((hourRange / step) + startPart + endPart);\r\n\r\n\t\t\treturn hourRange;\r\n\t\t}\r\n\t},\r\n\r\n\t_getCalendar: function () {\r\n\t\treturn this.worktime;\r\n\t},\r\n\t_setCalendar: function (settings) {\r\n\t\tthis.worktime = settings;\r\n\t},\r\n\r\n\t_tryChangeCalendarSettings: function (payload) {\r\n\t\tvar backup = JSON.stringify(this._getCalendar());\r\n\t\tpayload();\r\n\t\tif (this._isEmptyCalendar(this._getCalendar())) {\r\n\t\t\tthis.$gantt.assert(false, \"Invalid calendar settings, no worktime available\");\r\n\t\t\tthis._setCalendar(JSON.parse(backup));\r\n\t\t\tthis._workingUnitsCache.clear();\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\treturn true;\r\n\r\n\t},\r\n\r\n\t_isEmptyCalendar: function (settings) {\r\n\t\tvar result = false,\r\n\t\t\tdatesArray = [],\r\n\t\t\tisFullWeekSet = true;\r\n\t\tfor (var i in settings.dates) {\r\n\t\t\tresult |= !!settings.dates[i];\r\n\t\t\tdatesArray.push(i);\r\n\t\t}\r\n\r\n\t\tvar checkFullArray = [];\r\n\t\tfor (var i = 0; i < datesArray.length; i++) {\r\n\t\t\tif (datesArray[i] < 10) {\r\n\t\t\t\tcheckFullArray.push(datesArray[i]);\r\n\t\t\t}\r\n\t\t}\r\n\t\tcheckFullArray.sort();\r\n\r\n\t\tfor (var i = 0; i < 7; i++) {\r\n\t\t\tif (checkFullArray[i] != i)\r\n\t\t\t\tisFullWeekSet = false;\r\n\t\t}\r\n\t\tif (isFullWeekSet)\r\n\t\t\treturn !result;\r\n\t\treturn !(result || !!settings.hours); // can still return false if separated dates are set to true\r\n\t},\r\n\r\n\tgetWorkHours: function () {\r\n\t\tvar config = this.argumentsHelper.getWorkHoursArguments.apply(this.argumentsHelper, arguments);\r\n\t\treturn this._getWorkHours(config.date);\r\n\t},\r\n\t_getWorkHours: function (date) {\r\n\t\tvar t = this._timestamp({date: date});\r\n\t\tvar hours = true;\r\n\t\tvar calendar = this._getCalendar();\r\n\t\tif (calendar.dates[t] !== undefined) {\r\n\t\t\thours = calendar.dates[t];//custom day\r\n\t\t} else if (calendar.dates[date.getDay()] !== undefined) {\r\n\t\t\thours = calendar.dates[date.getDay()];//week day\r\n\t\t}\r\n\t\tif (hours === true) {\r\n\t\t\treturn calendar.hours;\r\n\t\t} else if (hours) {\r\n\t\t\treturn hours;\r\n\t\t}\r\n\t\treturn [];\r\n\t},\r\n\r\n\tsetWorkTime: function (settings) {\r\n\t\treturn this._tryChangeCalendarSettings(utils.bind(function () {\r\n\t\t\tvar hours = settings.hours !== undefined ? settings.hours : true;\r\n\t\t\tvar timestamp = this._timestamp(settings);\r\n\t\t\tif (timestamp !== null) {\r\n\t\t\t\tthis._getCalendar().dates[timestamp] = hours;\r\n\t\t\t} else {\r\n\t\t\t\tthis._getCalendar().hours = hours;\r\n\t\t\t}\r\n\t\t\tthis._workingUnitsCache.clear();\r\n\t\t}, this));\r\n\t},\r\n\r\n\tunsetWorkTime: function (settings) {\r\n\t\treturn this._tryChangeCalendarSettings(utils.bind(function () {\r\n\t\t\tif (!settings) {\r\n\t\t\t\tthis.reset_calendar();\r\n\t\t\t} else {\r\n\r\n\t\t\t\tvar timestamp = this._timestamp(settings);\r\n\r\n\t\t\t\tif (timestamp !== null) {\r\n\t\t\t\t\tdelete this._getCalendar().dates[timestamp];\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t// Clear work units cache\r\n\t\t\tthis._workingUnitsCache.clear();\r\n\t\t}, this));\r\n\t},\r\n\r\n\t_isWorkTime: function (date, unit, order) {\r\n\t\t//Check if this item has in the cache\r\n\t\tvar is_work_unit = this._workingUnitsCache.get(unit, date);\r\n\r\n\t\tif (is_work_unit == -1) {\r\n\t\t\t// calculate if not cached\r\n\t\t\tis_work_unit = this._checkIfWorkingUnit(date, unit, order);\r\n\t\t\tthis._workingUnitsCache.put(unit, date, is_work_unit);\r\n\t\t}\r\n\r\n\t\treturn is_work_unit;\r\n\t},\r\n\r\n\tisWorkTime: function () {\r\n\t\tvar config =  this.argumentsHelper.isWorkTimeArguments.apply( this.argumentsHelper, arguments);\r\n\t\treturn this._isWorkTime(config.date, config.unit);\r\n\t},\r\n\r\n\tcalculateDuration: function () {\r\n\t\tvar config =  this.argumentsHelper.getDurationArguments.apply( this.argumentsHelper, arguments);\r\n\r\n\t\tif (!config.unit) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t\tvar res = 0;\r\n\t\tif (config.unit == \"hour\") {\r\n\t\t\tres = this._getWorkUnitsBetweenHours(config.start_date, config.end_date, config.unit, config.step);\r\n\t\t} else {\r\n\t\t\tres = this._getWorkUnitsBetweenGeneric(config.start_date, config.end_date, config.unit, config.step);\r\n\t\t}\r\n\r\n\t\t// getDuration.. returns decimal durations\r\n\t\treturn Math.round(res);\r\n\t},\r\n\thasDuration: function () {\r\n\t\tvar config =  this.argumentsHelper.getDurationArguments.apply( this.argumentsHelper, arguments);\r\n\r\n\t\tvar from = config.start_date,\r\n\t\t\tto = config.end_date,\r\n\t\t\tunit = config.unit,\r\n\t\t\tstep = config.step;\r\n\r\n\t\tif (!unit) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\tvar start = new Date(from),\r\n\t\t\tend = new Date(to);\r\n\t\tstep = step || 1;\r\n\r\n\t\twhile (start.valueOf() < end.valueOf()) {\r\n\t\t\tif (this._isWorkTime(start, unit))\r\n\t\t\t\treturn true;\r\n\t\t\tstart = this._nextDate(start, unit, step);\r\n\t\t}\r\n\t\treturn false;\r\n\t},\r\n\r\n\tcalculateEndDate: function () {\r\n\t\tvar config =  this.argumentsHelper.calculateEndDateArguments.apply( this.argumentsHelper, arguments);\r\n\r\n\t\tvar from = config.start_date,\r\n\t\t\tduration = config.duration,\r\n\t\t\tunit = config.unit,\r\n\t\t\tstep = config.step;\r\n\r\n\t\tvar mult = (config.duration >= 0) ? 1 : -1;\r\n\t\treturn this._calculateEndDate(from, duration, unit, step * mult);\r\n\t},\r\n\t_calculateEndDate: function (from, duration, unit, step) {\r\n\t\tif (!unit)\r\n\t\t\treturn false;\r\n\r\n\t\tvar start = new Date(from),\r\n\t\t\tadded = 0;\r\n\t\tstep = step || 1;\r\n\t\tduration = Math.abs(duration * 1);\r\n\r\n\t\twhile (added < duration) {\r\n\t\t\tvar next = this._nextDate(start, unit, step);\r\n\t\t\t//if(this.isWorkTime(step > 0 ? start : next, unit))\r\n\t\t\tif (this._isWorkTime(step > 0 ? new Date(next.valueOf() - 1) : new Date(next.valueOf() + 1), unit))\r\n\t\t\t\tadded++;\r\n\t\t\tstart = next;\r\n\t\t}\r\n\t\treturn start;\r\n\t},\r\n\r\n\tgetClosestWorkTime: function () {\r\n\t\tvar config =  this.argumentsHelper.getClosestWorkTimeArguments.apply( this.argumentsHelper, arguments);\r\n\t\treturn this._getClosestWorkTime(config);\r\n\t},\r\n\r\n\t_getClosestWorkTime: function (settings) {\r\n\t\tif (this._isWorkTime(settings.date, settings.unit))\r\n\t\t\treturn settings.date;\r\n\r\n\t\tvar unit = settings.unit;\r\n\r\n\t\tvar curr = this.$gantt.date[unit + '_start'](settings.date);\r\n\r\n\t\tvar future_target = new Date(curr),\r\n\t\t\tprev_target = new Date(curr),\r\n\t\t\ttick = true,\r\n\t\t\tmaximum_loop = 3000,//be extra sure we won't fall into infinite loop, 3k seems big enough\r\n\t\t\tcount = 0,\r\n\t\t\tboth_directins = (settings.dir == 'any' || !settings.dir);\r\n\r\n\t\tvar inc = 1;\r\n\t\tif (settings.dir == 'past')\r\n\t\t\tinc = -1;\r\n\r\n\t\t//will seek closest working hour in future or in past, one step in one direction per iteration\r\n\t\twhile (!this._isWorkTime(curr, unit)) {\r\n\r\n\t\t\tif (both_directins) {\r\n\t\t\t\tcurr = tick ? future_target : prev_target;\r\n\t\t\t\tinc = inc * (-1);\r\n\t\t\t}\r\n\t\t\tvar tzOffset = curr.getTimezoneOffset();\r\n\t\t\tcurr = this.$gantt.date.add(curr, inc, unit);\r\n\r\n\t\t\tcurr = gantt._correct_dst_change(curr, tzOffset, inc, unit);\r\n\t\t\tif (this.$gantt.date[unit + '_start'])\r\n\t\t\t\tcurr = this.$gantt.date[unit + '_start'](curr);\r\n\r\n\t\t\tif (both_directins) {\r\n\t\t\t\tif (tick) {\r\n\t\t\t\t\tfuture_target = curr;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tprev_target = curr;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\ttick = !tick;\r\n\t\t\tcount++;\r\n\t\t\tif (count > maximum_loop) {\r\n\t\t\t\tthis.$gantt.assert(false, \"Invalid working time check\");\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif (curr == prev_target || settings.dir == 'past') {\r\n\t\t\tcurr = this.$gantt.date.add(curr, 1, unit);\r\n\t\t}\r\n\r\n\t\treturn curr;\r\n\t}\r\n};\r\n\r\nmodule.exports = CalendarWorkTimeStrategy;\n\n\n//////////////////\n// WEBPACK FOOTER\n// c:/www-recent/gantt/sources/core/worktime/strategy/calendar_strategy.js\n// module id = 73\n// module chunks = 0","function WorkUnitsCache() {\r\n\tthis._cache = {};\r\n}\r\n\r\nWorkUnitsCache.prototype = {\r\n\t// cache previously calculated worktime\r\n\tget: function (unit, date) {\r\n\t\tvar result = -1;// default value (if not existed in the cache)\r\n\r\n\t\tvar cache = this._cache;\r\n\t\tif (cache && cache[unit]) {\r\n\t\t\tvar units = cache[unit];\r\n\t\t\tvar time = date.getTime();\r\n\t\t\tif (units[time] !== undefined)\r\n\t\t\t\tresult = units[time];\r\n\t\t}\r\n\t\treturn result;\r\n\t},\r\n\r\n\tput: function (unit, date, value) {\r\n\t\tif (!unit || !date) return false;\r\n\r\n\t\tvar cache = this._cache;\r\n\r\n\t\tvar time = date.getTime();\r\n\r\n\t\tvalue = !!value;\r\n\r\n\t\tif (!cache) return false;\r\n\t\tif (!cache[unit]) cache[unit] = {};\r\n\t\tcache[unit][time] = value;\r\n\t\treturn true;\r\n\t},\r\n\r\n\tclear: function () {\r\n\t\tthis._cache = {};\r\n\t}\r\n};\r\n\r\nmodule.exports = WorkUnitsCache;\n\n\n//////////////////\n// WEBPACK FOOTER\n// c:/www-recent/gantt/sources/core/worktime/strategy/calendar_workunit_cache.js\n// module id = 74\n// module chunks = 0","var createArgumentsHelper = require(\"./calendar_arguments_helper\"),\r\n\tNoWorkTimeCalendar = require(\"./strategy/no_work_time\");\r\n\r\nfunction TimeCalculator(calendarManager){\r\n\r\n\tthis.$gantt = calendarManager.$gantt;\r\n\tthis.argumentsHelper = createArgumentsHelper(this.$gantt);\r\n\tthis.calendarManager = calendarManager;\r\n\tthis.$disabledCalendar = new NoWorkTimeCalendar(this.$gantt, this.argumentsHelper);\r\n}\r\n\r\nTimeCalculator.prototype = {\r\n\t_getCalendar: function (config) {\r\n\t\tvar calendar;\r\n\t\tif (!this.$gantt.$services.config().work_time) {\r\n\t\t\tcalendar = this.$disabledCalendar;\r\n\t\t} else {\r\n\t\t\tvar manager = this.calendarManager;\r\n\t\t\tif (config.task) {\r\n\t\t\t\tcalendar = manager.getTaskCalendar(config.task);\r\n\t\t\t} else if (config.id) {\r\n\t\t\t\tcalendar = manager.getTaskCalendar(config);\r\n\t\t\t} else if (config.calendar) {\r\n\t\t\t\tcalendar = config.calendar;\r\n\t\t\t}\r\n\t\t\tif (!calendar) {\r\n\t\t\t\tcalendar = manager.getTaskCalendar();\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn calendar;\r\n\t},\r\n\r\n\tgetWorkHours: function (config) {\r\n\t\tconfig = this.argumentsHelper.getWorkHoursArguments.apply(this.argumentsHelper, arguments);\r\n\r\n\t\tvar calendar = this._getCalendar(config);\r\n\r\n\t\treturn calendar.getWorkHours(config.date);\r\n\t},\r\n\r\n\tsetWorkTime: function (config, calendar) {\r\n\t\tconfig = this.argumentsHelper.setWorkTimeArguments.apply(this.argumentsHelper, arguments);\r\n\r\n\t\tif (!calendar)\r\n\t\t\tcalendar = this.calendarManager.getCalendar(); // Global\r\n\t\treturn calendar.setWorkTime(config);\r\n\t},\r\n\r\n\tunsetWorkTime: function (config, calendar) {\r\n\t\tconfig = this.argumentsHelper.unsetWorkTimeArguments.apply(this.argumentsHelper, arguments);\r\n\r\n\t\tif (!calendar)\r\n\t\t\tcalendar = this.calendarManager.getCalendar(); // Global\r\n\t\treturn calendar.unsetWorkTime(config);\r\n\t},\r\n\tisWorkTime: function (date, unit, task, calendar) {\r\n\t\tvar config = this.argumentsHelper.isWorkTimeArguments.apply(this.argumentsHelper, arguments);\r\n\r\n\t\tcalendar = this._getCalendar(config);\r\n\t\treturn calendar.isWorkTime(config);\r\n\t},\r\n\tgetClosestWorkTime: function (config) {\r\n\t\tconfig = this.argumentsHelper.getClosestWorkTimeArguments.apply(this.argumentsHelper, arguments);\r\n\r\n\t\tvar calendar = this._getCalendar(config);\r\n\r\n\t\treturn calendar.getClosestWorkTime(config);\r\n\t},\r\n\r\n\tcalculateDuration: function () { // start_date_date, end_date, task\r\n\t\tvar config = this.argumentsHelper.getDurationArguments.apply(this.argumentsHelper, arguments);\r\n\r\n\r\n\t\tvar calendar = this._getCalendar(config);\r\n\t\treturn calendar.calculateDuration(config);\r\n\t},\r\n\thasDuration: function () {\r\n\t\tvar config = this.argumentsHelper.hasDurationArguments.apply(this.argumentsHelper, arguments);\r\n\r\n\t\tvar calendar = this._getCalendar(config);\r\n\r\n\t\treturn calendar.hasDuration(config);\r\n\t},\r\n\tcalculateEndDate: function (config) { // start_date, duration, unit, task\r\n\t\tvar config = this.argumentsHelper.calculateEndDateArguments.apply(this.argumentsHelper, arguments);\r\n\r\n\t\tvar calendar = this._getCalendar(config);\r\n\t\treturn calendar.calculateEndDate(config);\r\n\t}\r\n};\r\n\r\nmodule.exports = TimeCalculator;\r\n\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// c:/www-recent/gantt/sources/core/worktime/time_calculator.js\n// module id = 75\n// module chunks = 0","function CalendarDisabledTimeStrategy(gantt, argumentsHelper){\r\n\tthis.argumentsHelper = argumentsHelper;\r\n\tthis.$gantt = gantt;\r\n}\r\n\r\nCalendarDisabledTimeStrategy.prototype = {\r\n\tgetWorkHours: function () {\r\n\t\treturn [0, 24];\r\n\t},\r\n\tsetWorkTime: function () {\r\n\t\treturn true;\r\n\t},\r\n\tunsetWorkTime: function () {\r\n\t\treturn true;\r\n\t},\r\n\tisWorkTime: function () {\r\n\t\treturn true;\r\n\t},\r\n\tgetClosestWorkTime: function (config) {\r\n\t\tvar config = this.argumentsHelper.getClosestWorkTimeArguments.apply(this.argumentsHelper, arguments);\r\n\t\treturn config.date;\r\n\t},\r\n\r\n\tcalculateDuration: function () {\r\n\t\tvar config = this.argumentsHelper.getDurationArguments.apply(this.argumentsHelper, arguments);\r\n\t\tvar from = config.start_date,\r\n\t\t\tto = config.end_date,\r\n\t\t\tunit = config.unit,\r\n\t\t\tstep = config.step;\r\n\r\n\t\treturn this._calculateDuration(from, to, unit, step);\r\n\t},\r\n\t_calculateDuration: function (start, end, unit, step) {\r\n\t\tvar dateHelper = this.$gantt.date;\r\n\t\tvar fixedUnits = {\r\n\t\t\t\"week\": 1000 * 60 * 60 * 24 * 7,\r\n\t\t\t\"day\": 1000 * 60 * 60 * 24,\r\n\t\t\t\"hour\": 1000 * 60 * 60,\r\n\t\t\t\"minute\": 1000 * 60\r\n\t\t};\r\n\r\n\t\tvar res = 0;\r\n\t\tif (fixedUnits[unit]) {\r\n\t\t\tres = Math.round((end - start) / (step * fixedUnits[unit]));\r\n\t\t} else {\r\n\t\t\tvar from = new Date(start),\r\n\t\t\t\tto = new Date(end);\r\n\t\t\twhile (from.valueOf() < to.valueOf()) {\r\n\t\t\t\tres += 1;\r\n\t\t\t\tfrom = dateHelper.add(from, step, unit);\r\n\t\t\t}\r\n\r\n\t\t\tif (from.valueOf() != end.valueOf()) {\r\n\t\t\t\tres += (to - from) / (dateHelper.add(from, step, unit) - from);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn Math.round(res);\r\n\t},\r\n\r\n\thasDuration: function () {\r\n\t\tvar config = this.argumentsHelper.getDurationArguments.apply(this.argumentsHelper, arguments);\r\n\t\tvar from = config.start_date,\r\n\t\t\tto = config.end_date,\r\n\t\t\tunit = config.unit,\r\n\t\t\tstep = config.step;\r\n\r\n\t\tif (!unit) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\tfrom = new Date(from);\r\n\t\tto = new Date(to);\r\n\r\n\t\treturn (from.valueOf() < to.valueOf());\r\n\t},\r\n\r\n\tcalculateEndDate: function () {\r\n\t\tvar config = this.argumentsHelper.calculateEndDateArguments.apply(this.argumentsHelper, arguments);\r\n\r\n\t\tvar start = config.start_date,\r\n\t\t\tduration = config.duration,\r\n\t\t\tunit = config.unit,\r\n\t\t\tstep = config.step;\r\n\r\n\t\treturn this.$gantt.date.add(start, step * duration, unit);\r\n\t}\r\n};\r\n\r\nmodule.exports = CalendarDisabledTimeStrategy;\n\n\n//////////////////\n// WEBPACK FOOTER\n// c:/www-recent/gantt/sources/core/worktime/strategy/no_work_time.js\n// module id = 76\n// module chunks = 0","// TODO: rework public api for date methods\r\nvar utils = require(\"../../utils/utils\");\r\n\r\nvar createWorktimeFacade = function(calendarManager, timeCalculator){\r\n\treturn {\r\n\t\tgetWorkHours: function (date) {\r\n\t\t\treturn timeCalculator.getWorkHours(date);\r\n\t\t},\r\n\r\n\t\tsetWorkTime: function (config) {\r\n\t\t\treturn timeCalculator.setWorkTime(config);\r\n\t\t},\r\n\r\n\t\tunsetWorkTime: function (config) {\r\n\t\t\ttimeCalculator.unsetWorkTime(config);\r\n\t\t},\r\n\r\n\t\tisWorkTime: function (date, unit, task) {\r\n\t\t\treturn timeCalculator.isWorkTime(date, unit, task);\r\n\t\t},\r\n\r\n\t\tgetClosestWorkTime: function (config) {\r\n\t\t\treturn timeCalculator.getClosestWorkTime(config);\r\n\t\t},\r\n\r\n\t\tcalculateDuration: function (start_date, end_date, task) {\r\n\t\t\treturn timeCalculator.calculateDuration(start_date, end_date, task);\r\n\t\t},\r\n\t\t_hasDuration: function (start_date, end_date, task) {\r\n\t\t\treturn timeCalculator.hasDuration(start_date, end_date, task);\r\n\t\t},\r\n\r\n\t\tcalculateEndDate: function (start, duration, unit, task) {\r\n\t\t\treturn timeCalculator.calculateEndDate(start, duration, unit, task);\r\n\t\t},\r\n\r\n\t\tcreateCalendar: utils.bind(calendarManager.createCalendar, calendarManager),\r\n\t\taddCalendar: utils.bind(calendarManager.addCalendar, calendarManager),\r\n\t\tgetCalendar: utils.bind(calendarManager.getCalendar, calendarManager),\r\n\t\tgetCalendars: utils.bind(calendarManager.getCalendars, calendarManager),\r\n\t\tgetTaskCalendar: utils.bind(calendarManager.getTaskCalendar, calendarManager),\r\n\t\tdeleteCalendar: utils.bind(calendarManager.deleteCalendar, calendarManager)\r\n\t};\r\n};\r\n\r\n\r\nmodule.exports = { create: createWorktimeFacade };\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// c:/www-recent/gantt/sources/core/facades/worktime_calendars.js\n// module id = 77\n// module chunks = 0","module.exports = function(gantt) {\r\n\r\n\tgantt.isUnscheduledTask = function (task) {\r\n\t\treturn (!!task.unscheduled || !task.start_date);\r\n\t};\r\n\r\n\tgantt._isAllowedUnscheduledTask = function (task) {\r\n\t\treturn !!(task.unscheduled && gantt.config.show_unscheduled);\r\n\t};\r\n\r\n\tgantt.isTaskVisible = function (id) {\r\n\t\tif (!this.isTaskExists(id))\r\n\t\t\treturn false;\r\n\r\n\t\tvar task = this.getTask(id);\r\n\t\tif (!((+task.start_date < +this._max_date && +task.end_date > +this._min_date) || gantt._isAllowedUnscheduledTask(task)))\r\n\t\t\treturn false;\r\n\r\n\t\treturn !!(gantt.getGlobalTaskIndex(id) >= 0);\r\n\t};\r\n\r\n\tgantt._defaultTaskDate = function (item, parent_id) {\r\n\t\tvar parent = (parent_id && parent_id != this.config.root_id) ? this.getTask(parent_id) : false,\r\n\t\t\tstartDate = '';\r\n\t\tif (parent) {\r\n\t\t\tstartDate = parent.start_date;\r\n\t\t} else {\r\n\t\t\tvar first = this.getTaskByIndex(0);\r\n\t\t\tstartDate = first ? (first.start_date ? first.start_date : (first.end_date ? this.calculateEndDate({\r\n\t\t\t\tstart_date: first.end_date,\r\n\t\t\t\tduration: -this.config.duration_step\r\n\t\t\t}) : '')) : this.config.start_date || this.getState().min_date;\r\n\t\t}\r\n\t\tgantt.assert(startDate, \"Invalid dates\");\r\n\t\treturn new Date(startDate);\r\n\t};\r\n\r\n\tgantt._set_default_task_timing = function (task) {\r\n\t\ttask.start_date = task.start_date || gantt._defaultTaskDate(task, this.getParent(task));\r\n\t\ttask.duration = task.duration || this.config.duration_step;\r\n\t\ttask.end_date = task.end_date || this.calculateEndDate(task);\r\n\t};\r\n\r\n\tgantt.createTask = function (item, parent, index) {\r\n\t\titem = item || {};\r\n\t\tif (!gantt.defined(item.id))\r\n\t\t\titem.id = gantt.uid();\r\n\r\n\t\tif (!item.start_date) {\r\n\t\t\titem.start_date = gantt._defaultTaskDate(item, parent);\r\n\t\t}\r\n\t\tif (item.text === undefined) {\r\n\t\t\titem.text = gantt.locale.labels.new_task;\r\n\t\t}\r\n\t\tif (item.duration === undefined) {\r\n\t\t\titem.duration = 1;\r\n\t\t}\r\n\r\n\t\tif (parent) {\r\n\t\t\tthis.setParent(item, parent);\r\n\t\t\tvar parentObj = this.getTask(parent);\r\n\t\t\tparentObj.$open = true;\r\n\t\t}\r\n\r\n\t\tif (!this.callEvent(\"onTaskCreated\", [item])) {\r\n\t\t\treturn null;\r\n\t\t}\r\n\t\tif (this.config.details_on_create) {\r\n\t\t\titem.$new = true;\r\n\t\t\tthis.silent(function(){\r\n\t\t\t\tgantt.$data.tasksStore.addItem(item, index);\r\n\t\t\t});\r\n\t\t\tthis.selectTask(item.id);\r\n\t\t\tthis.refreshData();\r\n\t\t\tthis.showLightbox(item.id);\r\n\t\t} else {\r\n\t\t\tif (this.addTask(item, parent, index)) {\r\n\t\t\t\tthis.showTask(item.id);\r\n\t\t\t\tthis.selectTask(item.id);\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn item.id;\r\n\t};\r\n\r\n//TODO: do something with overcomplicated dataprocessor logic\r\n\tgantt._getChildLinks = function (id) {\r\n\t\tvar item = this.getTask(id);\r\n\t\tif (!item) {\r\n\t\t\treturn [];\r\n\t\t}\r\n\r\n\t\tvar links = item.$source.concat(item.$target);\r\n\r\n\t\tvar branches = this.getChildren(item.id);\r\n\t\tfor (var i = 0; i < branches.length; i++) {\r\n\t\t\tlinks = links.concat(this._getChildLinks(branches[i]));\r\n\t\t}\r\n\r\n\t\tvar res = {};\r\n\t\tfor (var i = 0; i < links.length; i++) {\r\n\t\t\tres[links[i]] = true;\r\n\t\t}\r\n\t\tlinks = [];\r\n\t\tfor (var i in res) {\r\n\t\t\tif (this.isLinkExists(i))\r\n\t\t\t\tlinks.push(i);\r\n\t\t}\r\n\r\n\t\treturn links;\r\n\t};\r\n\tgantt._getTaskTree = function (id) {\r\n\t\tvar item = this.getTask(id);\r\n\t\tif (!item) {\r\n\t\t\treturn [];\r\n\t\t}\r\n\r\n\t\tvar items = [];\r\n\t\tvar branches = this.getChildren(item.id);\r\n\t\tfor (var i = 0; i < branches.length; i++) {\r\n\t\t\titems.push(branches[i]);\r\n\t\t\titems = items.concat(this._getTaskTree(branches[i]));\r\n\t\t}\r\n\t\treturn items;\r\n\t};\r\n\tgantt._deleteRelatedLinks = function (links, silent) {\r\n\t\tvar use_dp = (this._dp && !silent) && this.config.cascade_delete;\r\n\t\tvar prev_mode = '';\r\n\t\tvar send_changes = use_dp ? this._dp.updateMode != 'off' : false;\r\n\t\tif (use_dp) {\r\n\t\t\tprev_mode = this._dp.updateMode;\r\n\t\t\tthis._dp.setUpdateMode(\"off\");\r\n\t\t}\r\n\t\tfor (var i = 0; i < links.length; i++) {\r\n\t\t\tif (use_dp) {\r\n\t\t\t\tthis._dp.setGanttMode(\"links\");\r\n\t\t\t\tthis._dp.setUpdated(links[i], true, \"deleted\");\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tthis.$data.linksStore.silent(function(){\r\n\t\t\tfor(var i =0; i < links.length; i++) {\r\n\t\t\t\tthis.$data.linksStore.removeItem(links[i]);\r\n\t\t\t}\r\n\t\t}, this);\r\n\r\n\t\tif (use_dp) {\r\n\t\t\tthis._dp.setUpdateMode(prev_mode);\r\n\t\t\tif (send_changes)\r\n\t\t\t\tthis._dp.sendAllData();\r\n\t\t}\r\n\t};\r\n\tgantt._deleteRelatedTasks = function (id, silent) {\r\n\t\tvar use_dp = (this._dp && !silent) && this.config.cascade_delete;\r\n\t\tvar prev_mode = '';\r\n\r\n\t\tif (use_dp) {\r\n\t\t\tprev_mode = this._dp.updateMode;\r\n\t\t\tthis._dp.setGanttMode(\"tasks\");\r\n\t\t\tthis._dp.setUpdateMode(\"off\");\r\n\t\t}\r\n\t\tvar tree = this._getTaskTree(id);\r\n\t\tfor (var i = 0; i < tree.length; i++) {\r\n\t\t\t// add deleted subrow into dataprocessor update list manually\r\n\t\t\t// because silent mode is on\r\n\t\t\tvar t_id = tree[i];\r\n\r\n\t\t\tthis.$data.tasksStore.silent(function(){\r\n\t\t\t\tthis.$data.tasksStore.removeItem(t_id);\r\n\t\t\t});\r\n\r\n\t\t\tif (use_dp) {\r\n\t\t\t\tthis._dp.setUpdated(t_id, true, \"deleted\");\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (use_dp) {\r\n\r\n\t\t\tthis._dp.setUpdateMode(prev_mode);\r\n\t\t}\r\n\t};\r\n\r\n\r\n\r\n\tgantt._update_flags = function (oldid, newid) {\r\n\t\t//  TODO: need a proper way to update all possible flags\r\n\t\tif (oldid === undefined) {\r\n\t\t\tthis._lightbox_id = this._selected_task = null;\r\n\t\t\tif (this._tasks_dnd && this._tasks_dnd.drag) {\r\n\t\t\t\tthis._tasks_dnd.drag.id = null;\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tif (this._lightbox_id == oldid)\r\n\t\t\t\tthis._lightbox_id = newid;\r\n\t\t\tif (this._selected_task == oldid) {\r\n\t\t\t\tthis._selected_task = newid;\r\n\t\t\t}\r\n\t\t\tif (this._tasks_dnd && this._tasks_dnd.drag && this._tasks_dnd.drag.id == oldid) {\r\n\t\t\t\tthis._tasks_dnd.drag.id = newid;\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\r\n\r\n\tgantt._get_duration_unit = function () {\r\n\t\treturn (gantt._get_line(this.config.duration_unit) * 1000) || this.config.duration_unit;\r\n\t};\r\n\r\n\tgantt.getTaskType = function (type) {\r\n\t\treturn \"task\";\r\n\t};\r\n\tgantt._get_type_name = function (type_value) {\r\n\t\tfor (var i in this.config.types) {\r\n\t\t\tif (this.config.types[i] == type_value) {\r\n\t\t\t\treturn i;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn \"task\";\r\n\t};\r\n\r\n\tgantt._get_task_timing_mode = function (task, force) {\r\n\t\tvar task_type = this.getTaskType(task.type);\r\n\r\n\t\tvar state = {\r\n\t\t\ttype: task_type,\r\n\t\t\t$no_start: false,\r\n\t\t\t$no_end: false\r\n\t\t};\r\n\r\n\t\tif (!force && task_type == task.$rendered_type) {\r\n\t\t\tstate.$no_start = task.$no_start;\r\n\t\t\tstate.$no_end = task.$no_end;\r\n\t\t\treturn state;\r\n\t\t}\r\n\r\n\t\tif (task_type == this.config.types.project) {\r\n\t\t\t//project duration is always defined by children duration\r\n\t\t\tstate.$no_end = state.$no_start = true;\r\n\t\t} else if (task_type != this.config.types.milestone) {\r\n\t\t\t//tasks can have fixed duration, children duration(as projects), or one date fixed, and other defined by nested items\r\n\t\t\tstate.$no_end = !(task.end_date || task.duration);\r\n\t\t\tstate.$no_start = !task.start_date;\r\n\r\n\t\t\tif (this._isAllowedUnscheduledTask(task)) {\r\n\t\t\t\tstate.$no_end = state.$no_start = false;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn state;\r\n\t};\r\n\r\n\tgantt._init_task_timing = function (task) {\r\n\t\tvar task_mode = gantt._get_task_timing_mode(task, true);\r\n\r\n\t\tvar dirty = task.$rendered_type != task_mode.type;\r\n\r\n\t\tvar task_type = task_mode.type;\r\n\r\n\t\tif (dirty) {\r\n\t\t\ttask.$no_start = task_mode.$no_start;\r\n\t\t\ttask.$no_end = task_mode.$no_end;\r\n\t\t\ttask.$rendered_type = task_mode.type;\r\n\t\t}\r\n\r\n\t\tif (dirty && task_type != this.config.types.milestone) {\r\n\t\t\tif (task_type == this.config.types.project) {\r\n\t\t\t\t//project duration is always defined by children duration\r\n\t\t\t\tthis._set_default_task_timing(task);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif (task_type == this.config.types.milestone) {\r\n\t\t\ttask.end_date = task.start_date;\r\n\t\t}\r\n\t\tif (task.start_date && task.end_date) {\r\n\t\t\ttask.duration = this.calculateDuration(task);\r\n\t\t}\r\n\t\ttask.duration = task.duration || 0;\r\n\t};\r\n\r\n\tgantt.isSummaryTask = function (task) {\r\n\t\tvar mode = gantt._get_task_timing_mode(task);\r\n\r\n\t\treturn !!(mode.$no_end || mode.$no_start);\r\n\t};\r\n\r\n// downward calculation of project duration\r\n\tgantt.resetProjectDates = function (task) {\r\n\t\tvar taskMode = this._get_task_timing_mode(task);\r\n\t\tif (taskMode.$no_end || taskMode.$no_start) {\r\n\t\t\tvar dates = this.getSubtaskDates(task.id);\r\n\t\t\tthis._assign_project_dates(task, dates.start_date, dates.end_date);\r\n\t\t}\r\n\t};\r\n\r\n\tgantt.getSubtaskDates = function (task_id) {\r\n\t\tvar min = null,\r\n\t\t\tmax = null,\r\n\t\t\troot = task_id !== undefined ? task_id : gantt.config.root_id;\r\n\r\n\t\tthis.eachTask(function (child) {\r\n\t\t\tif (this.getTaskType(child.type) == gantt.config.types.project || this.isUnscheduledTask(child))\r\n\t\t\t\treturn;\r\n\r\n\t\t\tif ((child.start_date && !child.$no_start) && (!min || min > child.start_date.valueOf()))\r\n\t\t\t\tmin = child.start_date.valueOf();\r\n\t\t\tif ((child.end_date && !child.$no_end) && (!max || max < child.end_date.valueOf()))\r\n\t\t\t\tmax = child.end_date.valueOf();\r\n\t\t}, root);\r\n\r\n\t\treturn {\r\n\t\t\tstart_date: min ? new Date(min) : null,\r\n\t\t\tend_date: max ? new Date(max) : null\r\n\t\t};\r\n\t};\r\n\r\n\tgantt._assign_project_dates = function (task, from, to) {\r\n\t\tvar taskTiming = this._get_task_timing_mode(task);\r\n\t\tif (taskTiming.$no_start) {\r\n\t\t\tif (from && from != Infinity) {\r\n\t\t\t\ttask.start_date = new Date(from);\r\n\t\t\t} else {\r\n\t\t\t\ttask.start_date = this._defaultTaskDate(task, this.getParent(task));\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif (taskTiming.$no_end) {\r\n\t\t\tif (to && to != -Infinity) {\r\n\t\t\t\ttask.end_date = new Date(to);\r\n\t\t\t} else {\r\n\t\t\t\ttask.end_date = this.calculateEndDate({\r\n\t\t\t\t\tstart_date: task.start_date,\r\n\t\t\t\t\tduration: this.config.duration_step,\r\n\t\t\t\t\ttask: task\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (taskTiming.$no_start || taskTiming.$no_end) {\r\n\t\t\tthis._init_task_timing(task);\r\n\t\t}\r\n\t};\r\n\r\n// upward calculation of project duration\r\n\tgantt._update_parents = function (taskId, silent) {\r\n\t\tif (!taskId) return;\r\n\r\n\t\tvar task = this.getTask(taskId);\r\n\t\tvar pid = this.getParent(task);\r\n\r\n\t\tvar taskTiming = this._get_task_timing_mode(task);\r\n\r\n\t\tvar has_changed = true;\r\n\r\n\t\tif (taskTiming.$no_start || taskTiming.$no_end) {\r\n\t\t\tvar oldStart = task.start_date.valueOf(),\r\n\t\t\t\toldEnd = task.end_date.valueOf();\r\n\r\n\t\t\tgantt.resetProjectDates(task);\r\n\r\n\t\t\t// not refresh parent projects if dates hasn't changed\r\n\t\t\tif (oldStart == task.start_date.valueOf() && oldEnd == task.end_date.valueOf()) {\r\n\t\t\t\thas_changed = false;\r\n\t\t\t}\r\n\r\n\t\t\tif (has_changed && !silent) {\r\n\t\t\t\tthis.refreshTask(task.id, true);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\r\n\t\tif (has_changed && pid && this.isTaskExists(pid)) {\r\n\t\t\tthis._update_parents(pid, silent);\r\n\t\t}\r\n\t};\r\n\r\n\tgantt.roundDate = function (config) {\r\n\t\tif (config instanceof Date) {\r\n\t\t\tconfig = {\r\n\t\t\t\tdate: config,\r\n\t\t\t\tunit: gantt.getScale().unit,\r\n\t\t\t\tstep: gantt.getScale().step\r\n\t\t\t};\r\n\t\t}\r\n\t\tvar date = config.date,\r\n\t\t\tsteps = config.step,\r\n\t\t\tunit = config.unit;\r\n\r\n\t\tvar upper, lower, colIndex;\r\n\t\tif (unit == gantt.getScale().unit && steps == gantt.getScale().step &&\r\n\t\t\t+date >= +gantt._min_date && +date <= +gantt._max_date) {\r\n\t\t\t//find date in time scale config\r\n\t\t\tcolIndex = Math.floor(gantt.columnIndexByDate(date));\r\n\r\n\t\t\tif (!gantt.getScale().trace_x[colIndex]) {\r\n\t\t\t\tcolIndex -= 1;// end of time scale\r\n\t\t\t}\r\n\t\t\tlower = new Date(gantt.getScale().trace_x[colIndex]);\r\n\r\n\t\t\tupper = new Date(lower);\r\n\t\t\tif (gantt.getScale().trace_x[colIndex + 1]) {\r\n\t\t\t\tupper = new Date(gantt.getScale().trace_x[colIndex + 1]);\r\n\t\t\t} else {\r\n\t\t\t\tupper = gantt.date.add(lower, steps, unit);\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tcolIndex = Math.floor(gantt.columnIndexByDate(date));\r\n\r\n\t\t\tupper = gantt.date[unit + \"_start\"](new Date(this._min_date));\r\n\t\t\tif (gantt.getScale().trace_x[colIndex]) {\r\n\t\t\t\tupper = gantt.date[unit + \"_start\"](gantt.getScale().trace_x[colIndex]);// end of time scale\r\n\t\t\t}\r\n\r\n\t\t\twhile (+upper < +date) {\r\n\t\t\t\tupper = gantt.date[unit + \"_start\"](gantt.date.add(upper, steps, unit));\r\n\r\n\t\t\t\tvar tzOffset = upper.getTimezoneOffset();\r\n\r\n\t\t\t\tupper = gantt._correct_dst_change(upper, tzOffset, upper, unit);\r\n\t\t\t\tif (gantt.date[unit + '_start'])\r\n\t\t\t\t\tupper = gantt.date[unit + '_start'](upper);\r\n\t\t\t}\r\n\r\n\t\t\tlower = gantt.date.add(upper, -1 * steps, unit);\r\n\r\n\t\t}\r\n\t\tif (config.dir && config.dir == 'future')\r\n\t\t\treturn upper;\r\n\t\tif (config.dir && config.dir == 'past')\r\n\t\t\treturn lower;\r\n\r\n\t\tif (Math.abs(date - lower) < Math.abs(upper - date)) {\r\n\t\t\treturn lower;\r\n\t\t} else {\r\n\t\t\treturn upper;\r\n\t\t}\r\n\r\n\t};\r\n\r\n\tgantt.correctTaskWorkTime = function (task) {\r\n\t\tif (gantt.config.work_time && gantt.config.correct_work_time) {\r\n\t\t\tif (!this.isWorkTime(task.start_date, task)) {\r\n\t\t\t\ttask.start_date = this.getClosestWorkTime({date: task.start_date, dir: 'future', task: task});\r\n\t\t\t\ttask.end_date = this.calculateEndDate(task);\r\n\t\t\t} else if (!this.isWorkTime(new Date(+task.end_date - 1), task)) {\r\n\t\t\t\ttask.end_date = this.calculateEndDate(task);\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\r\n\tgantt.attachEvent(\"onBeforeTaskUpdate\", function (id, task) {\r\n\t\tgantt._init_task_timing(task);\r\n\t\treturn true;\r\n\t});\r\n\tgantt.attachEvent(\"onBeforeTaskAdd\", function (id, task) {\r\n\t\tgantt._init_task_timing(task);\r\n\t\treturn true;\r\n\t});\r\n\r\n\tgantt.sort = function(field, desc, parent, silent) {\r\n\t\tvar render = !silent;//4th argument to cancel redraw after sorting\r\n\r\n\t\tif (!this.isTaskExists(parent)) {\r\n\t\t\tparent = this.config.root_id;\r\n\t\t}\r\n\r\n\t\tif (!field) field = \"order\";\r\n\t\tvar criteria = (typeof(field) == \"string\") ? (function(a, b) {\r\n\t\t\tif(a[field] == b[field]){\r\n\t\t\t\treturn 0;\r\n\t\t\t}\r\n\r\n\t\t\tvar result = a[field] > b[field];\r\n\t\t\treturn result ? 1 : -1;\r\n\t\t}) : field;\r\n\r\n\t\tif (desc) {\r\n\t\t\tvar original_criteria = criteria;\r\n\t\t\tcriteria = function (a, b) {\r\n\t\t\t\treturn original_criteria(b, a);\r\n\t\t\t};\r\n\t\t}\r\n\r\n\t\tvar els = this.getChildren(parent);\r\n\t\tif (els){\r\n\t\t\tvar temp = [];\r\n\t\t\tfor (var i = els.length - 1; i >= 0; i--)\r\n\t\t\t\ttemp[i] = this.getTask(els[i]);\r\n\r\n\t\t\ttemp.sort(criteria);\r\n\r\n\t\t\tfor (var i = 0; i < temp.length; i++) {\r\n\t\t\t\tels[i] = temp[i].id;\r\n\t\t\t\tthis.sort(field, desc, els[i], true);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif (render) {\r\n\t\t\tthis.render();\r\n\t\t}\r\n\t};\r\n\r\n\tgantt._isTask = function (task) {\r\n\t\tvar taskTiming = this._get_task_timing_mode(task);\r\n\t\treturn (!task.type || task.type != gantt.config.types.project) && !(taskTiming.$no_start || taskTiming.$no_end);\r\n\t};\r\n\r\n\tgantt._isProject = function (task) {\r\n\t\treturn !this._isTask(task);\r\n\t};\r\n\r\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// c:/www-recent/gantt/sources/core/data.js\n// module id = 78\n// module chunks = 0","module.exports = function(gantt) {\r\n\tvar domHelpers = require(\"../utils/dom_helpers\");\r\n\r\n\tgantt._lightbox_methods = {};\r\n\tgantt._lightbox_template = \"<div class='gantt_cal_ltitle'><span class='gantt_mark'>&nbsp;</span><span class='gantt_time'></span><span class='gantt_title'></span></div><div class='gantt_cal_larea'></div>\";\r\n\r\n\tgantt.showLightbox = function (id) {\r\n\t\tif (!id || gantt.isReadonly(this.getTask(id))) return;\r\n\t\tif (!this.callEvent(\"onBeforeLightbox\", [id])) return;\r\n\r\n\t\tvar task = this.getTask(id);\r\n\r\n\t\tvar box = this.getLightbox(this.getTaskType(task.type));\r\n\t\tthis._center_lightbox(box);\r\n\t\tthis.showCover();\r\n\t\tthis._fill_lightbox(id, box);\r\n\r\n\t\tthis._waiAria.lightboxVisibleAttr(box);\r\n\r\n\t\tthis.callEvent(\"onLightbox\", [id]);\r\n\t};\r\n\tgantt._get_timepicker_step = function () {\r\n\t\tif (this.config.round_dnd_dates) {\r\n\t\t\tvar scale = gantt.getScale(),\r\n\t\t\t\tstep = (this._get_line(scale.unit) * scale.step) / 60;//timepicker step is measured in minutes\r\n\t\t\tif (step >= 60 * 24 || !this._is_chart_visible()) {\r\n\t\t\t\tstep = this.config.time_step;\r\n\t\t\t}\r\n\t\t\treturn step;\r\n\t\t}\r\n\t\treturn this.config.time_step;\r\n\t};\r\n\tgantt.getLabel = function (property, key) {\r\n\t\tvar sections = this._get_typed_lightbox_config();\r\n\t\tfor (var i = 0; i < sections.length; i++) {\r\n\t\t\tif (sections[i].map_to == property) {\r\n\t\t\t\tvar options = sections[i].options;\r\n\t\t\t\tfor (var j = 0; j < options.length; j++) {\r\n\t\t\t\t\tif (options[j].key == key) {\r\n\t\t\t\t\t\treturn options[j].label;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn \"\";\r\n\t};\r\n\r\n\tgantt.updateCollection = function (list_name, collection) {\r\n\t\tcollection = collection.slice(0);\r\n\t\tvar list = gantt.serverList(list_name);\r\n\t\tif (!list) return false;\r\n\t\tlist.splice(0, list.length);\r\n\t\tlist.push.apply(list, collection || []);\r\n\t\tgantt.resetLightbox();\r\n\t};\r\n\tgantt.getLightboxType = function () {\r\n\t\treturn this.getTaskType(this._lightbox_type);\r\n\t};\r\n\tgantt.getLightbox = function (type) {\r\n\t\tif (type === undefined)\r\n\t\t\ttype = this.getLightboxType();\r\n\r\n\t\tif (!this._lightbox || this.getLightboxType() != this.getTaskType(type)) {\r\n\t\t\tthis._lightbox_type = this.getTaskType(type);\r\n\t\t\tvar d = document.createElement(\"DIV\");\r\n\t\t\td.className = \"gantt_cal_light\";\r\n\r\n\t\t\tvar full_width = this._is_lightbox_timepicker();\r\n\t\t\tif (gantt.config.wide_form || full_width)\r\n\t\t\t\td.className += \" gantt_cal_light_wide\";\r\n\r\n\t\t\tif (full_width) {\r\n\t\t\t\tgantt.config.wide_form = true;\r\n\t\t\t\td.className += \" gantt_cal_light_full\";\r\n\t\t\t}\r\n\r\n\r\n\t\t\td.style.visibility = \"hidden\";\r\n\r\n\t\t\tvar html = this._lightbox_template;\r\n\r\n\t\t\tvar ariaAttr;\r\n\t\t\tvar buttons = this.config.buttons_left;\r\n\t\t\tfor (var i = 0; i < buttons.length; i++) {\r\n\t\t\t\t// needed to migrate from 'dhx_something' to 'gantt_something' naming in a lightbox\r\n\t\t\t\tvar button = this.config._migrate_buttons[buttons[i]] ? this.config._migrate_buttons[buttons[i]] : buttons[i];\r\n\r\n\t\t\t\tariaAttr = this._waiAria.lightboxButtonAttrString(button);\r\n\t\t\t\thtml += \"<div \" + ariaAttr + \" class='gantt_btn_set gantt_left_btn_set \" + button + \"_set'><div dhx_button='1' class='\" + button + \"'></div><div>\" + this.locale.labels[button] + \"</div></div>\";\r\n\r\n\t\t\t}\r\n\t\t\tbuttons = this.config.buttons_right;\r\n\t\t\tfor (var i = 0; i < buttons.length; i++) {\r\n\t\t\t\tvar button = this.config._migrate_buttons[buttons[i]] ? this.config._migrate_buttons[buttons[i]] : buttons[i];\r\n\t\t\t\tariaAttr = this._waiAria.lightboxButtonAttrString(button);\r\n\r\n\t\t\t\thtml += \"<div \" + ariaAttr + \" class='gantt_btn_set gantt_right_btn_set \" + button + \"_set' style='float:right;'><div dhx_button='1' class='\" + button + \"'></div><div>\" + this.locale.labels[button] + \"</div></div>\";\r\n\r\n\t\t\t}\r\n\t\t\thtml += \"</div>\";\r\n\t\t\td.innerHTML = html;\r\n\r\n\t\t\tgantt._waiAria.lightboxAttr(d);\r\n\r\n\t\t\tif (gantt.config.drag_lightbox) {\r\n\t\t\t\td.firstChild.onmousedown = gantt._ready_to_dnd;\r\n\t\t\t\td.firstChild.onselectstart = function () {\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t};\r\n\t\t\t\td.firstChild.style.cursor = \"pointer\";\r\n\t\t\t\tgantt._init_dnd_events();\r\n\r\n\t\t\t}\r\n\r\n\t\t\tdocument.body.insertBefore(d, document.body.firstChild);\r\n\t\t\tthis._lightbox = d;\r\n\r\n\t\t\tvar sns = this._get_typed_lightbox_config(type);\r\n\t\t\thtml = this._render_sections(sns);\r\n\r\n\t\t\tvar ds = d.getElementsByTagName(\"div\");\r\n\t\t\tfor (var i = 0; i < ds.length; i++) {\r\n\t\t\t\tvar t_ds = ds[i];\r\n\t\t\t\tif (t_ds.className == \"gantt_cal_larea\") {\r\n\t\t\t\t\tt_ds.innerHTML = html;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t// bind labels to lightbox inputs\r\n\t\t\tfor (var i = 0; i < sns.length; i++) {\r\n\t\t\t\tvar section = sns[i];\r\n\t\t\t\tif (!section.id || !document.getElementById(section.id))\r\n\t\t\t\t\tcontinue;\r\n\r\n\t\t\t\tvar labelBlock = document.getElementById(section.id);\r\n\t\t\t\tvar label = labelBlock.querySelector(\"label\");\r\n\t\t\t\tvar inputBlock = labelBlock.nextSibling;\r\n\t\t\t\tif (!inputBlock)\r\n\t\t\t\t\tcontinue;\r\n\r\n\t\t\t\tvar input = inputBlock.querySelector(\"input, select, textarea\");\r\n\t\t\t\tif (input) {\r\n\t\t\t\t\tsection.inputId = input.id || \"input_\" + gantt.uid();\r\n\t\t\t\t\tif (!input.id)\r\n\t\t\t\t\t\tinput.id = section.inputId;\r\n\r\n\t\t\t\t\tlabel.setAttribute(\"for\", section.inputId);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t//sizes\r\n\t\t\tthis.resizeLightbox();\r\n\r\n\t\t\tthis._init_lightbox_events(this);\r\n\t\t\td.style.display = \"none\";\r\n\t\t\td.style.visibility = \"visible\";\r\n\t\t}\r\n\t\treturn this._lightbox;\r\n\t};\r\n\r\n\tgantt._render_sections = function (sns) {\r\n\t\tvar html = \"\";\r\n\t\tfor (var i = 0; i < sns.length; i++) {\r\n\t\t\tvar block = this.form_blocks[sns[i].type];\r\n\t\t\tif (!block) continue; //ignore incorrect blocks\r\n\t\t\tsns[i].id = \"area_\" + this.uid();\r\n\r\n\t\t\tvar display = sns[i].hidden ? \" style='display:none'\" : \"\";\r\n\t\t\tvar button = \"\";\r\n\t\t\tif (sns[i].button) {\r\n\t\t\t\tbutton = \"<div class='gantt_custom_button' index='\" + i + \"'><div class='gantt_custom_button_\" + sns[i].button + \"'></div><div class='gantt_custom_button_label'>\" + this.locale.labels[\"button_\" + sns[i].button] + \"</div></div>\";\r\n\t\t\t}\r\n\t\t\tif (this.config.wide_form) {\r\n\t\t\t\thtml += \"<div class='gantt_wrap_section' \" + display + \">\";\r\n\t\t\t}\r\n\t\t\thtml += \"<div id='\" + sns[i].id + \"' class='gantt_cal_lsection'><label>\" + button + this.locale.labels[\"section_\" + sns[i].name] + \"</label></div>\" + block.render.call(this, sns[i]);\r\n\t\t\thtml += \"</div>\";\r\n\t\t}\r\n\t\treturn html;\r\n\t};\r\n\r\n\r\n\tgantt.resizeLightbox = function () {\r\n\t\tvar d = this._lightbox;\r\n\t\tif (!d) return;\r\n\r\n\t\tvar con = d.childNodes[1];\r\n\t\tcon.style.height = \"0px\";\r\n\t\tcon.style.height = con.scrollHeight + \"px\";\r\n\t\td.style.height = con.scrollHeight + this.config.lightbox_additional_height + \"px\";\r\n\t\tcon.style.height = con.scrollHeight + \"px\"; //it is incredible , how ugly IE can be\r\n\r\n\r\n\t};\r\n\r\n\tgantt._center_lightbox = function (box) {\r\n\t\tif (box) {\r\n\t\t\tbox.style.display = \"block\";\r\n\r\n\t\t\tvar scroll_top = window.pageYOffset || document.body.scrollTop || document.documentElement.scrollTop;\r\n\t\t\tvar scroll_left = window.pageXOffset || document.body.scrollLeft || document.documentElement.scrollLeft;\r\n\r\n\t\t\tvar view_height = window.innerHeight || document.documentElement.clientHeight;\r\n\r\n\t\t\tif (scroll_top) // if vertical scroll on window\r\n\t\t\t\tbox.style.top = Math.round(scroll_top + Math.max((view_height - box.offsetHeight) / 2, 0)) + \"px\";\r\n\t\t\telse // vertical scroll on body\r\n\t\t\t\tbox.style.top = Math.round(Math.max(((view_height - box.offsetHeight) / 2), 0) + 9) + \"px\"; // +9 for compatibility with auto tests\r\n\r\n\t\t\t// not quite accurate but used for compatibility reasons\r\n\t\t\tif (document.documentElement.scrollWidth > document.body.offsetWidth) // if horizontal scroll on the window\r\n\t\t\t\tbox.style.left = Math.round(scroll_left + (document.body.offsetWidth - box.offsetWidth) / 2) + \"px\";\r\n\t\t\telse // horizontal scroll on the body\r\n\t\t\t\tbox.style.left = Math.round((document.body.offsetWidth - box.offsetWidth) / 2) + \"px\";\r\n\t\t}\r\n\t};\r\n\tgantt.showCover = function () {\r\n\t\tif (this._cover) return;\r\n\r\n\t\tthis._cover = document.createElement(\"DIV\");\r\n\t\tthis._cover.className = \"gantt_cal_cover\";\r\n\t\tvar _document_height = ((document.height !== undefined) ? document.height : document.body.offsetHeight);\r\n\t\tvar _scroll_height = ((document.documentElement) ? document.documentElement.scrollHeight : 0);\r\n\t\tthis._cover.style.height = Math.max(_document_height, _scroll_height) + 'px';\r\n\t\tdocument.body.appendChild(this._cover);\r\n\t};\r\n\r\n\r\n\tgantt._init_lightbox_events = function () {\r\n\t\tgantt.lightbox_events = {};\r\n\r\n\r\n\t\tgantt.lightbox_events[\"gantt_save_btn\"] = function (e) {\r\n\t\t\tgantt._save_lightbox();\r\n\t\t};\r\n\r\n\r\n\t\tgantt.lightbox_events[\"gantt_delete_btn\"] = function (e) {\r\n\t\t\tif (!gantt.callEvent(\"onLightboxDelete\", [gantt._lightbox_id]))\r\n\t\t\t\treturn;\r\n\r\n\t\t\tif (gantt.isTaskExists(gantt._lightbox_id)) {\r\n\t\t\t\tgantt.$click.buttons[\"delete\"](gantt._lightbox_id);\r\n\t\t\t} else {\r\n\t\t\t\tgantt.hideLightbox();\r\n\t\t\t}\r\n\r\n\t\t};\r\n\r\n\r\n\t\tgantt.lightbox_events[\"gantt_cancel_btn\"] = function (e) {\r\n\t\t\tgantt._cancel_lightbox();\r\n\t\t};\r\n\r\n\r\n\t\tgantt.lightbox_events[\"default\"] = function (e, src) {\r\n\t\t\tif (src.getAttribute(\"dhx_button\")) {\r\n\t\t\t\tgantt.callEvent(\"onLightboxButton\", [src.className, src, e]);\r\n\t\t\t} else {\r\n\t\t\t\tvar index, block, sec;\r\n\r\n\t\t\t\tvar className = domHelpers.getClassName(src);\r\n\t\t\t\tif (className.indexOf(\"gantt_custom_button\") != -1) {\r\n\t\t\t\t\tif (className.indexOf(\"gantt_custom_button_\") != -1) {\r\n\t\t\t\t\t\tindex = src.parentNode.getAttribute(\"index\");\r\n\t\t\t\t\t\tsec = src;\r\n\t\t\t\t\t\twhile (sec && domHelpers.getClassName(sec).indexOf(\"gantt_cal_lsection\") == -1) {\r\n\t\t\t\t\t\t\tsec = sec.parentNode;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tindex = src.getAttribute(\"index\");\r\n\t\t\t\t\t\tsec = src.parentNode;\r\n\t\t\t\t\t\tsrc = src.firstChild;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tvar sections = gantt._get_typed_lightbox_config();\r\n\r\n\t\t\t\tif (index) {\r\n\t\t\t\t\tindex = index * 1;\r\n\t\t\t\t\tblock = gantt.form_blocks[sections[index * 1].type];\r\n\t\t\t\t\tblock.button_click(index, src, sec, sec.nextSibling);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t};\r\n\t\tthis.event(gantt.getLightbox(), \"click\", function (e) {\r\n\t\t\te = e || window.event;\r\n\t\t\tvar src = e.target ? e.target : e.srcElement;\r\n\r\n\t\t\tvar className = domHelpers.getClassName(src);\r\n\t\t\tif (!className) {\r\n\t\t\t\tsrc = src.previousSibling;\r\n\t\t\t\tclassName = domHelpers.getClassName(src);\r\n\t\t\t}\r\n\t\t\tif (src && className && className.indexOf(\"gantt_btn_set\") === 0) {\r\n\t\t\t\tsrc = src.firstChild;\r\n\t\t\t\tclassName = domHelpers.getClassName(src);\r\n\t\t\t}\r\n\t\t\tif (src && className) {\r\n\t\t\t\tvar func = gantt.defined(gantt.lightbox_events[src.className]) ? gantt.lightbox_events[src.className] : gantt.lightbox_events[\"default\"];\r\n\t\t\t\treturn func(e, src);\r\n\t\t\t}\r\n\t\t\treturn false;\r\n\t\t});\r\n\r\n\t\tgantt.getLightbox().onkeydown = function (e) {\r\n\t\t\tvar event = e || window.event;\r\n\t\t\tvar target = e.target || e.srcElement;\r\n\t\t\tvar buttonTarget = !!(domHelpers.getClassName(target).indexOf(\"gantt_btn_set\") > -1);\r\n\r\n\t\t\tswitch ((e || event).keyCode) {\r\n\t\t\t\tcase 32: {//space\r\n\t\t\t\t\tif ((e || event).shiftKey) return;\r\n\t\t\t\t\tif (buttonTarget && target.click) {\r\n\t\t\t\t\t\ttarget.click();\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t\tcase gantt.keys.edit_save:\r\n\t\t\t\t\tif ((e || event).shiftKey) return;\r\n\t\t\t\t\tif (buttonTarget && target.click) {\r\n\t\t\t\t\t\ttarget.click();\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tgantt._save_lightbox();\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase gantt.keys.edit_cancel:\r\n\t\t\t\t\tgantt._cancel_lightbox();\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tdefault:\r\n\t\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t};\r\n\t};\r\n\r\n\tgantt._cancel_lightbox = function () {\r\n\t\tvar task = this.getLightboxValues();\r\n\t\tthis.callEvent(\"onLightboxCancel\", [this._lightbox_id, task.$new]);\r\n\t\tif (gantt.isTaskExists(task.id) && task.$new) {\r\n\t\t\tthis.silent(function(){\r\n\t\t\t\tgantt.$data.tasksStore.removeItem(task.id);\r\n\t\t\t\tgantt._update_flags(task.id, null);\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\tthis.refreshData();\r\n\t\tthis.hideLightbox();\r\n\t};\r\n\r\n\tgantt._save_lightbox = function () {\r\n\t\tvar task = this.getLightboxValues();\r\n\t\tif (!this.callEvent(\"onLightboxSave\", [this._lightbox_id, task, !!task.$new]))\r\n\t\t\treturn;\r\n\r\n\t\tif (task.$new) {\r\n\t\t\tdelete task.$new;\r\n\t\t\tthis.addTask(task);\r\n\t\t}else if(this.isTaskExists(task.id)){\r\n\t\t\tthis.mixin(this.getTask(task.id), task, true);\r\n\t\t\tthis.refreshTask(task.id);\r\n\t\t\tthis.updateTask(task.id);\r\n\t\t}\r\n\t\tthis.refreshData();\r\n\r\n\t\t// TODO: do we need any blockable events here to prevent closing lightbox?\r\n\t\tthis.hideLightbox();\r\n\t};\r\n\r\n\tgantt._resolve_default_mapping = function (section) {\r\n\t\tvar mapping = section.map_to;\r\n\t\tvar time_controls = {\"time\": true, \"time_optional\": true, \"duration\": true, \"duration_optional\": true};\r\n\t\tif (time_controls[section.type]) {\r\n\t\t\tif (section.map_to == 'auto') {\r\n\t\t\t\tmapping = {start_date: \"start_date\", end_date: \"end_date\", duration: \"duration\"};\r\n\t\t\t} else if (typeof(section.map_to) === \"string\") {\r\n\t\t\t\tmapping = {start_date: section.map_to};\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn mapping;\r\n\t};\r\n\r\n\tgantt.getLightboxValues = function () {\r\n\t\tvar task = {};\r\n\r\n\t\tif (gantt.isTaskExists(this._lightbox_id)) {\r\n\t\t\ttask = this.mixin({}, this.getTask(this._lightbox_id));\r\n\t\t}\r\n\r\n\t\tvar sns = this._get_typed_lightbox_config();\r\n\t\tfor (var i = 0; i < sns.length; i++) {\r\n\t\t\tvar node = document.getElementById(sns[i].id);\r\n\t\t\tnode = (node ? node.nextSibling : node);\r\n\t\t\tvar block = this.form_blocks[sns[i].type];\r\n\t\t\tif (!block) continue;\r\n\t\t\tvar res = block.get_value.call(this, node, task, sns[i]);\r\n\t\t\tvar map_to = gantt._resolve_default_mapping(sns[i]);\r\n\t\t\tif (typeof map_to == \"string\" && map_to != \"auto\") {\r\n\t\t\t\ttask[map_to] = res;\r\n\t\t\t} else if (typeof map_to == \"object\") {\r\n\t\t\t\tfor (var property in map_to) {\r\n\t\t\t\t\tif (map_to[property])\r\n\t\t\t\t\t\ttask[map_to[property]] = res[property];\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn task;\r\n\t};\r\n\r\n\r\n\tgantt.hideLightbox = function () {\r\n\t\tvar box = this.getLightbox();\r\n\t\tif (box) box.style.display = \"none\";\r\n\r\n\t\tthis._waiAria.lightboxHiddenAttr(box);\r\n\t\tthis._lightbox_id = null;\r\n\r\n\t\tthis.hideCover();\r\n\t\tthis.callEvent(\"onAfterLightbox\", []);\r\n\t};\r\n\tgantt.hideCover = function () {\r\n\t\tif (this._cover)\r\n\t\t\tthis._cover.parentNode.removeChild(this._cover);\r\n\t\tthis._cover = null;\r\n\t};\r\n\r\n\tgantt.resetLightbox = function () {\r\n\t\tif (gantt._lightbox && !gantt._custom_lightbox)\r\n\t\t\tgantt._lightbox.parentNode.removeChild(gantt._lightbox);\r\n\t\tgantt._lightbox = null;\r\n\t};\r\n\tgantt._set_lightbox_values = function (data, box) {\r\n\t\tvar task = data;\r\n\t\tvar s = box.getElementsByTagName(\"span\");\r\n\t\tvar lightboxHeader = [];\r\n\t\tif (gantt.templates.lightbox_header) {\r\n\t\t\tlightboxHeader.push(\"\");\r\n\t\t\tlightboxHeader.push(gantt.templates.lightbox_header(task.start_date, task.end_date, task));\r\n\t\t\ts[1].innerHTML = \"\";\r\n\t\t\ts[2].innerHTML = gantt.templates.lightbox_header(task.start_date, task.end_date, task);\r\n\t\t} else {\r\n\t\t\tlightboxHeader.push(this.templates.task_time(task.start_date, task.end_date, task));\r\n\t\t\tlightboxHeader.push((this.templates.task_text(task.start_date, task.end_date, task) || \"\").substr(0, 70)); //IE6 fix\r\n\t\t\ts[1].innerHTML = this.templates.task_time(task.start_date, task.end_date, task);\r\n\t\t\ts[2].innerHTML = (this.templates.task_text(task.start_date, task.end_date, task) || \"\").substr(0, 70); //IE6 fix\r\n\t\t}\r\n\t\ts[1].innerHTML = lightboxHeader[0];\r\n\t\ts[2].innerHTML = lightboxHeader[1];\r\n\r\n\t\tgantt._waiAria.lightboxHeader(box, lightboxHeader.join(\" \"));\r\n\r\n\t\tvar sns = this._get_typed_lightbox_config(this.getLightboxType());\r\n\t\tfor (var i = 0; i < sns.length; i++) {\r\n\t\t\tvar section = sns[i];\r\n\r\n\t\t\tif (!this.form_blocks[section.type]) {\r\n\t\t\t\tcontinue;//skip incorrect sections, same check is done during rendering\r\n\t\t\t}\r\n\r\n\r\n\t\t\tvar node = document.getElementById(section.id).nextSibling;\r\n\t\t\tvar block = this.form_blocks[section.type];\r\n\t\t\tvar map_to = gantt._resolve_default_mapping(sns[i]);\r\n\t\t\tvar value = this.defined(task[map_to]) ? task[map_to] : section.default_value;\r\n\t\t\tblock.set_value.call(gantt, node, value, task, section);\r\n\r\n\t\t\tif (section.focus)\r\n\t\t\t\tblock.focus.call(gantt, node);\r\n\t\t}\r\n\t\tif (data.id)\r\n\t\t\tgantt._lightbox_id = data.id;\r\n\t};\r\n\tgantt._fill_lightbox = function (id, box) {\r\n\t\tvar task = this.getTask(id);\r\n\t\tthis._set_lightbox_values(task, box);\r\n\t};\r\n\r\n\r\n\tgantt.getLightboxSection = function (name) {\r\n\t\tvar config = this._get_typed_lightbox_config();\r\n\t\tvar i = 0;\r\n\t\tfor (i; i < config.length; i++)\r\n\t\t\tif (config[i].name == name)\r\n\t\t\t\tbreak;\r\n\t\tvar section = config[i];\r\n\t\tif (!section)\r\n\t\t\treturn null;\r\n\r\n\t\tif (!this._lightbox)\r\n\t\t\tthis.getLightbox();\r\n\t\tvar header = document.getElementById(section.id);\r\n\t\tvar node = header.nextSibling;\r\n\r\n\t\tvar result = {\r\n\t\t\tsection: section,\r\n\t\t\theader: header,\r\n\t\t\tnode: node,\r\n\t\t\tgetValue: function (ev) {\r\n\t\t\t\treturn gantt.form_blocks[section.type].get_value.call(gantt, node, (ev || {}), section);\r\n\t\t\t},\r\n\t\t\tsetValue: function (value, ev) {\r\n\t\t\t\treturn gantt.form_blocks[section.type].set_value.call(gantt, node, value, (ev || {}), section);\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\tvar handler = this._lightbox_methods[\"get_\" + section.type + \"_control\"];\r\n\t\treturn handler ? handler(result) : result;\r\n\t};\r\n\r\n\tgantt._lightbox_methods.get_template_control = function (result) {\r\n\t\tresult.control = result.node;\r\n\t\treturn result;\r\n\t};\r\n\tgantt._lightbox_methods.get_select_control = function (result) {\r\n\t\tresult.control = result.node.getElementsByTagName('select')[0];\r\n\t\treturn result;\r\n\t};\r\n\tgantt._lightbox_methods.get_textarea_control = function (result) {\r\n\t\tresult.control = result.node.getElementsByTagName('textarea')[0];\r\n\t\treturn result;\r\n\t};\r\n\tgantt._lightbox_methods.get_time_control = function (result) {\r\n\t\tresult.control = result.node.getElementsByTagName('select'); // array\r\n\t\treturn result;\r\n\t};\r\n\r\n\r\n\tgantt._init_dnd_events = function () {\r\n\t\tthis.event(document.body, \"mousemove\", gantt._move_while_dnd);\r\n\t\tthis.event(document.body, \"mouseup\", gantt._finish_dnd);\r\n\t\tgantt._init_dnd_events = function () {\r\n\t\t};\r\n\t};\r\n\tgantt._move_while_dnd = function (e) {\r\n\t\tif (gantt._dnd_start_lb) {\r\n\t\t\tif (!document.gantt_unselectable) {\r\n\t\t\t\tdocument.body.className += \" gantt_unselectable\";\r\n\t\t\t\tdocument.gantt_unselectable = true;\r\n\t\t\t}\r\n\t\t\tvar lb = gantt.getLightbox();\r\n\t\t\tvar now = (e && e.target) ? [e.pageX, e.pageY] : [event.clientX, event.clientY];\r\n\t\t\tlb.style.top = gantt._lb_start[1] + now[1] - gantt._dnd_start_lb[1] + \"px\";\r\n\t\t\tlb.style.left = gantt._lb_start[0] + now[0] - gantt._dnd_start_lb[0] + \"px\";\r\n\t\t}\r\n\t};\r\n\tgantt._ready_to_dnd = function (e) {\r\n\t\tvar lb = gantt.getLightbox();\r\n\t\tgantt._lb_start = [parseInt(lb.style.left, 10), parseInt(lb.style.top, 10)];\r\n\t\tgantt._dnd_start_lb = (e && e.target) ? [e.pageX, e.pageY] : [event.clientX, event.clientY];\r\n\t};\r\n\tgantt._finish_dnd = function () {\r\n\t\tif (gantt._lb_start) {\r\n\t\t\tgantt._lb_start = gantt._dnd_start_lb = false;\r\n\t\t\tdocument.body.className = document.body.className.replace(\" gantt_unselectable\", \"\");\r\n\t\t\tdocument.gantt_unselectable = false;\r\n\t\t}\r\n\t};\r\n\r\n\r\n\tgantt._focus = function (node, select) {\r\n\t\tif (node && node.focus) {\r\n\t\t\tif (gantt.config.touch) {\r\n\t\t\t\t//do not focus editor, to prevent auto-zoom\r\n\t\t\t} else {\r\n\t\t\t\ttry {\r\n\t\t\t\t\tif (select && node.select) node.select();\r\n\t\t\t\t\tnode.focus();\r\n\t\t\t\t} catch (e) {\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\r\n\r\n\tgantt.form_blocks = {\r\n\t\tgetTimePicker: function (sns, hidden) {\r\n\t\t\tvar time_format = sns.time_format;\r\n\t\t\tif (!time_format) {\r\n\t\t\t\t// default order\r\n\t\t\t\tvar time_format = [\"%d\", \"%m\", \"%Y\"];\r\n\t\t\t\tif (gantt._get_line(gantt.getScale().unit) < gantt._get_line(\"day\")) {\r\n\t\t\t\t\ttime_format.push(\"%H:%i\");\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t// map: default order => real one\r\n\t\t\tsns._time_format_order = {size: 0};\r\n\r\n\r\n\t\t\tvar cfg = this.config;\r\n\t\t\tvar dt = this.date.date_part(new Date(gantt._min_date.valueOf()));\r\n\t\t\tvar last = 24 * 60, first = 0;\r\n\t\t\tif (gantt.config.limit_time_select) {\r\n\t\t\t\tlast = 60 * cfg.last_hour + 1;\r\n\t\t\t\tfirst = 60 * cfg.first_hour;\r\n\t\t\t\tdt.setHours(cfg.first_hour);\r\n\t\t\t}\r\n\t\t\tvar html = \"\";\r\n\r\n\t\t\tfor (var p = 0; p < time_format.length; p++) {\r\n\t\t\t\tvar time_option = time_format[p];\r\n\r\n\t\t\t\t// adding spaces between selects\r\n\t\t\t\tif (p > 0) {\r\n\t\t\t\t\thtml += \" \";\r\n\t\t\t\t}\r\n\r\n\t\t\t\tvar options = '';\r\n\t\t\t\tswitch (time_option) {\r\n\t\t\t\t\tcase \"%Y\":\r\n\t\t\t\t\t\tsns._time_format_order[2] = p;\r\n\t\t\t\t\t\tsns._time_format_order.size++;\r\n\t\t\t\t\t\t//year\r\n\r\n\t\t\t\t\t\tvar range, offset, start_year, end_year;\r\n\r\n\t\t\t\t\t\tif (sns.year_range) {\r\n\t\t\t\t\t\t\tif (!isNaN(sns.year_range)) {\r\n\t\t\t\t\t\t\t\trange = sns.year_range;\r\n\t\t\t\t\t\t\t} else if (sns.year_range.push) {\r\n\t\t\t\t\t\t\t\t// if\r\n\t\t\t\t\t\t\t\tstart_year = sns.year_range[0];\r\n\t\t\t\t\t\t\t\tend_year = sns.year_range[1];\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\trange = range || 10;\r\n\t\t\t\t\t\toffset = offset || Math.floor(range / 2);\r\n\t\t\t\t\t\tstart_year = start_year || dt.getFullYear() - offset;\r\n\t\t\t\t\t\tend_year = end_year || start_year + range;\r\n\r\n\r\n\t\t\t\t\t\tfor (var i = start_year; i < end_year; i++)\r\n\t\t\t\t\t\t\toptions += \"<option value='\" + (i) + \"'>\" + (i) + \"</option>\";\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase \"%m\":\r\n\t\t\t\t\t\tsns._time_format_order[1] = p;\r\n\t\t\t\t\t\tsns._time_format_order.size++;\r\n\t\t\t\t\t\t//month\r\n\t\t\t\t\t\tfor (var i = 0; i < 12; i++)\r\n\t\t\t\t\t\t\toptions += \"<option value='\" + i + \"'>\" + this.locale.date.month_full[i] + \"</option>\";\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase \"%d\":\r\n\t\t\t\t\t\tsns._time_format_order[0] = p;\r\n\t\t\t\t\t\tsns._time_format_order.size++;\r\n\t\t\t\t\t\t//days\r\n\t\t\t\t\t\tfor (var i = 1; i < 32; i++)\r\n\t\t\t\t\t\t\toptions += \"<option value='\" + i + \"'>\" + i + \"</option>\";\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase \"%H:%i\":\r\n\t\t\t\t\t\t//  var last = 24*60, first = 0;\r\n\t\t\t\t\t\tsns._time_format_order[3] = p;\r\n\t\t\t\t\t\tsns._time_format_order.size++;\r\n\t\t\t\t\t\t//hours\r\n\t\t\t\t\t\tvar i = first;\r\n\t\t\t\t\t\tvar tdate = dt.getDate();\r\n\t\t\t\t\t\tsns._time_values = [];\r\n\r\n\t\t\t\t\t\twhile (i < last) {\r\n\t\t\t\t\t\t\tvar time = this.templates.time_picker(dt);\r\n\t\t\t\t\t\t\toptions += \"<option value='\" + i + \"'>\" + time + \"</option>\";\r\n\t\t\t\t\t\t\tsns._time_values.push(i);\r\n\t\t\t\t\t\t\tdt.setTime(dt.valueOf() + this._get_timepicker_step() * 60 * 1000);\r\n\t\t\t\t\t\t\tvar diff = (dt.getDate() != tdate) ? 1 : 0; // moved or not to the next day\r\n\t\t\t\t\t\t\ti = diff * 24 * 60 + dt.getHours() * 60 + dt.getMinutes();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tdefault:\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (options) {\r\n\r\n\t\t\t\t\tvar ariaAttrs = gantt._waiAria.lightboxSelectAttrString(time_option);\r\n\r\n\t\t\t\t\tvar readonly = sns.readonly ? \"disabled='disabled'\" : \"\";\r\n\t\t\t\t\tvar display = hidden ? \" style='display:none' \" : \"\";\r\n\t\t\t\t\thtml += \"<select \" + readonly + display + ariaAttrs + \">\" + options + \"</select>\";\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn html;\r\n\t\t},\r\n\t\t_fill_lightbox_select: function (s, i, d, map, cfg) {\r\n\t\t\ts[i + map[0]].value = d.getDate();\r\n\t\t\ts[i + map[1]].value = d.getMonth();\r\n\t\t\ts[i + map[2]].value = d.getFullYear();\r\n\t\t\tif (gantt.defined(map[3])) {\r\n\t\t\t\tvar v = d.getHours() * 60 + d.getMinutes();\r\n\t\t\t\tv = Math.round(v / gantt._get_timepicker_step()) * gantt._get_timepicker_step();\r\n\t\t\t\tvar input = s[i + map[3]];\r\n\t\t\t\tinput.value = v;\r\n\t\t\t\t//in case option not shown\r\n\t\t\t\tinput.setAttribute('data-value', v);\r\n\t\t\t}\r\n\t\t},\r\n\t\ttemplate: {\r\n\t\t\trender: function (sns) {\r\n\t\t\t\tvar height = (sns.height || \"30\") + \"px\";\r\n\t\t\t\treturn \"<div class='gantt_cal_ltext gantt_cal_template' style='height:\" + height + \";'></div>\";\r\n\t\t\t},\r\n\t\t\tset_value: function (node, value, ev, config) {\r\n\t\t\t\tnode.innerHTML = value || \"\";\r\n\t\t\t},\r\n\t\t\tget_value: function (node, ev, config) {\r\n\t\t\t\treturn node.innerHTML || \"\";\r\n\t\t\t},\r\n\t\t\tfocus: function (node) {\r\n\t\t\t}\r\n\t\t},\r\n\t\ttextarea: {\r\n\t\t\trender: function (sns) {\r\n\t\t\t\tvar height = (sns.height || \"130\") + \"px\";\r\n\t\t\t\treturn \"<div class='gantt_cal_ltext' style='height:\" + height + \";'><textarea></textarea></div>\";\r\n\t\t\t},\r\n\t\t\tset_value: function (node, value, ev) {\r\n\t\t\t\tthis.form_blocks.textarea._get_input(node).value = value || \"\";\r\n\t\t\t},\r\n\t\t\tget_value: function (node, ev) {\r\n\t\t\t\treturn this.form_blocks.textarea._get_input(node).value;\r\n\t\t\t},\r\n\t\t\tfocus: function (node) {\r\n\t\t\t\tvar a = this.form_blocks.textarea._get_input(node);\r\n\t\t\t\tgantt._focus(a, true);\r\n\t\t\t},\r\n\t\t\t_get_input: function (node) {\r\n\t\t\t\treturn node.querySelector(\"textarea\");\r\n\t\t\t}\r\n\t\t},\r\n\t\tselect: {\r\n\t\t\trender: function (sns) {\r\n\t\t\t\tvar height = (sns.height || \"23\") + \"px\";\r\n\t\t\t\tvar html = \"<div class='gantt_cal_ltext' style='height:\" + height + \";'><select style='width:100%;'>\";\r\n\t\t\t\tfor (var i = 0; i < sns.options.length; i++)\r\n\t\t\t\t\thtml += \"<option value='\" + sns.options[i].key + \"'>\" + sns.options[i].label + \"</option>\";\r\n\t\t\t\thtml += \"</select></div>\";\r\n\t\t\t\treturn html;\r\n\t\t\t},\r\n\t\t\tset_value: function (node, value, ev, sns) {\r\n\t\t\t\tvar select = node.firstChild;\r\n\t\t\t\tif (!select._dhx_onchange && sns.onchange) {\r\n\t\t\t\t\tselect.onchange = sns.onchange;\r\n\t\t\t\t\tselect._dhx_onchange = true;\r\n\t\t\t\t}\r\n\t\t\t\tif (typeof value == \"undefined\")\r\n\t\t\t\t\tvalue = (select.options[0] || {}).value;\r\n\t\t\t\tselect.value = value || \"\";\r\n\t\t\t},\r\n\t\t\tget_value: function (node, ev) {\r\n\t\t\t\treturn node.firstChild.value;\r\n\t\t\t},\r\n\t\t\tfocus: function (node) {\r\n\t\t\t\tvar a = node.firstChild;\r\n\t\t\t\tgantt._focus(a, true);\r\n\t\t\t}\r\n\t\t},\r\n\t\ttime: {\r\n\t\t\trender: function (sns) {\r\n\t\t\t\tvar time = this.form_blocks.getTimePicker.call(this, sns);\r\n\t\t\t\tvar parts = [\"<div style='height:\" + (sns.height || 30) + \"px;padding-top:0px;font-size:inherit;text-align:center;' class='gantt_section_time'>\"];\r\n\t\t\t\tparts.push(time);\r\n\r\n\t\t\t\tif (sns.single_date) {\r\n\t\t\t\t\ttime = this.form_blocks.getTimePicker.call(this, sns, true);\r\n\t\t\t\t\tparts.push(\"<span></span>\");\r\n\t\t\t\t} else {\r\n\t\t\t\t\tparts.push(\"<span style='font-weight:normal; font-size:10pt;'> &nbsp;&ndash;&nbsp; </span>\");\r\n\t\t\t\t}\r\n\r\n\t\t\t\tparts.push(time);\r\n\t\t\t\tparts.push(\"</div>\");\r\n\t\t\t\treturn parts.join('');\r\n\t\t\t},\r\n\t\t\tset_value: function (node, value, ev, config) {\r\n\t\t\t\tvar cfg = config;\r\n\t\t\t\tvar s = node.getElementsByTagName(\"select\");\r\n\r\n\t\t\t\tvar map = config._time_format_order;\r\n\t\t\t\tvar map_size = config._time_format_size;\r\n\r\n\t\t\t\tif (cfg.auto_end_date) {\r\n\t\t\t\t\tvar _update_lightbox_select = function () {\r\n\t\t\t\t\t\tstart_date = new Date(s[map[2]].value, s[map[1]].value, s[map[0]].value, 0, 0);\r\n\t\t\t\t\t\tend_date = gantt.calculateEndDate({start_date: start_date, duration: 1, task: ev});\r\n\t\t\t\t\t\tthis.form_blocks._fill_lightbox_select(s, map.size, end_date, map, cfg);\r\n\t\t\t\t\t};\r\n\t\t\t\t\tfor (var i = 0; i < 4; i++) {\r\n\t\t\t\t\t\ts[i].onchange = _update_lightbox_select;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tvar mapping = gantt._resolve_default_mapping(config);\r\n\r\n\t\t\t\tif (typeof(mapping) === \"string\") mapping = {start_date: mapping};\r\n\r\n\t\t\t\tvar start_date = ev[mapping.start_date] || new Date();\r\n\t\t\t\tvar end_date = ev[mapping.end_date] || gantt.calculateEndDate({\r\n\t\t\t\t\tstart_date: start_date,\r\n\t\t\t\t\tduration: 1,\r\n\t\t\t\t\ttask: ev\r\n\t\t\t\t});\r\n\r\n\t\t\t\tthis.form_blocks._fill_lightbox_select(s, 0, start_date, map, cfg);\r\n\t\t\t\tthis.form_blocks._fill_lightbox_select(s, map.size, end_date, map, cfg);\r\n\t\t\t},\r\n\r\n\t\t\tget_value: function (node, ev, config) {\r\n\t\t\t\tvar s = node.getElementsByTagName(\"select\");\r\n\t\t\t\tvar map = config._time_format_order;\r\n\r\n\t\t\t\tvar hours = 0, minutes = 0;\r\n\t\t\t\tif (gantt.defined(map[3])) {\r\n\t\t\t\t\tvar time = parseInt(s[map[3]].value, 10);\r\n\t\t\t\t\thours = Math.floor(time / 60);\r\n\t\t\t\t\tminutes = time % 60;\r\n\t\t\t\t}\r\n\t\t\t\tvar start_date = new Date(s[map[2]].value, s[map[1]].value, s[map[0]].value, hours, minutes);\r\n\r\n\t\t\t\thours = minutes = 0;\r\n\t\t\t\tif (gantt.defined(map[3])) {\r\n\t\t\t\t\tvar time = parseInt(s[map.size + map[3]].value, 10);\r\n\t\t\t\t\thours = Math.floor(time / 60);\r\n\t\t\t\t\tminutes = time % 60;\r\n\t\t\t\t}\r\n\t\t\t\tvar end_date = new Date(s[map[2] + map.size].value, s[map[1] + map.size].value, s[map[0] + map.size].value, hours, minutes);\r\n\r\n\t\t\t\tif (end_date <= start_date)\r\n\t\t\t\t\tend_date = gantt.date.add(start_date, gantt._get_timepicker_step(), \"minute\");\r\n\r\n\t\t\t\tvar mapped_fields = gantt._resolve_default_mapping(config);\r\n\r\n\t\t\t\tvar res = {\r\n\t\t\t\t\tstart_date: new Date(start_date),\r\n\t\t\t\t\tend_date: new Date(end_date)\r\n\t\t\t\t};\r\n\t\t\t\tif (typeof mapped_fields == \"string\") {\r\n\t\t\t\t\treturn res.start_date;\r\n\t\t\t\t} else {\r\n\t\t\t\t\treturn res;\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tfocus: function (node) {\r\n\t\t\t\tgantt._focus(node.getElementsByTagName(\"select\")[0]);\r\n\t\t\t}\r\n\t\t},\r\n\t\tduration: {\r\n\t\t\trender: function (sns) {\r\n\t\t\t\tvar time = this.form_blocks.getTimePicker.call(this, sns);\r\n\t\t\t\ttime = \"<div class='gantt_time_selects'>\" + time + \"</div>\";\r\n\t\t\t\tvar label = this.locale.labels[this.config.duration_unit + \"s\"];\r\n\r\n\t\t\t\tvar singleDate = sns.single_date ? ' style=\"display:none\"' : \"\";\r\n\t\t\t\tvar readonly = sns.readonly ? \" disabled='disabled'\" : \"\";\r\n\r\n\t\t\t\tvar ariaAttr = this._waiAria.lightboxDurationInputAttrString(sns);\r\n\r\n\t\t\t\tvar duration = \"<div class='gantt_duration' \" + singleDate + \">\" +\r\n\t\t\t\t\t\"<input type='button' class='gantt_duration_dec' value=''\" + readonly + \">\" +\r\n\t\t\t\t\t\"<input type='text' value='5' class='gantt_duration_value'\" + readonly + \" \" + ariaAttr + \">\" +\r\n\t\t\t\t\t\"<input type='button' class='gantt_duration_inc' value='+'\" + readonly + \"> \" + label + \" <span></span>\" +\r\n\t\t\t\t\t\"</div>\";\r\n\t\t\t\tvar html = \"<div style='height:\" + (sns.height || 30) + \"px;padding-top:0px;font-size:inherit;' class='gantt_section_time'>\" + time + \" \" + duration + \"</div>\";\r\n\t\t\t\treturn html;\r\n\t\t\t},\r\n\t\t\tset_value: function (node, value, ev, config) {\r\n\t\t\t\tvar cfg = config;\r\n\t\t\t\tvar s = node.getElementsByTagName(\"select\");\r\n\t\t\t\tvar inps = node.getElementsByTagName(\"input\");\r\n\r\n\t\t\t\tvar duration = inps[1];\r\n\t\t\t\tvar btns = [inps[0], inps[2]];\r\n\t\t\t\tvar endspan = node.getElementsByTagName(\"span\")[0];\r\n\r\n\t\t\t\tvar map = config._time_format_order;\r\n\r\n\t\t\t\tfunction _calc_date() {\r\n\t\t\t\t\tvar start_date = gantt.form_blocks.duration._get_start_date.call(gantt, node, config);\r\n\t\t\t\t\tvar duration = gantt.form_blocks.duration._get_duration.call(gantt, node, config);\r\n\t\t\t\t\tvar end_date = gantt.calculateEndDate({start_date: start_date, duration: duration, task: ev});\r\n\r\n\t\t\t\t\tendspan.innerHTML = gantt.templates.task_date(end_date);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tfunction _change_duration(step) {\r\n\t\t\t\t\tvar value = duration.value;\r\n\t\t\t\t\tvalue = parseInt(value, 10);\r\n\t\t\t\t\tif (window.isNaN(value))\r\n\t\t\t\t\t\tvalue = 0;\r\n\t\t\t\t\tvalue += step;\r\n\t\t\t\t\tif (value < 1) value = 1;\r\n\t\t\t\t\tduration.value = value;\r\n\t\t\t\t\t_calc_date();\r\n\t\t\t\t}\r\n\r\n\t\t\t\tbtns[0].onclick = gantt.bind(function () {\r\n\t\t\t\t\t_change_duration(-1 * this.config.duration_step);\r\n\t\t\t\t}, this);\r\n\t\t\t\tbtns[1].onclick = gantt.bind(function () {\r\n\t\t\t\t\t_change_duration(1 * this.config.duration_step);\r\n\t\t\t\t}, this);\r\n\t\t\t\ts[0].onchange = _calc_date;\r\n\t\t\t\ts[1].onchange = _calc_date;\r\n\t\t\t\ts[2].onchange = _calc_date;\r\n\t\t\t\tif (s[3]) s[3].onchange = _calc_date;\r\n\t\t\t\tduration.onkeydown = gantt.bind(function (e) {\r\n\t\t\t\t\te = e || window.event;\r\n\t\t\t\t\t// up\r\n\t\t\t\t\tvar code = (e.charCode || e.keyCode || e.which);\r\n\r\n\t\t\t\t\tif (code == 40) {\r\n\t\t\t\t\t\t_change_duration(-1 * this.config.duration_step);\r\n\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t}\r\n\t\t\t\t\t// down\r\n\t\t\t\t\tif (code == 38) {\r\n\t\t\t\t\t\t_change_duration(1 * this.config.duration_step);\r\n\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t}\r\n\t\t\t\t\twindow.setTimeout(function (e) {\r\n\t\t\t\t\t\t_calc_date();\r\n\t\t\t\t\t}, 1);\r\n\t\t\t\t}, this);\r\n\r\n\t\t\t\tduration.onchange = gantt.bind(function (e) {\r\n\t\t\t\t\t_calc_date();\r\n\t\t\t\t}, this);\r\n\r\n\t\t\t\tvar mapping = gantt._resolve_default_mapping(config);\r\n\t\t\t\tif (typeof(mapping) === \"string\") mapping = {start_date: mapping};\r\n\r\n\t\t\t\tvar start_date = ev[mapping.start_date] || new Date();\r\n\t\t\t\tvar end_date = ev[mapping.end_date] || gantt.calculateEndDate({\r\n\t\t\t\t\tstart_date: start_date,\r\n\t\t\t\t\tduration: 1,\r\n\t\t\t\t\ttask: ev\r\n\t\t\t\t});\r\n\t\t\t\tvar duration_val = Math.round(ev[mapping.duration]) || gantt.calculateDuration({\r\n\t\t\t\t\tstart_date: start_date,\r\n\t\t\t\t\tend_date: end_date,\r\n\t\t\t\t\ttask: ev\r\n\t\t\t\t});\r\n\r\n\t\t\t\tgantt.form_blocks._fill_lightbox_select(s, 0, start_date, map, cfg);\r\n\t\t\t\tduration.value = duration_val;\r\n\t\t\t\t_calc_date();\r\n\t\t\t},\r\n\r\n\t\t\t_get_start_date: function (node, config) {\r\n\t\t\t\tvar s = node.getElementsByTagName(\"select\");\r\n\t\t\t\tvar map = config._time_format_order;\r\n\t\t\t\tvar hours = 0;\r\n\t\t\t\tvar minutes = 0;\r\n\t\t\t\tif (gantt.defined(map[3])) {\r\n\t\t\t\t\tvar input = s[map[3]];\r\n\t\t\t\t\tvar time = parseInt(input.value, 10);\r\n\t\t\t\t\tif (isNaN(time) && input.hasAttribute(\"data-value\")) {\r\n\t\t\t\t\t\ttime = parseInt(input.getAttribute(\"data-value\"), 10);\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\thours = Math.floor(time / 60);\r\n\t\t\t\t\tminutes = time % 60;\r\n\t\t\t\t}\r\n\t\t\t\treturn new Date(s[map[2]].value, s[map[1]].value, s[map[0]].value, hours, minutes);\r\n\t\t\t},\r\n\t\t\t_get_duration: function (node, config) {\r\n\t\t\t\tvar duration = node.getElementsByTagName(\"input\")[1];\r\n\t\t\t\tduration = parseInt(duration.value, 10);\r\n\t\t\t\tif (!duration || window.isNaN(duration)) duration = 1;\r\n\t\t\t\tif (duration < 0) duration *= -1;\r\n\t\t\t\treturn duration;\r\n\t\t\t},\r\n\r\n\t\t\tget_value: function (node, ev, config) {\r\n\t\t\t\tvar start_date = gantt.form_blocks.duration._get_start_date(node, config);\r\n\t\t\t\tvar duration = gantt.form_blocks.duration._get_duration(node, config);\r\n\r\n\t\t\t\tvar end_date = gantt.calculateEndDate({start_date: start_date, duration: duration, task: ev});\r\n\t\t\t\tvar mapped_fields = gantt._resolve_default_mapping(config);\r\n\t\t\t\tvar res = {\r\n\t\t\t\t\tstart_date: new Date(start_date),\r\n\t\t\t\t\tend_date: new Date(end_date),\r\n\t\t\t\t\tduration: duration\r\n\t\t\t\t};\r\n\t\t\t\tif (typeof mapped_fields == \"string\") {\r\n\t\t\t\t\treturn res.start_date;\r\n\t\t\t\t} else {\r\n\t\t\t\t\treturn res;\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tfocus: function (node) {\r\n\t\t\t\tgantt._focus(node.getElementsByTagName(\"select\")[0]);\r\n\t\t\t}\r\n\t\t},\r\n\t\tparent: {\r\n\t\t\t_filter: function (options, config, item_id) {\r\n\t\t\t\tvar filter = config.filter || function () {\r\n\t\t\t\t\treturn true;\r\n\t\t\t\t};\r\n\r\n\t\t\t\toptions = options.slice(0);\r\n\r\n\t\t\t\tfor (var i = 0; i < options.length; i++) {\r\n\t\t\t\t\tvar task = options[i];\r\n\t\t\t\t\tif (task.id == item_id || gantt.isChildOf(task.id, item_id) || filter(task.id, task) === false) {\r\n\t\t\t\t\t\toptions.splice(i, 1);\r\n\t\t\t\t\t\ti--;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\treturn options;\r\n\t\t\t},\r\n\r\n\t\t\t_display: function (config, item_id) {\r\n\t\t\t\tvar tasks = [],\r\n\t\t\t\t\toptions = [];\r\n\t\t\t\tif (item_id) {\r\n\t\t\t\t\ttasks = gantt.getTaskByTime();\r\n\t\t\t\t\tif (config.allow_root) {\r\n\t\t\t\t\t\ttasks.unshift({id: gantt.config.root_id, text: config.root_label || \"\"});\r\n\t\t\t\t\t}\r\n\t\t\t\t\ttasks = this._filter(tasks, config, item_id);\r\n\t\t\t\t\tif (config.sort) {\r\n\t\t\t\t\t\ttasks.sort(config.sort);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tvar text = config.template || gantt.templates.task_text;\r\n\t\t\t\tfor (var i = 0; i < tasks.length; i++) {\r\n\t\t\t\t\tvar label = text.apply(gantt, [tasks[i].start_date, tasks[i].end_date, tasks[i]]);\r\n\t\t\t\t\tif (label === undefined) {\r\n\t\t\t\t\t\tlabel = \"\";\r\n\t\t\t\t\t}\r\n\t\t\t\t\toptions.push({\r\n\t\t\t\t\t\tkey: tasks[i].id,\r\n\t\t\t\t\t\tlabel: label\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t\tconfig.options = options;\r\n\t\t\t\tconfig.map_to = config.map_to || \"parent\";\r\n\t\t\t\treturn gantt.form_blocks.select.render.apply(this, arguments);\r\n\t\t\t},\r\n\t\t\trender: function (sns) {\r\n\t\t\t\treturn gantt.form_blocks.parent._display(sns, false);\r\n\t\t\t},\r\n\t\t\tset_value: function (node, value, ev, config) {\r\n\t\t\t\tvar tmpDom = document.createElement(\"div\");\r\n\t\t\t\ttmpDom.innerHTML = gantt.form_blocks.parent._display(config, ev.id);\r\n\t\t\t\tvar newOptions = tmpDom.removeChild(tmpDom.firstChild);\r\n\t\t\t\tnode.onselect = null;\r\n\t\t\t\tnode.parentNode.replaceChild(newOptions, node);\r\n\r\n\t\t\t\treturn gantt.form_blocks.select.set_value.apply(gantt, [newOptions, value, ev, config]);\r\n\t\t\t},\r\n\t\t\tget_value: function () {\r\n\t\t\t\treturn gantt.form_blocks.select.get_value.apply(gantt, arguments);\r\n\t\t\t},\r\n\t\t\tfocus: function () {\r\n\t\t\t\treturn gantt.form_blocks.select.focus.apply(gantt, arguments);\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\r\n\tgantt._is_lightbox_timepicker = function () {\r\n\t\tvar s = this._get_typed_lightbox_config();\r\n\t\tfor (var i = 0; i < s.length; i++)\r\n\t\t\tif (s[i].name == \"time\" && s[i].type == \"time\")\r\n\t\t\t\treturn true;\r\n\t\treturn false;\r\n\t};\r\n\r\n\tgantt._dhtmlx_confirm = function (message, title, callback, ok) {\r\n\t\tif (!message)\r\n\t\t\treturn callback();\r\n\t\tvar opts = {text: message};\r\n\t\tif (title)\r\n\t\t\topts.title = title;\r\n\t\tif (ok) {\r\n\t\t\topts.ok = ok;\r\n\t\t}\r\n\t\tif (callback) {\r\n\t\t\topts.callback = function (result) {\r\n\t\t\t\tif (result)\r\n\t\t\t\t\tcallback();\r\n\t\t\t};\r\n\t\t}\r\n\t\tgantt.confirm(opts);\r\n\t};\r\n\r\n\tgantt._get_typed_lightbox_config = function (type) {\r\n\t\tif (type === undefined) {\r\n\t\t\ttype = this.getLightboxType();\r\n\t\t}\r\n\r\n\t\tvar field = this._get_type_name(type);\r\n\r\n\t\tif (gantt.config.lightbox[field + \"_sections\"]) {\r\n\t\t\treturn gantt.config.lightbox[field + \"_sections\"];\r\n\t\t} else {\r\n\t\t\treturn gantt.config.lightbox.sections;\r\n\t\t}\r\n\t};\r\n\r\n\tgantt._silent_redraw_lightbox = function (type) {\r\n\t\tvar oldType = this.getLightboxType();\r\n\r\n\t\tif (this.getState().lightbox) {\r\n\t\t\tvar taskId = this.getState().lightbox;\r\n\t\t\tvar formData = this.getLightboxValues(),\r\n\t\t\t\ttask = this.copy(this.getTask(taskId));\r\n\r\n\t\t\tthis.resetLightbox();\r\n\r\n\t\t\tvar updTask = this.mixin(task, formData, true);\r\n\t\t\tvar box = this.getLightbox(type ? type : undefined);\r\n\t\t\tthis._center_lightbox(this.getLightbox());\r\n\t\t\tthis._set_lightbox_values(updTask, box);\r\n\t\t} else {\r\n\t\t\tthis.resetLightbox();\r\n\t\t\tthis.getLightbox(type ? type : undefined);\r\n\t\t}\r\n\t\tthis.callEvent(\"onLightboxChange\", [oldType, this.getLightboxType()]);\r\n\t};\r\n\r\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// c:/www-recent/gantt/sources/core/lightbox.js\n// module id = 79\n// module chunks = 0","module.exports = function(gantt) {\r\n\r\n\tgantt._extend_to_optional = function (lightbox_block) {\r\n\r\n\t\tvar duration = lightbox_block;\r\n\t\tvar optional_time = {\r\n\t\t\trender: duration.render,\r\n\t\t\tfocus: duration.focus,\r\n\t\t\tset_value: function (node, value, task, section) {\r\n\t\t\t\tvar mapping = gantt._resolve_default_mapping(section);\r\n\t\t\t\tif (!task[mapping.start_date] || (mapping.start_date == \"start_date\" && this._isAllowedUnscheduledTask(task))) {\r\n\t\t\t\t\toptional_time.disable(node, section);\r\n\t\t\t\t\tvar val = {};\r\n\r\n\t\t\t\t\tfor (var i in mapping) {\r\n\t\t\t\t\t\t//take default values from the time control from task start/end dates\r\n\t\t\t\t\t\tval[mapping[i]] = task[i];\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\treturn duration.set_value.call(gantt, node, value, val, section);//set default value\r\n\t\t\t\t} else {\r\n\t\t\t\t\toptional_time.enable(node, section);\r\n\t\t\t\t\treturn duration.set_value.call(gantt, node, value, task, section);\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tget_value: function (node, task, section) {\r\n\t\t\t\tif (section.disabled) {\r\n\t\t\t\t\treturn {start_date: null};\r\n\t\t\t\t} else {\r\n\t\t\t\t\treturn duration.get_value.call(gantt, node, task, section);\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tupdate_block: function (node, section) {\r\n\t\t\t\tgantt.callEvent(\"onSectionToggle\", [gantt._lightbox_id, section]);\r\n\t\t\t\tnode.style.display = section.disabled ? \"none\" : \"block\";\r\n\r\n\t\t\t\tif (section.button) {\r\n\t\t\t\t\tvar button = node.previousSibling.querySelector(\".gantt_custom_button_label\"),\r\n\t\t\t\t\t\tlabels = gantt.locale.labels;\r\n\r\n\t\t\t\t\tvar button_text = section.disabled ? labels[section.name + \"_enable_button\"] : labels[section.name + \"_disable_button\"];\r\n\r\n\t\t\t\t\tbutton.innerHTML = button_text;\r\n\t\t\t\t}\r\n\t\t\t\tgantt.resizeLightbox();\r\n\t\t\t},\r\n\t\t\tdisable: function (node, section) {\r\n\t\t\t\tsection.disabled = true;\r\n\t\t\t\toptional_time.update_block(node, section);\r\n\r\n\t\t\t},\r\n\t\t\tenable: function (node, section) {\r\n\t\t\t\tsection.disabled = false;\r\n\t\t\t\toptional_time.update_block(node, section);\r\n\t\t\t},\r\n\t\t\tbutton_click: function (index, el, section, container) {\r\n\t\t\t\tif (gantt.callEvent(\"onSectionButton\", [gantt._lightbox_id, section]) === false) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tvar config = gantt._get_typed_lightbox_config()[index];\r\n\t\t\t\tif (config.disabled) {\r\n\t\t\t\t\toptional_time.enable(container, config);\r\n\t\t\t\t} else {\r\n\t\t\t\t\toptional_time.disable(container, config);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t};\r\n\t\treturn optional_time;\r\n\t};\r\n\r\n\tgantt.form_blocks.duration_optional = gantt._extend_to_optional(gantt.form_blocks.duration);\r\n\tgantt.form_blocks.time_optional = gantt._extend_to_optional(gantt.form_blocks.time);\r\n\r\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// c:/www-recent/gantt/sources/core/lightbox_optional_time.js\n// module id = 80\n// module chunks = 0","module.exports = function(gantt) {\r\n\r\n\r\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// c:/www-recent/gantt/sources/core/data_task_types.gpl.js\n// module id = 81\n// module chunks = 0","/*\r\n reuse results of functions that can be recalculated during rendering\r\n greatly increases the rendering speed when critical path enabled\r\n Sample - 94_dev/critical_path.html\r\n\r\n */\r\nmodule.exports = function(gantt){\r\n\r\ngantt._cached_functions = {\r\n\tcache: {},\r\n\tmode: false,\r\n\tcritical_path_mode: false,\r\n\twrap_methods : function(methods, object){\r\n\t\tif(object._prefetch_originals){\r\n\t\t\tfor(var i in object._prefetch_originals){\r\n\t\t\t\tobject[i] = object._prefetch_originals[i];\r\n\t\t\t}\r\n\t\t}\r\n\t\tobject._prefetch_originals = {};\r\n\t\tfor(var i = 0; i < methods.length; i++)\r\n\t\t\tthis.prefetch(methods[i], object);\r\n\r\n\t},\r\n\tprefetch : function(methodname, host){\r\n\t\tvar original = host[methodname];\r\n\t\tif(original){\r\n\t\t\tvar optimizer = this;\r\n\r\n\t\t\thost._prefetch_originals[methodname] = original;\r\n\t\t\thost[methodname] = function get_prefetched_value(){\r\n\r\n\t\t\t\tvar argumentsArray = new Array(arguments.length);\r\n\t\t\t\tfor (var i = 0, l = arguments.length; i < l; i++) {\r\n\t\t\t\t\targumentsArray[i] = arguments[i];\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif(optimizer.active){\r\n\t\t\t\t\tvar args = optimizer.get_arguments_hash(Array.prototype.slice.call(argumentsArray));\r\n\t\t\t\t\tif(!optimizer.cache[methodname]){\r\n\t\t\t\t\t\toptimizer.cache[methodname] = {};\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tvar cached_values = optimizer.cache[methodname];\r\n\r\n\t\t\t\t\tif(optimizer.has_cached_value(cached_values, args)){\r\n\t\t\t\t\t\treturn optimizer.get_cached_value(cached_values, args);\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\tvar value = original.apply(this, argumentsArray);\r\n\t\t\t\t\t\toptimizer.cache_value(cached_values, args, value);\r\n\t\t\t\t\t\treturn value;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\treturn original.apply(this, argumentsArray);\r\n\t\t\t};\r\n\t\t}\r\n\t\treturn original;\r\n\t},\r\n\tcache_value: function(cache, arguments_hash, value){\r\n\t\tif(this.is_date(value))\r\n\t\t\tvalue = new Date(value);\r\n\t\tcache[arguments_hash] = value;\r\n\t},\r\n\thas_cached_value: function(cache, arguments_hash){\r\n\t\treturn cache.hasOwnProperty(arguments_hash);\r\n\t},\r\n\tget_cached_value: function(cache, arguments_hash){\r\n\t\tvar data = cache[arguments_hash];\r\n\r\n\t\t//for cached dates - return copy\r\n\t\tif(this.is_date(data)){\r\n\t\t\tdata = new Date(data);\r\n\t\t}\r\n\t\treturn data;\r\n\t},\r\n\tis_date: function(value){\r\n\t\treturn (value && value.getUTCDate);\r\n\t},\r\n\tget_arguments_hash:function(args){\r\n\t\tvar values = [];\r\n\t\tfor(var i = 0; i < args.length; i++){\r\n\t\t\tvalues.push(this.stringify_argument(args[i]));\r\n\t\t}\r\n\t\treturn \"(\" + values.join(\";\") + \")\";\r\n\t},\r\n\tstringify_argument: function(value){\r\n\t\t//expecting task or link, or any other data entries, dates and primitive values\r\n\t\tvar ret = \"\";\r\n\t\tif(value.id){\r\n\t\t\tret = value.id;\r\n\t\t}else if(this.is_date(value)){\r\n\t\t\tret = value.valueOf();\r\n\t\t}else{\r\n\t\t\tret = value;\r\n\t\t}\r\n\t\treturn ret + \"\";\r\n\t},\r\n\tactivate: function(){\r\n\t\tthis.clear();\r\n\t\tthis.active = true;\r\n\t},\r\n\tdeactivate: function(){\r\n\t\tthis.clear();\r\n\t\tthis.active = false;\r\n\t},\r\n\tclear: function(){\r\n\t\tthis.cache = {};\r\n\t},\r\n\r\n\tsetup: function(gantt){\r\n\t\tvar override_gantt = [];\r\n\r\n\t\tvar gantt_methods  = [\r\n\t\t\t'_isCriticalTask',\r\n\t\t\t'isCriticalLink',\r\n\t\t\t'_isProjectEnd',\r\n\t\t\t'_getProjectEnd',\r\n\t\t\t'_getSlack'\r\n\t\t];\r\n\r\n\r\n\r\n\t\tif(this.mode == 'auto'){\r\n\t\t\tif(gantt.config.highlight_critical_path){\r\n\t\t\t\toverride_gantt = gantt_methods;\r\n\t\t\t}\r\n\t\t}else if(this.mode === true){\r\n\t\t\toverride_gantt = gantt_methods;\r\n\t\t}\r\n\r\n\t\tthis.wrap_methods(override_gantt, gantt);\r\n\r\n\t},\r\n\tupdate_if_changed: function(gantt){\r\n\t\tvar changed = (this.critical_path_mode != gantt.config.highlight_critical_path ||\r\n\t\t\t\t\t\tthis.mode !== gantt.config.optimize_render);\r\n\t\tif(changed){\r\n\t\t\tthis.critical_path_mode = gantt.config.highlight_critical_path;\r\n\t\t\tthis.mode = gantt.config.optimize_render;\r\n\t\t\tthis.setup(gantt);\r\n\t\t}\r\n\t}\r\n};\r\n\r\nfunction activate(){\r\n\tgantt._cached_functions.update_if_changed(gantt);\r\n\tif(!gantt._cached_functions.active){\r\n\t\tgantt._cached_functions.activate();\r\n\t}\r\n\treturn true;\r\n}\r\ngantt.attachEvent(\"onBeforeGanttRender\", activate);\r\ngantt.attachEvent(\"onBeforeDataRender\", activate);\r\ngantt.attachEvent(\"onBeforeSmartRender\",  function(){\r\n\tactivate();\r\n});\r\ngantt.attachEvent(\"onBeforeParse\", activate);\r\ngantt.attachEvent(\"onDataRender\", function(){\r\n\tgantt._cached_functions.deactivate();\r\n});\r\nvar deactivTimeout = null;\r\ngantt.attachEvent(\"onSmartRender\", function(){\r\n\tif(deactivTimeout)\r\n\t\tclearTimeout(deactivTimeout);\r\n\tdeactivTimeout = setTimeout(function(){\r\n\t\tgantt._cached_functions.deactivate();\r\n\t}, 1000);\r\n});\r\n\r\ngantt.attachEvent(\"onBeforeGanttReady\", function(){\r\n\tgantt._cached_functions.update_if_changed(gantt);\r\n\treturn true;\r\n});\r\n\r\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// c:/www-recent/gantt/sources/core/cached_functions.js\n// module id = 82\n// module chunks = 0","function _configure(col, data, force) {\r\n\tfor (var key in data)\r\n\t\tif (typeof col[key] == \"undefined\" || force)\r\n\t\t\tcol[key] = data[key];\r\n}\r\n\r\nfunction _get_skin(force, gantt) {\r\n\tvar skin = gantt.skin;\r\n\tif (!skin || force) {\r\n\t\tvar links = document.getElementsByTagName(\"link\");\r\n\t\tfor (var i = 0; i < links.length; i++) {\r\n\t\t\tvar res = links[i].href.match(\"dhtmlxgantt_([a-z\\_]+).css\");\r\n\t\t\tif (res) {\r\n\t\t\t\tif (gantt.skins[res[1]] || !skin) {\r\n\t\t\t\t\tskin = res[1];\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tgantt.skin = skin || \"terrace\";\r\n\tvar skinset = gantt.skins[gantt.skin] || gantt.skins[\"terrace\"];\r\n\r\n\t//apply skin related settings\r\n\t_configure(gantt.config, skinset.config, force);\r\n\r\n\tvar config = gantt.getGridColumns();\r\n\tif (config[1] && typeof config[1].width == \"undefined\")\r\n\t\tconfig[1].width = skinset._second_column_width;\r\n\tif (config[2] && typeof config[2].width == \"undefined\")\r\n\t\tconfig[2].width = skinset._third_column_width;\r\n\r\n\tif (skinset.config.task_height)\r\n\t\tgantt.config.task_height = skinset.config.task_height || \"full\"; \r\n\r\n\tif (skinset._lightbox_template)\r\n\t\tgantt._lightbox_template = skinset._lightbox_template;\r\n\r\n\tif (skinset._redefine_lightbox_buttons) {\r\n\t\tgantt.config.buttons_right = skinset._redefine_lightbox_buttons[\"buttons_right\"];\r\n\t\tgantt.config.buttons_left = skinset._redefine_lightbox_buttons[\"buttons_left\"];\r\n\t}\r\n\r\n\r\n\tgantt.resetLightbox();\r\n}\r\n\r\nmodule.exports = function(gantt) {\r\n\tif(!gantt.resetSkin){\r\n\t\tgantt.resetSkin = function () {\r\n\t\t\tthis.skin = \"\";\r\n\t\t\t_get_skin(true, this);\r\n\t\t};\r\n\t\tgantt.skins = {};\r\n\r\n\t\tgantt.attachEvent(\"onGanttLayoutReady\", function(){\r\n\t\t\t_get_skin(false, this);\r\n\t\t});\r\n\t}\r\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// c:/www-recent/gantt/sources/core/skin.js\n// module id = 83\n// module chunks = 0","module.exports = function(gantt) {\r\ngantt.skins.skyblue = {\r\n\tconfig:{\r\n\t\tgrid_width:350,\r\n\t\trow_height: 27,\r\n\t\tscale_height: 27,\r\n\t\tlink_line_width:1,\r\n\t\tlink_arrow_size:8,\r\n\t\tlightbox_additional_height:75\r\n\t},\r\n\t_second_column_width:95,\r\n\t_third_column_width:80\r\n};\r\n\r\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// c:/www-recent/gantt/sources/css/skins/skyblue.js\n// module id = 84\n// module chunks = 0","module.exports = function(gantt) {\r\ngantt.skins.meadow = {\r\n\tconfig:{\r\n\t\tgrid_width:350,\r\n\t\trow_height: 27,\r\n\t\tscale_height: 30,\r\n\t\tlink_line_width:2,\r\n\t\tlink_arrow_size:6,\r\n\t\tlightbox_additional_height:72\r\n\t},\r\n\t_second_column_width:95,\r\n\t_third_column_width:80\r\n};\r\n\r\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// c:/www-recent/gantt/sources/css/skins/meadow.js\n// module id = 85\n// module chunks = 0","module.exports = function(gantt) {\r\ngantt.skins.terrace = {\r\n\tconfig:{\r\n\t\tgrid_width:360,\r\n\t\trow_height: 35,\r\n\t\tscale_height: 35,\r\n\t\tlink_line_width:2,\r\n\t\tlink_arrow_size:6,\r\n\t\tlightbox_additional_height:75\r\n\t},\r\n\t_second_column_width:90,\r\n\t_third_column_width:70\t\t\r\n};\r\n\r\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// c:/www-recent/gantt/sources/css/skins/terrace.js\n// module id = 86\n// module chunks = 0","\r\n\r\nmodule.exports = function(gantt) {\r\n\tgantt.skins.broadway = {\r\n\t\tconfig: {\r\n\t\t\tgrid_width: 360,\r\n\t\t\trow_height: 35,\r\n\t\t\tscale_height: 35,\r\n\t\t\tlink_line_width: 1,\r\n\t\t\tlink_arrow_size: 7,\r\n\t\t\tlightbox_additional_height: 86\r\n\t\t},\r\n\t\t_second_column_width: 90,\r\n\t\t_third_column_width: 80,\r\n\r\n\t\t_lightbox_template: \"<div class='gantt_cal_ltitle'><span class='gantt_mark'>&nbsp;</span><span class='gantt_time'></span><span class='gantt_title'></span><div class='gantt_cancel_btn'></div></div><div class='gantt_cal_larea'></div>\",\r\n\t\t_config_buttons_left: {},\r\n\t\t_config_buttons_right: {\r\n\t\t\t\"gantt_delete_btn\": \"icon_delete\",\r\n\t\t\t\"gantt_save_btn\": \"icon_save\"\r\n\t\t}\r\n\t};\r\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// c:/www-recent/gantt/sources/css/skins/broadway.js\n// module id = 87\n// module chunks = 0","module.exports = function(gantt) {\r\n\tgantt.skins.material = {\r\n\t\tconfig: {\r\n\t\t\tgrid_width: 411,\r\n\t\t\trow_height: 34,\r\n\t\t\ttask_height_offset: 6,\r\n\t\t\tscale_height: 36,\r\n\t\t\tlink_line_width: 2,\r\n\t\t\tlink_arrow_size: 6,\r\n\t\t\tlightbox_additional_height: 80\r\n\t\t},\r\n\t\t_second_column_width: 110,\r\n\t\t_third_column_width: 75,\r\n\t\t_redefine_lightbox_buttons: {\r\n\t\t\t\"buttons_left\": [\"dhx_delete_btn\"],\r\n\t\t\t\"buttons_right\": [\"dhx_save_btn\", \"dhx_cancel_btn\"]\r\n\t\t}\r\n\t};\r\n\r\n\tgantt.attachEvent(\"onAfterTaskDrag\", function (id) {\r\n\t\tvar t = gantt.getTaskNode(id);\r\n\t\tif (t) {\r\n\t\t\tt.className += \" gantt_drag_animation\";\r\n\t\t\tsetTimeout(function () {\r\n\t\t\t\tvar indx = t.className.indexOf(\" gantt_drag_animation\");\r\n\t\t\t\tif (indx > -1) {\r\n\t\t\t\t\tt.className = t.className.slice(0, indx);\r\n\t\t\t\t}\r\n\t\t\t}, 200);\r\n\t\t}\r\n\t});\r\n\r\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// c:/www-recent/gantt/sources/css/skins/material.js\n// module id = 88\n// module chunks = 0","module.exports = function(gantt) {\r\ngantt.skins[\"contrast_black\"] = {\r\n\tconfig:{\r\n\t\tgrid_width:360,\r\n\t\trow_height: 35,\r\n\t\tscale_height: 35,\r\n\t\tlink_line_width:2,\r\n\t\tlink_arrow_size:6,\r\n\t\tlightbox_additional_height:75\r\n\t},\r\n\t_second_column_width:100,\r\n\t_third_column_width:80\r\n};\r\n\r\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// c:/www-recent/gantt/sources/css/skins/contrast_black.js\n// module id = 89\n// module chunks = 0","module.exports = function(gantt) {\r\ngantt.skins[\"contrast_white\"] = {\r\n\tconfig:{\r\n\t\tgrid_width:360,\r\n\t\trow_height: 35,\r\n\t\tscale_height: 35,\r\n\t\tlink_line_width:2,\r\n\t\tlink_arrow_size:6,\r\n\t\tlightbox_additional_height:75\r\n\t},\r\n\t_second_column_width:100,\r\n\t_third_column_width:80\r\n};\r\n\r\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// c:/www-recent/gantt/sources/css/skins/contrast_white.js\n// module id = 90\n// module chunks = 0","/*\r\nTODO: bug, touch event dissapears after gantt.init is called second time\r\n\r\n */\r\n\r\nmodule.exports = function(gantt) {\r\n\r\n\tgantt.config.touch_drag = 500; //nearly immediate dnd\r\n\tgantt.config.touch = true;\r\n\tgantt.config.touch_feedback = true;\r\n\tgantt.config.touch_feedback_duration = 1;\r\n\tgantt._prevent_touch_scroll = false;\r\n\r\n\r\n\tgantt._touch_feedback = function () {\r\n\t\tif (gantt.config.touch_feedback) {\r\n\t\t\tif (navigator.vibrate)\r\n\t\t\t\tnavigator.vibrate(gantt.config.touch_feedback_duration);\r\n\t\t}\r\n\t};\r\n\r\n\tgantt.attachEvent(\"onGanttReady\", gantt.bind(function(){\r\n\t\tif (this.config.touch != \"force\")\r\n\t\t\tthis.config.touch = this.config.touch &&\r\n\t\t\t\t((navigator.userAgent.indexOf(\"Mobile\") != -1) ||\r\n\t\t\t\t\t(navigator.userAgent.indexOf(\"iPad\") != -1) ||\r\n\t\t\t\t\t(navigator.userAgent.indexOf(\"Android\") != -1) ||\r\n\t\t\t\t\t(navigator.userAgent.indexOf(\"Touch\") != -1));\r\n\r\n\t\tif (this.config.touch) {\r\n\r\n\t\t\tvar touchEventsSupported = true;\r\n\t\t\ttry {\r\n\t\t\t\tdocument.createEvent(\"TouchEvent\");\r\n\t\t\t} catch (e) {\r\n\t\t\t\ttouchEventsSupported = false;\r\n\t\t\t}\r\n\r\n\t\t\tif (touchEventsSupported) {\r\n\t\t\t\tthis._touch_events([\"touchmove\", \"touchstart\", \"touchend\"], function (ev) {\r\n\t\t\t\t\tif (ev.touches && ev.touches.length > 1) return null;\r\n\t\t\t\t\tif (ev.touches[0])\r\n\t\t\t\t\t\treturn {\r\n\t\t\t\t\t\t\ttarget: ev.target,\r\n\t\t\t\t\t\t\tpageX: ev.touches[0].pageX,\r\n\t\t\t\t\t\t\tpageY: ev.touches[0].pageY,\r\n\t\t\t\t\t\t\tclientX: ev.touches[0].clientX,\r\n\t\t\t\t\t\t\tclientY: ev.touches[0].clientY\r\n\t\t\t\t\t\t};\r\n\t\t\t\t\telse\r\n\t\t\t\t\t\treturn ev;\r\n\t\t\t\t}, function () {\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t});\r\n\t\t\t} else if (window.navigator.pointerEnabled) {\r\n\t\t\t\tthis._touch_events([\"pointermove\", \"pointerdown\", \"pointerup\"], function (ev) {\r\n\t\t\t\t\tif (ev.pointerType == \"mouse\") return null;\r\n\t\t\t\t\treturn ev;\r\n\t\t\t\t}, function (ev) {\r\n\t\t\t\t\treturn (!ev || (ev.pointerType == \"mouse\" ));\r\n\t\t\t\t});\r\n\t\t\t} else if (window.navigator.msPointerEnabled) {\r\n\t\t\t\tthis._touch_events([\"MSPointerMove\", \"MSPointerDown\", \"MSPointerUp\"], function (ev) {\r\n\t\t\t\t\tif (ev.pointerType == ev.MSPOINTER_TYPE_MOUSE) return null;\r\n\t\t\t\t\treturn ev;\r\n\t\t\t\t}, function (ev) {\r\n\t\t\t\t\treturn (!ev || ev.pointerType == ev.MSPOINTER_TYPE_MOUSE);\r\n\t\t\t\t});\r\n\t\t\t}\r\n\r\n\t\t}\r\n\t}, gantt));\r\n\r\n\r\n\tfunction getTaskDND(){\r\n\t\tvar _tasks_dnd;\r\n\t\tif(gantt.$ui.getView(\"timeline\")){\r\n\t\t\t_tasks_dnd = gantt.$ui.getView(\"timeline\")._tasks_dnd;\r\n\t\t}\r\n\t\treturn _tasks_dnd;\r\n\t}\r\n\r\n\tvar touchHandlers = [];\r\n\r\n//we can't use native scrolling, as we need to sync momentum between different parts\r\n//so we will block native scroll and use the custom one\r\n//in future we can add custom momentum\r\n\tgantt._touch_events = function (names, accessor, ignore) {\r\n\t\t//webkit on android need to be handled separately\r\n\t\tvar dblclicktime = 0;\r\n\t\tvar action_mode = false;\r\n\t\tvar scroll_mode = false;\r\n\t\tvar dblclick_timer = 0;\r\n\t\tvar action_start = null;\r\n\t\tvar scroll_state;\r\n\t\tvar long_tap_timer = null;\r\n\t\tvar current_target = null;\r\n\r\n\r\n\r\n\t\tfor(var i = 0; i < touchHandlers.length; i++){\r\n\t\t\tgantt.eventRemove(touchHandlers[i][0], touchHandlers[i][1], touchHandlers[i][2]);\r\n\t\t}\r\n\t\ttouchHandlers = [];\r\n\r\n\t\t//touch move\r\n\t\ttouchHandlers.push([gantt.$container, names[0], function (e) {\r\n\t\t\tvar _tasks_dnd = getTaskDND();\r\n\r\n\t\t\t\tif (ignore(e)) return;\r\n\r\n\t\t\t\t//ignore common and scrolling moves\r\n\t\t\t\tif (!action_mode) return;\r\n\r\n\t\t\t\tif (long_tap_timer) clearTimeout(long_tap_timer);\r\n\r\n\t\t\t\tvar source = accessor(e);\r\n\t\t\t\tif (_tasks_dnd && (_tasks_dnd.drag.id || _tasks_dnd.drag.start_drag)) {\r\n\t\t\t\t\t_tasks_dnd.on_mouse_move(source);\r\n\t\t\t\t\tif (e.preventDefault)\r\n\t\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\te.cancelBubble = true;\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\t\t\t\tif (!gantt._prevent_touch_scroll) {\r\n\t\t\t\t\tif (source && action_start) {\r\n\t\t\t\t\t\tvar dx = action_start.pageX - source.pageX;\r\n\t\t\t\t\t\tvar dy = action_start.pageY - source.pageY;\r\n\t\t\t\t\t\tif (!scroll_mode && (Math.abs(dx) > 5 || Math.abs(dy) > 5)) {\r\n\t\t\t\t\t\t\tgantt._touch_scroll_active = scroll_mode = true;\r\n\t\t\t\t\t\t\tdblclicktime = 0;\r\n\t\t\t\t\t\t\tscroll_state = gantt.getScrollState();\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tif (scroll_mode) {\r\n\t\t\t\t\t\t\tgantt.scrollTo(scroll_state.x + dx, scroll_state.y + dy);\r\n\t\t\t\t\t\t\tvar new_scroll_state = gantt.getScrollState();\r\n\r\n\t\t\t\t\t\t\tif ((scroll_state.x != new_scroll_state.x && dy > 2 * dx) ||\r\n\t\t\t\t\t\t\t\t(scroll_state.y != new_scroll_state.y && dx > 2 * dy )) {\r\n\t\t\t\t\t\t\t\treturn block_action(e);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn block_action(e);\r\n\t\t\t\t}\r\n\t\t\t\treturn true;\r\n\t\t\t}]);\r\n\r\n\r\n\t\t//block touch context menu in IE10\r\n\t\ttouchHandlers.push([this.$container, \"contextmenu\", function (e) {\r\n\t\t\tif (action_mode)\r\n\t\t\t\treturn block_action(e);\r\n\t\t}]);\r\n\r\n\t\t//touch start\r\n\t\ttouchHandlers.push([this.$container, names[1], function (e) {\r\n\t\t\tif (ignore(e)) return;\r\n\t\t\tif (e.touches && e.touches.length > 1) {\r\n\t\t\t\taction_mode = false;\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\taction_start = accessor(e);\r\n\t\t\tif (!gantt._locate_css(action_start, \"gantt_hor_scroll\") && !gantt._locate_css(action_start, \"gantt_ver_scroll\")) {\r\n\t\t\t\taction_mode = true;\r\n\t\t\t}\r\n\t\t\tvar _tasks_dnd = getTaskDND();\r\n\r\n\t\t\t//long tap\r\n\t\t\tlong_tap_timer = setTimeout(function () {\r\n\t\t\t\tvar taskId = gantt.locate(action_start);\r\n\t\t\t\tif (_tasks_dnd && (taskId && !gantt._locate_css(action_start, \"gantt_link_control\") && !gantt._locate_css(action_start, \"gantt_grid_data\"))) {\r\n\t\t\t\t\t_tasks_dnd.on_mouse_down(action_start);\r\n\r\n\t\t\t\t\tif (_tasks_dnd.drag && _tasks_dnd.drag.start_drag) {\r\n\t\t\t\t\t\tcloneTaskRendered(taskId);\r\n\t\t\t\t\t\t_tasks_dnd._start_dnd(action_start);\r\n\t\t\t\t\t\tgantt._touch_drag = true;\r\n\r\n\t\t\t\t\t\tgantt.refreshTask(taskId);\r\n\r\n\t\t\t\t\t\tgantt._touch_feedback();\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tlong_tap_timer = null;\r\n\t\t\t}, gantt.config.touch_drag);\r\n\t\t}]);\r\n\r\n\t\t//touch end\r\n\t\ttouchHandlers.push([this.$container, names[2], function (e) {\r\n\t\t\tif (ignore(e)) return;\r\n\t\t\tif (long_tap_timer) clearTimeout(long_tap_timer);\r\n\t\t\tgantt._touch_drag = false;\r\n\t\t\taction_mode = false;\r\n\t\t\tvar source = accessor(e);\r\n\r\n\t\t\tvar _tasks_dnd = getTaskDND();\r\n\r\n\t\t\tif(_tasks_dnd)\r\n\t\t\t\t_tasks_dnd.on_mouse_up(source);\r\n\r\n\t\t\tif (current_target) {\r\n\t\t\t\tgantt.refreshTask(gantt.locate(current_target));\r\n\t\t\t\tif (current_target.parentNode) {\r\n\t\t\t\t\tcurrent_target.parentNode.removeChild(current_target);\r\n\t\t\t\t\tgantt._touch_feedback();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tgantt._touch_scroll_active = action_mode = scroll_mode = false;\r\n\t\t\tcurrent_target = null;\r\n\r\n\t\t\t//dbl-tap handling\r\n\t\t\tif (action_start && dblclicktime) {\r\n\t\t\t\tvar now = new Date();\r\n\t\t\t\tif ((now - dblclicktime) < 500) {\r\n\t\t\t\t\tgantt._on_dblclick(action_start);\r\n\t\t\t\t\tblock_action(e);\r\n\t\t\t\t} else\r\n\t\t\t\t\tdblclicktime = now;\r\n\t\t\t} else {\r\n\t\t\t\tdblclicktime = new Date();\r\n\t\t\t}\r\n\t\t}]);\r\n\r\n\t\tfor(var i = 0; i < touchHandlers.length; i++){\r\n\t\t\tgantt.event(touchHandlers[i][0], touchHandlers[i][1], touchHandlers[i][2]);\r\n\t\t}\r\n\r\n\t\t//common helper, prevents event\r\n\t\tfunction block_action(e) {\r\n\t\t\tif (e && e.preventDefault)\r\n\t\t\t\te.preventDefault();\r\n\t\t\t(e || event).cancelBubble = true;\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t\tfunction cloneTaskRendered(taskId) {\r\n\t\t\tvar renders = gantt._getTaskLayers();\r\n\t\t\tvar task = gantt.getTask(taskId);\r\n\t\t\tif (task && gantt.isTaskVisible(taskId)) {\r\n\t\t\t\tfor (var i = 0; i < renders.length; i++) {\r\n\t\t\t\t\ttask = renders[i].rendered[taskId];\r\n\t\t\t\t\tif (task && task.getAttribute(\"task_id\") && task.getAttribute(\"task_id\") == taskId) {\r\n\t\t\t\t\t\tvar copy = task.cloneNode(true);\r\n\t\t\t\t\t\tcurrent_target = task;\r\n\t\t\t\t\t\trenders[i].rendered[taskId] = copy;\r\n\t\t\t\t\t\ttask.style.display = \"none\";\r\n\t\t\t\t\t\tcopy.className += \" gantt_drag_move \";\r\n\t\t\t\t\t\ttask.parentNode.appendChild(copy);\r\n\t\t\t\t\t\t//return copy;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\r\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// c:/www-recent/gantt/sources/core/touch.js\n// module id = 91\n// module chunks = 0","module.exports = function(gantt) {\r\n\tgantt.locale = {\r\n\t\tdate: {\r\n\t\t\tmonth_full: [\"January\", \"February\", \"March\", \"April\", \"May\", \"June\", \"July\", \"August\", \"September\", \"October\", \"November\", \"December\"],\r\n\t\t\tmonth_short: [\"Jan\", \"Feb\", \"Mar\", \"Apr\", \"May\", \"Jun\", \"Jul\", \"Aug\", \"Sep\", \"Oct\", \"Nov\", \"Dec\"],\r\n\t\t\tday_full: [\"Sunday\", \"Monday\", \"Tuesday\", \"Wednesday\", \"Thursday\", \"Friday\", \"Saturday\"],\r\n\t\t\tday_short: [\"Sun\", \"Mon\", \"Tue\", \"Wed\", \"Thu\", \"Fri\", \"Sat\"]\r\n\t\t},\r\n\t\tlabels: {\r\n\t\t\tnew_task: \"New task\",\r\n\t\t\ticon_save: \"Save\",\r\n\t\t\ticon_cancel: \"Cancel\",\r\n\t\t\ticon_details: \"Details\",\r\n\t\t\ticon_edit: \"Edit\",\r\n\t\t\ticon_delete: \"Delete\",\r\n\t\t\tconfirm_closing: \"\",//Your changes will be lost, are you sure?\r\n\t\t\tconfirm_deleting: \"Task will be deleted permanently, are you sure?\",\r\n\t\t\tsection_description: \"Description\",\r\n\t\t\tsection_time: \"Time period\",\r\n\t\t\tsection_type: \"Type\",\r\n\r\n\t\t\t/* grid columns */\r\n\t\t\tcolumn_wbs: \"WBS\",\r\n\t\t\tcolumn_text: \"Task name\",\r\n\t\t\tcolumn_start_date: \"Start time\",\r\n\t\t\tcolumn_duration: \"Duration\",\r\n\t\t\tcolumn_add: \"\",\r\n\r\n\t\t\t/* link confirmation */\r\n\t\t\tlink: \"Link\",\r\n\t\t\tconfirm_link_deleting: \"will be deleted\",\r\n\t\t\tlink_start: \" (start)\",\r\n\t\t\tlink_end: \" (end)\",\r\n\r\n\t\t\tminutes: \"Minutes\",\r\n\t\t\thours: \"Hours\",\r\n\t\t\tdays: \"Days\",\r\n\t\t\tweeks: \"Week\",\r\n\t\t\tmonths: \"Months\",\r\n\t\t\tyears: \"Years\",\r\n\r\n\t\t\t/* message popup */\r\n\t\t\tmessage_ok: \"OK\",\r\n\t\t\tmessage_cancel: \"Cancel\"\r\n\r\n\t\t}\r\n\t};\r\n};\r\n\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// c:/www-recent/gantt/sources/locale/locale.js\n// module id = 92\n// module chunks = 0","var domHelpers = require(\"../utils/dom_helpers\");\r\n\r\nmodule.exports = function(gantt){\r\n\tvar calculateScaleRange = require(\"./gantt_data_range\");\r\n\r\n\tgantt.assert = require(\"./common/assert\")(gantt);\r\n\r\n//initial initialization\r\n\tgantt.init = function(node, from, to){\r\n\t\tif(from && to){\r\n\t\t\tthis.config.start_date = this._min_date = new Date(from);\r\n\t\t\tthis.config.end_date = this._max_date = new Date(to);\r\n\t\t}\r\n\t\tthis.date.init();\r\n\r\n\t\tif (!this.config.scroll_size)\r\n\t\t\tthis.config.scroll_size = domHelpers.getScrollSize() || 1;\r\n\r\n\t\tvar resizeDelay;\r\n\t\tgantt.event(window, \"resize\", function(){\r\n\t\t\tclearTimeout(resizeDelay);\r\n\t\t\tresizeDelay = setTimeout(function(){\r\n\t\t\t\tgantt.render();\r\n\t\t\t}, 300);\r\n\t\t});\r\n\r\n\t\t//can be called only once\r\n\t\tthis.init = function(node){\r\n\t\t\tif (this.$container && this.$container.parentNode){\r\n\t\t\t\tthis.$container.parentNode.removeChild(this.$container);\r\n\t\t\t\tthis.$container = null;\r\n\t\t\t}\r\n\r\n\t\t\tif(this.$layout){\r\n\t\t\t\tthis.$layout.clear();\r\n\t\t\t}\r\n\t\t\tthis._reinit(node);\r\n\t\t};\r\n\r\n\t\tthis._reinit(node);\r\n\t};\r\n\r\n\tgantt._reinit = function(node){\r\n\t\tthis.callEvent(\"onBeforeGanttReady\", []);\r\n\t\t//this._init_tasks_range();\r\n\t\tthis.resetLightbox();\r\n\t\tthis._update_flags();\r\n\r\n\r\n\t\tvar config = this.$services.getService(\"templateLoader\");\r\n\t\tconfig.initTemplates(this);\r\n\r\n\t\tthis._clearTaskLayers();\r\n\t\tthis._clearLinkLayers();\r\n\r\n\t\t//this.clear\r\n\t\tif(this.$layout){\r\n\t\t\tthis.$layout.destructor();\r\n\t\t\tthis.$ui.reset();\r\n\t\t}\r\n\r\n\t\tthis.$root = domHelpers.toNode(node);\r\n\t\tnode.gantt = this;\r\n\t\tcalculateScaleRange(this);\r\n\t\tthis.config.layout.id = \"main\";\r\n\t\tthis.$layout = this.$ui.createView(\"layout\", node, this.config.layout);\r\n\r\n\t\tthis.$layout.attachEvent(\"onResize\", function(){\r\n\t\t\tgantt.refreshData();\r\n\t\t});\r\n\r\n\t\tthis.callEvent(\"onGanttLayoutReady\", []);\r\n\t\tthis.$layout.render();\r\n\r\n\t\tgantt.$container = this.$layout.$container.firstChild;\r\n\t\tthis.callEvent(\"onTemplatesReady\",[]);\r\n\t\tthis.$mouseEvents.reset(this.$root);\r\n\t\tthis.callEvent(\"onGanttReady\", []);\r\n\r\n\t\tthis.render();\r\n\t};\r\n\r\n\tgantt.$click={\r\n\t\tbuttons:{\r\n\t\t\t\"edit\":function(id){\r\n\t\t\t\tgantt.showLightbox(id);\r\n\t\t\t},\r\n\t\t\t\"delete\":function(id){\r\n\t\t\t\tvar question = gantt.locale.labels.confirm_deleting;\r\n\t\t\t\tvar title = gantt.locale.labels.confirm_deleting_title;\r\n\r\n\t\t\t\tgantt._dhtmlx_confirm(question, title, function(){\r\n\t\t\t\t\tif(!gantt.isTaskExists(id)){\r\n\t\t\t\t\t\tgantt.hideLightbox();\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tvar task = gantt.getTask(id);\r\n\t\t\t\t\tif(task.$new){\r\n\t\t\t\t\t\tgantt.silent(function(){\r\n\t\t\t\t\t\t\tgantt.deleteTask(id, true);\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\tgantt.refreshData();\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\tgantt.deleteTask(id);\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tgantt.hideLightbox();\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\r\n\tgantt.getScrollState = function(){\r\n\t\tvar state = this._scroll_state();\r\n\t\treturn { x:state.x_pos, y:state.y_pos, inner_width:state.x, inner_height:state.y, width: state.x_inner, height: state.y_inner };\r\n\t};\r\n\r\n\tgantt.scrollTo = function(left, top){\r\n\t\tvar vertical = this._getVerticalScrollbar();\r\n\t\tvar horizontal = this._getHorizontalScrollbar();\r\n\r\n\t\tvar oldV = vertical.getScrollState(),\r\n\t\t\toldH = horizontal.getScrollState();\r\n\r\n\t\tif (left*1 == left){\r\n\t\t\thorizontal.scroll(left);\r\n\t\t}\r\n\t\tif(top*1 == top){\r\n\t\t\tvertical.scroll(top);\r\n\t\t}\r\n\r\n\t\tvar newV = vertical.getScrollState(),\r\n\t\t\tnewH = horizontal.getScrollState();\r\n\r\n\t\tthis.callEvent(\"onGanttScroll\", [oldH.position, oldV.position, newH.position, newV.position]);\r\n\t};\r\n\r\n\tgantt.showDate = function(date){\r\n\t\tvar date_x = this.posFromDate(date);\r\n\t\tvar scroll_to = Math.max(date_x - this.config.task_scroll_offset, 0);\r\n\t\tthis.scrollTo(scroll_to);\r\n\t};\r\n\tgantt.showTask = function(id) {\r\n\t\tvar pos = this.getTaskPosition(this.getTask(id));\r\n\r\n\t\tvar left = Math.max(pos.left - this.config.task_scroll_offset, 0);\r\n\r\n\t\tvar dataHeight = this._scroll_state().y;\r\n\t\tvar top;\r\n\t\tif(!dataHeight){\r\n\t\t\ttop = pos.top;\r\n\t\t}else{\r\n\t\t\ttop = pos.top - (dataHeight - this.config.row_height)/2;\r\n\t\t}\r\n\r\n\t\tthis.scrollTo(left, top);\r\n\t};\r\n\r\n//renders self\r\n\tgantt.render = function(){\r\n\t\tthis.callEvent(\"onBeforeGanttRender\", []);\r\n\r\n\t\tvar pos = this.getScrollState();\r\n\r\n\t\tvar visible_date = null;\r\n\t\tif(pos && pos.x){\r\n\t\t\tvisible_date = gantt.dateFromPos(pos.x + this.config.task_scroll_offset);\r\n\t\t}\r\n\t\tcalculateScaleRange(this);\r\n\r\n\t\tthis.$layout.$config.autosize = this.config.autosize;\r\n\t\tthis.$layout.resize();\r\n\r\n\t\tif(this.config.preserve_scroll && pos){\r\n\r\n\t\t\tif(pos.x){\r\n\t\t\t\tvar new_pos = gantt.getScrollState();\r\n\t\t\t\tvar new_date = gantt.dateFromPos(new_pos.x);\r\n\t\t\t\tif(!(+visible_date == +new_date && new_pos.y == pos.y)){\r\n\t\t\t\t\tif(visible_date){\r\n\t\t\t\t\t\tthis.showDate(visible_date);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif(pos.y)\r\n\t\t\t\t\t\tgantt.scrollTo(undefined, pos.y);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tthis.callEvent(\"onGanttRender\", []);\r\n\t};\r\n\r\n\tgantt._scroll_state = function(){\r\n\t\tvar result = {\r\n\t\t\tx: false,\r\n\t\t\ty: false,\r\n\t\t\tx_pos: 0,\r\n\t\t\ty_pos: 0,\r\n\t\t\tscroll_size: this.config.scroll_size + 1,//1px for inner content\r\n\t\t\tx_inner: 0,\r\n\t\t\ty_inner: 0\r\n\t\t};\r\n\r\n\t\tvar scrollVer = gantt._getVerticalScrollbar(),\r\n\t\t\tscrollHor = gantt._getHorizontalScrollbar();\r\n\t\tif(scrollHor){\r\n\t\t\tvar horState = scrollHor.getScrollState();\r\n\t\t\tif(horState.visible){\r\n\t\t\t\tresult.x = horState.size;\r\n\t\t\t\tresult.x_inner = horState.scrollSize;\r\n\t\t\t}\r\n\t\t\tresult.x_pos = horState.position || 0;\r\n\t\t}\r\n\r\n\t\tif(scrollVer){\r\n\t\t\tvar verState = scrollVer.getScrollState();\r\n\t\t\tif(verState.visible){\r\n\t\t\t\tresult.y = verState.size;\r\n\r\n\t\t\t\tresult.y_inner = verState.scrollSize;\r\n\t\t\t}\r\n\t\t\tresult.y_pos = verState.position || 0;\r\n\t\t}\r\n\r\n\t\treturn result;\r\n\t};\r\n\r\n\tgantt.locate = function(e) {\r\n\t\tvar trg = domHelpers.getTargetNode(e);\r\n\r\n\t\t//ignore empty cells\r\n\t\tvar className = domHelpers.getClassName(trg);\r\n\t\tif ((className || \"\").indexOf(\"gantt_task_cell\") >= 0) return null;\r\n\r\n\t\tvar targetAttribute = arguments[1] || this.config.task_attribute;\r\n\r\n\t\tvar node = domHelpers.locateAttribute(trg, targetAttribute);\r\n\t\tif(node){\r\n\t\t\treturn node.getAttribute(targetAttribute);\r\n\t\t}else{\r\n\t\t\treturn null;\r\n\t\t}\r\n\t};\r\n\r\n\tgantt._locate_css = function(e, classname, strict){\r\n\t\treturn domHelpers.locateClassName(e, classname, strict);\r\n\t};\r\n\r\n\tgantt._locateHTML = function(e, attribute) {\r\n\t\treturn domHelpers.locateAttribute(e, attribute || this.config.task_attribute);\r\n\t};\r\n\r\n\tgantt.getTaskRowNode = function(id) {\r\n\t\tvar els = this.$grid_data.childNodes;\r\n\t\tvar attribute = this.config.task_attribute;\r\n\t\tfor (var i = 0; i < els.length; i++) {\r\n\t\t\tif (els[i].getAttribute) {\r\n\t\t\t\tvar value = els[i].getAttribute(attribute);\r\n\t\t\t\tif (value == id) return els[i];\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn null;\r\n\t};\r\n\r\n\tgantt.selectTask = function(id){\r\n\t\tif(!this.config.select_task)\r\n\t\t\treturn false;\r\n\t\tif (id){\r\n\r\n\t\t\tif(this._selected_task == id)\r\n\t\t\t\treturn this._selected_task;\r\n\r\n\t\t\tif(!this.callEvent(\"onBeforeTaskSelected\", [id])){\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\r\n\t\t\tthis.unselectTask();\r\n\t\t\tthis._selected_task = id;\r\n\r\n\t\t\tthis.refreshTask(id);\r\n\t\t\tthis.callEvent(\"onTaskSelected\", [id]);\r\n\t\t}\r\n\t\treturn this._selected_task;\r\n\t};\r\n\tgantt.unselectTask = function(id){\r\n\t\tvar id = id || this._selected_task;\r\n\t\tif(!id)\r\n\t\t\treturn;\r\n\t\tthis._selected_task = null;\r\n\t\tthis.refreshTask(id);\r\n\t\tthis.callEvent(\"onTaskUnselected\", [id]);\r\n\t};\r\n\tgantt.getSelectedId = function() {\r\n\t\treturn this.defined(this._selected_task) ? this._selected_task : null;\r\n\t};\r\n\r\n\tgantt.changeLightboxType = function(type){\r\n\t\tif(this.getLightboxType() == type)\r\n\t\t\treturn true;\r\n\t\tgantt._silent_redraw_lightbox(type);\r\n\t};\r\n\r\n\r\n\tgantt._get_link_type = function (from_start, to_start) {\r\n\t\tvar type = null;\r\n\t\tif (from_start && to_start) {\r\n\t\t\ttype = gantt.config.links.start_to_start;\r\n\t\t} else if (!from_start && to_start) {\r\n\t\t\ttype = gantt.config.links.finish_to_start;\r\n\t\t} else if (!from_start && !to_start) {\r\n\t\t\ttype = gantt.config.links.finish_to_finish;\r\n\t\t} else if (from_start && !to_start) {\r\n\t\t\ttype = gantt.config.links.start_to_finish;\r\n\t\t}\r\n\t\treturn type;\r\n\t};\r\n\r\n\tgantt.isLinkAllowed = function (from, to, from_start, to_start) {\r\n\t\tvar link = null;\r\n\t\tif (typeof(from) == \"object\") {\r\n\t\t\tlink = from;\r\n\t\t} else {\r\n\t\t\tlink = {source: from, target: to, type: this._get_link_type(from_start, to_start)};\r\n\t\t}\r\n\r\n\t\tif (!link) return false;\r\n\t\tif (!(link.source && link.target && link.type)) return false;\r\n\t\tif (link.source == link.target) return false;\r\n\r\n\t\tvar res = true;\r\n\t\t//any custom rules\r\n\t\tif (this.checkEvent(\"onLinkValidation\"))\r\n\t\t\tres = this.callEvent(\"onLinkValidation\", [link]);\r\n\r\n\t\treturn res;\r\n\t};\r\n\r\n\r\n\tgantt._correct_dst_change = function(date, prevOffset, step, unit){\r\n\t\tvar time_unit = gantt._get_line(unit) * step;\r\n\t\tif(time_unit > 60*60 && time_unit < 60*60*24){\r\n\t\t\t//correct dst change only if current unit is more than one hour and less than day (days have own checking), e.g. 12h\r\n\t\t\tvar offsetChanged = date.getTimezoneOffset() - prevOffset;\r\n\t\t\tif(offsetChanged){\r\n\t\t\t\tdate = gantt.date.add(date, offsetChanged, \"minute\");\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn date;\r\n\t};\r\n\r\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// c:/www-recent/gantt/sources/core/gantt_core.js\n// module id = 93\n// module chunks = 0","/*\r\n \tasserts will be removed in final code, so you can place them anythere\r\n\twithout caring about performance impacts\r\n*/\r\n\r\nmodule.exports = function(gantt){\r\n\treturn function assert(check, message){\r\n\t\t//jshint -W087\r\n\t\tif (!check){\r\n\t\t\tif(gantt.config.show_errors && gantt.callEvent(\"onError\",[message]) !== false) {\r\n\t\t\t\tgantt.message({type: \"error\", text: message, expire: -1});\r\n\t\t\t\tdebugger;\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// c:/www-recent/gantt/sources/core/common/assert.js\n// module id = 94\n// module chunks = 0","module.exports = function(gantt){\r\n\r\n\tfunction deprecated(badCode, goodCode) {\r\n\r\n\t\tvar formatting = gantt.env.isIE ? \"\" : \"%c\";\r\n\r\n\r\n\t\tvar message = [\r\n\t\t\tformatting, \"\\\"\", badCode, \"\\\"\",  formatting,\r\n\t\t\t\" has been deprecated in dhtmlxGantt v4.0 and will stop working in v5.0. Use \",\r\n\t\t\tformatting, \"\\\"\", goodCode, \"\\\"\",  formatting,\r\n\t\t\t\" instead. \\nSee more details at http://docs.dhtmlx.com/gantt/migrating.html \"\r\n\t\t].join(\"\");\r\n\r\n\t\tvar log = window.console.warn || window.console.log;\r\n\r\n\t\tvar args = [message];\r\n\t\tif(!gantt.env.isIE){\r\n\t\t\targs = args.concat([\"font-weight:bold\", \"font-weight:normal\", \"font-weight:bold\", \"font-weight:normal\"]);\r\n\t\t}\r\n\r\n\t\tlog.apply(window.console, args);\r\n\t}\r\n\r\n\tfunction wrapDeprecated(method) {\r\n\t\treturn function () {\r\n\t\t\tdeprecated(\"dhtmlx.\" + method, \"gantt.\" + method);\r\n\t\t\treturn gantt[method].apply(gantt, arguments);\r\n\t\t};\r\n\t}\r\n\r\n\t/* dhtmlx */\r\n\r\n\r\n\tif (!window.dhtmlx)\r\n\t\twindow.dhtmlx = {};\r\n\r\n\tvar dhtmlxMethods = [\r\n\t\t\"message\",\r\n\t\t\"alert\",\r\n\t\t\"confirm\",\r\n\t\t\"modalbox\",\r\n\t\t\"uid\",\r\n\t\t\"copy\",\r\n\t\t\"mixin\",\r\n\t\t\"defined\",\r\n\t\t\"bind\",\r\n\t\t\"assert\"\r\n\t];\r\n\r\n\tfor(var i = 0; i < dhtmlxMethods.length; i++){\r\n\t\t// wrap dhtmlx methods with 'deprecated' warnings\r\n\t\t// do not wrap if methods are defined by dhtmlxSuite\r\n\t\tif(!window.dhtmlx[dhtmlxMethods[i]]){\r\n\t\t\tdhtmlx[dhtmlxMethods[i]] = wrapDeprecated(dhtmlxMethods[i]);\r\n\t\t}\r\n\t}\r\n\t/* global functions */\r\n\r\n\r\n\tif (!window.dataProcessor) {\r\n\t\twindow.dataProcessor = function (url) {\r\n\t\t\tdeprecated(\"new dataProcessor(url)\", \"new gantt.dataProcessor(url)\");\r\n\t\t\treturn new gantt.dataProcessor(url);\r\n\t\t};\r\n\t}\r\n\r\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// c:/www-recent/gantt/sources/core/deprecated_warnings.js\n// module id = 95\n// module chunks = 0"],"sourceRoot":""}